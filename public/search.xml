<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Dart åŸºç¡€å…¥é—¨]]></title>
    <url>%2FDart%20%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%2F</url>
    <content type="text"><![CDATA[å¼•è¨€ç»ˆäºŽå¼€å§‹ Flutter çš„å…·ä½“å­¦ä¹ ï¼Œä¸€åˆ‡ä»Ž Dart è¯­è¨€å¼€å§‹ã€‚ 123void main() &#123; print(&apos;hello world&apos;);&#125; çŽ¯å¢ƒæ­å»ºDart çš„ SDK ä¸‹è½½å¯èƒ½éœ€è¦æ¢¯å­ã€‚ä½œè€…ä½¿ç”¨çš„å¼€å‘çŽ¯å¢ƒæ˜¯ Intellij IDEAï¼Œé¦–å…ˆä¸‹è½½ Dart çš„ Pluginï¼Œé‡å¯ IDEA ä¹‹åŽåˆ›å»ºä¸€ä¸ª Dart Projectï¼Œå½“ç„¶é¦–å…ˆéœ€è¦ç¡®è®¤ SDK çš„è·¯å¾„ã€‚ åˆ›å»ºä¹‹åŽçš„æ–‡ä»¶çª—å£å¦‚ä¸‹ï¼Œå³é”® DartDemo æ–‡ä»¶å¤¹ï¼Œæ–°å»ºä¸€ä¸ª dart æ–‡ä»¶ï¼Œå’Œ C/C++ ç±»ä¼¼ï¼ŒDart è¯­è¨€ä»¥æ–‡ä»¶ä¸­çš„mainå‡½æ•°ä½œä¸ºè¿è¡Œçš„å…¥å£ã€‚åœ¨runä¹‹å‰éœ€è¦edit configurationï¼Œå¾ˆç®€å•ï¼Œåªè¦æŒ‡å®šå¯¹åº”çš„æ–‡ä»¶å³å¯ã€‚ å£°æ˜Žå˜é‡Dart æ˜¯ä¸€é—¨å®Œå…¨é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼ŒåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»åž‹ã€å‡½æ•°éƒ½æ˜¯å¯¹è±¡ï¼Œç»§æ‰¿è‡ª Objectã€‚å£°æ˜Žä¸€ä¸ªå¯¹è±¡å¯ä»¥åˆå§‹åŒ–ï¼Œå¦åˆ™å…¶å€¼ä¸ºnullã€‚å¯ä»¥ä½¿ç”¨å…·ä½“çš„ç±»åž‹å£°æ˜Žï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨varã€dynamicã€constã€finalç­‰å…³é”®å­— 12345678910void main() &#123; var i = 0; var d = 2.0; var s = &apos;hello&apos;; var b = true; var l = [1, 2, 3]; var m = &#123;0: &apos;a&apos;, 1: &apos;b&apos;&#125;; print(main is Function); //true&#125; é€šè¿‡æŸ¥çœ‹å®˜æ–¹åº“çš„coreåŒ…ï¼Œå¯ä»¥å¤§æ¦‚çœ‹å‡ºå…¶ç»“æž„ æ•°æ®ç±»åž‹NumbersåŒ…æ‹¬ int å’Œ doubleï¼Œåˆ†åˆ«ä»£è¡¨æ•´å½¢å’Œæµ®ç‚¹åž‹ã€‚ int çš„æ•°å€¼èŒƒå›´ä¸è¶…è¿‡2çš„64ä½ï¼Œå…·ä½“ä¸Žå¹³å°æœ‰å…³ï¼Œä¸€èˆ¬ä¸º -2^53 to 2^53ã€‚double åˆ™å±žäºŽ64ä½çš„åŒç²¾åº¦æµ®ç‚¹åž‹æ•°æ®ã€‚ Stringåœ¨ Dart ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡ï¼Œæˆ–è€…ä½¿ç”¨ä¸‰å¼•å·å®šä¹‰æ ¼å¼å­—ç¬¦ä¸²ã€‚Dart çš„å­—ç¬¦ä¸²ä½¿ç”¨ UTF-16 ç¼–ç  123456var s1 = "hello";var s2 = 'world';var s3 = 'hello' + 'world';var s4 = 'hello' 'world';var s5 = """hello world"""; å¦‚æžœè¦ä½¿ç”¨ UTF-32 ç¼–ç ï¼Œåˆ™è¦é€šè¿‡ Runesï¼ˆç¬¦å·æ–‡å­—ï¼‰ï¼Œå®ƒå¯ä»¥æŠŠæ–‡å­—è½¬æ¢æˆç¬¦å·è¡¨æƒ…æˆ–è€…ç‰¹å®šæ–‡å­—ã€‚ 12345var clapping = '\u&#123;1f44f&#125;';print(clapping);Runes runes = new Runes('\u&#123;1f44d&#125;');print(new String.fromCharCode(runes.first)); ä¸Šé¢çš„è¾“å‡ºä¸º 12ðŸ‘ðŸ‘ Booleanæä¾› bool ç”¨æ¥å£°æ˜Žå¸ƒå°”åž‹å˜é‡ï¼Œé»˜è®¤ä¸º falseã€‚ List å’Œ Map12345678List&lt;int&gt; l = [1,2,3];l.forEach((x) =&gt; print(x)); //forEachçš„å‚æ•°ä¸º Functionfor(var x in l) &#123; //ä½¿ç”¨for-in print(x);&#125;Map&lt;int, String&gt; map = &#123;0: "a", 1: "b"&#125;;map[0] = "c"; Functionæ™®é€šFunctionå‡½æ•°æˆ–è€…æ–¹æ³•ã€‚å’ŒJava ä¸åŒï¼ŒDart ä¸­æ–¹æ³•æ˜¯æœ‰ç±»åž‹çš„ï¼Œå±žäºŽ Functionã€‚ 12345678910111213141516171819void main() &#123; single1('Tom', 20); single2('Tom', 20); single3('Tom', 20, weight: 30); //ç”±äºŽæ²¡æœ‰ä½ç½®çº¦æŸï¼Œå¿…é¡»æŒ‡å®šå½¢å‚åç§° single4('Tom', 20, 20, 30);&#125;bool single1(String name, int age) &#123; return true;&#125;//è¿”å›žç±»åž‹å’Œå‚æ•°ç±»åž‹å¯çœç•¥ï¼Œæ”¯æŒè¿”å›žè¡¨è¾¾å¼single2(name, age) =&gt; true;//å¯é€‰å‘½åå‚æ•°ï¼Œè°ƒç”¨æ—¶æ²¡æœ‰é¡ºåºè¦æ±‚ï¼ŒåŒæ—¶å¯é€‰å‚æ•°å¯ä»¥æŒ‡å®šé»˜è®¤å€¼bool single3(String name, int age, &#123;int weight = 60, int height&#125;) =&gt; true;//å¯é€‰ä½ç½®å‚æ•°ï¼Œé€šè¿‡ä½ç½®æ¥ç¡®å®šå‚æ•°å€¼ï¼Œè¦æƒ³æŒ‡å®š height å¿…é¡»å…ˆæŒ‡å®š weightbool single4(String name, int age, [int weight, int height]) =&gt; true; å¯¹äºŽmainæ–¹æ³•æ¥è¯´ï¼Œå¯ä»¥å®šä¹‰å…¶ä¸ºä¸€ä¸ªæœ‰å‚çš„æ–¹æ³•ï¼ŒåŒæ ·å¯ä»¥ä½œä¸ºå…¥å£æ–¹æ³•ã€‚åœ¨ Flutter é¡¹ç›®ä¸­çš„å…¥å£æ–¹æ³•ä¸ºï¼š 1void main() =&gt; runApp(MyApp()); Lambdaè¡¨è¾¾å¼åœ¨ Lambda è¡¨è¾¾å¼ä¸­ï¼Œå‡½æ•°å¯ä»¥â€œæ²¡æœ‰åå­—â€ï¼ŒåŒæ ·ï¼Œä¹Ÿå¯ä»¥åƒ kotlin ä¸€æ ·ï¼Œå®šä¹‰ä¸€ä¸ªå‡½æ•°å˜é‡ 123456789101112var f = (c) &#123; print(c);&#125;;f('hello');var list = [1, 2, 3];printElement(x) &#123; //æ–¹æ³•ç­¾åå†™æˆ void printElement(int x) æ›´ç›´è§‚ print(x);&#125;list.forEach(printElement); forEachçš„å‡½æ•°å®šä¹‰å¦‚ä¸‹ 123void forEach(void f(E element)) &#123; for (E element in this) f(element);&#125; ä¸‹é¢çš„ä¾‹å­ç›´è§‚å±•ç¤ºå°†å‡½æ•°ä½œä¸ºå˜é‡ä¼ é€’çš„æ€æƒ³ 1234567891011121314Function makeAdder(num n) &#123; return (num i) =&gt; n + i;&#125; //æ›´æ˜Žæ™°çš„å†™æ³•Function makeAdder_(num n) &#123; Function add = (num i) &#123; return i + n; &#125;; return add;&#125;var adder2 = makeAdder(2);print(adder2(3)); æŽ§åˆ¶å°å°†è¾“å‡º 5 è¿ç®—ç¬¦èµ‹å€¼æ“ä½œç¬¦é™¤äº†=ï¼Œè¿˜æœ‰??=ï¼Œè¡¨ç¤ºå¦‚æžœå·¦è¾¹çš„å˜é‡ä¸º nullï¼Œåˆ™å°†å³è¾¹çš„å€¼èµ‹äºˆå®ƒï¼Œå¦åˆ™å·¦è¾¹å€¼ä¸å˜ã€‚ ç›¸ç­‰==å°†æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å±žæ€§æ˜¯å¦ç›¸ç­‰ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºåŒä¸€å¯¹è±¡ä½¿ç”¨çš„æ˜¯é¢„å®šä¹‰çš„identicalæ–¹æ³• 1external bool identical(Object a, Object b); é™¤æ³• æ“ä½œç¬¦ å«ä¹‰ / é™¤ï¼Œæ¯”å¦‚ 5/2 = 2.5 ~/ æ•´é™¤ï¼Œ 5/2 = 2 ç±»åž‹åˆ¤æ–­ æ“ä½œç¬¦ å«ä¹‰ is å¯¹è±¡å±žäºŽæŒ‡å®šç±»åž‹åˆ™è¿”å›žtrue is! å¯¹è±¡ä¸å±žäºŽæŒ‡å®šç±»åž‹è¿”å›žtrue as ç±»åž‹è½¬æ¢ æ¡ä»¶è¡¨è¾¾å¼åˆ†ä¸ºä¸¤ç§ 12condition ? expr1 : expr2 //é€šç”¨è¡¨è¾¾å¼expr1 ?? expr2 //å¦‚æžœ expr1 éžç©ºï¼Œè¿”å›žå…¶å€¼ï¼Œå¦åˆ™è¿”å›ž expr2 çº§è”è°ƒç”¨ä¸Žéžç©ºè°ƒç”¨1234567891011121314//å¸¸è§„å†™æ³•var button = querySelector('#button');button.text = 'Confirm';button.classes.add('important');button.onClick.listen((e) =&gt; window.alert('Confirmed!'));//ä½¿ç”¨çº§è”è¡¨è¾¾å¼querySelector('#button') // Get an object. ..text = 'Confirm' // Use its members. ..classes.add('important') ..onClick.listen((e) =&gt; window.alert('Confirmed!'));//éžç©ºè°ƒç”¨print(button?.text); å…¶ä»–Dart è¯­è¨€åœ¨æ¯”å¦‚ if/elseã€[doã€]whileã€forã€switch/caseç­‰è¯­å¥ä¸Šè·Ÿ Java ç±»ä¼¼ï¼Œä¸å†èµ˜è¿°ã€‚ å¼‚å¸¸å¤„ç†çš„åšæ³•å¦‚ä¸‹ 12345678910111213141516171819//æŠ›å‡ºå¼‚å¸¸throw 'x should be less than 10'; throw new FormatException('Expected at least 1 section');//æ•èŽ·å¼‚å¸¸try &#123; breedMoreLlamas();&#125; on OutOfLlamasException &#123; buyMoreLlamas();&#125;try &#123; //...&#125; on Exception catch (e) &#123; print('Unknown exception: $e');&#125; catch (e, s) &#123; print('Exception details:\n $e'); print('Stack trace:\n $s');&#125;]]></content>
      <categories>
        <category>Dart</category>
      </categories>
      <tags>
        <tag>Dart</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android Binder æºç è§£æž]]></title>
    <url>%2FAndroid-Binder-%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[Java çº¿ç¨‹å’Œçº¿ç¨‹æ± è¯¦è§£]]></title>
    <url>%2FJava-%E7%BA%BF%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B%E6%B1%A0%E8%AF%A6%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[å¼•è¨€çº¿ç¨‹åœ¨ Java å¼€å‘ä¸­æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µã€‚ åœ¨Javaä¸­ï¼Œâ€œçº¿ç¨‹â€æŒ‡ä¸¤ä»¶ä¸åŒçš„äº‹æƒ…ï¼š java.lang.Thread ç±»çš„ä¸€ä¸ªå®žä¾‹ï¼› çº¿ç¨‹çš„æ‰§è¡Œã€‚ Java çº¿ç¨‹çº¿ç¨‹å’Œè¿›ç¨‹æ¦‚å¿µè¿›ç¨‹æ˜¯æŒ‡ä¸€ä¸ªå†…å­˜ä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ä¸€å—å†…å­˜ç©ºé—´ï¼Œå³è¿›ç¨‹ç©ºé—´ï¼ˆè™šç©ºé—´ï¼‰ã€‚è¿›ç¨‹ä¸ä¾èµ–äºŽçº¿ç¨‹è€Œç‹¬ç«‹å­˜åœ¨ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥å¯åŠ¨å¤šä¸ªçº¿ç¨‹ã€‚ç³»ç»Ÿè¿è¡Œä¸€ä¸ªç¨‹åºå³æ˜¯ä¸€ä¸ªè¿›ç¨‹ä»Žåˆ›å»ºã€è¿è¡Œåˆ°æ¶ˆäº¡çš„è¿‡ç¨‹ã€‚ çº¿ç¨‹æ˜¯æŒ‡è¿›ç¨‹ä¸­çš„ä¸€ä¸ªæ‰§è¡Œæµç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥è¿è¡Œå¤šä¸ªçº¿ç¨‹ã€‚çº¿ç¨‹æ€»æ˜¯å±žäºŽæŸä¸ªè¿›ç¨‹ï¼Œçº¿ç¨‹æ²¡æœ‰è‡ªå·±çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œä¸Žè¿›ç¨‹å†…çš„å…¶ä»–çº¿ç¨‹ä¸€èµ·å…±äº«åˆ†é…ç»™è¯¥è¿›ç¨‹çš„æ‰€æœ‰èµ„æºã€‚ï¼Œçº¿ç¨‹æ˜¯ CPU æ‰§è¡Œçš„åŸºæœ¬å•ä½ï¼Œæ˜¯èŠ±è´¹æœ€å°å¼€é”€çš„å®žä½“ã€‚ åŒºåˆ«è¿›ç¨‹æœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œè¿›ç¨‹ä¸­çš„æ•°æ®å­˜æ”¾ç©ºé—´ï¼ˆå †ç©ºé—´å’Œæ ˆç©ºé—´ï¼‰æ˜¯ç‹¬ç«‹çš„ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚ çº¿ç¨‹ä¸­å †ç©ºé—´æ˜¯å…±äº«çš„ï¼Œæ ˆç©ºé—´æ˜¯ç‹¬ç«‹çš„ï¼Œçº¿ç¨‹æ¶ˆè€—çš„èµ„æºæ¯”è¿›ç¨‹å°çš„å¤šã€‚ ä¸€ä¸ªè¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹æ˜¯å¹¶å‘è¿è¡Œçš„ï¼Œä»Žå¾®è§‚è§’åº¦çœ‹å­˜åœ¨å…ˆåŽé¡ºåºï¼Œå“ªä¸ªçº¿ç¨‹è¢«æ‰§è¡Œå®Œå…¨å–å†³äºŽ CPU çš„è°ƒåº¦ï¼Œç¨‹åºå‘˜æ— æ³•å¹²æ¶‰ã€‚è¿™ä¹Ÿå°±é€ æˆäº†å¤šçº¿ç¨‹çš„éšæœºæ€§ã€‚ Java ç¨‹åºçš„è¿›ç¨‹é‡Œé¢è‡³å°‘åŒ…å«ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸»çº¿ç¨‹ä¹Ÿå°±æ˜¯ main() æ–¹æ³•çº¿ç¨‹ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯åžƒåœ¾å›žæ”¶æœºåˆ¶çº¿ç¨‹ã€‚æ¯å½“ä½¿ç”¨ java å‘½ä»¤æ‰§è¡Œä¸€ä¸ªç±»æ—¶ï¼Œå®žé™…ä¸Šéƒ½ä¼šå¯åŠ¨ä¸€ä¸ª JVMï¼Œå¯¹åº”ä¸€ä¸ªè¿›ç¨‹ã€‚ ç”±äºŽåˆ›å»ºä¸€ä¸ªçº¿ç¨‹çš„å¼€é”€æ¯”åˆ›å»ºä¸€ä¸ªè¿›ç¨‹çš„å¼€é”€å°çš„å¤šï¼Œåœ¨å¼€å‘å¤šä»»åŠ¡è¿è¡Œçš„æ—¶å€™ï¼Œé€šå¸¸è€ƒè™‘åˆ›å»ºå¤šçº¿ç¨‹ï¼Œè€Œä¸æ˜¯åˆ›å»ºå¤šè¿›ç¨‹ã€‚ å®žé™…å¼€å‘ä¸­ä½¿ç”¨å¤šçº¿ç¨‹çš„ä¼˜åŠ¿åœ¨äºŽ è¿›ç¨‹ä¹‹é—´ä¸èƒ½å…±äº«å†…å­˜ï¼Œè€Œçº¿ç¨‹ä¹‹é—´å¯ä»¥å…±äº«å†…å­˜ã€‚ ç³»ç»Ÿåˆ›å»ºè¿›ç¨‹éœ€è¦ä¸ºè¯¥è¿›ç¨‹é‡æ–°åˆ†é…ç³»ç»Ÿèµ„æºï¼Œåˆ›å»ºçº¿ç¨‹çš„ä»£ä»·åˆ™å°çš„å¤šï¼Œå› æ­¤å¤šä»»åŠ¡å¹¶å‘æ—¶ï¼Œå¤šçº¿ç¨‹æ•ˆçŽ‡é«˜ã€‚ Java è¯­è¨€æœ¬èº«å†…ç½®å¤šçº¿ç¨‹åŠŸèƒ½çš„æ”¯æŒï¼Œè€Œä¸æ˜¯å•çº¯ä½œä¸ºåº•å±‚ç³»ç»Ÿçš„è°ƒåº¦æ–¹å¼ï¼Œä»Žè€Œç®€åŒ–äº†å¤šçº¿ç¨‹ç¼–ç¨‹ã€‚ çº¿ç¨‹çš„çŠ¶æ€å›¾ä¸€ å›¾äºŒ åˆ†ç±»Java ä¸­çš„çº¿ç¨‹å¯ä»¥åˆ†ä¸ºç”¨æˆ·çº¿ç¨‹ï¼ˆUser Threadï¼‰å’Œå®ˆæŠ¤çº¿ç¨‹ï¼ˆDaemon Threadï¼‰ã€‚ åªè¦å½“å‰ JVM å®žä¾‹ä¸­å­˜åœ¨ä»»ä½•ä¸€ä¸ªéžå®ˆæŠ¤çº¿ç¨‹æ²¡æœ‰ç»“æŸï¼Œå®ˆæŠ¤çº¿ç¨‹å°±å…¨éƒ¨å·¥ä½œï¼›å½“æœ€åŽä¸€ä¸ªéžå®ˆæŠ¤çº¿ç¨‹ç»“æŸï¼Œå³è™šæ‹Ÿæœºä¸­åªå­˜åœ¨å®ˆæŠ¤çº¿ç¨‹æ—¶ï¼ŒJVM å°±ä¼šåœæ­¢è¿è¡Œã€‚Daemon Thread çš„ä½œç”¨æ˜¯ä¸ºå…¶ä»–çº¿ç¨‹æä¾›å„ç§æœåŠ¡ï¼Œæœ€å…¸åž‹çš„åº”ç”¨å°±æ˜¯åžƒåœ¾æ”¶é›†å™¨ã€‚12345678public class Main &#123; public static void main(String[] args) &#123; Thread thread = new Thread(); thread.setDaemon(true); System.out.println("is daemon thread? " + thread.isDaemon()); &#125;&#125; è¾“å‡ºä¸º1is daemon thread? true ä½¿ç”¨å®ˆæŠ¤çº¿ç¨‹è¦æ³¨æ„çš„ç‚¹ thread.setDaemon(true) å¿…é¡»åœ¨ thread.start() ä¹‹å‰è®¾ç½®ï¼Œå¦åˆ™æŠ›å‡ºä¸€ä¸ª IllegalThreadStateException å¼‚å¸¸ã€‚å› ä¸ºä¸èƒ½æŠŠæ­£åœ¨è¿è¡Œçš„å¸¸è§„çº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚ åœ¨ Daemon Thread ä¸­äº§ç”Ÿçš„æ–°çº¿ç¨‹ä¹Ÿå±žäºŽ Daemon Threadã€‚ ä¸è¦åœ¨ Daemon Thread ä¸­åˆ†é…è¯»å†™æ“ä½œæˆ–è€…è®¡ç®—é€»è¾‘ä»»åŠ¡ã€‚ Runnable å’Œ ThreadRunnable æ˜¯ä¸€ä¸ªçº¿ç¨‹æŽ¥å£ï¼ŒæŸ¥çœ‹å…¶æž„é€ 123public interface Runnable &#123; public abstract void run();&#125; å…¶ä¸­åªå®šä¹‰äº†ä¸€ä¸ªrunæ–¹æ³• Thread æ˜¯å®žçŽ°äº† Runnable æŽ¥å£çš„ç±»ï¼Œæ‰€æœ‰æ–°å»º Thread å®žä¾‹çš„æ–¹æ³•æœ€åŽéƒ½ä¼šè°ƒç”¨åˆ°å†…éƒ¨çš„init123private void init(ThreadGroup g, Runnable target, String name, long stackSize, AccessControlContext acc, boolean inheritThreadLocals) è§‚å¯Ÿ Thread ä¸­é‡å†™çš„runæ–¹æ³•123456@Overridepublic void run() &#123; if (target != null) &#123; target.run(); &#125;&#125; å…¶ä¸­ target ä¸º Runnable å¯¹è±¡ï¼Œå³è°ƒç”¨ Thread çš„runå®žé™…ä¸Šæ˜¯è°ƒç”¨æˆ‘ä»¬ä¼ è¿›åŽ»çš„ Runnable çš„å¯¹åº”æ–¹æ³• è§‚å¯Ÿå…¶startæ–¹æ³•123456789101112131415161718192021222324public synchronized void start() &#123; //ä¸èƒ½é‡å¤è°ƒç”¨ start æ–¹æ³• if (threadStatus != 0) throw new IllegalThreadStateException(); //å°†çº¿ç¨‹åŠ å…¥çº¿ç¨‹ç»„ group.add(this); //çº¿ç¨‹å¼€å§‹æ ‡å¿— boolean started = false; try &#123; //è°ƒç”¨nativeæ–¹æ³•å¼€å§‹å¤šçº¿ç¨‹ start0(); started = true; &#125; finally &#123; try &#123; if (!started) &#123; group.threadStartFailed(this); &#125; &#125; catch (Throwable ignore) &#123; /* do nothing. If start0 threw a Throwable then it will be passed up the call stack */ &#125; &#125;&#125; å…¶ä¸­start0æ˜¯ native æ–¹æ³•ï¼Œåœ¨å…¶ä¸­æ–°å»ºçº¿ç¨‹ï¼Œç„¶åŽå›žè°ƒ target çš„ run æ–¹æ³•ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœæˆ‘ä»¬ç›´æŽ¥è°ƒç”¨runæ–¹æ³•ï¼Œç›¸å½“äºŽè°ƒç”¨æ™®é€šæ–¹æ³•ï¼Œä¸ä¼šæœ‰å¤šçº¿ç¨‹æ•ˆæžœã€‚åªæœ‰è°ƒç”¨startæ‰ä¼šåœ¨åŽå°å¼€å¯å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œç­‰å¾… CPU è°ƒåº¦ã€‚ å¤šçº¿ç¨‹ APIObjectå®žé™…ä¸Šé™¤äº† Threadï¼ŒJava çš„åŸºç±» Object ä¸­ä¹Ÿå®šä¹‰äº†ä¸€äº›å…³äºŽå¤šçº¿ç¨‹æ“ä½œçš„æ–¹æ³• æ–¹æ³• æè¿° wait() é”å¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•ä½¿å½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œå¹¶ç«‹åˆ»é‡Šæ”¾é”å¯¹è±¡ï¼Œç›´åˆ°è¢«å…¶ä»–çº¿ç¨‹å”¤é†’è¿›å…¥ç­‰é”æ±  wait(long) é”å¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•ä½¿å½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼ŒåŒæ—¶é‡Šæ”¾é”å¯¹è±¡ã€‚ä½†æ˜¯è¶…è¿‡ç­‰å¾…çš„æ—¶é—´åŽçº¿ç¨‹ä¼šè‡ªåŠ¨å”¤é†’ï¼Œæˆ–è€…è¢«å…¶ä»–çº¿ç¨‹å”¤é†’ï¼Œå¹¶è¿›å…¥ç­‰é”æ± ä¸­ã€‚ wait(long, int) å’Œo.wait(long)æ–¹æ³•ä¸€æ ·ï¼Œå¦‚æžœintå‚æ•°å¤§äºŽ0åˆ™å‰é¢çš„longæ•°å­—åŠ 1000 notify() éšæœºå”¤é†’ä¸€ä¸ªå¤„äºŽç­‰å¾…ä¸­çš„çº¿ç¨‹ï¼ˆåŒä¸€ä¸ªç­‰å¾…é˜»å¡žæ± ä¸­ï¼‰ notifyAll() å”¤é†’æ‰€æœ‰ç­‰å¾…ä¸­çš„çº¿ç¨‹ï¼ˆåŒä¸€ä¸ªç­‰å¾…é˜»å¡žæ± ä¸­ï¼‰ ä»¥ä¸Šçš„æ–¹æ³•å¿…é¡»å†™åœ¨ synchronized æ–¹æ³•å†…éƒ¨æˆ–è€… synchronized å—å†…éƒ¨ï¼Œå› ä¸ºå®ƒä»¬è¦æ±‚å½“å‰æ­£åœ¨è¿è¡Œobject.wait()æ–¹æ³•çš„çº¿ç¨‹æ‹¥æœ‰ object çš„å¯¹è±¡é”ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œæµ‹è¯•ä»£ç å¦‚ä¸‹12345678910111213141516171819202122232425public class ThreadTest &#123; public static void main(String[] args) &#123; Thread t = Thread.currentThread(); try &#123; t.wait(2000); //ç”±äºŽæ²¡æœ‰èŽ·å¾—é”ï¼Œå°†æŠ›å‡º IllegalMonitorStateException å¼‚å¸¸ &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println("current Thread info in Main: " + t.toString()); A a = new A(); a.printThreadInfo(); &#125;&#125;class A &#123; public synchronized void printThreadInfo() &#123; Thread t = Thread.currentThread(); try &#123; wait(2000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println("current Thread info in A: " + t.toString()); &#125;&#125; åˆ é™¤mainä¸­ try/catch è¯­å¥ä¹‹åŽï¼ŒæŽ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹123current Thread info in Main: Thread[main,5,main]//ç­‰å¾…ä¸¤ç§’current Thread info in A: Thread[main,5,main] ä¸ºä»€ä¹ˆéœ€è¦åœ¨ synchronized ä¸­ï¼Ÿ waitå’Œnotifyç”¨äºŽçº¿ç¨‹é—´é€šä¿¡ã€‚ä»¥ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼ä¸¾ä¾‹ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…é€šè¿‡é˜Ÿåˆ—è¿›è¡Œé€šä¿¡ï¼Œå¯¹äºŽé˜Ÿåˆ—çš„æ“ä½œè¦ä¿è¯çº¿ç¨‹å®‰å…¨æ€§ ä¸€èˆ¬å¯¹é˜Ÿåˆ—çš„æ“ä½œå¦‚ä¸‹:while(queue.size() == MAX_SIZE){ wait() } å‡å¦‚ä¸å¯¹è¿™æ®µä»£ç åŠ é”ï¼Œå°±ä¼šå‡ºçŽ°é—®é¢˜ã€‚æ¨¡æ‹Ÿä¸€ä¸ªç”Ÿäº§è€…çº¿ç¨‹t1å’Œä¸€ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹t2 t1åˆ¤æ–­é˜Ÿåˆ—æ»¡ï¼Œéœ€è¦ wait é˜»å¡žçº¿ç¨‹ã€‚ ä½†æ˜¯å°±åœ¨t1è¿˜æ²¡æœ‰è°ƒç”¨ wait çš„æ—¶å€™ï¼Œæ¶ˆè´¹è€…t2æ¶ˆè´¹äº†ä¸€ä¸ªäº§å“ï¼Œå¯¼è‡´é˜Ÿåˆ—éžæ»¡ã€‚ è¿™æ—¶å€™ç”Ÿäº§è€…çº¿ç¨‹t1è°ƒç”¨ wait é˜»å¡žï¼Œé€ æˆçš„æƒ…å†µå°±æ˜¯é˜Ÿåˆ—éžæ»¡ï¼Œä½†æ˜¯ç”Ÿäº§è€…çº¿ç¨‹é˜»å¡žäº†ã€‚ å‡å¦‚æ­¤æ—¶æ¶ˆè´¹è€…ä¸æ¶ˆè´¹äº†ï¼Œé‚£ä¹ˆç”Ÿäº§è€…åˆ™ä¼šä¸€ç›´é˜»å¡žä¸‹åŽ»ã€‚ æ‰€ä»¥åœ¨è°ƒç”¨ waitã€notify ä»¥åŠ notifyAll ç­‰æ–¹æ³•æ—¶ä¸€å®šè¦è¿›è¡ŒåŒæ­¥å¤„ç†ã€‚ ä¸ºä»€ä¹ˆå®šä¹‰åœ¨ Object ä¸­ï¼Ÿ Object ä¸­çš„wait(), notify()ç­‰æ–¹æ³•ï¼Œå’Œ synchronized ä¸€æ ·ï¼Œä¼šå¯¹â€œå¯¹è±¡çš„åŒæ­¥é”â€è¿›è¡Œæ“ä½œã€‚ wait()ä¼šä½¿â€œå½“å‰çº¿ç¨‹â€ç­‰å¾…ã€‚è¿›å…¥ç­‰å¾…çŠ¶æ€æ—¶ï¼Œçº¿ç¨‹åº”è¯¥é‡Šæ”¾å®ƒé”æŒæœ‰çš„â€œåŒæ­¥é”â€ï¼Œå¦åˆ™å…¶å®ƒçº¿ç¨‹èŽ·å–ä¸åˆ°è¯¥â€œåŒæ­¥é”â€å°†æ— æ³•è¿è¡Œï¼å½“çº¿ç¨‹é‡Šæ”¾å®ƒæŒæœ‰çš„â€œåŒæ­¥é”â€ä¹‹åŽå˜æˆç­‰å¾…çº¿ç¨‹ï¼Œå¯ä»¥è¢«notify()æˆ–notifyAll()å”¤é†’ã€‚é‚£ä¹ˆï¼Œnotify()ä¾æ®ä»€ä¹ˆå”¤é†’ç­‰å¾…çº¿ç¨‹çš„ï¼Ÿæˆ–è€…è¯´ï¼Œwait()ç­‰å¾…çº¿ç¨‹å’Œnotify()ä¹‹é—´é€šè¿‡ä»€ä¹ˆå…³è”èµ·æ¥ï¼Ÿç­”æ¡ˆæ˜¯ï¼šä¾æ®â€œå¯¹è±¡çš„åŒæ­¥é”â€ã€‚ è´Ÿè´£å”¤é†’ç­‰å¾…çº¿ç¨‹çš„é‚£ä¸ªçº¿ç¨‹(â€œå”¤é†’çº¿ç¨‹â€)ï¼Œåªæœ‰åœ¨èŽ·å–â€œè¯¥å¯¹è±¡çš„åŒæ­¥é”â€(è¿™é‡Œçš„åŒæ­¥é”å¿…é¡»å’Œç­‰å¾…çº¿ç¨‹çš„åŒæ­¥é”æ˜¯åŒä¸€ä¸ª)ï¼Œå¹¶ä¸”è°ƒç”¨notify()æˆ–notifyAll()æ–¹æ³•ä¹‹åŽï¼Œæ‰èƒ½å”¤é†’ç­‰å¾…çº¿ç¨‹ã€‚æ­¤æ—¶å› ä¸ºå”¤é†’çº¿ç¨‹è¿˜æŒæœ‰â€œè¯¥å¯¹è±¡çš„åŒæ­¥é”â€ï¼Œæ‰€ä»¥å¿…é¡»ç­‰åˆ°å”¤é†’çº¿ç¨‹é‡Šæ”¾äº†â€œå¯¹è±¡çš„åŒæ­¥é”â€ä¹‹åŽï¼Œç­‰å¾…çº¿ç¨‹æ‰èƒ½èŽ·å–åˆ°â€œå¯¹è±¡çš„åŒæ­¥é”â€è¿›è€Œç»§ç»­è¿è¡Œã€‚ æ€»ä¹‹ï¼Œnotify(), wait()ä¾èµ–äºŽâ€œåŒæ­¥é”â€ï¼Œè€Œâ€œåŒæ­¥é”â€æ˜¯å¯¹è±¡é”æŒæœ‰ï¼Œå¹¶ä¸”æ¯ä¸ªå¯¹è±¡æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªï¼ è¿™å°±æ˜¯notify(), wait()ç­‰å‡½æ•°å®šä¹‰åœ¨ Object ç±»ï¼Œè€Œä¸æ˜¯ Thread ç±»ä¸­çš„åŽŸå› ã€‚ æ¥è‡ª JAVA çº¿ç¨‹çŠ¶æ€åŠè½¬åŒ– Thread æ–¹æ³• æè¿° Thread.currentThread() è¿”å›žå¯¹å½“å‰çº¿ç¨‹å¯¹è±¡çš„å¼•ç”¨ Thread.interrupted() æ£€æµ‹å½“å‰çº¿ç¨‹æ˜¯å¦å·²ç»ä¸­æ–­ï¼ˆè°ƒç”¨è¯¥æ–¹æ³•åŽå°†è¯¥çº¿ç¨‹çš„ä¸­æ–­æ ‡å¿—ä½è®¾ä¸ºfalseï¼Œè¿žç»­ä¸¤æ¬¡è°ƒç”¨è¯¥æ–¹æ³•ç¬¬äºŒæ¬¡è‚¯å®šä¸ºfalseï¼‰ Thread.sleep(long millis) ä½¿å½“å‰çº¿ç¨‹ç¡çœ ï¼ˆä¸ä¼šé‡Šæ”¾é”å¯¹è±¡ï¼Œå¯ä»¥è®©å…¶ä»–çº¿ç¨‹æœ‰æ‰§è¡Œçš„æœºä¼šï¼‰ Thread.yield() ä½¿å½“å‰çº¿ç¨‹æ”¾å¼ƒcpuçš„æ‰§è¡Œæƒï¼ˆæœ‰å¯èƒ½ç«‹åˆ»åˆè¢«é‡æ–°é€‰ä¸­ç»§ç»­æ‰§è¡Œï¼Œåªå¯èƒ½ç»™ä¼˜å…ˆçº§æ›´é«˜çš„çº¿ç¨‹æœºä¼šï¼‰ t.getId()â€¦ è¿”å›žè¯¥çº¿ç¨‹çš„ id ç­‰ç­‰ä¿¡æ¯ t.interrupt() å°†è¯¥çº¿ç¨‹ä¸­æ–­ï¼ˆå®žé™…å¹¶ä¸ä¼šä¸­æ–­ï¼Œåªæ˜¯å°†ä¸­æ–­æ ‡å¿—è®¾ç½®ä¸ºtrueï¼‰ t.isInterrupted() æ£€æµ‹è¯¥çº¿ç¨‹æ˜¯å¦å·²ç»ä¸­æ–­ t.join() åœ¨açº¿ç¨‹ä¸­è°ƒç”¨b.join()ï¼Œåˆ™açº¿ç¨‹é˜»å¡žï¼Œç›´åˆ°bçº¿ç¨‹æ‰§è¡Œå®Œ t.join(long millis) åŒä¸Šï¼Œä¸è¿‡açº¿ç¨‹é˜»å¡žçš„æ—¶é—´æ ¹æ®longçš„å¤§å°æœ‰å…³ï¼Œå¦‚æžœè¾¾åˆ°è®¾å®šçš„é˜»å¡žæ—¶é—´ï¼Œå°±ç®—bçº¿ç¨‹æ²¡æœ‰æ‰§è¡Œå®Œï¼Œaçº¿ç¨‹ä¹Ÿä¼šè¢«å”¤é†’ã€‚ å…³äºŽ interruptï¼ŒJAVA interruptã€interruptedå’ŒisInterruptedçš„åŒºåˆ« interrupt æ–¹æ³•æ˜¯ç”¨äºŽä¸­æ–­çº¿ç¨‹çš„ï¼Œè°ƒç”¨è¯¥æ–¹æ³•çš„çº¿ç¨‹çš„çŠ¶æ€å°†è¢«ç½®ä¸ºâ€ä¸­æ–­â€çŠ¶æ€ã€‚ æ³¨æ„ï¼šçº¿ç¨‹ä¸­æ–­ä»…ä»…æ˜¯è®¾ç½®çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ä½ï¼Œä¸ä¼šåœæ­¢çº¿ç¨‹ã€‚éœ€è¦ç”¨æˆ·è‡ªå·±åŽ»ç›‘è§†çº¿ç¨‹çš„çŠ¶æ€å¹¶åšå¤„ç†ã€‚æ”¯æŒçº¿ç¨‹ä¸­æ–­çš„æ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯çº¿ç¨‹ä¸­æ–­åŽä¼šæŠ›å‡º InterruptedException çš„æ–¹æ³•ï¼Œæ¯”å¦‚è¿™é‡Œçš„sleepï¼Œä»¥åŠObject.waitç­‰æ–¹æ³•ï¼‰å°±æ˜¯åœ¨ç›‘è§†çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ï¼Œä¸€æ—¦çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€è¢«ç½®ä¸ºâ€œä¸­æ–­çŠ¶æ€â€ï¼Œå°±ä¼šæŠ›å‡ºä¸­æ–­å¼‚å¸¸ã€‚ åºŸå¼ƒæ–¹æ³• stopï¼šä¼šé‡Šæ”¾è¯¥çº¿ç¨‹æ‰€æŒæœ‰çš„æ‰€æœ‰é”ï¼Œä½†è¿™ç§é‡Šæ”¾æ˜¯ä¸å¯æŽ§åˆ¶ã€éžé¢„æœŸçš„ã€‚è€Œä¸”ä¸€ä¸ªçº¿ç¨‹ä¸åº”è¯¥ç”±å…¶ä»–çº¿ç¨‹æ¥å¼ºåˆ¶ä¸­æ–­æˆ–åœæ­¢ï¼Œè€Œåº”è¯¥è‡ªè¡Œåœæ­¢ suspendï¼šçº¿ç¨‹åœ¨æš‚åœçš„æ—¶å€™ä»ç„¶å æœ‰è¯¥èµ„æºï¼Œå¯¼è‡´éœ€è¦è¯¥èµ„æºçš„çº¿ç¨‹äº§ç”ŸçŽ¯è·¯ç­‰å¾…ï¼Œä»Žè€Œé€ æˆæ­»é”ã€‚ resumeï¼šç”¨æ¥å›žå¤è¢«æŒ‚èµ·çš„çº¿ç¨‹ï¼Œè·Ÿ suspend å¯¹åº”ã€‚ çº¿ç¨‹æ± Java ä¸­å…³äºŽçº¿ç¨‹æ± çš„ç»§æ‰¿å…³ç³»å¦‚ä¸‹ Executor æ˜¯ä¸€ä¸ªé¡¶å±‚æŽ¥å£ï¼Œå…¶ä¸­åªå£°æ˜Žäº†ä¸€ä¸ªæ–¹æ³•execute(Runnable)ï¼Œç”¨æ¥æ‰§è¡Œä¼ è¿›åŽ»çš„ä»»åŠ¡ ExecutorService æŽ¥å£ç»§æ‰¿äº† Executor æŽ¥å£ï¼Œå¹¶å£°æ˜Žäº†ä¸€äº›æ–¹æ³•ï¼šsubmitã€invokeAllã€invokeAnyä»¥åŠshutDown ç­‰ æŠ½è±¡ç±» AbstractExecutorService å®žçŽ°äº† ExecutorService æŽ¥å£ï¼ŒåŸºæœ¬å®žçŽ°äº† ExecutorService ä¸­å£°æ˜Žçš„æ‰€æœ‰æ–¹æ³• ThreadPoolExecutor ç»§æ‰¿äº†ç±» AbstractExecutorServiceï¼Œæ˜¯çº¿ç¨‹æ± å®žçŽ°ç±»ï¼Œæž„é€ æ–¹æ³•å¦‚ä¸‹123456789101112131415161718192021public ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue, ThreadFactory threadFactory, RejectedExecutionHandler handler) &#123; if (corePoolSize &lt; 0 || maximumPoolSize &lt;= 0 || maximumPoolSize &lt; corePoolSize || keepAliveTime &lt; 0) throw new IllegalArgumentException(); if (workQueue == null || threadFactory == null || handler == null) throw new NullPointerException(); this.corePoolSize = corePoolSize; this.maximumPoolSize = maximumPoolSize; this.workQueue = workQueue; this.keepAliveTime = unit.toNanos(keepAliveTime); this.threadFactory = threadFactory; this.handler = handler;&#125; corePoolSizeï¼šæ ¸å¿ƒæ± çš„å¤§å°ï¼Œåˆ›å»ºäº†çº¿ç¨‹æ± åŽï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œçº¿ç¨‹æ± ä¸­å¹¶æ²¡æœ‰ä»»ä½•çº¿ç¨‹ï¼Œè€Œæ˜¯ç­‰å¾…æœ‰ä»»åŠ¡åˆ°æ¥æ‰åˆ›å»ºçº¿ç¨‹åŽ»æ‰§è¡Œä»»åŠ¡ï¼Œé™¤éžè°ƒç”¨prestartAllCoreThreadsæˆ–è€…prestartCoreThreadæ–¹æ³•é¢„åˆ›å»ºçº¿ç¨‹ï¼Œå³åœ¨æ²¡æœ‰ä»»åŠ¡åˆ°æ¥ä¹‹å‰å°±åˆ›å»º corePoolSize ä¸ªçº¿ç¨‹æˆ–è€…ä¸€ä¸ªçº¿ç¨‹ã€‚å½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ç›®è¾¾åˆ° corePoolSize åŽï¼Œåˆ°è¾¾çš„ä»»åŠ¡ä¼šè¢«æ”¾åˆ°ç¼“å­˜é˜Ÿåˆ—ä¸­ maximumPoolSizeï¼šçº¿ç¨‹æ± æœ€å¤§çº¿ç¨‹æ•°ï¼Œè¡¨ç¤ºåœ¨çº¿ç¨‹æ± ä¸­æœ€å¤šèƒ½åˆ›å»ºå¤šå°‘ä¸ªçº¿ç¨‹ keepAliveTimeï¼šçº¿ç¨‹æ²¡æœ‰ä»»åŠ¡æ‰§è¡Œæ—¶æœ€å¤šä¿æŒå¤šä¹…æ—¶é—´ä¼šç»ˆæ­¢ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°å¤§äºŽ corePoolSize æ—¶ï¼Œå¦‚æžœä¸€ä¸ªçº¿ç¨‹ç©ºé—²çš„æ—¶é—´è¾¾åˆ° keepAliveTimeï¼Œå°±ä¼šç»ˆæ­¢ï¼Œç›´åˆ°çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ä¸è¶…è¿‡ corePoolSizeã€‚ä½†å¦‚æžœè°ƒç”¨äº†allowCoreThreadTimeOut(boolean)æ–¹æ³•ï¼Œå³ä½¿çº¿ç¨‹æ•°ä¸å¤§äºŽ corePoolSizeï¼Œè¯¥å‚æ•°ä¹Ÿä¼šèµ·ä½œç”¨ï¼Œç›´åˆ°çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ä¸º0 unitï¼šå‚æ•°keepAliveTimeçš„æ—¶é—´å•ä½ï¼Œæœ‰7ç§å–å€¼ 1234567TimeUnit.DAYS; //å¤©TimeUnit.HOURS; //å°æ—¶TimeUnit.MINUTES; //åˆ†é’ŸTimeUnit.SECONDS; //ç§’TimeUnit.MILLISECONDS; //æ¯«ç§’TimeUnit.MICROSECONDS; //å¾®å¦™TimeUnit.NANOSECONDS; //çº³ç§’ workQueueï¼šé˜»å¡žé˜Ÿåˆ—ï¼Œç”¨æ¥å­˜å‚¨ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡ï¼Œä¼šå¯¹çº¿ç¨‹æ± çš„è¿è¡Œè¿‡ç¨‹äº§ç”Ÿé‡å¤§å½±å“ã€‚ä¸€èˆ¬æ¥è¯´æœ‰ä»¥ä¸‹å‡ ç§é€‰æ‹©ï¼š 123ArrayBlockingQueue;LinkedBlockingQueue;SynchronousQueue; threadFactoryï¼šçº¿ç¨‹å·¥åŽ‚ï¼Œä¸»è¦ç”¨æ¥åˆ›å»ºçº¿ç¨‹ handlerï¼šè¡¨ç¤ºå½“æ‹’ç»å¤„ç†ä»»åŠ¡æ—¶çš„ç­–ç•¥ï¼Œæœ‰ä»¥ä¸‹å››ç§é€‰æ‹©ï¼š1234ThreadPoolExecutor.AbortPolicyï¼šä¸¢å¼ƒä»»åŠ¡å¹¶æŠ›å‡º RejectedExecutionException å¼‚å¸¸ã€‚ ThreadPoolExecutor.DiscardPolicyï¼šä¹Ÿæ˜¯ä¸¢å¼ƒä»»åŠ¡ï¼Œä½†æ˜¯ä¸æŠ›å‡ºå¼‚å¸¸ã€‚ ThreadPoolExecutor.DiscardOldestPolicyï¼šä¸¢å¼ƒé˜Ÿåˆ—æœ€å‰é¢çš„ä»»åŠ¡ï¼Œç„¶åŽé‡æ–°å°è¯•æ‰§è¡Œä»»åŠ¡ï¼ˆé‡å¤æ­¤è¿‡ç¨‹ï¼‰ThreadPoolExecutor.CallerRunsPolicyï¼šç”±è°ƒç”¨çº¿ç¨‹å¤„ç†è¯¥ä»»åŠ¡ ä¸ºä½•ä½¿ç”¨ é™ä½Žèµ„æºæ¶ˆè€—å¯ä»¥é‡å¤åˆ©ç”¨å·²åˆ›å»ºçš„çº¿ç¨‹é™ä½Žçº¿ç¨‹åˆ›å»ºå’Œé”€æ¯é€ æˆçš„æ¶ˆè€—ã€‚ æé«˜å“åº”é€Ÿåº¦å½“ä»»åŠ¡åˆ°è¾¾æ—¶ï¼Œä»»åŠ¡å¯ä»¥ä¸éœ€è¦ç­‰åˆ°çº¿ç¨‹åˆ›å»ºå°±èƒ½ç«‹å³æ‰§è¡Œã€‚ æé«˜çº¿ç¨‹çš„å¯ç®¡ç†æ€§ çº¿ç¨‹æ˜¯ç¨€ç¼ºèµ„æºï¼Œå¦‚æžœæ— é™åˆ¶åœ°åˆ›å»ºï¼Œä¸ä»…ä¼šæ¶ˆè€—ç³»ç»Ÿèµ„æºï¼Œè¿˜ä¼šé™ä½Žç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥è¿›è¡Œç»Ÿä¸€åˆ†é…ã€è°ƒä¼˜å’Œç›‘æŽ§ å¦‚ä½•ä½¿ç”¨å®žé™…ä¸Šæ–°å»ºçº¿ç¨‹æ± éƒ½é€šè¿‡å·¥åŽ‚ç±» Executors ç±»å®žçŽ°ï¼Œå…¶ä¸­å®šä¹‰ä¸€äº›æ–°å»º ThreadPoolExecutor å®žä¾‹çš„å·¥åŽ‚æ–¹æ³•12345678910111213141516171819202122232425262728293031323334353637//åˆ›å»ºå¯å®¹çº³å›ºå®šæ•°é‡çº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œæ¯ä¸ªçº¿ç¨‹çš„å­˜æ´»æ—¶é—´æ˜¯æ— é™çš„//çº¿ç¨‹æ± æ»¡äº†å°±ä¸å†æ·»åŠ çº¿ç¨‹ï¼›//å¦‚æžœæ± ä¸­çš„æ‰€æœ‰çº¿ç¨‹å‡åœ¨ç¹å¿™çŠ¶æ€ï¼Œå¯¹äºŽæ–°ä»»åŠ¡ä¼šè¿›å…¥é˜»å¡žé˜Ÿåˆ—ä¸­(æ— ç•Œçš„é˜»å¡žé˜Ÿåˆ—)public static ExecutorService newFixedThreadPool(int nThreads, ThreadFactory threadFactory) &#123; return new ThreadPoolExecutor(nThreads, nThreads, 0L, TimeUnit.MILLISECONDS, new LinkedBlockingQueue&lt;Runnable&gt;(), threadFactory);&#125;//æœ‰æ–°ä»»åŠ¡åˆ°æ¥ï¼Œåˆ™æ’å…¥åˆ°SynchronousQueueä¸­ï¼Œç”±äºŽSynchronousQueueæ˜¯åŒæ­¥é˜Ÿåˆ—//å› æ­¤ä¼šåœ¨æ± ä¸­å¯»æ‰¾å¯ç”¨çº¿ç¨‹æ¥æ‰§è¡Œï¼Œè‹¥æœ‰å¯ä»¥çº¿ç¨‹åˆ™æ‰§è¡Œï¼Œè‹¥æ²¡æœ‰å¯ç”¨çº¿ç¨‹åˆ™åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œè¯¥ä»»åŠ¡//è‹¥æ± ä¸­çº¿ç¨‹ç©ºé—²æ—¶é—´è¶…è¿‡æŒ‡å®šå¤§å°ï¼Œåˆ™è¯¥çº¿ç¨‹ä¼šè¢«é”€æ¯ã€‚public static ExecutorService newCachedThreadPool(ThreadFactory threadFactory) &#123; return new ThreadPoolExecutor(0, Integer.MAX_VALUE, 60L, TimeUnit.SECONDS, new SynchronousQueue&lt;Runnable&gt;(), threadFactory);&#125;//åˆ›å»ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œä¸”çº¿ç¨‹çš„å­˜æ´»æ—¶é—´æ˜¯æ— é™çš„//å½“è¯¥çº¿ç¨‹æ­£ç¹å¿™æ—¶ï¼Œå¯¹äºŽæ–°ä»»åŠ¡ä¼šè¿›å…¥é˜»å¡žé˜Ÿåˆ—ä¸­(æ— ç•Œçš„é˜»å¡žé˜Ÿåˆ—)public static ExecutorService newSingleThreadExecutor(ThreadFactory threadFactory) &#123; return new FinalizableDelegatedExecutorService (new ThreadPoolExecutor(1, 1, 0L, TimeUnit.MILLISECONDS, new LinkedBlockingQueue&lt;Runnable&gt;(), threadFactory));&#125;//åˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°çš„çº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ± å†…çº¿ç¨‹å­˜æ´»æ—¶é—´æ— é™åˆ¶ï¼Œçº¿ç¨‹æ± å¯ä»¥æ”¯æŒå®šæ—¶åŠå‘¨æœŸæ€§ä»»åŠ¡æ‰§è¡Œ//å¦‚æžœæ‰€æœ‰çº¿ç¨‹å‡å¤„äºŽç¹å¿™çŠ¶æ€ï¼Œå¯¹äºŽæ–°ä»»åŠ¡ä¼šè¿›å…¥DelayedWorkQueueé˜Ÿåˆ—ä¸­//è¿™æ˜¯ä¸€ç§æŒ‰ç…§è¶…æ—¶æ—¶é—´æŽ’åºçš„é˜Ÿåˆ—ç»“æž„public static ScheduledExecutorService newScheduledThreadPool( int corePoolSize, ThreadFactory threadFactory) &#123; return new ScheduledThreadPoolExecutor(corePoolSize, threadFactory);&#125; ThreadPoolExecutor ä¸­æ¯”è¾ƒé‡è¦çš„æ–¹æ³• æ–¹æ³• æè¿° execute() å‘çº¿ç¨‹æ± æäº¤ä¸€ä¸ªä»»åŠ¡ï¼Œäº¤ç”±çº¿ç¨‹æ± åŽ»æ‰§è¡Œ submit() å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡çš„ï¼Œèƒ½å¤Ÿè¿”å›žä»»åŠ¡æ‰§è¡Œçš„ç»“æžœï¼ˆåˆ©ç”¨ Futureï¼‰ shutdown() å…³é—­çº¿ç¨‹æ±  shutdownNow() å…³é—­çº¿ç¨‹æ±  è¿˜æœ‰å…¶ä»–çš„æ–¹æ³•æ¯”å¦‚ï¼šgetQueue()ã€getPoolSize() ã€getActiveCount()ã€getCompletedTaskCount()ç­‰ç”¨æ¥èŽ·å–çº¿ç¨‹æ± çš„ç›¸å…³å±žæ€§ã€‚ ç®€å•ä½¿ç”¨1234567public static void main(String[] args) &#123; ExecutorService executor = Executors.newSingleThreadExecutor(); System.out.println(Thread.currentThread()); executor.execute(()-&gt; &#123; System.out.println(Thread.currentThread()); &#125;);&#125; æŽ§åˆ¶å°è¾“å‡º12Thread[main,5,main]Thread[pool-1-thread-1,5,main] å·¥ä½œåŽŸç†è§‚å¯Ÿ ThreadPoolExecutor ä¸­çš„executeæ–¹æ³•1234567891011121314151617181920212223242526public void execute(Runnable command) &#123; if (command == null) throw new NullPointerException(); /** * ä¸€ã€åˆ¤æ–­å½“å‰æ´»è·ƒçº¿ç¨‹æ•°æ˜¯å¦å°äºŽ corePoolSizeï¼Œå¦‚æžœå°äºŽï¼Œè°ƒç”¨ addWorker åˆ›å»ºçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ * äºŒã€å¦‚æžœå¤§äºŽ corePoolSizeï¼Œå°†ä»»åŠ¡æ·»åŠ åˆ° workQueue é˜Ÿåˆ—ã€‚ * ä¸‰ã€å¦‚æžœåŠ å…¥ workQueue å¤±è´¥ï¼Œåˆ™åˆ›å»ºçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œ * å¦‚æžœåˆ›å»ºçº¿ç¨‹å¤±è´¥(å½“å‰çº¿ç¨‹æ•°å¤§äºŽmaximumPoolSize)ï¼Œå°±ä¼šè°ƒç”¨reject(å†…éƒ¨ç”¨handler)å¤„ç†æ‹’ç»ä»»åŠ¡ã€‚ */ int c = ctl.get(); if (workerCountOf(c) &lt; corePoolSize) &#123; if (addWorker(command, true)) return; c = ctl.get(); &#125; if (isRunning(c) &amp;&amp; workQueue.offer(command)) &#123; int recheck = ctl.get(); if (! isRunning(recheck) &amp;&amp; remove(command)) reject(command); else if (workerCountOf(recheck) == 0) addWorker(null, false); &#125; else if (!addWorker(command, false)) reject(command); &#125; è·Ÿè¸ªaddWorkeræ–¹æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566private boolean addWorker(Runnable firstTask, boolean core) &#123; retry: for (int c = ctl.get();;) &#123; // Check if queue empty only if necessary. if (runStateAtLeast(c, SHUTDOWN) &amp;&amp; (runStateAtLeast(c, STOP) || firstTask != null || workQueue.isEmpty())) return false; for (;;) &#123; /* *åœ¨åˆ›å»ºéžæ ¸å¿ƒçº¿ç¨‹ï¼Œå³coreç­‰äºŽfalseæ—¶ã€‚åˆ¤æ–­å½“å‰çº¿ç¨‹æ•°æ˜¯å¦å¤§äºŽç­‰äºŽmaximumPoolSizeï¼Œ *å¦‚æžœå¤§äºŽç­‰äºŽåˆ™è¿”å›žfalseï¼Œå³ä¸Šè¾¹è¯´çš„ç¬¬ä¸‰æ­¥ä¸­åˆ›å»ºçº¿ç¨‹å¤±è´¥çš„æƒ…å†µ */ if (workerCountOf(c) &gt;= ((core ? corePoolSize : maximumPoolSize) &amp; COUNT_MASK)) return false; if (compareAndIncrementWorkerCount(c)) break retry; c = ctl.get(); // Re-read ctl if (runStateAtLeast(c, SHUTDOWN)) continue retry; // else CAS failed due to workerCount change; retry inner loop &#125; &#125; boolean workerStarted = false; boolean workerAdded = false; Worker w = null; try &#123; /* * åˆ›å»ºWorkeræ—¶ä¼šè°ƒç”¨threadFactoryæ¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ã€‚ * ä¸Šè¾¹çš„ç¬¬äºŒæ­¥ä¸­ä¸­å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ä¼šè§¦å‘Workerçš„runæ–¹æ³•è¢«çº¿ç¨‹è°ƒç”¨ã€‚ */ w = new Worker(firstTask); final Thread t = w.thread; if (t != null) &#123; final ReentrantLock mainLock = this.mainLock; mainLock.lock(); try &#123; int c = ctl.get(); if (isRunning(c) || (runStateLessThan(c, STOP) &amp;&amp; firstTask == null)) &#123; if (t.isAlive()) // precheck that t is startable throw new IllegalThreadStateException(); workers.add(w); int s = workers.size(); if (s &gt; largestPoolSize) largestPoolSize = s; workerAdded = true; &#125; &#125; finally &#123; mainLock.unlock(); &#125; if (workerAdded) &#123; t.start(); workerStarted = true; &#125; &#125; &#125; finally &#123; if (! workerStarted) addWorkerFailed(w); &#125; return workerStarted;&#125; æ–°å»º Work ï¼ŒåŒæ—¶ä¹Ÿä¼šåˆ©ç”¨å·¥åŽ‚ç±»å®žä¾‹åŒ–ä¸€ä¸ªçº¿ç¨‹12345Worker(Runnable firstTask) &#123; setState(-1); // inhibit interrupts until runWorker this.firstTask = firstTask; this.thread = getThreadFactory().newThread(this);&#125; å¦‚æžœ workerAddedï¼Œè°ƒç”¨t.start()123public void run() &#123; runWorker(this);&#125; è·Ÿè¸ªrunWorker123456789101112131415161718192021222324252627282930313233final void runWorker(Worker w) &#123; Thread wt = Thread.currentThread(); Runnable task = w.firstTask; w.firstTask = null; w.unlock(); // allow interrupts boolean completedAbruptly = true; try &#123; while (task != null || (task = getTask()) != null) &#123; if ((runStateAtLeast(ctl.get(), STOP) || (Thread.interrupted() &amp;&amp; runStateAtLeast(ctl.get(), STOP))) &amp;&amp; !wt.isInterrupted()) wt.interrupt(); try &#123; beforeExecute(wt, task); try &#123; task.run(); afterExecute(task, null); &#125; catch (Throwable ex) &#123; afterExecute(task, ex); throw ex; &#125; &#125; finally &#123; task = null; w.completedTasks++; w.unlock(); &#125; &#125; completedAbruptly = false; &#125; finally &#123; processWorkerExit(w, completedAbruptly); &#125;&#125; å¯ä»¥çœ‹åˆ°getTaskæ–¹æ³•ä¸æ–­ä»Ž workerQueue ä¸­è¯»å–ä»»åŠ¡ç„¶åŽæ‰§è¡Œã€‚åªè¦getTaskæ–¹æ³•ä¸è¿”å›ž nullï¼Œå¾ªçŽ¯å°±ä¸ä¼šé€€å‡ºã€‚1234567891011121314151617181920212223242526272829303132333435363738private Runnable getTask() &#123; boolean timedOut = false; // Did the last poll() time out? for (;;) &#123; int c = ctl.get(); if (runStateAtLeast(c, SHUTDOWN) &amp;&amp; (runStateAtLeast(c, STOP) || workQueue.isEmpty())) &#123; decrementWorkerCount(); return null; &#125; int wc = workerCountOf(c); //æ˜¯åˆ¤æ–­å½“å‰çº¿ç¨‹æ•°æ˜¯å¦å¤§äºŽ corePoolSize boolean timed = allowCoreThreadTimeOut || wc &gt; corePoolSize; if ((wc &gt; maximumPoolSize || (timed &amp;&amp; timedOut)) &amp;&amp; (wc &gt; 1 || workQueue.isEmpty())) &#123; if (compareAndDecrementWorkerCount(c)) return null; continue; &#125; /* * å¦‚æžœå½“å‰çº¿ç¨‹æ•°å¤§äºŽ corePoolSizeï¼Œè°ƒç”¨ workQueue çš„pollæ–¹æ³•èŽ·å–ä»»åŠ¡ * è¶…æ—¶æ—¶é—´ä¸º keepAliveTimeã€‚å¦‚æžœè¶…æ—¶ï¼Œpollè¿”å›žäº†nullï¼Œä¸Šè¾¹çš„whileå¾ªåºå°±ä¼šé€€å‡º * å¦‚æžœå½“å‰çº¿ç¨‹æ•°å°äºŽ corePoolSizeï¼Œè°ƒç”¨ workQueue çš„takeæ–¹æ³•é˜»å¡žå½“å‰ */ try &#123; Runnable r = timed ? workQueue.poll(keepAliveTime, TimeUnit.NANOSECONDS) : workQueue.take(); if (r != null) return r; timedOut = true; &#125; catch (InterruptedException retry) &#123; timedOut = false; &#125; &#125;&#125; æœ€åŽç”¨ä¸€å¼ å›¾æ€»ç»“ä¸Šè¿°è¿‡ç¨‹]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>å¤šçº¿ç¨‹</tag>
        <tag>çº¿ç¨‹æ± </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java æ•°æ®åº“çŸ¥è¯†æ•´ç†]]></title>
    <url>%2FJava-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[ã€Šå‰‘æŒ‡offerã€‹é¢˜ç›® Java å®žçŽ°]]></title>
    <url>%2F%E3%80%8A%E5%89%91%E6%8C%87offer%E3%80%8B%E9%A2%98%E7%9B%AE-Java-%E5%AE%9E%E7%8E%B0%2F</url>
    <content type="text"><![CDATA[Problem1ï¼šå•ä¾‹æ¨¡å¼å®žçŽ°12345678910111213141516public class Singleton &#123; private volatile static Singleton singleton; private Singleton ()&#123;&#125; public static Singleton getSingleton() &#123; if (singleton == null) &#123; synchronized (Singleton.class) &#123; if (singleton == null) &#123; singleton = new Singleton(); &#125; &#125; &#125; return singleton; &#125; &#125; Problem2ï¼šäºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾åœ¨ä¸€ä¸ªäºŒç»´æ•°ç»„ä¸­ï¼Œæ¯ä¸€è¡Œéƒ½æŒ‰ç…§ä»Žå·¦åˆ°å³é€’å¢žçš„é¡ºåºæŽ’åºï¼Œæ¯ä¸€åˆ—éƒ½æŒ‰ç…§ä»Žä¸Šåˆ°ä¸‹é€’å¢žçš„é¡ºåºæŽ’åºã€‚è¯·å®Œæˆä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥è¿™æ ·çš„ä¸€ä¸ªäºŒç»´æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°ï¼Œåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å«æœ‰è¯¥æ•´æ•°ã€‚ 12345678910111213141516171819202122 /** * ä»ŽäºŒç»´æ•°ç»„çš„å³ä¸Šè§’å¼€å§‹é€‰å–ä¸Ž key æ¯”è¾ƒçš„æ•´æ•° * column çš„å˜åŒ–:arr[0].length - 1 ---&gt; 0 * row çš„å˜åŒ– 0 ---&gt; arr.length * * @param arr * @param key */public static boolean find(int[][] arr, int key) &#123; int col = arr[0].length - 1; int row = 0; while (col &gt;= 0 &amp;&amp; row &lt; arr.length) &#123; if (arr[row][col] == key) &#123; return true; &#125; else if (arr[row][col] &gt; key) &#123; //å¤§äºŽæŸ¥æ‰¾å€¼ï¼Œåˆ™å¾€å‰æŽ¨ä¸€åˆ— col--; &#125; else &#123; //å°äºŽæŸ¥æ‰¾å€¼ï¼Œåˆ™å¾€ä¸‹æŽ¨ä¸€è¡Œ row++; &#125; &#125; return false;&#125; Problem3ï¼šæ›¿æ¢ç©ºæ ¼è¯·å®žçŽ°ä¸€ä¸ªå‡½æ•°ï¼Œå°†å­—ç¬¦ä¸²çš„æ¯ä¸ªç©ºæ ¼æ›¿æ¢ä¸ºâ€%20â€ã€‚ä¾‹å¦‚è¾“å…¥We are happyï¼Œåˆ™è¾“å‡ºWe%20are%20happyã€‚ 1234567891011121314151617181920/** * ä½¿ç”¨ StringBuilder * * @param str * @return */public static String replace(String str) &#123; if (str.isEmpty()) &#123; return ""; &#125; StringBuilder builder = new StringBuilder(); for (int i = 0; i &lt; str.length(); i++) &#123; if (str.charAt(i) == ' ') &#123; builder.append("%20"); &#125; else &#123; builder.append(str.charAt(i)); &#125; &#125; return builder.toString();&#125; Problem4ï¼šä»Žå°¾åˆ°å¤´æ‰“å°é“¾è¡¨è¾“å…¥ä¸€ä¸ªé“¾è¡¨çš„å¤´ç»“ç‚¹ï¼ŒæŒ‰ç…§ä»Žå°¾åˆ°å¤´çš„é¡ºåºæ‰“å°å‡ºæ¯ä¸ªèŠ‚ç‚¹çš„å€¼ 12345678910111213141516171819202122232425262728293031static class ListNode&lt;T&gt; &#123; T value; ListNode next; public ListNode(T value) &#123; this.value = value; &#125;&#125;/** * ä½¿ç”¨æ ˆå®žçŽ° * * @param headNode */public static void printListReverse(ListNode headNode) &#123; Stack&lt;ListNode&gt; stack = new Stack&lt;&gt;(); while (headNode != null) &#123; stack.push(headNode); headNode = headNode.next; &#125; while (!stack.empty()) &#123; System.out.println(stack.pop().value + " "); &#125;&#125;public static void main(String[] args) &#123; ListNode&lt;Integer&gt; node = new ListNode&lt;&gt;(1); node.next = new ListNode&lt;&gt;(2); node.next.next = new ListNode&lt;&gt;(3); printListReverse(node);&#125; Problem5ï¼šé‡å»ºäºŒå‰æ ‘è¾“å…¥æŸäºŒå‰æ ‘çš„å‰åºéåŽ†å’Œä¸­åºéåŽ†ç»“æžœï¼Œè¯·é‡å»ºå‡ºè¯¥äºŒå‰æ ‘ã€‚ å‡è®¾è¾“å…¥çš„å‰åºéåŽ†å’Œä¸­åºéåŽ†çš„ç»“æžœä¸­éƒ½ä¸åŒ…å«é‡å¤çš„æ•°å­—ã€‚ ä¾‹å¦‚è¾“å…¥å‰åºéåŽ†åºåˆ—ï¼š {1, 2, 4, 7, 3, 5, 6, 8} ä¸­åºéåŽ†åºåˆ—ï¼š{4, 7, 2, 1, 5, 3, 8, 6} é‡å»ºå‡ºæ‰€ç¤ºäºŒå‰æ ‘å¹¶ä¸”è¾“å‡ºå®ƒçš„å¤´ç»“ç‚¹ã€‚ 1234567 1 / \ 2 3 / / \4 5 6 \ / 7 8 çŸ¥è¯†ç‚¹è¡¥å…… å‰åºéåŽ†ï¼šå…ˆè®¿é—®æ ¹èŠ‚ç‚¹ï¼Œå†è®¿é—®å·¦å­ç»“ç‚¹ï¼Œæœ€åŽè®¿é—®å³å­ç»“ç‚¹ï¼›ï¼ˆæ ¹å·¦å³ï¼‰ ä¸­åºéåŽ†ï¼šå…ˆè®¿é—®å·¦å­ç»“ç‚¹ï¼Œå†è®¿é—®æ ¹ç»“ç‚¹ï¼Œæœ€åŽè®¿é—®å³å­ç»“ç‚¹ï¼›ï¼ˆå·¦æ ¹å³ï¼‰ åŽåºéåŽ†ï¼šå…ˆè®¿é—®å·¦å­ç»“ç‚¹ï¼Œå†è®¿é—®å³å­ç»“ç‚¹ï¼Œæœ€åŽè®¿é—®æ ¹ç»“ç‚¹ï¼›ï¼ˆå·¦å³æ ¹ï¼‰ äºŒå‰æœç´¢æ ‘ï¼šå·¦å­ç»“ç‚¹æ€»æ˜¯å°äºŽæˆ–ç­‰äºŽæ ¹ç»“ç‚¹ï¼Œè€Œå³å­ç»“ç‚¹æ€»æ˜¯å¤§äºŽæˆ–ç­‰äºŽæ ¹ç»“ç‚¹ã€‚ äºŒå‰æ ‘çš„ç‰¹ä¾‹æ˜¯å †å’Œçº¢é»‘æ ‘ã€‚ å †åˆ†ä¸ºæœ€å¤§å †å’Œæœ€å°å †ã€‚åœ¨æœ€å¤§å †ä¸­æ ¹èŠ‚ç‚¹çš„å€¼æœ€å¤§ï¼Œåœ¨æœ€å°å †ä¸­æ ¹èŠ‚ç‚¹çš„å€¼æœ€å°ã€‚ çº¢é»‘æ ‘æ˜¯æŠŠæ ‘ä¸­çš„ç»“ç‚¹å®šä¹‰ä¸ºçº¢ã€é»‘ä¸¤ç§é¢œè‰²ï¼Œå¹¶é€šè¿‡è§„åˆ™ç¡®ä¿ä»Žæ ¹ç»“ç‚¹åˆ°å¶ç»“ç‚¹çš„æœ€é•¿è·¯å¾„çš„é•¿åº¦ä¸è¶…è¿‡æœ€çŸ­è·¯å¾„çš„ä¸¤å€ã€‚ Problem6ï¼šç”¨ä¸¤ä¸ªæ ˆå®žçŽ°é˜Ÿåˆ—ç”¨ä¸¤ä¸ªæ ˆå®žçŽ°ä¸€ä¸ªé˜Ÿåˆ—ã€‚é˜Ÿåˆ—çš„å£°æ˜Žå¦‚ä¸‹ï¼Œè¯·å®žçŽ°å®ƒçš„ä¸¤ä¸ªå‡½æ•°appendTailå’ŒdeleteHead,åˆ†åˆ«å®Œæˆåœ¨é˜Ÿåˆ—å°¾éƒ¨æ’å…¥ç»“ç‚¹å’Œåœ¨é˜Ÿåˆ—å¤´éƒ¨åˆ é™¤ç»“ç‚¹çš„åŠŸèƒ½123456789101112131415161718192021222324252627282930313233343536public class ConstructQueue &#123; /* s1 ç”¨æ¥å®žçŽ°æ”¾å…¥æ–°çš„å…ƒç´ ï¼Œç›´æŽ¥æ”¾åˆ°æ ˆé¡¶ s2 ç”¨æ¥è¾…åŠ©åˆ é™¤å…ƒç´ ï¼Œåˆ é™¤é˜Ÿå¤´æ—¶ï¼Œå…ˆå°† s1 ä¸­é™¤åº•éƒ¨å…ƒç´ ä¹‹å¤–å…¨éƒ½ç§»åˆ° s2 ç„¶åŽåˆ é™¤åº•éƒ¨å…ƒç´ ï¼Œå†å°† s2 å…ƒç´ ç§»å›ž s1 */ Stack&lt;String&gt; stack1 = new Stack&lt;&gt;(); Stack&lt;String&gt; stack2 = new Stack&lt;&gt;(); // å®žçŽ°appendTailå‡½æ•° public void appendTail(String s) &#123; stack1.push(s); &#125; // å®žçŽ°deleteHeadå‡½æ•° public String deleteHead() &#123; while (!stack1.empty()) &#123; stack2.push(stack1.pop()); &#125; String head = stack2.pop(); while (!stack2.empty()) &#123; stack1.push(stack2.pop()); &#125; return head; &#125; public static void main(String[] args) &#123; ConstructQueue queue = new ConstructQueue(); queue.appendTail("a"); queue.appendTail("b"); queue.appendTail("c"); queue.appendTail("d"); System.out.println(queue.deleteHead()); System.out.println(queue.deleteHead()); &#125;&#125; è¾“å‡ºå¦‚ä¸‹12ab Problem7ï¼šæ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—æŠŠä¸€ä¸ªæ•°ç»„æœ€å¼€å§‹çš„è‹¥å¹²ä¸ªå…ƒç´ æ¬åˆ°æ•°ç»„çš„æœ«å°¾ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæ•°ç»„çš„æ—‹è½¬ ã€‚è¾“å…¥ä¸€ä¸ªé€’å¢žæŽ’åºçš„æ•°ç»„çš„æ—‹è½¬ï¼Œè¾“å‡ºæ—‹è½¬æ•°ç»„çš„æœ€å°å…ƒç´ ã€‚ä¾‹å¦‚æ•°ç»„ {3, 4, 5, 1, 2}ä¸º{1, 2, 3, 4, 5}çš„ä¸€ä¸ªæ—‹è½¬ï¼Œè¯¥æ•°ç»„çš„æœ€å°å€¼ä¸º 1; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657public static void main(String[] args) &#123; int[] a = &#123;3, 4, 5, 1, 2&#125;; System.out.println(minNumInRotateArray(a));&#125;/** * æ³¨æ„åˆ°æ—‹è½¬ä¹‹åŽçš„æ•°ç»„å¯ä»¥åˆ’åˆ†ä¸ºä¸¤ä¸ªæŽ’åºå­æ•°ç»„ï¼Œå‰é¢çš„å­æ•°ç»„å…ƒç´ éƒ½å¤§äºŽæˆ–ç­‰äºŽåŽé¢å­æ•°ç»„çš„å…ƒç´ ã€‚ * è¿˜å¯ä»¥æ³¨æ„åˆ°æœ€å°çš„å…ƒç´ åˆšå¥½æ˜¯è¿™ä¸¤ä¸ªå­æ•°ç»„çš„åˆ†ç•Œç‚¹ã€‚åœ¨æŽ’åºæ•°ç»„ä¸­æˆ‘ä»¬å¯ä»¥ç”¨äºŒåˆ†æŸ¥æ‰¾æ³•å®žçŽ°O(logn)çš„æŸ¥æ‰¾ã€‚ * * ç”¨ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ å’Œæœ€åŽä¸€ä¸ªå…ƒç´ ã€‚æŒ‰ç…§æ—‹è½¬è§„åˆ™ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ åº”è¯¥å¤§äºŽç­‰äºŽæœ€åŽä¸€ä¸ªå…ƒç´ ã€‚ * æŽ¥ç€å¯ä»¥æ‰¾åˆ°æ•°ç»„ä¸­é—´çš„å…ƒç´ ã€‚å¦‚æžœä¸­é—´å…ƒç´ ä½äºŽå‰é¢çš„é€’å¢žæ•°ç»„ï¼Œåˆ™å®ƒåº”è¯¥å¤§äºŽç­‰äºŽç¬¬ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ ï¼Œ * æ­¤æ—¶æˆ‘ä»¬è¦æ‰¾åˆ°çš„æœ€å°å…ƒç´ è‚¯å®šåº”è¯¥ä½äºŽè¯¥ä¸­é—´å…ƒç´ çš„åŽé¢ã€‚è¿™æ ·æˆ‘ä»¬æŠŠç¬¬ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸­é—´å…ƒç´ ï¼Œä»Žè€Œç¼©å°æŸ¥æ‰¾èŒƒå›´ã€‚ * åŒç†ç¬¬äºŒä¸ªæŒ‡é’ˆçš„èŒƒå›´ä¹Ÿå°†é€æ¸ç¼©å° * * ç¬¬ä¸€ä¸ªæŒ‡é’ˆæ€»æ˜¯æŒ‡å‘å‰é¢çš„é€’å¢žæ•°ç»„å…ƒç´ ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆæ€»æ˜¯æŒ‡å‘åŽé¢çš„é€’å¢žæ•°ç»„å…ƒç´ ã€‚ * æœ€ç»ˆç¬¬ä¸€ä¸ªæŒ‡é’ˆå°†æŒ‡å‘å‰é¢çš„å­æ•°ç»„çš„æœ€åŽä¸€ä¸ªå…ƒç´ ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆå°†æŒ‡å‘åŽé¢çš„å­æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œ * å³äºŒè€…æœ€åŽæŒ‡å‘ç›¸é‚»çš„å…ƒç´ ï¼Œä¸”ç¬¬äºŒä¸ªæŒ‡é’ˆæŒ‡å‘çš„åˆšå¥½æ˜¯æœ€å°çš„å…ƒç´ â€”â€”å¾ªçŽ¯ç»“æŸæ¡ä»¶ã€‚ * * @param array */public static int minNumInRotateArray(int[] array) &#123; if (array == null) &#123; return 0; &#125; int left = 0; int right = array.length - 1; int mid = 0; while (array[left] &gt;= array[right]) &#123; if (right - left == 1) &#123; mid = right; break; &#125; mid = (left + right) / 2; // æ­¤æ—¶åº”è¯¥ç”¨é¡ºåºæŸ¥æ‰¾ï¼Œå› ä¸ºä¸ç¡®å®šarray[mid]ä½äºŽå“ªä¸ªæœ‰åºå­æ•°ç»„ if (array[left] == array[right] &amp;&amp; array[right] == array[mid]) &#123; return findInOrder(array, left, right); &#125; if (array[left] &lt;= array[mid]) &#123; left = mid; &#125; else &#123; right = mid; &#125; &#125; return array[mid];&#125;static int findInOrder(int[] array, int left, int right) &#123; int k = array[left]; for (int i = 0; i &lt; right; i++) &#123; if (array[i] &lt; k) &#123; k = array[i]; &#125; &#125; return k;&#125; Problem8ï¼šæ–æ³¢é‚£å¥‘æ•°åˆ—å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥nï¼Œæ±‚æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬né¡¹ï¼Œæ–æ³¢é‚£å¥‘æ•°åˆ—çš„å®šä¹‰å¦‚ä¸‹ï¼š n=0, f(n)=0;n=1, f(n)=1;n&gt;1, f(n) = f(n-1) + f(n-2). 123456789101112131415public static void main(String[] args) &#123; for (int i = 0; i &lt; 11; i++) &#123; System.out.print(fibonacci(i) + " "); &#125;&#125;public static int fibonacci(int n) &#123; if (n == 0) &#123; return 0; &#125; if (n == 1) &#123; return 1; &#125; return fibonacci(n-1) + fibonacci(n-2);&#125; è¾“å‡ºç»“æžœ10 1 1 2 3 5 8 13 21 34 55 Problem9ï¼šäºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°è¯·å®žçŽ°ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªæ•´æ•°ï¼Œè¾“å‡ºè¯¥æ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­1çš„ä¸ªæ•°ã€‚ ä¾‹å¦‚æŠŠ9è¡¨ç¤ºæˆäºŒè¿›åˆ¶æ˜¯1001ï¼Œæœ‰2ä½æ˜¯1ï¼Œå› æ­¤å¦‚æžœè¾“å…¥9ï¼Œè¯¥å‡½æ•°è¾“å‡º2ã€‚ 12345678910111213141516171819202122public static int oneCountsOfBinary(int i) &#123; char[] chars = Integer.toBinaryString(i).toCharArray(); int count = 0; for (char c : chars) &#123; if (c == &apos;1&apos;) &#123; count++; &#125; &#125; return count;&#125;public static int _oneCountsOfBinary(int i) &#123; int count = 0; int flag = 1; while (flag != 0) &#123; if ((i &amp; flag) != 0) &#123; count++; &#125; flag = flag &lt;&lt; 1; &#125; return count;&#125; Problem10ï¼šæ•°å€¼çš„æ•´æ•°æ¬¡æ–¹ å®žçŽ°å‡½æ•°double power(double base, int exponent)ï¼Œæ±‚ base çš„ exponent æ¬¡æ–¹ã€‚ä¸èƒ½ä½¿ç”¨åº“å‡½æ•°ï¼ŒåŒæ—¶ä¸éœ€è¦è€ƒè™‘å¤§æ•°é—®é¢˜ã€‚123456789101112131415161718192021public static double power(double base, int exponent) &#123; if (base &lt;= 0) &#123; throw new RuntimeException("è¿ç®—æ— æ„ä¹‰"); &#125; if (exponent == 0) &#123; return 1; &#125; if (exponent &lt; 0) &#123; return 1 / powerUnsigned(base, -exponent); &#125; else &#123; return powerUnsigned(base, exponent); &#125;&#125;static double powerUnsigned(double base, int exponent) &#123; double result = base; for (int i = 1; i &lt; exponent; i++) &#123; result = result * base; &#125; return result;&#125; Problem11ï¼šOï¼ˆ1ï¼‰æ—¶é—´åˆ é™¤é“¾è¡¨ç»“ç‚¹ç»™å®šå•å‘é“¾è¡¨çš„å¤´æŒ‡é’ˆå’Œä¸€ä¸ªç»“ç‚¹æŒ‡é’ˆï¼Œå®šä¹‰ä¸€ä¸ªå‡½æ•°åœ¨O(1)æ—¶é—´åˆ é™¤è¯¥ç»“ç‚¹ã€‚123456789101112131415161718192021222324252627282930313233343536static class Node &#123; int value; Node next; public Node(int value) &#123; this.value = value; &#125;&#125;/** * åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œç›´æŽ¥ç½®ç©º * å½“å¾…åˆ é™¤èŠ‚ç‚¹ä¸ºå°¾èŠ‚ç‚¹æ—¶ï¼Œéœ€è¦éåŽ†å¾—åˆ°ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œç„¶åŽè®©å¾—åˆ°çš„èŠ‚ç‚¹çš„next ä¸º null * å¦åˆ™ p-&gt;next çš„å€¼èµ‹å€¼ç»™pï¼ŒæŠŠp-&gt;nextåˆ é™¤æŽ‰ * * @param head * @param delNode */public static void deleteNode(Node head, Node delNode) &#123; if (head == null || delNode == null) &#123; return; &#125; if (head == delNode) &#123; head = null; return; &#125; if (delNode.next == null) &#123; Node temp = head; while (temp.next != delNode) &#123; temp = temp.next; &#125; temp.next = null; return; &#125; delNode.value = delNode.next.value; delNode.next = delNode.next.next;&#125; Problem12ï¼šè°ƒæ•´æ•°ç»„ä¸­å¥‡æ•°å’Œå¶æ•°çš„å…ˆåŽé¡ºåºè¾“å…¥ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œå®žçŽ°ä¸€ä¸ªå‡½æ•°æ¥è°ƒæ•´è¯¥æ•°ç»„ä¸­æ•°å­—çš„é¡ºåºï¼Œä½¿å¾—æ‰€æœ‰ å¥‡æ•°ä½äºŽæ•°ç»„çš„å‰åŠéƒ¨åˆ†ï¼Œæ‰€æœ‰å¶æ•°ä½äºŽæ•°ç»„çš„åŽåŠéƒ¨åˆ†;123456789101112131415161718192021public static void orderArray(int[] array) &#123; int left = 0; int right = array.length - 1; while (left &lt; right) &#123; while (left &lt; right &amp;&amp; !isEven(array[left])) &#123; left ++; &#125; while (left &lt; right &amp;&amp; isEven(array[right])) &#123; right --; &#125; if (left &lt; right) &#123; int temp = array[left]; array[left] = array[right]; array[right] = temp; &#125; &#125;&#125;static boolean isEven(int i) &#123; return ((i &amp; 1) == 0);&#125; Problem13ï¼šé“¾è¡¨ä¸­å€’æ•°ç¬¬Kä¸ªç»“ç‚¹è¾“å…¥ä¸€ä¸ªé“¾è¡¨ï¼Œè¾“å‡ºè¯¥é“¾è¡¨ä¸­å€’æ•°ç¬¬Kä¸ªç»“ç‚¹ã€‚ä¸ºäº†ç¬¦åˆå¤§å¤šæ•°äººçš„ä¹  æƒ¯ï¼Œä»Ž1å¼€å§‹è®¡æ•°ï¼Œå³é“¾è¡¨çš„å°¾ç»“ç‚¹æ˜¯å€’æ•°ç¬¬ä¸€ä¸ªç»“ç‚¹ã€‚ ä¾‹å¦‚ä¸€ä¸ªé“¾è¡¨æœ‰6ä¸ªç»“ç‚¹ï¼Œä»Žå¤´ç»“ç‚¹å¼€å§‹å®ƒä»¬çš„å€¼ä¾æ¬¡æ˜¯1ã€2ã€3ã€4ã€5ã€6ã€‚è¿™ä¸ªé“¾è¡¨çš„å€’æ•°ç¬¬ä¸‰ä¸ªç»“ç‚¹æ˜¯å€¼ä¸º4çš„ç»“ç‚¹ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738/** * ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆè§£å†³ï¼Œç¬¬ä¸€ä¸ªæŒ‡é’ˆä»Žé“¾è¡¨çš„å¤´æŒ‡é’ˆå¼€å§‹éåŽ†å‘å‰èµ°k-1ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆä¿æŒä¸åŠ¨ * ä»Žç¬¬kæ­¥å¼€å§‹ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆä¹Ÿå¼€å§‹ä»Žé“¾è¡¨çš„å¤´æŒ‡é’ˆå¼€å§‹éåŽ† * ç”±äºŽä¸¤ä¸ªæŒ‡é’ˆçš„è·ç¦»ä¿æŒåœ¨k-1ï¼Œå½“ç¬¬ä¸€ä¸ªæŒ‡é’ˆåˆ°è¾¾é“¾è¡¨çš„å°¾ç»“ç‚¹æ—¶ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆåˆšå¥½åœ¨å€’æ•°ç¬¬kä¸ªç»“ç‚¹ä¸Š * * @param head å¤´ç»“ç‚¹ * @param k å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹ */public static int find(ListNode head, int k)&#123; if (head == null) &#123; return 0; &#125; ListNode first = head; ListNode second = head; for (int i = 1; i &lt; k; i++) &#123; if (first.next != null) &#123; first = first.next; &#125; else &#123; return 0; &#125; &#125; System.out.println(first.val); while (first.next != null) &#123; first = first.next; second = second.next; &#125; System.out.println(first.val); return second.val;&#125;static class ListNode &#123; int val; ListNode next; public ListNode(int val) &#123; this.val = val; &#125;&#125; Problem14ï¼šç¿»è½¬é“¾è¡¨å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªé“¾è¡¨çš„å¤´ç»“ç‚¹ï¼Œåè½¬è¯¥é“¾è¡¨å¹¶è¾“å‡ºåè½¬åŽé“¾è¡¨çš„å¤´ç»“ç‚¹ 12345678910111213141516171819202122232425262728293031323334353637383940414243/** * ç¿»è½¬å•é“¾è¡¨ * * @param head åŽŸé“¾è¡¨çš„å¤´èŠ‚ç‚¹ * @return ç¿»è½¬ä¹‹åŽçš„å¤´èŠ‚ç‚¹ */public static ListNode getReversedListHead(ListNode head) &#123; if (head == null) &#123; return null; &#125; //currentèŠ‚ç‚¹æ˜¯headçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ ListNode current = head.next; //å½“å‰çš„headå˜ä¸ºé“¾è¡¨çš„å°¾ï¼Œæ‰€ä»¥nextä¸ºç©º head.next = null; while (current != null) &#123; //currentNextèŠ‚ç‚¹æ˜¯currentçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚ ListNode currentNext = current.next; //current.nextåæ–¹å‘æŒ‡å‘ä»¥å‰çš„èŠ‚ç‚¹ current.next = head; //ç§»åŠ¨headå’ŒcurrentæŒ‡é’ˆï¼Œåˆ°åŽé¢headé‡æ–°æˆä¸ºå¤´èŠ‚ç‚¹ head = current; current = currentNext; &#125; return head;&#125;/** * ç¿»è½¬å•é“¾è¡¨çš„é€’å½’å®žçŽ° * * @param head åŽŸé“¾è¡¨çš„å¤´èŠ‚ç‚¹ * @return ç¿»è½¬ä¹‹åŽçš„å¤´èŠ‚ç‚¹ */public static ListNode reverseListByRecursion(ListNode head) &#123; if (head == null || head.next == null) &#123; return head; &#125; ListNode newList = reverseListByRecursion(head.next); head.next.next = head; head.next = null; return newList;&#125; Problem15ï¼šåˆå¹¶ä¸¤ä¸ªæŽ’åºçš„é“¾è¡¨è¾“å…¥ä¸¤ä¸ªé€’å¢žæŽ’åºçš„é“¾è¡¨ï¼Œåˆå¹¶è¿™ä¸¤ä¸ªé“¾è¡¨å¹¶ä½¿æ–°é“¾è¡¨ä¸­çš„ç»“ç‚¹ä»ç„¶æ˜¯æŒ‰ç…§é€’å¢žæŽ’åºçš„ã€‚ 1234567891011121314151617public static ListNode merge(ListNode n1, ListNode n2) &#123; if (n1 == null) &#123; return n2; &#125; if (n2 == null) &#123; return n1; &#125; ListNode mergeNode = null; if (n1.val &lt; n2.val) &#123; mergeNode = n1; mergeNode.next = merge(n1.next, n2); &#125; else &#123; mergeNode = n2; mergeNode.next = merge(n1, n2.next); &#125; return mergeNode;&#125; Problem16ï¼šæ ‘çš„å­ç»“æž„åˆ¤æ–­Problem17ï¼šäºŒå‰æ ‘çš„é•œåƒProblem18ï¼šé¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µProblem19ï¼šåŒ…å«minå‡½æ•°çš„æ ˆProblem20ï¼šæ ˆçš„åŽ‹å…¥ã€å¼¹å‡ºåºåˆ—Problem21ï¼šä»Žä¸Šå¾€ä¸‹æ‰“å°äºŒå‰æ ‘Problem22ï¼šäºŒå‰æœç´¢æ ‘çš„åŽåºéåŽ†Problem23ï¼šäºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„Problem24ï¼šå­—ç¬¦ä¸²çš„æŽ’åˆ—Problem25ï¼šæ•°ç»„ä¸­å‡ºçŽ°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„æ•°å­—Problem26ï¼šè¿žç»­å­æ•°ç»„çš„æœ€å¤§å’ŒProblem27ï¼šæ•´æ•°ä¸­1å‡ºçŽ°çš„æ¬¡æ•°Problem28ï¼šæŠŠæ•°ç»„æŽ’æˆæœ€å°çš„æ•°Problem29ï¼šä¸‘æ•°Problem30ï¼šç¬¬ä¸€ä¸ªåªå‡ºçŽ°ä¸€æ¬¡çš„å­—ç¬¦Problem31ï¼šæ•°ç»„ä¸­çš„é€†åºå¯¹Problem32ï¼šä¸¤ä¸ªé“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹Problem33ï¼šäºŒå‰æ ‘çš„æ·±åº¦&amp;&amp;å¹³è¡¡äºŒå‰æ ‘åˆ¤æ–­Problem34ï¼šæ•°å­—åœ¨æŽ’åºæ•°ç»„ä¸­å‡ºçŽ°çš„æ¬¡æ•°Problem35ï¼šæ•°ç»„ä¸­åªå‡ºçŽ°ä¸€æ¬¡çš„æ•°å­—Problem36ï¼šå’Œä¸ºSçš„ä¸¤ä¸ªæ•°å­—Problem37ï¼šå’Œä¸ºSçš„è¿žç»­æ­£æ•°åºåˆ—Problem38ï¼šç¿»è½¬å•è¯çš„é¡ºåºProblem39ï¼šæ‰‘å…‹ç‰Œçš„é¡ºå­Problem40ï¼šyåœ†åœˆä¸­æœ€åŽå‰©ä¸‹çš„æ•°å­—ï¼ˆçº¦ç‘Ÿå¤«çŽ¯é—®é¢˜ï¼‰Problem41ï¼šè®¡ç®—1+2+3+ Â·Â·Â· + nProblem42ï¼šä¸ç”¨åŠ å‡ä¹˜é™¤åšåŠ æ³•Problem43ï¼šæŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°Problem44ï¼šæ•°ç»„ä¸­é‡å¤çš„æ•°å­—Problem45ï¼šæž„å»ºä¹˜ç§¯æ•°ç»„Problem46ï¼šæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…Problem47ï¼šè¡¨ç¤ºæ•°å€¼çš„å­—ç¬¦ä¸²Problem48ï¼šå­—ç¬¦æµä¸­ç¬¬ä¸€ä¸ªä¸é‡å¤çš„å­—ç¬¦Problem49ï¼šé“¾è¡¨ä¸­çŽ¯çš„å…¥å£ç»“ç‚¹Problem50ï¼šåˆ é™¤é“¾è¡¨ä¸­æ¬§å† é‡å¤çš„èŠ‚ç‚¹Problem51ï¼šäºŒå‰æ ‘çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹Problem52ï¼šæŠŠäºŒå‰æ ‘æ‰“å°æˆå¤šè¡ŒProblem53ï¼šæŒ‰ä¹‹å­—å½¢é¡ºåºæ‰“å°äºŒå‰æ ‘Problem54ï¼šåºåˆ—åŒ–äºŒå‰æ ‘Problem55ï¼šäºŒå‰æœç´¢æ ‘çš„ç¬¬Kä¸ªèŠ‚ç‚¹Problem56ï¼šæ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼å¤§å€¼]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android å¤šçº¿ç¨‹æŠ€æœ¯]]></title>
    <url>%2FAndroid-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%8A%80%E6%9C%AF%2F</url>
    <content type="text"><![CDATA[å¤šçº¿ç¨‹æŠ€æœ¯ä¸€ç›´æ˜¯è½¯ä»¶å¼€å‘ä¸­çš„é‡ç‚¹ï¼Œæœ¬æ–‡å°†ä»‹ç» Java ä¸­çš„çº¿ç¨‹å’Œçº¿ç¨‹æ± ä½¿ç”¨ï¼Œç„¶åŽå†è¯¦ç»†åˆ†æž Android ä¸­çš„å¤šçº¿ç¨‹æœºåˆ¶ï¼ŒåŒ…æ‹¬ AsyncTaskã€IntentService ä»¥åŠ HandlerThread ç­‰ç­‰ã€‚]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>å¤šçº¿ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android LruCache ç¼“å­˜è¯¦è§£]]></title>
    <url>%2FAndroid-LruCache-%E7%BC%93%E5%AD%98%E8%AF%A6%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[Android ç¼“å­˜ç­–ç•¥ä¸€èˆ¬æ¥è¯´ï¼Œç¼“å­˜ç­–ç•¥ä¸»è¦åŒ…å«ç¼“å­˜çš„æ·»åŠ ã€èŽ·å–å’Œåˆ é™¤ã€‚å¦‚ä½•æ·»åŠ å’ŒèŽ·å–ç¼“å­˜è¿™ä¸ªæ¯”è¾ƒå¥½ç†è§£ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦åˆ é™¤ç¼“å­˜å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºä¸ç®¡æ˜¯å†…å­˜ç¼“å­˜è¿˜æ˜¯ç¡¬ç›˜ç¼“å­˜ï¼Œå®ƒä»¬çš„ç¼“å­˜å¤§å°éƒ½æ˜¯æœ‰é™çš„ã€‚å½“ç¼“å­˜æ»¡äº†ä¹‹åŽï¼Œå†å‘å…¶æ·»åŠ ç¼“å­˜ï¼Œå°±éœ€è¦å…ˆåˆ é™¤æ—§çš„ç¼“å­˜ã€‚å› æ­¤ LRU ç¼“å­˜ç®—æ³•åº”è¿è€Œç”Ÿã€‚ LRUï¼ˆLeast Recently Usedï¼‰ï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯å½“ç¼“å­˜æ»¡æ—¶ï¼Œä¼˜å…ˆæ·˜æ±°é‚£äº›è¿‘æœŸæœ€å°‘ä½¿ç”¨çš„ç¼“å­˜å¯¹è±¡ï¼Œæœ‰æ•ˆçš„é¿å…äº† OOM çš„å‡ºçŽ°ã€‚Android ä¸­é‡‡ç”¨ LRU ç®—æ³•çš„å¸¸ç”¨ç¼“å­˜æœ‰ä¸¤ç§ï¼šLruCache å’Œ DisLruCacheï¼Œåˆ†åˆ«ç”¨äºŽå®žçŽ°å†…å­˜ç¼“å­˜å’Œç¡¬ç›˜ç¼“å­˜ã€‚ LRU ç¼“å­˜çš„å®žçŽ°ç±»ä¼¼äºŽä¸€ä¸ªç‰¹æ®Šçš„æ ˆï¼ŒæŠŠè®¿é—®è¿‡çš„å…ƒç´ æ”¾ç½®åˆ°æ ˆé¡¶ï¼ˆè‹¥æ ˆä¸­å­˜åœ¨ï¼Œåˆ™æ›´æ–°è‡³æ ˆé¡¶ï¼›è‹¥æ ˆä¸­ä¸å­˜åœ¨åˆ™ç›´æŽ¥å…¥æ ˆï¼‰ï¼Œç„¶åŽå¦‚æžœæ ˆä¸­å…ƒç´ æ•°é‡è¶…è¿‡é™å®šå€¼ï¼Œåˆ™åˆ é™¤æ ˆåº•å…ƒç´ ï¼ˆå³æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„å…ƒç´ ï¼‰ã€‚å¦‚ä¸‹å›¾ï¼š ä½¿ç”¨LruCache æ˜¯Android 3.1æ‰€æä¾›çš„ä¸€ä¸ªç¼“å­˜ç±»ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨ã€‚è€Œ DisLruCache ç›®å‰è¿˜ä¸æ˜¯ Android SDKçš„ä¸€éƒ¨åˆ†ï¼Œä½† Android å®˜æ–¹æ–‡æ¡£æŽ¨èä½¿ç”¨è¯¥ç®—æ³•æ¥å®žçŽ°ç¡¬ç›˜ç¼“å­˜ã€‚ è®²åˆ° LruCache ä¸å¾—ä¸æä¸€ä¸‹ LinkedHashMapï¼Œå› ä¸º LruCache ä¸­ Lru ç®—æ³•å°±æ˜¯é€šè¿‡ LinkedHashMap æ¥å®žçŽ°çš„ã€‚ LinkedHashMap ç»§æ‰¿äºŽ HashMapï¼Œä½¿ç”¨äº†ä¸€ä¸ªåŒå‘é“¾è¡¨æ¥å­˜å‚¨ Map ä¸­çš„ Entry é¡ºåºå…³ç³»ï¼Œè¿™ç§é¡ºåºæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ LRU é¡ºåºï¼Œä¸€ç§æ˜¯æ’å…¥é¡ºåºï¼Œç”±å…¶æž„é€ å‡½æ•° 1public LinkedHashMap(int initialCapacity,float loadFactor, boolean accessOrder) ä¸­çš„æœ€åŽä¸€ä¸ªå‚æ•° accessOrder æ¥æŒ‡å®šã€‚ å¯¹äºŽgetã€putã€removeç­‰æ“ä½œï¼ŒLinkedHashMap é™¤äº†è¦åš HashMap åšçš„äº‹æƒ…ï¼Œè¿˜ä¼šåšäº›è°ƒæ•´ Entry é¡ºåºé“¾è¡¨çš„å·¥ä½œã€‚LruCache ä¸­å°† LinkedHashMap çš„é¡ºåºè®¾ç½®ä¸º LRU é¡ºåºæ¥å®žçŽ° LRU ç¼“å­˜ï¼Œæ¯æ¬¡è°ƒç”¨ get(ä¹Ÿå°±æ˜¯ä»Žå†…å­˜ç¼“å­˜ä¸­å–å›¾ç‰‡)ï¼Œåˆ™å°†è¯¥å¯¹è±¡ç§»åˆ°é“¾è¡¨çš„å°¾ç«¯ã€‚è°ƒç”¨put æ’å…¥æ–°çš„å¯¹è±¡ï¼Œåˆ™å­˜å‚¨åœ¨é“¾è¡¨å°¾ç«¯ï¼Œè¿™æ ·å½“å†…å­˜ç¼“å­˜è¾¾åˆ°è®¾å®šçš„æœ€å¤§å€¼æ—¶ï¼Œå°†é“¾è¡¨å¤´éƒ¨çš„å¯¹è±¡ï¼ˆè¿‘æœŸæœ€å°‘ç”¨åˆ°çš„ï¼‰ç§»é™¤ã€‚ LruCache çš„ä½¿ç”¨éžå¸¸ç®€å•ï¼Œä»¥å›¾ç‰‡ç¼“å­˜ä¸ºä¾‹ï¼š123456789int maxMemory = (int) (Runtime.getRuntime().totalMemory()/1024);int cacheSize = maxMemory/8;mMemoryCache = new LruCache&lt;String, Bitmap&gt;(cacheSize) &#123; @Override protected int sizeOf(String key, Bitmap value) &#123; return value.getRowBytes() * value.getHeight() / 1024; &#125;&#125;; è®¾ç½®LruCacheç¼“å­˜çš„å¤§å°ï¼Œä¸€èˆ¬ä¸ºå½“å‰è¿›ç¨‹å¯ç”¨å®¹é‡çš„1/8ã€‚ é‡å†™sizeOfæ–¹æ³•ï¼Œè®¡ç®—å‡ºè¦ç¼“å­˜çš„æ¯å¼ å›¾ç‰‡çš„å¤§å°ã€‚ æ³¨æ„ï¼šç¼“å­˜çš„æ€»å®¹é‡å’Œæ¯ä¸ªç¼“å­˜å¯¹è±¡çš„å¤§å°æ‰€ç”¨å•ä½è¦ä¸€è‡´ã€‚ åŽŸç†LruCache çš„æ ¸å¿ƒæ€æƒ³å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯è¦ç»´æŠ¤ä¸€ä¸ªç¼“å­˜å¯¹è±¡åˆ—è¡¨ï¼Œå…¶ä¸­å¯¹è±¡åˆ—è¡¨çš„æŽ’åˆ—æ–¹å¼æ˜¯æŒ‰ç…§è®¿é—®é¡ºåºå®žçŽ°çš„ï¼Œå³ä¸€ç›´æ²¡è®¿é—®çš„å¯¹è±¡ä¼šæ”¾åœ¨é˜Ÿå°¾ï¼Œå³å°†è¢«æ·˜æ±°ã€‚è€Œæœ€è¿‘è®¿é—®çš„å¯¹è±¡ä¼šæ”¾åœ¨é˜Ÿå¤´ï¼Œæœ€åŽè¢«æ·˜æ±°ã€‚è¿™ä¸ªé˜Ÿåˆ—ç”± LinkedHashMap æ¥ç»´æŠ¤ã€‚LinkedHashMap ç”±æ•°ç»„+åŒå‘é“¾è¡¨çš„æ•°æ®ç»“æž„å®žçŽ°ï¼Œå…¶ä¸­åŒå‘é“¾è¡¨çš„ç»“æž„å¯ä»¥å®žçŽ°è®¿é—®é¡ºåºå’Œæ’å…¥é¡ºåºï¼Œä½¿å¾— LinkedHashMap ä¸­çš„&lt;key,value&gt;å¯¹æŒ‰ç…§ä¸€å®šé¡ºåºæŽ’åˆ—èµ·æ¥ã€‚ é€šè¿‡ä¸‹é¢çš„æž„é€ å‡½æ•°æ¥æŒ‡å®š LinkedHashMap ä¸­åŒå‘é“¾è¡¨çš„ç»“æž„æ˜¯è®¿é—®é¡ºåºè¿˜æ˜¯æ’å…¥é¡ºåºã€‚ 1234public LinkedHashMap(int initialCapacity, float loadFactor, boolean accessOrder) &#123; super(initialCapacity, loadFactor); this.accessOrder = accessOrder;&#125; accessOrder è®¾ç½®ä¸º true åˆ™ä¸ºè®¿é—®é¡ºåºï¼›ä¸º falseï¼Œåˆ™ä¸ºæ’å…¥é¡ºåºã€‚ ä»¥å…·ä½“ä¾‹å­è§£é‡Šï¼Œå½“è®¾ç½®ä¸ºtrueæ—¶ 123456789101112131415public static final void main(String[] args) &#123; LinkedHashMap&lt;Integer, Integer&gt; map = new LinkedHashMap&lt;&gt;(0, 0.75f, true); map.put(0, 0); map.put(1, 1); map.put(2, 2); map.put(3, 3); map.put(4, 4); map.put(5, 5); map.put(6, 6); map.get(1); map.get(2); for (Map.Entry&lt;Integer, Integer&gt; entry : map.entrySet()) &#123; System.out.println(entry.getKey() + ":" + entry.getValue()); &#125;&#125; è¾“å‡ºç»“æžœä¸º:12345670:03:34:45:56:61:12:2 å³æœ€è¿‘è®¿é—®çš„æœ€åŽè¾“å‡ºï¼Œæ­£å¥½æ»¡è¶³ LRU ç¼“å­˜ç®—æ³•çš„æ€æƒ³ã€‚å¯è§ LruCache çš„å·§å¦™å®žçŽ°ï¼Œå°±æ˜¯åˆ©ç”¨äº†LinkedHashMap çš„è¿™ç§æ•°æ®ç»“æž„ã€‚ ä¸‹é¢æˆ‘ä»¬åœ¨ LruCache æºç ä¸­å…·ä½“çœ‹çœ‹ï¼Œæ€Žæ ·åº”ç”¨ LinkedHashMap æ¥å®žçŽ°ç¼“å­˜çš„æ·»åŠ ï¼ŒèŽ·å¾—å’Œåˆ é™¤ æž„é€ æ–¹æ³• 1234567public LruCache(int maxSize) &#123; if (maxSize &lt;= 0) &#123; throw new IllegalArgumentException(&quot;maxSize &lt;= 0&quot;); &#125; this.maxSize = maxSize; this.map = new LinkedHashMap&lt;K, V&gt;(0, 0.75f, true);&#125; putæ–¹æ³• 12345678910111213141516171819202122232425262728public final V put(K key, V value) &#123; if (key == null || value == null) &#123; throw new NullPointerException("key == null || value == null"); &#125; V previous; synchronized (this) &#123; //æ’å…¥çš„ç¼“å­˜å¯¹è±¡å€¼åŠ 1 putCount++; //å¢žåŠ å·²æœ‰ç¼“å­˜çš„å¤§å° size += safeSizeOf(key, value); //å‘mapä¸­åŠ å…¥ç¼“å­˜å¯¹è±¡ previous = map.put(key, value); //å¦‚æžœå·²æœ‰ç¼“å­˜å¯¹è±¡ï¼Œåˆ™ç¼“å­˜å¤§å°æ¢å¤åˆ°ä¹‹å‰ if (previous != null) &#123; size -= safeSizeOf(key, previous); &#125; &#125; //entryRemoved()æ˜¯ä¸ªç©ºæ–¹æ³•ï¼Œå¯ä»¥è‡ªè¡Œå®žçŽ° if (previous != null) &#123; entryRemoved(false, key, previous, value); &#125; //è°ƒæ•´ç¼“å­˜å¤§å°(å…³é”®æ–¹æ³•) trimToSize(maxSize); return previous;&#125; å¯ä»¥çœ‹åˆ°ï¼Œæ·»åŠ è¿‡ç¼“å­˜å¯¹è±¡åŽä¼šè°ƒç”¨trimToSizeæ–¹æ³•ï¼Œæ¥åˆ¤æ–­ç¼“å­˜æ˜¯å¦å·²æ»¡ï¼Œå¦‚æžœæ»¡äº†å°±åˆ é™¤è¿‘æœŸæœ€å°‘ä½¿ç”¨çš„å¯¹è±¡ trimToSizeæ–¹æ³• 1234567891011121314151617181920212223242526272829public void trimToSize(int maxSize) &#123; //æ­»å¾ªçŽ¯ while (true) &#123; K key; V value; synchronized (this) &#123; if (size &lt; 0 || (map.isEmpty() &amp;&amp; size != 0)) &#123; throw new IllegalStateException(getClass().getName() + ".sizeOf() is reporting inconsistent results!"); &#125; //å¦‚æžœç¼“å­˜å¤§å°sizeå°äºŽæœ€å¤§ç¼“å­˜ï¼Œæˆ–è€…mapä¸ºç©ºï¼Œä¸éœ€è¦å†åˆ é™¤ç¼“å­˜å¯¹è±¡ï¼Œè·³å‡ºå¾ªçŽ¯ if (size &lt;= maxSize || map.isEmpty()) &#123; break; &#125; //è¿­ä»£å™¨èŽ·å–ç¬¬ä¸€ä¸ªå¯¹è±¡ï¼Œå³é˜Ÿå°¾çš„å…ƒç´ ï¼Œè¿‘æœŸæœ€å°‘è®¿é—®çš„å…ƒç´  Map.Entry&lt;K, V&gt; toEvict = map.entrySet().iterator().next(); key = toEvict.getKey(); value = toEvict.getValue(); //åˆ é™¤è¯¥å¯¹è±¡ï¼Œå¹¶æ›´æ–°ç¼“å­˜å¤§å° map.remove(key); size -= safeSizeOf(key, value); evictionCount++; &#125; entryRemoved(true, key, value, null); &#125;&#125; è¯¥æ–¹æ³•ä¸æ–­åœ°åˆ é™¤ LinkedHashMap ä¸­é˜Ÿå°¾çš„å…ƒç´ ï¼Œç›´åˆ°ç¼“å­˜å¤§å°å°äºŽæœ€å¤§å€¼ã€‚ å½“è°ƒç”¨ LruCache çš„getæ–¹æ³•èŽ·å–é›†åˆä¸­çš„ç¼“å­˜å¯¹è±¡æ—¶ï¼Œå°±ä»£è¡¨è®¿é—®äº†ä¸€æ¬¡è¯¥å…ƒç´ ï¼Œé˜Ÿåˆ—å°†ä¼šæ›´æ–°ï¼Œä¿æŒå…¶æŒ‰ç…§è®¿é—®é¡ºåºçš„æŽ’åºçš„è§„åˆ™ã€‚è¿™ä¸ªæ›´æ–°è¿‡ç¨‹æ˜¯åœ¨ LinkedHashMap ä¸­çš„getæ–¹æ³•ä¸­å®Œæˆçš„ã€‚ å…ˆçœ‹ LruCache çš„getæ–¹æ³• 123456789101112131415161718public final V get(K key) &#123; //keyä¸ºç©ºæŠ›å‡ºå¼‚å¸¸ if (key == null) &#123; throw new NullPointerException("key == null"); &#125; V mapValue; synchronized (this) &#123; //èŽ·å–å¯¹åº”çš„ç¼“å­˜å¯¹è±¡ //get()æ–¹æ³•ä¼šå®žçŽ°å°†è®¿é—®çš„å…ƒç´ æ›´æ–°åˆ°é˜Ÿåˆ—å¤´éƒ¨çš„åŠŸèƒ½ mapValue = map.get(key); if (mapValue != null) &#123; hitCount++; return mapValue; &#125; missCount++; &#125;&#125; LinkedHashMap çš„getæ–¹æ³•å¦‚ä¸‹ï¼š 12345678public V get(Object key) &#123; LinkedHashMapEntry&lt;K,V&gt; e = (LinkedHashMapEntry&lt;K,V&gt;)getEntry(key); if (e == null) return null; //å®žçŽ°æŽ’åºçš„å…³é”®æ–¹æ³• e.recordAccess(this); return e.value;&#125; 1234567891011 void recordAccess(HashMap&lt;K,V&gt; m) &#123; LinkedHashMap&lt;K,V&gt; lm = (LinkedHashMap&lt;K,V&gt;)m; //åˆ¤æ–­æ˜¯å¦æ˜¯è®¿é—®æŽ’åº if (lm.accessOrder) &#123; lm.modCount++; //åˆ é™¤æ­¤å…ƒç´  remove(); //å°†æ­¤å…ƒç´ ç§»åŠ¨åˆ°é˜Ÿåˆ—çš„å¤´éƒ¨ addBefore(lm.header); &#125;&#125; ç”±æ­¤å¯è§ LruCache ä¸­ç»´æŠ¤äº†ä¸€ä¸ªé›†åˆ LinkedHashMapï¼Œè¯¥ LinkedHashMap æ˜¯ä»¥è®¿é—®é¡ºåºæŽ’åºçš„ã€‚å½“è°ƒç”¨putæ–¹æ³•æ—¶ï¼Œå°±ä¼šåœ¨é˜Ÿåˆ—ä¸­æ·»åŠ å…ƒç´ ï¼Œå¹¶è°ƒç”¨trimToSizeåˆ¤æ–­ç¼“å­˜æ˜¯å¦å·²æ»¡ï¼Œå¦‚æžœæ»¡äº†å°±ç”¨ LinkedHashMap çš„è¿­ä»£å™¨åˆ é™¤é˜Ÿå°¾å…ƒç´ ï¼Œå³è¿‘æœŸæœ€å°‘è®¿é—®çš„å…ƒç´ ã€‚å½“è°ƒç”¨get(æ–¹æ³•è®¿é—®ç¼“å­˜å¯¹è±¡æ—¶ï¼Œå°±ä¼šè°ƒç”¨ LinkedHashMap çš„getæ–¹æ³•èŽ·å¾—å¯¹åº”é›†åˆå…ƒç´ ï¼ŒåŒæ—¶æ›´æ–°è¯¥å…ƒç´ åˆ°é˜Ÿå¤´ã€‚ ä»¥ä¸Šä¾¿æ˜¯ LruCache å®žçŽ°çš„åŽŸç†ï¼Œç†è§£äº† LinkedHashMap çš„æ•°æ®ç»“æž„å°±èƒ½ç†è§£æ•´ä¸ªåŽŸç†ã€‚ æœ¬æ–‡è½¬è‡ª å½»åº•è§£æžAndroidç¼“å­˜æœºåˆ¶â€”â€”LruCache]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>LRU</tag>
        <tag>ç¼“å­˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java åå°„è¯¦è§£]]></title>
    <url>%2FJava-%E5%8F%8D%E5%B0%84%E8%AF%A6%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[å¼•è¨€åå°„æ˜¯ä¸€ç§è®¡ç®—æœºå¤„ç†æ–¹å¼ï¼Œæ˜¯ç¨‹åºå¯ä»¥è®¿é—®ã€æ£€æµ‹å’Œä¿®æ”¹å®ƒæœ¬èº«çŠ¶æ€æˆ–è¡Œä¸ºçš„ä¸€ç§èƒ½åŠ›ã€‚Java åå°„ä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨ç¨‹åºè¿è¡Œæ—¶åŠ¨æ€åŠ è½½ä¸€ä¸ªç±»ï¼ŒåŠ¨æ€èŽ·å–ç±»çš„å±žæ€§ã€æ–¹æ³•ã€æž„é€ å‡½æ•°ç­‰ä¿¡æ¯ã€‚åå°„ä½¿ Java è¿™ä¸€é™æ€è¯­è¨€æœ‰äº†åŠ¨æ€çš„ç‰¹æ€§ã€‚ ä½¿ç”¨Example12345678910111213141516171819202122232425262728293031323334353637383940414243444546public class Apple &#123; private int price; public Apple()&#123;&#125; public Apple(int price) &#123; this.price = price; &#125; public int getPrice() &#123; return price; &#125; public void setPrice(int price) &#123; this.price = price; &#125; public static void main(String[] args) throws ClassNotFoundException, NoSuchMethodException, InvocationTargetException, InstantiationException, IllegalAccessException &#123; //æ­£å¸¸è°ƒç”¨ Apple apple = new Apple(); apple.setPrice(10); System.out.println("Price is " + apple.getPrice()); //åå°„è°ƒç”¨ Class clazz = Class.forName("Apple"); //ä½¿ç”¨ getFields() æ— æ³•èŽ·å–ç§æœ‰å±žæ€§ Field[] fields = clazz.getDeclaredFields(); for (Field field: fields) &#123; System.out.println("Field is " + field.getName()); &#125; Method setPriceMethod = clazz.getMethod("setPrice", int.class); Constructor appleConstructor = clazz.getConstructor(); Object appleObj = appleConstructor.newInstance(); //Constructor appleConstructor = clazz.getConstructor(int.class); //èŽ·å¾—æœ‰å‚æž„é€ å™¨ //Object appleObj = appleConstructor.newInstance(int.class) //è°ƒç”¨æœ‰å‚æž„é€ å™¨ setPriceMethod.invoke(appleObj, 12); Method getPriceMethod = clazz.getMethod("getPrice"); System.out.println("Price is " + getPriceMethod.invoke(appleObj)); &#125;&#125; APIç±»çš„å®žä¾‹åŒ–å’Œæž„é€ å‡½æ•° èŽ·å–å…¬æœ‰æž„é€ å‡½æ•°ï¼Œä¸åŒ…æ‹¬çˆ¶ç±»ï¼ŒClass.classpublic Constructor&lt;?&gt;[] getConstructors()public Constructor getConstructor(Class&lt;?&gt;â€¦ parameterTypes) èŽ·å–å½“å‰ç±»æž„é€ å‡½æ•°ï¼Œå¿½ç•¥ä¿®é¥°ç¬¦public Constructor&lt;?&gt;[] getDeclaredConstructors()public Constructor getDeclaredConstructor(Class&lt;?&gt;â€¦ parameterTypes) æž„é€ å‡½æ•°è°ƒç”¨ï¼ŒConstructor.classpublic T newInstance(Objectâ€¦ initargs) å¿½ç•¥ä¿®é¥°ç¬¦ï¼Œå¼ºåˆ¶è°ƒç”¨public void setAccessible(boolean flag) ç±»æˆå‘˜å˜é‡çš„èŽ·å– èŽ·å–å…¬æœ‰å˜é‡ï¼ŒåŒ…æ‹¬çˆ¶ç±»ï¼ŒClass.classpublic Field[] getFields()public Field getField(String name) èŽ·å–å½“å‰ç±»æˆå‘˜å˜é‡ï¼Œå¿½ç•¥ä¿®é¥°ç¬¦public Field[] getDeclaredFields()public Field getDeclaredField(String name) æˆå‘˜å˜é‡èµ‹å€¼ï¼ŒField.class//objä¸ºå®žä¾‹å¯¹è±¡public void set(Object obj,Object value) å¿½ç•¥ä¿®é¥°ç¬¦ï¼Œå¼ºåˆ¶è°ƒç”¨public void setAccessible(boolean flag) ç±»æ–¹æ³•çš„èŽ·å– èŽ·å–å…¬æœ‰æ–¹æ³•ï¼ŒåŒ…æ‹¬çˆ¶ç±»ï¼ŒClass.classpublic Method[] getMethods()public Method getMethod(String name, Class&lt;?&gt;â€¦ parameterTypes) èŽ·å–å½“å‰ç±»æ–¹æ³•ï¼Œå¿½ç•¥ä¿®é¥°ç¬¦public Method[] getDeclaredMethods()public Method getDeclaredMethod(String name, Class&lt;?&gt;â€¦ parameterTypes) æ–¹æ³•è°ƒç”¨ï¼ŒMethod.class//objä¸ºç±»å®žä¾‹åŒ–å¯¹è±¡ï¼Œå¦‚æžœä¸ºé™æ€æ–¹æ³•objä¸ºNullinvoke(Object obj, Objectâ€¦ args) å¿½ç•¥ä¿®é¥°ç¬¦ï¼Œå¼ºåˆ¶è°ƒç”¨public void setAccessible(boolean flag) ç±»æ³¨è§£çš„èŽ·å– èŽ·å–ç±»çš„â€annotationClassâ€ç±»åž‹çš„æ³¨è§£ï¼ŒåŒ…æ‹¬çˆ¶ç±»public Annotation getAnnotation(Class annotationClass) // èŽ·å–ç±»çš„å…¨éƒ¨æ³¨è§£ ï¼ŒåŒ…æ‹¬çˆ¶ç±»public Annotation[] getAnnotations() // èŽ·å–ç±»è‡ªèº«å£°æ˜Žçš„å…¨éƒ¨æ³¨è§£ ï¼Œå¿½ç•¥ä¿®é¥°ç¬¦public Annotation[] getDeclaredAnnotations() ç±»çˆ¶ç±»çš„èŽ·å– èŽ·å–å®žçŽ°çš„å…¨éƒ¨æŽ¥å£public Type[] getGenericInterfaces() èŽ·å–çˆ¶ç±»public Type getGenericSuperclass() åŽŸç†RTTIå’ŒClasså¯¹è±¡RTTIï¼Œå³ Run-Time Type Identificationï¼Œè¿è¡Œæ—¶ç±»åž‹è¯†åˆ«ã€‚RTTI èƒ½åœ¨è¿è¡Œæ—¶å°±èƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«æ¯ä¸ªç¼–è¯‘æ—¶å·²çŸ¥çš„ç±»åž‹ã€‚ å¾ˆå¤šæ—¶å€™éœ€è¦è¿›è¡Œå‘ä¸Šè½¬åž‹ï¼Œæ¯”å¦‚ Fruit ç±»æ´¾ç”Ÿå‡º Apple ç±»ï¼Œå½“çŽ°æœ‰çš„æ–¹æ³•å°† Fruit ä½œä¸ºå‚æ•°æ—¶ï¼Œå¦‚æžœæˆ‘ä»¬ä¼ å…¥å…¶æ´¾ç”Ÿç±»çš„å¼•ç”¨ï¼Œé‚£ä¹ˆ RTTI å°±ä¼šèµ·ä½œç”¨ã€‚é€šè¿‡ RTTI è¯†åˆ«å‡º Apple ç±»æ˜¯ Fruit çš„æ´¾ç”Ÿç±»ï¼Œç„¶åŽå‘ä¸Šè½¬åž‹ã€‚ç‰¹åˆ«æ˜¯åœ¨ç”¨æŽ¥å£ç±»åž‹ä½œä¸ºå‚æ•°çš„æ—¶å€™ï¼Œè¿™ä¸€ç‰¹æ€§æ›´æ˜¯è¢«é¢‘ç¹ä½¿ç”¨ã€‚ è€Œè¿™äº›ç±»åž‹ä¿¡æ¯æ˜¯é€šè¿‡ä¸€ä¸ªç‰¹æ®Šå¯¹è±¡Classï¼ˆjava.lang.Classï¼‰å®žçŽ°çš„ï¼Œå®ƒåŒ…å«è·Ÿç±»ç›¸å…³çš„ä¿¡æ¯ã€‚ å½“ç¨‹åºè¦ä½¿ç”¨æŸä¸ªç±»æ—¶ï¼Œå¦‚æžœè¯¥ç±»è¿˜æœªè¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œåˆ™ç³»ç»Ÿä¼šé€šè¿‡åŠ è½½ã€è¿žæŽ¥ã€åˆå§‹åŒ–ä¸‰æ­¥æ¥å®žçŽ°å¯¹è¿™ä¸ªç±»è¿›è¡Œåˆå§‹åŒ–ã€‚ åŠ è½½ ï¼šå°† class æ–‡ä»¶è¯»å…¥å†…å­˜ï¼Œå¹¶ä¸ºä¹‹åˆ›å»ºä¸€ä¸ª Class å¯¹è±¡ã€‚ä»»ä½•ç±»è¢«ä½¿ç”¨æ—¶ç³»ç»Ÿéƒ½ä¼šå»ºç«‹ä¸€ä¸ª Class å¯¹è±¡ã€‚ è¿žæŽ¥ï¼š éªŒè¯ æ˜¯å¦æœ‰æ­£ç¡®çš„å†…éƒ¨ç»“æž„ï¼Œå¹¶å’Œå…¶ä»–ç±»åè°ƒä¸€è‡´ å‡†å¤‡ è´Ÿè´£ä¸ºç±»çš„é™æ€æˆå‘˜åˆ†é…å†…å­˜ï¼Œå¹¶è®¾ç½®é»˜è®¤åˆå§‹åŒ–å€¼ è§£æž å°†ç±»çš„äºŒè¿›åˆ¶æ•°æ®ä¸­çš„ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æŽ¥å¼•ç”¨ åˆå§‹åŒ–ï¼šå¦‚æžœè¯¥ç±»æœ‰è¶…ç±»ï¼Œåˆ™å¯¹å…¶åˆå§‹åŒ–ï¼Œæ‰§è¡Œé™æ€åŸŸå’Œé™æ€åˆå§‹åŒ–å—ã€‚ èŽ·å– Class å¯¹è±¡çš„æ–¹å¼æœ‰ä¸‰ç§ Object ç±»çš„ getClass() æ–¹æ³•ï¼Œæ‰§è¡Œé™æ€å—å’ŒåŠ¨æ€æž„é€ å— æ•°æ®ç±»åž‹çš„é™æ€å±žæ€§ class ï¼Œä¸ä¼šåˆå§‹åŒ–è¯¥ç±» Classç±»ä¸­çš„é™æ€æ–¹æ³•public static Class forName(String className)ï¼Œæ‰§è¡Œé™æ€å—ï¼Œä¸æ‰§è¡ŒåŠ¨æ€æž„é€ å— RTTIå’Œåå°„Java æœ‰ä¸¤ç§ RTTI æ–¹å¼ï¼Œä¸€ç§æ˜¯ä¼ ç»Ÿçš„ï¼Œå‡è®¾åœ¨ç¼–è¯‘æ—¶å·²ç»çŸ¥é“äº†æ‰€æœ‰çš„ç±»åž‹ï¼›è¿˜æœ‰ä¸€ç§ï¼Œæ˜¯åˆ©ç”¨åå°„æœºåˆ¶ï¼Œåœ¨è¿è¡Œæ—¶å†å°è¯•ç¡®å®šç±»åž‹ä¿¡æ¯ã€‚ RTTIå’Œåå°„ä¹‹é—´çš„çœŸæ­£åŒºåˆ«åªåœ¨äºŽï¼š RTTIï¼šç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶æ‰“å¼€å’Œæ£€æŸ¥.classæ–‡ä»¶åå°„ï¼šè¿è¡Œæ—¶æ‰“å¼€å’Œæ£€æŸ¥.classæ–‡ä»¶ ä¸¥æ ¼çš„è¯´ï¼Œåå°„ä¹Ÿæ˜¯ä¸€ç§å½¢å¼çš„RTTIï¼Œä¸è¿‡ï¼Œä¸€èˆ¬çš„æ–‡æ¡£èµ„æ–™ä¸­æŠŠRTTIå’Œåå°„åˆ†å¼€ï¼Œå› ä¸ºä¸€èˆ¬çš„ï¼Œå¤§å®¶è®¤ä¸º RTTIæŒ‡çš„æ˜¯ä¼ ç»Ÿçš„ RTTIï¼Œé€šè¿‡ç»§æ‰¿å’Œå¤šæ€æ¥å®žçŽ°ï¼Œåœ¨è¿è¡Œæ—¶é€šè¿‡è°ƒç”¨è¶…ç±»çš„æ–¹æ³•æ¥å®žçŽ°å…·ä½“çš„åŠŸèƒ½ æœªå®Œå¾…ç»­]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>åå°„</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŸºæœ¬æ•°æ®ç»“æž„çš„ç®€å•Javaå®žçŽ°]]></title>
    <url>%2F%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%9A%84%E7%AE%80%E5%8D%95Java%E5%AE%9E%E7%8E%B0%2F</url>
    <content type="text"><![CDATA[å¼•è¨€JDK ä¸­æä¾›äº†å¾ˆå¤šæ•°æ®ç»“æž„ï¼Œå¦‚ä¸‹æ‰€ç¤º Collectionâ”œ Listâ”‚ â”œ LinkedListâ”‚ â”œ ArrayListâ”‚ â”” Vectorâ”‚ â””Stackâ”” Set Mapâ”œ Hashtableâ”œ HashMapâ”” WeakHashMap æœ¬æ–‡å°†è¿›è¡Œéƒ¨åˆ†æ•°æ®ç»“æž„çš„ç®€å•å®žçŽ°ã€‚ Stack12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364public class MyStack&lt;T&gt; &#123; private Object[] dataArray; private int maxSize; private int nowSize = 0; public MyStack() &#123; this(10); &#125; public MyStack(int initialCapacity) &#123; maxSize = initialCapacity; dataArray = new Object[maxSize]; &#125; public void push(T data) &#123; if (size() &gt;= maxSize) &#123; resize(); &#125; dataArray[nowSize++] = data; &#125; public T pop() &#123; if (empty()) &#123; return null; &#125; return (T)dataArray[--nowSize]; &#125; public T peek() &#123; if (empty()) &#123; return null; &#125; return (T)dataArray[nowSize-1]; &#125; public int search(T target) &#123; int p = nowSize; while (p &gt;= 0) &#123; if (dataArray[p] == target) &#123; return p; &#125; p--; &#125; return -1; &#125; private void resize() &#123; maxSize = maxSize &lt;&lt; 1; Object[] newArray = new Object[maxSize]; for (int i = 0; i &lt; dataArray.length; i++) &#123; newArray[i] = dataArray[i]; &#125; this.dataArray = newArray; &#125; public int size() &#123; return nowSize; &#125; public boolean empty() &#123; return nowSize == 0 ? true : false; &#125;&#125; Queue12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061public class MyQueue&lt;T&gt; &#123; private Object[] dataArray; private int maxSize; private int front; private int rear; public MyQueue() &#123; this(10); &#125; public MyQueue(int initialSize) &#123; maxSize = initialSize; dataArray = new Object[maxSize]; front = rear = 0; &#125; public void enqueue(T newData) &#123; if (size() &gt;= maxSize) &#123; resize(); &#125; //éžå¾ªçŽ¯é˜Ÿåˆ— dataArray[rear++] = newData; //å¾ªçŽ¯é˜Ÿåˆ— //dataArray[rear] = newData; //rear = (rear+1) % maxSize; &#125; public T dequeue() &#123; if (empty()) &#123; return null; &#125; T value = (T)dataArray[front]; //éžå¾ªçŽ¯é˜Ÿåˆ— dataArray[front++] = null; //å¾ªçŽ¯é˜Ÿåˆ— //dataArray[front] = null; //front = (front+1) % maxSize; return value; &#125; public void resize() &#123; maxSize = maxSize &lt;&lt; 1; Object[] temp = new Object[maxSize]; for (int i = 0; i &lt; dataArray.length; i++) &#123; temp[i] = dataArray[i]; &#125; dataArray = temp; &#125; public int size() &#123; return Math.abs(front - rear); &#125; public boolean empty() &#123; return front == rear ? true : false; &#125;&#125; BinaryTree 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161public class MyBinaryTree&lt;T&gt; &#123; private Node root; class Node &#123; private int key; private T value; private Node leftChild; private Node rightChild; public Node(int key, T value) &#123; this.key = key; this.value = value; &#125; &#125; public Node find(int key) &#123; Node currentNode = root; while (currentNode != null &amp;&amp; currentNode.key != key) &#123; if (key &lt; currentNode.leftChild.key) &#123; currentNode = currentNode.leftChild; &#125; else &#123; currentNode = currentNode.rightChild; &#125; &#125; return currentNode; &#125; public void insert(int key, T value) &#123; if (root == null) &#123; root = new Node(key, value); return; &#125; Node currentNode = root; Node parentNode = root; Boolean isLeftChild = true; while (currentNode != null) &#123; parentNode = currentNode; if (key &lt; currentNode.key) &#123; currentNode = currentNode.leftChild; isLeftChild = true; &#125; else &#123; currentNode = currentNode.rightChild; &#125; &#125; Node newNode = new Node(key, value); if (isLeftChild) &#123; parentNode.leftChild = newNode; &#125; else &#123; parentNode.rightChild = newNode; &#125; &#125; public boolean delete(int key) &#123; Node currentNode = root; //å¾…åˆ é™¤èŠ‚ç‚¹ Node parentNode = root; //å¾…åˆ é™¤èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ Boolean isLeftChild = true; while (currentNode != null &amp;&amp; currentNode.key != key) &#123; parentNode = currentNode; if (key &lt; currentNode.key) &#123; currentNode = currentNode.leftChild; isLeftChild = true; &#125; else &#123; currentNode = currentNode.rightChild; isLeftChild = false; &#125; &#125; if (currentNode == null) &#123; return false; &#125; //åˆ é™¤èŠ‚ç‚¹ä¸ºå¶å­èŠ‚ç‚¹ if (currentNode.leftChild == null &amp;&amp; currentNode.rightChild == null) &#123; if (currentNode == root) &#123; root = null; &#125; else if (isLeftChild) &#123; parentNode.leftChild = null; &#125; else &#123; parentNode.rightChild = null; &#125; &#125; else if (currentNode.rightChild == null) &#123; //å¾…åˆ é™¤èŠ‚ç‚¹åªæœ‰å·¦å­èŠ‚ç‚¹ if (currentNode == root) &#123; root = currentNode.leftChild; &#125; else if (isLeftChild) &#123; parentNode.leftChild = currentNode.leftChild; &#125; else &#123; parentNode.rightChild = currentNode.leftChild; &#125; &#125; else if (currentNode.leftChild == null) &#123; //å¾…åˆ é™¤èŠ‚ç‚¹åªæœ‰å³å­èŠ‚ç‚¹ if (currentNode == root) &#123; root = currentNode.rightChild; &#125; else if (isLeftChild) &#123; parentNode.leftChild = currentNode.rightChild; &#125; else &#123; parentNode.rightChild = currentNode.rightChild; &#125; &#125; else &#123; //å¾…åˆ é™¤èŠ‚ç‚¹æ—¢æœ‰å·¦å­èŠ‚ç‚¹åˆæœ‰å³å­èŠ‚ç‚¹ Node directPostNode = getDirectPostNode(currentNode); currentNode.key = directPostNode.key; currentNode.value = directPostNode.value; &#125; return true; &#125; /** * èŽ·å¾—å¾…åˆ é™¤èŠ‚ç‚¹çš„ç›´æŽ¥åŽç»§èŠ‚ç‚¹ * * å½“å¾…åˆ é™¤èŠ‚ç‚¹æ—¢æœ‰å·¦å­©å­ï¼Œåˆæœ‰å³å­©å­æ—¶ï¼Œä¾‹å¦‚åˆ é™¤å›¾ä¸€ä¸­ key å€¼ä¸º 10 çš„èŠ‚ç‚¹ * è¿™æ—¶å°±éœ€è¦ç”¨ key å€¼ä¸º 10 çš„èŠ‚ç‚¹çš„ä¸­åºåŽç»§èŠ‚ç‚¹ï¼ˆèŠ‚ç‚¹ 11ï¼‰æ¥ä»£æ›¿ key å€¼ä¸º 10 çš„èŠ‚ç‚¹ * å¹¶åˆ é™¤ key å€¼ä¸º 10 çš„èŠ‚ç‚¹çš„ä¸­åºåŽç»§èŠ‚ç‚¹ï¼Œ * ç”±ä¸­åºéåŽ†ç›¸å…³è§„åˆ™å¯çŸ¥ï¼Œ key å€¼ä¸º 10 çš„èŠ‚ç‚¹çš„ç›´æŽ¥ä¸­åºåŽç»§èŠ‚ç‚¹ä¸€å®šæ˜¯å…¶å³å­æ ‘ä¸­ key å€¼æœ€å°çš„èŠ‚ç‚¹ï¼Œ * æ‰€ä»¥æ­¤ä¸­åºåŽç»§èŠ‚ç‚¹ä¸€å®šä¸å«å­èŠ‚ç‚¹æˆ–è€…åªå«æœ‰ä¸€ä¸ªå³å­©å­ * * é¦–å…ˆæ‰¾åˆ° key å€¼ä¸º 10 çš„èŠ‚ç‚¹çš„ç›´æŽ¥ä¸­åºåŽç»§èŠ‚ç‚¹ï¼ˆå³å…¶å³å­æ ‘ä¸­å€¼æœ€å°çš„èŠ‚ç‚¹ 11ï¼‰ï¼Œ * å¹¶åˆ é™¤æ­¤ç›´æŽ¥ä¸­åºåŽç»§èŠ‚ç‚¹ï¼Œç„¶åŽå°†æ­¤åŽç»§èŠ‚ç‚¹çš„ keyã€value å€¼èµ‹ç»™å¾…åˆ é™¤èŠ‚ç‚¹çš„ keyï¼Œvalueå€¼ * * @param delNode å¾…åˆ é™¤èŠ‚ç‚¹ * @return è¿”å›žç›´æŽ¥åŽç»§èŠ‚ç‚¹ */ private Node getDirectPostNode(Node delNode) &#123; Node parentNode = delNode; //ä¿å­˜å¾…åˆ é™¤èŠ‚ç‚¹çš„ç›´æŽ¥åŽç»§èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ Node direcrPostNode = delNode; //ä¿å­˜å¾…åˆ é™¤èŠ‚ç‚¹çš„ç›´æŽ¥åŽç»§èŠ‚ç‚¹ Node currentNode = delNode.rightChild; while (currentNode != null) &#123; parentNode = direcrPostNode; direcrPostNode = currentNode; currentNode = currentNode.leftChild; &#125; if (direcrPostNode != delNode.rightChild) &#123; //ä»Žæ ‘ä¸­åˆ é™¤æ­¤ç›´æŽ¥åŽç»§èŠ‚ç‚¹ parentNode.leftChild = direcrPostNode.rightChild; direcrPostNode.rightChild = null; &#125; return direcrPostNode; &#125; public void preOrder(Node rootNode) &#123; if (rootNode != null) &#123; System.out.println(rootNode.key + ": " + rootNode.value); preOrder(rootNode.leftChild); preOrder(rootNode.rightChild); &#125; &#125; public void inOrder(Node rootNode) &#123; if (rootNode != null) &#123; preOrder(rootNode.leftChild); System.out.println(rootNode.key + ": " + rootNode.value); preOrder(rootNode.rightChild); &#125; &#125; public void postOrder(Node rootNode) &#123; if (rootNode != null) &#123; preOrder(rootNode.leftChild); preOrder(rootNode.rightChild); System.out.println(rootNode.key + ": " + rootNode.value); &#125; &#125;&#125; HashMap]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>æ•°æ®ç»“æž„</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android æ¶ˆæ¯æœºåˆ¶è¯¦è§£]]></title>
    <url>%2FAndroid-%E6%B6%88%E6%81%AF%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[å¼•è¨€Android çš„æ¶ˆæ¯æœºåˆ¶ï¼Œä¸»è¦æ˜¯æŒ‡ Handler çš„è¿è¡Œæœºåˆ¶ã€‚ ANRApplication Not Respondingï¼Œå³åº”ç”¨ç¨‹åºæ— å“åº”ï¼Œåœ¨ä»‹ç»æ¶ˆæ¯æœºåˆ¶çš„ç›¸å…³çŸ¥è¯†ä¹‹å‰å…ˆäº†è§£ ANRã€‚ åŽŸå› Androidç³»ç»Ÿä¸­ï¼ŒActivityManagerService(AMS) å’Œ WindowManagerService(WMS) ä¼šæ£€æµ‹ App çš„å“åº”æ—¶é—´ï¼Œå¦‚æžœAppåœ¨ç‰¹å®šæ—¶é—´æ— æ³•å“åº”å±å¹•è§¦æ‘¸æˆ–é”®ç›˜è¾“å…¥äº‹ä»¶ï¼Œæˆ–è€…ç‰¹å®šäº‹ä»¶æ²¡æœ‰å¤„ç†å®Œæ¯•ï¼Œå°±ä¼šå‡ºçŽ°ANRã€‚ ä»¥ä¸‹å››ç§æ¡ä»¶éƒ½å¯ä»¥é€ æˆ ANR InputDispatching Timeoutï¼š5ç§’å†…æ— æ³•å“åº”å±å¹•è§¦æ‘¸æˆ–é”®ç›˜è¾“å…¥äº‹ä»¶ BroadcastQueue Timeout ï¼šåœ¨æ‰§è¡Œå‰å°å¹¿æ’­ï¼ˆBroadcastReceiverï¼‰çš„onReceiveæ–¹æ³•ä¸­10ç§’æ²¡æœ‰å¤„ç†å®Œæˆï¼ŒåŽå°åˆ™ä¸º60ç§’ã€‚ Service Timeout ï¼šå‰å°æœåŠ¡20ç§’å†…ï¼ŒåŽå°æœåŠ¡åœ¨200ç§’å†…æ²¡æœ‰æ‰§è¡Œå®Œæ¯•ã€‚ ContentProvider Timeout ï¼šContentProvider çš„ publish åœ¨10så†…æ²¡è¿›è¡Œå®Œã€‚ åˆ†æžå’Œè§£å†³åˆ†æž æŸ¥çœ‹ log ä¿¡æ¯ Java çº¿ç¨‹è°ƒç”¨åˆ†æžï¼Œjstack {pid}ï¼Œå…¶ä¸­ pid ä¸ºè™šæ‹Ÿæœºè¿›ç¨‹ idï¼Œå¯ä»¥é€šè¿‡jpsæŸ¥çœ‹å½“å‰æ‰€æœ‰çº¿ç¨‹ã€‚ æŸ¥çœ‹ trace.txt æ–‡ä»¶ï¼Œå…¶å¯¼å‡ºç›®å½•ä¸º Android SDK çš„ /platform-tools ç›®å½•ï¼ŒWindows ä¸‹åœ¨è¯¥ç›®å½•ä½¿ç”¨å‘½ä»¤./adb pull /data/anr/traces.txtæŸ¥çœ‹ è§£å†³ é¿å…æ­»é”çš„å‡ºçŽ°ï¼Œä½¿ç”¨å­çº¿ç¨‹æ¥å¤„ç†è€—æ—¶æ“ä½œæˆ–é˜»å¡žä»»åŠ¡ã€‚ é¿å…åœ¨ä¸»çº¿ç¨‹ query providerã€ä¸è¦æ»¥ç”¨SharePreferences æ–‡ä»¶è¯»å†™æˆ–æ•°æ®åº“æ“ä½œæ”¾åœ¨å­çº¿ç¨‹å¼‚æ­¥æ“ä½œï¼Œæ“ä½œå®Œæˆä¹‹åŽåŠæ—¶å…³é—­æµã€‚ BroadcastReciever çš„onRecieveä¸è¦è¿›è¡Œè€—æ—¶æ“ä½œã€‚ Handler æœºåˆ¶ç”±ä¸Šæ–‡æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ä¸»çº¿ç¨‹è¿›è¡Œè€—æ—¶æ“ä½œå°†ä¼šå¼•å‘ ANRï¼Œè€Œä¸” Android ç¦æ­¢åœ¨å­çº¿ç¨‹ä¸­ç›´æŽ¥ UI æ“ä½œï¼Œè¯¥æœºåˆ¶ç”± ViewRootImpl çš„checkThreadè¿›è¡ŒéªŒè¯1234567void checkThread() &#123; if (mThread != Thread.currrentThread()) &#123; throw new CalledFromWrongThreadException( "Only the original thread that created a view hierarchy can touch its views"); &#125;&#125; ä½¿ç”¨è¯¥æœºåˆ¶çš„åŽŸå› ï¼Œä¸€æ˜¯å¤šçº¿ç¨‹ä¸­å¹¶å‘è®¿é—® UI ä¼šé€ æˆä¸å¯é¢„çŸ¥çŠ¶æ€ï¼›äºŒæ˜¯å¯¹æŽ§ä»¶ä½¿ç”¨é”æœºåˆ¶ä¼šé™ä½Ž UI è®¿é—®çš„æ•ˆçŽ‡ã€‚é‚£ä¹ˆï¼Œå½“æˆ‘ä»¬ä½¿ç”¨å¤šçº¿ç¨‹æŠ€æœ¯ç»“æŸæ•°æ®çš„å­˜å‚¨ã€èŽ·å–ï¼Œæƒ³å›žåˆ°ä¸»çº¿ç¨‹æ“ä½œ UI è¯¥æ€Žä¹ˆåˆ‡æ¢ï¼Ÿ ç­”æ¡ˆæ˜¯ä½¿ç”¨ Handler ã€‚ åˆ›å»º123456789101112131415161718192021222324//æŽ¥æ”¶æ¶ˆæ¯@SuppressLint("HandlerLeak")private Handler mHandler = new Handler() &#123; @Override public void handleMessage(Message msg) &#123; super.handleMessage(msg); if (msg.what == 1) &#123; log.e("MSG", "æ”¶åˆ°æ¶ˆæ¯")ï¼› &#125; &#125;&#125;;//å‘é€æ¶ˆæ¯new Thread(new Runnable() &#123; @Override public void run() &#123; try &#123; Thread.sleep(1000); mHandler.sendEmptyMessage(1); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;&#125;).start(); ä½¿ç”¨æˆå‘˜å˜é‡åˆ›å»º Handler çš„æ–¹å¼å¾ˆæœ‰å¯èƒ½é€ æˆå†…å­˜æ³„æ¼ï¼Œæ­£ç¡®çš„åšæ³•æ˜¯ä½¿ç”¨é™æ€å†…éƒ¨ç±»å’Œå¼±å¼•ç”¨1234567891011121314151617MyHandler hander = new MyHandler(context);static class MyHandler extends Handler &#123; private WeakReference&lt;Context&gt; out; MyHandler(Context ctx) &#123; super(); out = new WeakReference&lt;&gt;(ctx); &#125; @Override public void handleMessage(Message msg) &#123; if (out.get() != null) &#123; //è¿›è¡Œæ¶ˆæ¯å¤„ç† &#125; &#125;&#125; Handler çš„è¿è¡Œæœºåˆ¶åº•å±‚ç”± MessageQueue å’Œ Looper æ”¯æ’‘ã€‚ç®€å•æ¦‚æ‹¬ï¼ŒHandler æŠŠä¸€ä¸ªçº¿ç¨‹æ¶ˆæ¯å‘é€ç»™å½“å‰çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå³ MessageQueueï¼Œè€Œ Looper è´Ÿè´£ç®¡ç†æ¶ˆæ¯é˜Ÿåˆ—çš„ã€‚ Handlerè§‚å¯Ÿ Handler çš„æž„é€ å‡½æ•°123456789101112public Handler(Callback callback, boolean async) &#123; ...... mLooper = Looper.myLooper(); if (mLooper == null) &#123; throw new RuntimeException( "Can't create handler inside thread " + Thread.currentThread() + " that has not called" + " Looper.prepare()"); &#125; mQueue = mLooper.mQueue; mCallback = callback; mAsynchronous = async;&#125; åœ¨å…¶ä¸­ç»™ MessageQueue ã€Callback å’Œ Asynchronous èµ‹å€¼ã€‚è§‚å¯Ÿ if è¯­å¥ï¼Œå¦‚æžœ mLooper ä¸º nullï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œå…¶å®žå°±æ˜¯æ— æ³•åœ¨æœªè°ƒç”¨Looper.prepareçš„çº¿ç¨‹å†…åˆ›å»º handlerã€‚ ä¸è¿‡ï¼Œä¸ºä»€ä¹ˆåœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»º Handler ä¸éœ€è¦è°ƒç”¨Looper.prepareå’ŒLooper.loopæ–¹æ³•å‘¢ï¼Ÿå…¶å®žæ˜¯å› ä¸ºåœ¨åˆ›å»º Activity çš„æ—¶å€™ï¼Œä¼šç»è¿‡ä¸€ç³»åˆ—è°ƒç”¨è¿‡ç¨‹ï¼Œæœ€ç»ˆæ‰§è¡Œ ActivityThread çš„mainæ–¹æ³•ï¼Œåœ¨å…¶ä¸­è°ƒç”¨äº†prepareMainLooper1234567891011121314151617public static void main(String[] args) &#123; ...... Looper.prepareMainLooper(); ...... Looper.loop(); ......&#125;public static void prepareMainLooper() &#123; prepare(false); //quitAllowed å‚æ•°ä¼ false synchronized (Looper.class) &#123; if (sMainLooper != null) &#123; throw new IllegalStateException("The main Looper has already been prepared."); &#125; sMainLooper = myLooper(); &#125;&#125; å…³äºŽ ActivityThreadï¼šAndroidçº¿ç¨‹ç®¡ç†ï¼ˆäºŒï¼‰â€”â€”ActivityThread MessageQueueé¡¾åæ€ä¹‰ï¼ŒæŒ‡æ¶ˆæ¯é˜Ÿåˆ—ã€‚é¦–å…ˆè®¤è¯† Messageï¼Œå½“ç”¨æˆ·åœ¨UIç•Œé¢æ—¶ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œè¯¥äº‹ä»¶ä¼šè¢«å°è£…æˆä¸€æ¡ Messageï¼Œè¢«æ·»åŠ åˆ° MessageQueue ä¸­ã€‚Message å†…éƒ¨å°è£…äº†ä¸€ä¸ªå±žæ€§ tagetï¼Œå…¶å®žè´¨æ˜¯ä¸€ä¸ª Handler å¯¹è±¡ã€‚ ç”±äºŽä¸€ä¸ªçº¿ç¨‹åœ¨ä¸€æ®µæ—¶é—´åªèƒ½å¯¹ä¸€ç§æ“ä½œè¿›è¡Œç›¸å…³çš„å¤„ç†ï¼Œå› æ­¤ä½¿ç”¨ MessageQueue æ¥ç®¡ç†æ‰€æœ‰æ¶ˆæ¯çš„å…ˆåŽé¡ºåºï¼Œå…¶å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªå•é“¾è¡¨ç”¨ä»¥å­˜å‚¨æ¶ˆæ¯åˆ—è¡¨ã€‚ å½“ Handler è°ƒç”¨sendMessageæ—¶ï¼Œæœ€åŽä¼šè°ƒç”¨åˆ° 12345678910public boolean sendMessageAtTime(Message msg, long uptimeMillis) &#123; MessageQueue queue = mQueue; if (queue == null) &#123; RuntimeException e = new RuntimeException( this + " sendMessageAtTime() called with no mQueue"); Log.w("Looper", e.getMessage(), e); return false; &#125; return enqueueMessage(queue, msg, uptimeMillis);&#125; æŸ¥çœ‹enqueueMessageæ–¹æ³•ï¼Œ 1234567891011121314151617181920212223242526272829303132333435363738boolean enqueueMessage(Message msg, long when) &#123; ...... synchronized (this) &#123; if (mQuitting) &#123; IllegalStateException e = new IllegalStateException( msg.target + " sending message to a Handler on a dead thread"); msg.recycle(); return false; &#125; msg.markInUse(); msg.when = when; Message p = mMessages; boolean needWake; if (p == null || when == 0 || when &lt; p.when) &#123; msg.next = p; mMessages = msg; needWake = mBlocked; &#125; else &#123; needWake = mBlocked &amp;&amp; p.target == null &amp;&amp; msg.isAsynchronous(); Message prev; for (;;) &#123; prev = p; p = p.next; if (p == null || when &lt; p.when) &#123; break; &#125; if (needWake &amp;&amp; p.isAsynchronous()) &#123; needWake = false; &#125; &#125; msg.next = p; // invariant: p == prev.next prev.next = msg; &#125; ...... &#125; return true;&#125; é¦–å…ˆåˆ¤æ–­æ¶ˆæ¯é˜Ÿåˆ—é‡Œæœ‰æ²¡æœ‰æ¶ˆæ¯ï¼Œæ²¡æœ‰åˆ™å°†å½“å‰æ’å…¥çš„æ¶ˆæ¯ä½œä¸ºé˜Ÿå¤´ï¼Œå¹¶ä¸”å¦‚æžœæ­¤æ—¶æ¶ˆæ¯é˜Ÿåˆ—å¤„äºŽç­‰å¾…çŠ¶æ€åˆ™å°†å…¶å”¤é†’ å¦‚æžœé˜Ÿåˆ—å·²æœ‰æ¶ˆæ¯ï¼Œåˆ™æ ¹æ® Message åˆ›å»ºçš„æ—¶é—´è¿›è¡Œæ’å…¥ Looperé€šå¸¸è¿è¡Œåœ¨ä¸€ä¸ªæ¶ˆæ¯çš„å¾ªçŽ¯é˜Ÿåˆ—å½“ä¸­ï¼Œçº¿ç¨‹é»˜è®¤ä¸ä¼šæä¾›æ¶ˆæ¯å¾ªçŽ¯åŽ»ç®¡ç†æ¶ˆæ¯é˜Ÿåˆ—ï¼Œéœ€è¦åœ¨çº¿ç¨‹å½“ä¸­è°ƒç”¨Looper.prepareæ–¹æ³•ä½¿æ¶ˆæ¯å¾ªçŽ¯åˆå§‹åŒ–ï¼Œå¹¶ä¸”è°ƒç”¨Looper.loopä½¿æ¶ˆæ¯å¾ªçŽ¯ä¸€ç›´å¤„äºŽè¿è¡ŒçŠ¶æ€ï¼Œå–å‡º MessageQueue ä¸­çš„æ¶ˆæ¯åˆ†å‘ç»™ Handlerã€‚ 12345678910public static void prepare() &#123; prepare(true);&#125;private static void prepare(boolean quitAllowed) &#123; if (sThreadLocal.get() != null) &#123; throw new RuntimeException("Only one Looper may be created per thread"); &#125; sThreadLocal.set(new Looper(quitAllowed));&#125; å¯ä»¥çœ‹åˆ°ï¼Œprepare(boolean quitAllowed)å®žä¾‹åŒ–äº†ä¸€ä¸ª Looper ï¼Œç„¶åŽå°†å…¶è®¾ç½®è¿› sThreadLocal ä¸­ã€‚å½“Looper.prepareæ‰§è¡Œå®Œæ¯•ä¹‹åŽæ‰å¯ä»¥æ‰§è¡Œloopæ–¹æ³•123456789101112131415161718public static void loop() &#123; //èŽ·å–å½“å‰çº¿ç¨‹ç»‘å®šçš„Looper final Looper me = myLooper(); //å½“å‰çº¿ç¨‹çš„MessageQueue final MessageQueue queue = me.mQueue; ...... //å¾ªçŽ¯ä»Ž MessageQueue å–å‡ºæ¶ˆæ¯. for (;;) &#123; Message msg = queue.next(); ...... //å°†æ¶ˆæ¯åˆ†å‘å‡ºåŽ» msg.target.dispatchMessage(msg); ...... //å°†æ¶ˆæ¯å›žæ”¶ msg.recycle(); &#125;&#125; å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æžœæ¶ˆæ¯é˜Ÿåˆ—çš„ next è¿”å›žäº†æ–°æ¶ˆæ¯ï¼Œå°±ä¼šè°ƒç”¨msg.target.dispatchMessage(msg)ï¼Œtarget å³ä¸ºå‘é€æ¶ˆæ¯çš„ Handler å¯¹è±¡ã€‚æˆåŠŸå°†ä»£ç é€»è¾‘åˆ‡æ¢åˆ°æŒ‡å®šçš„çº¿ç¨‹ä¸­æ‰§è¡Œã€‚ 123456789101112public void dispatchMessage(Message msg) &#123; if (msg.callback != null) &#123; handleCallback(msg); &#125; else &#123; if (mCallback != null) &#123; if (mCallback.handleMessage(msg)) &#123; return; &#125; &#125; handleMessage(msg); &#125;&#125; é¦–å…ˆæ£€æŸ¥ Message çš„ callBack æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºåˆ™handlerCallback(msg)ï¼Œæœ€ç»ˆè°ƒç”¨ callback çš„runæ–¹æ³• å¦‚æžœä¸ºç©ºï¼Œæ£€æŸ¥ mCallBack æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºåˆ™è°ƒç”¨å®ƒçš„handleMassageï¼ŒCallBack æ˜¯ä¸€ä¸ªæŽ¥å£ï¼Œåˆ©ç”¨å®ƒæˆ‘ä»¬å¯ä»¥ä¼ ä¸€ä¸ª Callback æ¥åˆ›å»º Handlerã€‚ å¦‚æžœéƒ½ä¸ºç©ºï¼Œè°ƒç”¨ Handler å†…éƒ¨çš„handleMessageï¼Œä¹Ÿå°±æ˜¯å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬åˆ›å»º Handler å®žä¾‹çš„æ—¶å€™éœ€è¦é‡å†™çš„æ–¹æ³•ã€‚ ThreadLocalä¸€ä¸ªçº¿ç¨‹å†…éƒ¨çš„æ•°æ®å­˜å‚¨ç±»ï¼Œå½“æŸäº›æ•°æ®æ˜¯ä»¥çº¿ç¨‹ä¸ºä½œç”¨åŸŸè€Œä¸”ä¸åŒçº¿ç¨‹å…·æœ‰ä¸åŒçš„æ•°æ®å‰¯æœ¬çš„æ—¶å€™ï¼Œå¯ä»¥é‡‡ç”¨ ThreadLocalã€‚å¯¹äºŽ Handler æ¥è¯´ï¼Œå®ƒéœ€è¦èŽ·å–å½“å‰çº¿ç¨‹çš„ Looperï¼Œå¾ˆæ˜Žæ˜¾ä¸åŒçš„çº¿ç¨‹å…·æœ‰å„è‡ªçš„ Looperï¼Œæ­¤æ—¶å°±å¯ä»¥é€šè¿‡ ThreadLocal å®žçŽ° Looper åœ¨çº¿ç¨‹ä¸­çš„å­˜å–ã€‚å¦‚æžœä¸é‡‡ç”¨ ThreadLocalï¼Œé‚£ä¹ˆç³»ç»Ÿå°±å¿…é¡»æä¾›ä¸€ä¸ªå…¨å±€çš„å“ˆå¸Œè¡¨ä¾› Handler æŸ¥æ‰¾ Looperï¼Œå†æä¾›ä¸€ä¸ªç±»ä¼¼ LooperManager çš„ç±»ã€‚ ä½¿ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¼”ç¤º ThreadLocal çš„çœŸæ­£å«ä¹‰1234567891011121314151617181920212223//æ–°å»ºä¸€ä¸ª boolean ç±»åž‹çš„å˜é‡private ThreadLocal&lt;Boolean&gt; value = new ThreadLocal&lt;&gt;();//åœ¨ä¸»çº¿ç¨‹ä¸­å°†å…¶è®¾ä¸º truevalue.set(true);log.e("MainThread", value.get());//å­çº¿ç¨‹ä¸­è®¾ä¸º falsenew Thread("Thread1") &#123; @Override public void run() &#123; value.set(false); log.e("Thread1", value.get()); &#125;&#125;//å¦ä¸€ä¸ªå­çº¿ç¨‹ç›´æŽ¥è¯»å–new Thread("Thread2") &#123; @Override public void run() &#123; log.e("Thread2", value.get()); &#125;&#125; è¿è¡Œæ—¥å¿—å¦‚ä¸‹ MainThread, trueThread1, falseThread2, null ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶è®¿é—®çš„æ˜¯åŒä¸€ä¸ª ThreadLocal å¯¹è±¡ï¼Œä½†æ˜¯ä¸åŒçº¿ç¨‹èŽ·å–çš„å€¼æ˜¯ä¸ä¸€æ ·çš„ã€‚ThreadLocal çš„å®žçŽ°åŽŸç†ï¼šJavaå¹¶å‘ç¼–ç¨‹ï¼šæ·±å…¥å‰–æžThreadLocal æ€»ç»“Handler æœºåˆ¶æ˜¯å¦‚æ­¤é‡è¦ï¼Œå¼€å‘ä¸­æˆ‘ä»¬æ€»ä¼šæ˜¾å¼æˆ–éšå¼çš„ç”¨åˆ°å®ƒï¼Œæ¯”å¦‚ Activity çš„runOnUiThread 12345678public final void runOnUiThread(Runnable action) &#123; if (Thread.currentThread() != mUiThread) &#123; mHandler.post(action); &#125; else &#123; action.run(); &#125; ...... &#125; æ¯”å¦‚ View çš„post 123456789public boolean post(Runnable action) &#123; final AttachInfo attachInfo = mAttachInfo; if (attachInfo != null) &#123; return attachInfo.mHandler.post(action); â‘  &#125; // Assume that post will succeed later ViewRootImpl.getRunQueue().post(action); â‘¡ return true; &#125; æœ€åŽç”¨ä¸€å¼ å›¾æ¥ç»“æŸæœ¬æ–‡]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Handler</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java æŽ’åºç®—æ³•]]></title>
    <url>%2FJava-%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%2F</url>
    <content type="text"><![CDATA[å¼•è¨€æŽ’åºç®—æ³•ä¸€ç›´æ˜¯ç¨‹åºå‘˜å¼€å‘å’Œé¢è¯•çš„é‡ç‚¹ï¼Œæœ¬æ–‡å°†é‡ç‚¹è®²è§£å‡ ç§å¸¸ç”¨çš„æŽ’åºç®—æ³•ã€‚ ç¨³å®šæ€§å¯¹äºŽä¸€ä¸ªæ•°ç»„a {6,2,4,6,1}ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªå€¼ä¸º 6ï¼Œä¸º a[0] å’Œ a[3]ï¼ŒæŽ’åºä¹‹åŽçš„ç»“æžœæœ‰ä¸¤ç§ 1 2 4 6 6 a[4] a[1] a[2] a[0] a[3] a[4] a[1] a[2] a[3] a[0] å¦‚æžœæŽ’åºç»“æŸä¹‹åŽï¼Œa[0] å¯ä»¥ä¿è¯ä¸€å®šåœ¨ a[3] å‰é¢ï¼Œå³åŽŸæœ‰çš„é¡ºåºä¸å˜ï¼Œåˆ™è¯¥ç®—æ³•å±žäºŽç¨³å®šçš„æŽ’åºç®—æ³• å†’æ³¡æŽ’åºã€åŸºæ•°æŽ’åºã€æ’å…¥æŽ’åºã€å½’å¹¶æŽ’åºã€æ¡¶æŽ’åºã€äºŒå‰æ ‘æŽ’åºç­‰ å¦åˆ™ï¼Œå±žäºŽä¸ç¨³å®šçš„æŽ’åºç®—æ³• é€‰æ‹©æŽ’åºï¼Œå¸Œå°”æŽ’åºï¼Œå †æŽ’åºï¼Œå¿«é€ŸæŽ’åºç­‰ å†’æ³¡æŽ’åº1234567891011121314151617181920212223/** * å†’æ³¡æŽ’åºï¼ŒO(n^2) * æ¯ä¸€æ¬¡å†…å±‚å¾ªçŽ¯ä¸­ï¼Œä¸¤ä¸¤æ¯”è¾ƒï¼Œå°†è¾ƒå¤§çš„æ•°æ”¾åˆ°åŽé¢ * * @param a å¾…æŽ’åºæ•°æ® */public static void bubbleSort(int[] a) &#123; int length = a.length; int i = 0; int temp; for ( ; i &lt; length - 1; i++) &#123; int j = 0; for ( ; j &lt; length - 1 - i; j++) &#123; if (a[j] &gt; a[j+1]) &#123; temp = a[j]; a[j] = a[j+1]; a[j+1] = temp; &#125; &#125; &#125;&#125; æ’å…¥æŽ’åºæ’å…¥æŽ’åºå¯ä»¥åˆ†ä¸ºç›´æŽ¥æ’å…¥æŽ’åºï¼Œä»¥åŠå…¶å˜ç§â€”â€”æŠ˜åŠæ’å…¥æŽ’åºã€å¸Œå°”æŽ’åº ç›´æŽ¥æ’å…¥æŽ’åº123456789101112131415161718192021/** * ç›´æŽ¥æ’å…¥æŽ’åºï¼ŒO(n^2) * iä»Žç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œé»˜è®¤iå‰é¢çš„åºåˆ—å·²ç»æŽ’å¥½åº * å–å‡ºiçš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œä»ŽåŽå¾€å‰æ¯”è¾ƒï¼Œæ‰¾åˆ°é€‚åˆçš„ä½ç½®å°±æ’å…¥ * * @param a å¾…æŽ’åºåºåˆ— */public static void insertSort(int[] a) &#123; int length = a.length; for (int i = 0; i &lt; length; i++) &#123; int temp = a[i]; for (int j = i; j &gt; 0; j--) &#123; if (a[j] &lt; a[j-1]) &#123; a[j] = a[j-1]; a[j-1] = temp; &#125; &#125; &#125;&#125; æŠ˜åŠæ’å…¥æŽ’åº1234567891011121314151617181920212223242526272829303132/** * æŠ˜åŠæ’å…¥æŽ’åºï¼ŒO(n^2) * å¯¹ç›´æŽ¥æ’å…¥æŽ’åºç®—æ³•è¿›è¡Œäº†æ”¹è¿› * ç›´æŽ¥æ’å…¥ç®—æ³•é‡‡ç”¨éåŽ†ä¸€ä¸ªæœ‰åºåºåˆ—çš„æ–¹å¼æ’å…¥å¾…æŽ’åºå…ƒç´ ï¼Œå®Œå…¨æ²¡å¿…è¦ * æŠ˜åŠæ’å…¥æŽ’åºåˆ™ä½¿ç”¨äº†æŠ˜åŠæŸ¥æ‰¾/äºŒåˆ†æŸ¥æ‰¾ * * Arraysç±»çš„binarySearch()æ–¹æ³•ä¾¿æ˜¯æŠ˜åŠæŸ¥æ‰¾çš„å®žçŽ° * * @param a å¾…æŽ’åºåºåˆ— */public static void binaryInsertSort(int[] a) &#123; int length = a.length; for (int i = 0; i &lt; length; i++) &#123; int temp = a[i]; int low = 0; int high = i-1; while (low &lt;= high) &#123; int middle = (low+high) / 2; if (a[middle] &lt; temp) &#123; low = middle+1; &#125; else &#123; high = middle-1; &#125; &#125; for(int j = i-1; j &gt;= low; j--) &#123; //å…ƒç´ åŽç§»ï¼Œä¸ºæ’å…¥tempåšå‡†å¤‡ a[j+1] = a[j]; &#125; a[low] = temp; &#125;&#125; å¸Œå°”æŽ’åº1234567891011121314151617181920212223242526272829303132333435/** * å¸Œå°”æŽ’åºï¼Œä¹Ÿç§° é€’å‡å¢žé‡æŽ’åºï¼ŒO(n*(logn)^2) * å¯¹äºŽnä¸ªå…ƒç´ çš„åºåˆ—ï¼Œå‡è®¾å¢žé‡ä¸ºincrement * ä»Žç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ¯éš”incrementå–ä¸€ä¸ªå…ƒç´ ç»„æˆä¸€ä¸ªå­åºåˆ— * å¯¹æ¯ä¸ªå­åºåˆ—è¿›è¡Œç›´æŽ¥æ’å…¥æŽ’åºï¼Œincrement /= 2 * é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´è‡³incrementä¸º1 * * @param a å¾…æŽ’åºåºåˆ— */public static void shellSort(int[] a) &#123; int length = a.length; // incrementä¸ºå¢žé‡ï¼Œæ¯æ¬¡å‡ä¸ºåŽŸæ¥çš„ä¸€åŠï¼Œç›´è‡³ä¸º1 for (int increment = length / 2; increment &gt; 0; increment /= 2) &#123; // å…±incrementä¸ªç»„ï¼Œå¯¹æ¯ä¸€ç»„éƒ½æ‰§è¡Œç›´æŽ¥æ’å…¥æŽ’åº for (int i = 0; i &lt; increment; i++) &#123; for (int j = i + increment; j &lt; length; j += increment) &#123; // å¦‚æžœa[j] &lt; a[j-increment]ï¼Œåˆ™å¯»æ‰¾a[j]ä½ç½®ï¼Œå¹¶å°†åŽé¢æ•°æ®çš„ä½ç½®éƒ½åŽç§»ã€‚ if (a[j] &lt; a[j - increment]) &#123; int temp = a[j]; int k = j - increment; while (k &gt;= 0 &amp;&amp; a[k] &gt; temp) &#123; a[k + increment] = a[k]; k -= increment; &#125; a[k + increment] = temp; &#125; &#125; &#125; &#125;&#125; æ¡¶æŽ’åºï¼ˆåŸºæ•°æŽ’åºï¼‰12345678910111213141516171819202122232425262728293031323334353637/** * åŸºæ•°æŽ’åºï¼Œä¹Ÿç§°æ¡¶æŽ’åºï¼ŒO(d(k+n)) * åŸºæœ¬æ€æƒ³ï¼šå°†æ•´æ•°æŒ‰ä½æ•°åˆ‡å‰²æˆä¸åŒçš„æ•°å­—ï¼Œç„¶åŽæŒ‰æ¯ä¸ªä½æ•°åˆ†åˆ«æ¯”è¾ƒã€‚ * å…·ä½“åšæ³•ï¼šå°†æ‰€æœ‰å¾…æ¯”è¾ƒæ•°å€¼ç»Ÿä¸€ä¸ºåŒæ ·çš„æ•°ä½é•¿åº¦ï¼Œæ•°ä½è¾ƒçŸ­çš„æ•°å‰é¢è¡¥é›¶ã€‚ç„¶åŽï¼Œä»Žæœ€ä½Žä½å¼€å§‹ï¼Œä¾æ¬¡è¿›è¡Œä¸€æ¬¡æŽ’åºã€‚è¿™æ ·ä»Žæœ€ä½Žä½æŽ’åºä¸€ç›´åˆ°æœ€é«˜ä½æŽ’åºå®Œæˆä»¥åŽ, æ•°åˆ—å°±å˜æˆä¸€ä¸ªæœ‰åºåºåˆ—ã€‚ * * @param a å¾…æŽ’åºæ•°ç»„ * @param d ä½æ•°ï¼Œå¦‚æžœæœ€å¤§æ•°ä¸º9527ï¼Œåˆ™dä¸º10000ï¼Œå¦‚æžœä¸º7ï¼Œåˆ™dä¸º10 */public static void radixSort(int[] a,int d) &#123; int n = 1; //ä»£è¡¨ä½æ•°å¯¹åº”çš„æ•°ï¼š1,10,100... int k = 0; //ä¿å­˜æ¯ä¸€ä½æŽ’åºåŽçš„ç»“æžœç”¨äºŽä¸‹ä¸€ä½çš„æŽ’åºè¾“å…¥ int length = a.length; int[][] bucket = new int[10][length]; //æŽ’åºæ¡¶ç”¨äºŽä¿å­˜æ¯æ¬¡æŽ’åºåŽçš„ç»“æžœï¼Œè¿™ä¸€ä½ä¸ŠæŽ’åºç»“æžœç›¸åŒçš„æ•°å­—æ”¾åœ¨åŒä¸€ä¸ªæ¡¶é‡Œ int[] order = new int[length]; //ç”¨äºŽä¿å­˜æ¯ä¸ªæ¡¶é‡Œæœ‰å¤šå°‘ä¸ªæ•°å­— while(n &lt; d) &#123; for(int num : a) &#123; //å°†æ•°ç»„arrayé‡Œçš„æ¯ä¸ªæ•°å­—æ”¾åœ¨ç›¸åº”çš„æ¡¶é‡Œ int digit = (num/n)%10; bucket[digit][order[digit]] = num; order[digit]++; &#125; int i = 0; for( ; i&lt;length; i++) &#123; //å°†å‰ä¸€ä¸ªå¾ªçŽ¯ç”Ÿæˆçš„æ¡¶é‡Œçš„æ•°æ®è¦†ç›–åˆ°åŽŸæ•°ç»„ä¸­ç”¨äºŽä¿å­˜è¿™ä¸€ä½çš„æŽ’åºç»“æžœ if(order[i] != 0) &#123; //è¿™ä¸ªæ¡¶é‡Œæœ‰æ•°æ®ï¼Œä»Žä¸Šåˆ°ä¸‹éåŽ†è¿™ä¸ªæ¡¶å¹¶å°†æ•°æ®ä¿å­˜åˆ°åŽŸæ•°ç»„ä¸­ int j = 0; for( ; j &lt; order[i]; j++) &#123; a[k] = bucket[i][j]; k++; &#125; &#125; order[i]=0; //å°†æ¡¶é‡Œè®¡æ•°å™¨ç½®0ï¼Œç”¨äºŽä¸‹ä¸€æ¬¡ä½æŽ’åº &#125; n *= 10; k = 0; //å°†kç½®0ï¼Œç”¨äºŽä¸‹ä¸€è½®ä¿å­˜ä½æŽ’åºç»“æžœ &#125;&#125; å½’å¹¶æŽ’åº12345678910111213141516171819202122232425262728293031323334353637383940414243/** * å½’å¹¶æŽ’åºï¼ŒO(nlog(n)) * å…¸åž‹çš„åˆ†æ²»ç®—æ³•ï¼ŒæŠŠä¸€ä¸ªåºåˆ—çš„æŽ’åºåˆ†æˆä¸¤ä¸ªå­åºåˆ—çš„æŽ’åºï¼Œå¯¹å­åºåˆ—é‡å¤ä»¥ä¸Šæ“ä½œç›´è‡³åºåˆ—é•¿åº¦ä¸º1 * ç„¶åˆå¹¶ä»¥ä¸Šåºåˆ— * * @param array * @param left * @param right */public static void mergeSort(int[] array, int left, int right) &#123; if (left &lt; right) &#123; int center = (left + right) / 2; mergeSort(array, left, center); mergeSort(array, center+1, right); merge(array, left, center, right); &#125;&#125;static void merge(int[] array, int low, int mid, int high) &#123; int[] tempArray = new int[high - low + 1]; int temp = 0; int i = low; int j = mid + 1; while (i &lt;= mid &amp;&amp; j &lt;= high) &#123; if (array[i] &lt;= array[j]) &#123; tempArray[temp++] = array[i++]; &#125; else &#123; tempArray[temp++] = array[j++]; &#125; &#125; while (i &lt;= mid) &#123; //æ­¤æ—¶å³è¾¹å·²åˆ°åº• tempArray[temp++] = array[i++]; &#125; while (j &lt;= high) &#123; //æ­¤æ—¶å·¦è¾¹å·²åˆ°åº• tempArray[temp++] = array[j++]; &#125; //å°†æ–°æ•°ç»„ä¸­çš„æ•° è¦†ç›–åŽŸæ•°ç»„lowä¹‹åŽçš„æ•°æ® for (int k = 0; k &lt; tempArray.length; k++) &#123; array[k+low] = tempArray[k]; &#125;&#125; é€‰æ‹©æŽ’åº12345678910111213141516171819202122232425/** * é€‰æ‹©æŽ’åºï¼ŒO(n^2) * éåŽ†æ•´ä¸ªåºåˆ—ï¼Œå°†æœ€å°çš„æ•°æ”¾åœ¨æœ€å‰é¢ * éåŽ†å‰©ä¸‹çš„åºåˆ—ï¼Œå°†æœ€å°çš„æ•°æ”¾åœ¨æœ€å‰é¢ï¼Œé‡å¤ä¸Šè¿°è¿‡ç¨‹ * * @param a å¾…æŽ’åºåºåˆ— */ public static void selectSort(int[] a)&#123; int length = a.length; int i = 0; for( ; i &lt; length; i++)&#123; //å¤–å±‚å¾ªçŽ¯ int temp = a[i]; int position = i; int j = i+1; for( ; j &lt; length; j++) &#123; //å¾€åŽéåŽ†ï¼Œæ‰¾åˆ°æœ€å°çš„å€¼ä»¥åŠå…¶ä½ç½® if(a[j] &lt; temp) &#123; temp = a[j]; position = j; &#125; &#125; a[position]=a[i]; //è¿›è¡Œäº¤æ¢ a[i] = temp; &#125; å¿«é€ŸæŽ’åº12345678910111213141516171819202122232425262728293031323334353637/** * å¿«é€ŸæŽ’åºï¼ŒO(nlog(n)) * å¯¹å†’æ³¡æŽ’åºçš„æ”¹è¿›ï¼Œé€‰å–ä¸€ä¸ªè®°å½•ä½œä¸ºåŸºå‡†ï¼Œç»è¿‡ä¸€è¶ŸæŽ’åºåŽï¼Œå°†æ•´æ®µåºåˆ—åˆ†æˆä¸¤éƒ¨åˆ† * å‰åŠéƒ¨åˆ†å°äºŽåŸºå‡†å€¼ï¼ŒåŽåŠéƒ¨åˆ†å¤§äºŽåŸºå‡†å€¼ï¼Œç„¶åŽé€’å½’å‰ã€åŽä¸¤éƒ¨åˆ†ï¼Œç»§ç»­æŽ’åº * * @param a å¾…æŽ’åºåºåˆ— * @param start åºåˆ—å¼€å§‹å€¼ * @param end åºåˆ—ç»“æŸå€¼ */public static void quickSort(int[] a, int start, int end) &#123; int baseNum = a[start]; int temp; int left = start; int right = end; do &#123; while (a[left] &lt; baseNum &amp;&amp; left &lt; end) &#123; left++; &#125; while (a[right] &gt; baseNum &amp;&amp; right &gt; start) &#123; right--; &#125; if (left &lt;= right) &#123; //å·¦è¾¹å‡ºçŽ°å¤§äºŽåŸºå‡†å€¼æˆ–è€…å³è¾¹å‡ºçŽ°å°äºŽåŸºå‡†å€¼ï¼Œä¸”left&lt;=right temp = a[left]; a[left] = a[right]; a[right] = temp; left++; right--; &#125; &#125; while (left &lt;= right); if (start &lt; right) &#123; quickSort(a, start, right); &#125; if (end &gt; left) &#123; quickSort(a, left, end); &#125;&#125; äºŒå‰æ ‘æŽ’åºé€šè¿‡äºŒå‰æ ‘çš„ä¸­åºéåŽ†å®žçŽ°ã€‚å¦‚æžœäºŒå‰æŽ’åºæ ‘æ˜¯å¹³è¡¡çš„ï¼Œåˆ™æ—¶é—´å¤æ‚åº¦ä¸º $O(\log_2 n)$è¿‘ä¼¼äºŽæŠ˜åŠæŸ¥æ‰¾ã€‚ å¦‚æžœäºŒå‰æŽ’åºæ ‘å®Œå…¨ä¸å¹³è¡¡ï¼Œåˆ™æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152public class BinarySortTree &#123; static class Node &#123; private Comparable data; private Node left; private Node right; public Node(Comparable data) &#123; this.data = data; &#125; public void addNode(Node newNode) &#123; if (newNode.data.compareTo(this.data) &lt; 0) &#123; if (left == null) &#123; left = newNode; &#125; else &#123; left.addNode(newNode); &#125; &#125; else &#123; if (right == null) &#123; right = newNode; &#125; else &#123; right.addNode(newNode); &#125; &#125; &#125; public void printNode() &#123; //ä¸­åºéåŽ† if (left != null) &#123; left.printNode(); &#125; System.out.println(this.data); if (right != null) &#123; right.printNode(); &#125; &#125; &#125; private Node root; public void add(Comparable data) &#123; //å‘äºŒå‰æ ‘ä¸­æ’å…¥å…ƒç´  Node node = new Node(data); if (root == null) &#123; root = node; &#125; else &#123; root.addNode(node); &#125; &#125; public void print() &#123; root.printNode(); &#125;&#125; è°ƒç”¨å¦‚ä¸‹12345678public static void main(String[] args) &#123; int[] a = &#123;12,0,34,5,2,8,456&#125;; BinarySortTree tree = new BinarySortTree(); for (int i : a) &#123; tree.add(i); &#125; tree.print();&#125; æŸ¥æ‰¾ç®—æ³•äºŒåˆ†æŸ¥æ‰¾åªèƒ½å¯¹æœ‰åºåºåˆ—è¿›è¡ŒæŸ¥æ‰¾123456789101112131415161718192021222324252627public static int binarySearch(int[] array, int low, int high, int target) &#123; if (low &gt; high) return -1; int mid = low + (high - low) / 2; if (array[mid] &gt; target) return binarySearch(array, low, mid - 1, target); if (array[mid] &lt; target) return binarySearch(array, mid + 1, high, target); return mid;&#125;public static int bSearchWithoutRecursion(int a[], int key) &#123; int low = 0; int high = a.length - 1; while (low &lt;= high) &#123; int mid = low + (high - low) / 2; if (a[mid] &gt; key) high = mid - 1; else if (a[mid] &lt; key) low = mid + 1; else return mid; &#125; return -1;&#125; é¡ºåºæŸ¥æ‰¾å®žçŽ°è¾ƒç®€å•ï¼Œç•¥è¿‡ äºŒå‰æ ‘æŸ¥æ‰¾å¯ä»¥é€šè¿‡æž„å»ºä¸€ä¸ªäºŒå‰æœç´¢æ ‘å®žçŽ°]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android View çš„å·¥ä½œåŽŸç†]]></title>
    <url>%2FAndroid-View-%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%2F</url>
    <content type="text"><![CDATA[å¼•è¨€ å·¥ä½œåŽŸç†ViewRoot å’Œ DecorViewMeasureSpecå·¥ä½œæµç¨‹measure è¿‡ç¨‹layout è¿‡ç¨‹draw è¿‡ç¨‹è‡ªå®šä¹‰ View]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>View</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android IPC æœºåˆ¶è¯¦è§£]]></title>
    <url>%2FAndroid-IPC-%E6%9C%BA%E5%88%B6%E8%AF%A6%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[å¼•è¨€IPCï¼ˆInter-Process Communicationï¼‰ï¼Œè¿›ç¨‹é—´é€šä¿¡æˆ–è€…è·¨è¿›ç¨‹é€šä¿¡ï¼ŒæŒ‡ä¸åŒçš„è¿›ç¨‹ä¹‹é—´è¿›è¡Œæ•°æ®äº¤æ¢çš„è¿‡ç¨‹ã€‚æŒ‰ç…§æ“ä½œç³»ç»Ÿçš„æè¿°ï¼Œè¿›ç¨‹æ˜¯æŒ‡ä¸€ä¸ªæ‰§è¡Œå•å…ƒï¼Œåœ¨ PC æˆ–ç§»åŠ¨è®¾å¤‡ä¸ŠæŒ‡ä¸€ä¸ªç¨‹åº/åº”ç”¨ã€‚å®¹æ˜“æ··æ·†çš„å¦ä¸€ä¸ªæ¦‚å¿µæ˜¯çº¿ç¨‹ï¼Œçº¿ç¨‹æ˜¯ CPU è°ƒåº¦çš„æœ€å°å•å…ƒï¼Œå±žäºŽæœ‰é™çš„ç³»ç»Ÿèµ„æºã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ã€‚ åº”ç”¨åœºæ™¯åªæœ‰åœ¨å¤šè¿›ç¨‹åœºæ™¯ä¸‹æ‰éœ€è¦ IPC æœºåˆ¶ã€‚ å¤šè¿›ç¨‹çš„æƒ…å†µåˆ†ä¸ºä¸¤ç§ã€‚ç¬¬ä¸€ç§æƒ…å†µæ˜¯åº”ç”¨å› ä¸ºæŸäº›åŽŸå› éœ€è¦é‡‡ç”¨å¤šè¿›ç¨‹æ¨¡å¼æ¥å®žçŽ°ï¼Œæ¯”å¦‚ä¸€äº›æ¨¡å—ç”±äºŽç‰¹æ®ŠåŽŸå› éœ€è¦è¿è¡Œåœ¨å•ç‹¬çš„è¿›ç¨‹ä¸­ã€ä¸ºäº†åŠ å¤§å¯ä½¿ç”¨çš„å†…å­˜éœ€è¦å¤šè¿›ç¨‹æ¥èŽ·å–å¤šä»½å†…å­˜ç©ºé—´ï¼ˆAndroid å¯¹å•ä¸ªåº”ç”¨å¯ä½¿ç”¨çš„å†…å­˜åšäº†é™åˆ¶ï¼Œæ—©æœŸä¸º16MBï¼‰ï¼›ç¬¬äºŒç§æƒ…å†µåˆ™æ˜¯å½“å‰åº”ç”¨éœ€è¦å‘å…¶ä»–åº”ç”¨èŽ·å–æ•°æ®ï¼Œæ¯”å¦‚ä½¿ç”¨ ContentProvider åŽ»æŸ¥è¯¢æ•°æ®ã€‚ ä½¿ç”¨å¤šè¿›ç¨‹ä¼šé€ æˆå¦‚ä¸‹çš„é—®é¢˜ï¼š é™æ€æˆå‘˜å’Œå•ä¾‹æ¨¡å¼å®Œå…¨å¤±æ•ˆ çº¿ç¨‹åŒæ­¥æœºåˆ¶å®Œå…¨å¤±æ•ˆ SharedPreferences å¯é æ€§ä¸‹é™ Application ä¼šå¤šæ¬¡åˆ›å»º å¯¹äºŽç¬¬å››ç‚¹ï¼Œå½“ä¸€ä¸ªç»„ä»¶è·‘åœ¨ä¸€ä¸ªæ–°çš„è¿›ç¨‹ä¸­ï¼Œç”±äºŽç³»ç»Ÿè¦åœ¨åˆ›å»ºæ–°çš„çº¿ç¨‹åŒæ—¶åˆ†é…è™šæ‹Ÿæœºï¼Œè¿™ä¸€è¿‡ç¨‹ç›¸å½“äºŽå¯åŠ¨ä¸€ä¸ªåº”ç”¨ï¼Œæ‰€ä»¥ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Applicationã€‚ åŸºç¡€æ¦‚å¿µSerializable æŽ¥å£Java æä¾›çš„ä¸€ä¸ªåºåˆ—åŒ–æŽ¥å£ï¼Œæ˜¯ä¸€ä¸ªç©ºæŽ¥å£ï¼Œä¸ºå¯¹è±¡æä¾›æ ‡å‡†çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œã€‚ä½¿ç”¨ Serializable å®žçŽ°åºåˆ—åŒ–å¾ˆç®€å•ï¼Œåªéœ€è¦å®žçŽ°æŽ¥å£ï¼Œæä¾›ä¸€ä¸ªseriaVersionUIDå³å¯ï¼ˆä¸æä¾›ä¼šå¯¹ååºåˆ—åŒ–è¿‡ç¨‹äº§ç”Ÿå½±å“ï¼‰ï¼Œç³»ç»Ÿä¾¿ä¼šè‡ªåŠ¨å®Œæˆé»˜è®¤çš„åºåˆ—åŒ–è¿‡ç¨‹ã€‚ 1234567891011121314151617public class User implements Serializable &#123; private static final long seriaVersionUID = 519067123721295773L ...&#125;//åºåˆ—åŒ–è¿‡ç¨‹User user = new User("name", 18);ObjectOutputStream out = new ObjectOutputStream( new FileOutputStream("file.txt"));out.writeObject(user);out.close//ååºåˆ—åŒ–è¿‡ç¨‹ObjectInputStream in = new ObjectInputStream( new FileInputStream("file.txt"));User user = (User) in.readObject();in.close ä½¿ç”¨ Serializable å®žçŽ°åºåˆ—åŒ–éœ€è¦æ³¨æ„ï¼Œstatic å’Œ transient å…³é”®å­—ä¿®é¥°çš„å˜é‡ä¸ä¼šè¢«åºåˆ—åŒ–ã€‚ä½¿ç”¨ static ä¿®é¥°çš„å˜é‡çš„å€¼å­˜å‚¨åœ¨ JVM ä¸­ã€‚ Java è¿˜æä¾›äº†å¦ä¸€ç§åºåˆ—åŒ–çš„æ–¹å¼ï¼šExternalizableæŽ¥å£ï¼Œè¯¥æŽ¥å£ç»§æ‰¿è‡ª Serializable è€Œä¸”ä¼˜å…ˆçº§æ›´é«˜ï¼Œä½¿ç”¨ä¹‹åŽåºåˆ—åŒ–çš„ç»†èŠ‚éœ€è¦å¼€å‘äººå‘˜è‡ªå·±å®žçŽ°ï¼ŒåŒæ—¶ transient å…³é”®å­—å°†å¤±åŽ»ä½œç”¨ã€‚ Parcelable æŽ¥å£Android å®˜æ–¹æä¾›çš„åºåˆ—åŒ–æŽ¥å£ï¼Œå®žçŽ°æŽ¥å£ä¹‹åŽï¼Œç±»çš„å¯¹è±¡å³å¯è¿›è¡Œä¸€ä¸ªâ€œä»Žå¯¹è±¡å­˜å‚¨ä¸º Parcel ï¼Œ ä»Ž Parcel è¯»å–ä¸ºå¯¹è±¡â€çš„è¯»å†™è¿‡ç¨‹ã€‚Parcel åŒ…è£…äº†å¯åºåˆ—åŒ–çš„æ•°æ®ï¼Œå¯ä»¥åœ¨Binderä¸­è‡ªç”±ä¼ è¾“ã€‚ å…¶ä¸Ž Serializable çš„åŒºåˆ«åœ¨äºŽ Parcelable ä½¿ç”¨æ›´å¤æ‚ï¼ŒåŽè€…å¦‚ä¸Šé¢çš„ä»£ç ï¼Œè¶³å¤Ÿç®€æ´ã€‚ ä½¿ç”¨å†…å­˜æ—¶ï¼ŒParcelable æ¯” Serializable æ€§èƒ½é«˜ï¼Œå› ä¸º Serializable åºåˆ—åŒ–çš„æ—¶å€™ä¼šäº§ç”Ÿå¤§é‡ä¸´æ—¶å˜é‡ï¼Œå¼•èµ·é¢‘ç¹çš„GCã€‚ ä½¿ç”¨æœ¬åœ°å­˜å‚¨çš„æ—¶å€™ï¼ŒSerializable æ›´æœ‰ä¿éšœæ€§ï¼Œå› ä¸º Parcelable åœ¨å¤–ç•Œæœ‰å˜åŒ–çš„æƒ…å†µä¸‹ä¸èƒ½å¾ˆå¥½çš„ä¿è¯æ•°æ®çš„æŒç»­æ€§ã€‚ æ ‡å‡†å†™æ³•å¦‚ä¸‹12345678910111213141516171819202122232425262728293031323334353637public class User implements Parcelable &#123; private String name; private int id; protected User(Parcel in) &#123; name = in.readString(); id = in.readInt(); &#125; /* å®žä¾‹åŒ–é™æ€å˜é‡CREATOR ä»ŽParcelä¸­æž„é€ ä¸€ä¸ªå®žçŽ°äº†Parcelableçš„ç±»çš„å®žä¾‹,Parcelæ¥è‡ªwriteToParcelæ–¹æ³• */ public static final Creator&lt;User&gt; CREATOR = new Creator&lt;User&gt;() &#123; @Override public User createFromParcel(Parcel in) &#123; return new User(in); &#125; @Override public User[] newArray(int size) &#123; return new User[size]; &#125; &#125;; @Override public int describeContents() &#123; return 0; &#125; @Override public void writeToParcel(Parcel dest, int flags) &#123; dest.writeString(name); dest.writeInt(id); &#125;&#125; é€šè¿‡ Intent ä¼ é€’å’ŒèŽ·å–æ•°æ®1234567//ä¼ é€’User user = new User("Name", 18);Intent intent = new Intent();intent.putExtra("data", user);//ä½¿ç”¨User user = getIntent().getParcelableExtra("data"); BinderBinder æ˜¯ä¸€ä¸ªå®žçŽ°äº† IBinder æŽ¥å£çš„ç±»ã€‚ä»Ž IPC è§’åº¦ï¼ŒBinder æ˜¯ Android ä¸­çš„ä¸€ç§è·¨è¿›ç¨‹é€šä¿¡æ–¹å¼ï¼ŒBinder è¿˜å¯ä»¥ç†è§£ä¸ºä¸€ç§è™šæ‹Ÿçš„ç‰©ç†è®¾å¤‡ï¼Œå®ƒçš„è®¾å¤‡é©±åŠ¨æ˜¯/dev/binderï¼Œè¯¥é€šä¿¡æ–¹å¼åœ¨ Linux ä¸­æ²¡æœ‰ã€‚ ä»Ž Android Framework è§’åº¦ï¼ŒBinder æ˜¯ ServiceManager è¿žæŽ¥å„ç§ Manager(ActivityManagerã€WindowManager ç­‰ç­‰)å’Œç›¸åº” ManagerService çš„æ¡¥æ¢ã€‚ ä»Ž Android åº”ç”¨å±‚è§’åº¦ï¼ŒBinder æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯è¿›è¡Œé€šä¿¡çš„åª’ä»‹ï¼Œå½“æˆ‘ä»¬ bindService çš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯ä¼šè¿”å›žä¸€ä¸ªåŒ…å«äº†æœåŠ¡ç«¯ä¸šåŠ¡è°ƒç”¨çš„ Binder å¯¹è±¡ï¼Œå®¢æˆ·ç«¯é€šè¿‡å®ƒèŽ·å–æœåŠ¡ç«¯æä¾›çš„æœåŠ¡ï¼ˆæ™®é€šæœåŠ¡å’ŒåŸºäºŽ AIDL çš„æœåŠ¡ï¼‰æˆ–è€…æ•°æ®ã€‚ æ›´å¤šå…³äºŽ Binderï¼šå›¾è§£Android - Binder å’Œ Service å®žçŽ°æ–¹å¼BundleBundle å¯ä»¥åœ¨å››å¤§ç»„ä»¶ä¹‹é—´é€šè¿‡ Intent ä¼ é€’æ•°æ®ï¼Œå®ƒæœ¬èº«å®žçŽ°äº† Parcelable æŽ¥å£ï¼Œèƒ½å¤Ÿå­˜å‚¨åŸºæœ¬æ•°æ®ç±»åž‹ã€Stringã€å®žçŽ°äº† Parcelable çš„å¯¹è±¡ä»¥åŠä»¥ä¸Šç±»åž‹çš„æ•°ç»„ã€‚ æ–‡ä»¶å…±äº«åˆ©ç”¨å¤šè¿›ç¨‹åŒæ—¶è¯»å†™åŒä¸ªå¤–éƒ¨æ–‡ä»¶è¾¾åˆ°æ˜¯æ•°æ®äº¤äº’çš„ç›®çš„ã€‚å­˜å‚¨å½¢å¼æ²¡æœ‰é™åˆ¶ï¼Œå¯ä»¥æ˜¯ XMLã€æ–‡æœ¬ã€å¯¹è±¡åºåˆ—åŒ–ç­‰ç­‰ã€‚ ç¼ºç‚¹åœ¨äºŽï¼ŒLinux ç³»ç»Ÿå¯¹æ–‡ä»¶å¹¶å‘è¯»å†™æ²¡æœ‰é™åˆ¶ï¼Œä¼šå¯¼è‡´æ•°æ®ä¸åŒæ­¥çš„é—®é¢˜ï¼Œæ‰€ä»¥è¯¥æ–¹å¼åªé€‚åˆäºŽå¯¹æ•°æ®åŒæ­¥è¦æ±‚ä¸é«˜çš„è¿›ç¨‹é—´é€šä¿¡ã€‚ SocketSocketä¹Ÿç§°ä¸ºâ€œå¥—æŽ¥å­—â€ï¼Œæ˜¯ç½‘ç»œé€šä¿¡ä¸­çš„æ¦‚å¿µï¼Œå®ƒåˆ†ä¸ºæµå¼å¥—æŽ¥å­—å’Œç”¨æˆ·æ•°æ®å¥—æŽ¥å­—ä¸¤ç§ï¼Œåˆ†åˆ«åº”äºŽç½‘ç»œçš„ä¼ è¾“æŽ§åˆ¶å±‚ä¸­çš„TCPå’ŒUDPåè®®ã€‚ AIDLæ¦‚å¿µAndroid Interface Definition Languageï¼ŒAndroid æŽ¥å£å®šä¹‰è¯­è¨€ã€‚ æ•°æ®ç±»åž‹ï¼šä½œä¸ºä¸€é—¨â€œè¯­è¨€â€ï¼Œå®ƒæœ‰ä¸€äº›ä¸Ž Java ä¸åŒçš„åœ°æ–¹ã€‚é™¤äº†åŸºæœ¬æ•°æ®ç±»åž‹ã€String å’Œ CharSequence ä¹‹å¤–ï¼Œä½¿ç”¨å…¶ä»–çš„æ•°æ®ç±»åž‹éƒ½éœ€è¦æ˜¾å¼å¯¼å…¥ï¼Œæ— è®º aidl æŽ¥å£æ˜¯å¦ä¸Žç›®æ ‡ç±»åœ¨åŒä¸€ä¸ªåŒ…ä¸­ã€‚å…¶æ”¯æŒçš„æ•°æ®ç±»åž‹å¦‚ä¸‹ Java ä¸­çš„å…«ç§åŸºæœ¬æ•°æ®ç±»åž‹ã€Stringã€CharSequenceã€‚ Listç±»åž‹ï¼šå…¶ä¸­çš„å…ƒç´ å¿…é¡»æ˜¯AIDLæ”¯æŒçš„ç±»åž‹ä¹‹ä¸€ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªå…¶ä»–AIDLç”Ÿæˆçš„æŽ¥å£ï¼Œæˆ–è€…æ˜¯å®šä¹‰çš„ Parcelable ç±»åž‹ã€‚Listå¯ä»¥ä½¿ç”¨æ³›åž‹ã€‚ Mapç±»åž‹ï¼šå…¶ä¸­çš„å…ƒç´ å¿…é¡»æ˜¯AIDLæ”¯æŒçš„ç±»åž‹ä¹‹ä¸€ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªå…¶ä»–AIDLç”Ÿæˆçš„æŽ¥å£ï¼Œæˆ–è€…æ˜¯å®šä¹‰çš„parcelableã€‚Mapä¸æ”¯æŒæ³›åž‹ã€‚ å®šå‘tagï¼šAIDL ä¸­çš„å®šå‘ tag è¡¨ç¤ºäº†åœ¨è·¨è¿›ç¨‹é€šä¿¡ä¸­æ•°æ®çš„æµå‘ï¼Œå…¶ä¸­ in è¡¨ç¤ºæ•°æ®åªèƒ½ç”±å®¢æˆ·ç«¯æµå‘æœåŠ¡ç«¯ï¼Œ out è¡¨ç¤ºæ•°æ®åªèƒ½ç”±æœåŠ¡ç«¯æµå‘å®¢æˆ·ç«¯ï¼Œè€Œ inout åˆ™è¡¨ç¤ºæ•°æ®å¯åœ¨æœåŠ¡ç«¯ä¸Žå®¢æˆ·ç«¯ä¹‹é—´åŒå‘æµé€šã€‚å…¶ä¸­ï¼Œæ•°æ®æµå‘æ˜¯é’ˆå¯¹åœ¨å®¢æˆ·ç«¯ä¸­çš„é‚£ä¸ªä¼ å…¥æ–¹æ³•çš„å¯¹è±¡è€Œè¨€çš„ã€‚ in ä¸ºå®šå‘ tag æ—¶ï¼Œè¡¨çŽ°ä¸ºæœåŠ¡ç«¯å°†ä¼šæŽ¥æ”¶åˆ°ä¸€ä¸ªå¯¹è±¡çš„å®Œæ•´æ•°æ®ï¼Œä½†æ˜¯å®¢æˆ·ç«¯çš„å¯¹è±¡ä¸ä¼šå› ä¸ºæœåŠ¡ç«¯å¯¹ä¼ å‚çš„ä¿®æ”¹è€Œå‘ç”Ÿå˜åŠ¨ï¼›out ä¸ºå®šå‘ tag æ—¶ï¼Œè¡¨çŽ°ä¸ºæœåŠ¡ç«¯å°†ä¼šæŽ¥æ”¶åˆ°å¯¹è±¡çš„çš„ç©ºå¯¹è±¡ï¼Œä½†æ˜¯åœ¨æœåŠ¡ç«¯å¯¹æŽ¥æ”¶åˆ°çš„ç©ºå¯¹è±¡æœ‰ä»»ä½•ä¿®æ”¹ä¹‹åŽï¼Œå®¢æˆ·ç«¯å°†ä¼šåŒæ­¥å˜åŠ¨ï¼›inout ä¸ºå®šå‘ tag æ—¶ï¼ŒæœåŠ¡ç«¯å°†ä¼šæŽ¥æ”¶åˆ°å®¢æˆ·ç«¯ä¼ æ¥å¯¹è±¡çš„å®Œæ•´ä¿¡æ¯ï¼Œå¹¶ä¸”å®¢æˆ·ç«¯å°†ä¼šåŒæ­¥æœåŠ¡ç«¯å¯¹è¯¥å¯¹è±¡çš„ä»»ä½•å˜åŠ¨ã€‚ å…³äºŽæ›´å¤šï¼šä½ çœŸçš„ç†è§£AIDLä¸­çš„inï¼Œoutï¼Œinoutä¹ˆ? ä¸¤ç§ç±»åž‹ï¼šæ‰€æœ‰çš„ AIDL æ–‡ä»¶å¯åˆ†ä¸ºä¸¤ç±»ã€‚ä¸€ç±»å®šä¹‰ Parcelable å¯¹è±¡ï¼Œä»¥ä¾›å…¶ä»– AIDL æ–‡ä»¶ä½¿ç”¨éžé»˜è®¤æ”¯æŒçš„æ•°æ®ç±»åž‹ã€‚ä¸€ç±»å®šä¹‰æ–¹æ³•æŽ¥å£ï¼Œä»¥ä¾›ç³»ç»Ÿå®Œæˆè·¨è¿›ç¨‹é€šä¿¡ã€‚å¯ä»¥çœ‹åˆ°ï¼Œä¸¤ç±»æ–‡ä»¶éƒ½æ˜¯åœ¨â€œå®šä¹‰â€ï¼Œè€Œä¸æ¶‰åŠå…·ä½“çš„å®žçŽ°ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒå«åšâ€œAndroid æŽ¥å£å®šä¹‰è¯­è¨€â€ã€‚æ³¨ï¼šæ‰€æœ‰çš„éžé»˜è®¤æ”¯æŒæ•°æ®ç±»åž‹å¿…é¡»é€šè¿‡ç¬¬ä¸€ç±» AIDL æ–‡ä»¶å®šä¹‰æ‰èƒ½è¢«ä½¿ç”¨ã€‚ å®žçŽ°ç¬¬ä¸€ç±» AIDL æ–‡ä»¶ï¼š1234567// Book.aidl// è¿™ä¸ªæ–‡ä»¶çš„ä½œç”¨æ˜¯å¼•å…¥äº†ä¸€ä¸ªåºåˆ—åŒ–å¯¹è±¡ Book ä¾›å…¶ä»–çš„AIDLæ–‡ä»¶ä½¿ç”¨// æ³¨æ„ï¼šBook.aidl ä¸Ž Book.javaçš„åŒ…ååº”å½“æ˜¯ä¸€æ ·çš„package com.febers.aidldemo;//æ³¨æ„parcelableæ˜¯å°å†™parcelable Book; è‡ªå®šä¹‰ Parcelable å¯¹è±¡åªæ”¯æŒä¸º in çš„å®šå‘ tag ã€‚åŽŸå› åœ¨äºŽç”Ÿæˆçš„ç±»ä¸­åªæœ‰ writeToParcelæ–¹æ³•ï¼Œè€Œå¦‚æžœè¦æ”¯æŒä¸º out æˆ–è€… inout çš„å®šå‘ tagï¼Œè¿˜éœ€è¦å®žçŽ°readFromParcelæ–¹æ³•ï¼Œè€Œè¯¥æ–¹æ³•å¹¶æ²¡æœ‰åœ¨ Parcelable æŽ¥å£ä¸­å®šä¹‰ï¼Œéœ€è¦æˆ‘ä»¬ä»Žå¤´å†™ã€‚ ç¬¬äºŒç±» AIDL æ–‡ä»¶ï¼š1234567891011121314151617181920// BookManager.aidlpackage com.lypeer.ipcclient;//å¯¼å…¥æ‰€éœ€è¦ä½¿ç”¨çš„éžé»˜è®¤æ”¯æŒæ•°æ®ç±»åž‹çš„åŒ…import com.febers.aidldemo.Book;interface BookManager &#123; //æ‰€æœ‰çš„è¿”å›žå€¼å‰éƒ½ä¸éœ€è¦åŠ ä»»ä½•ä¸œè¥¿ï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆæ•°æ®ç±»åž‹ List&lt;Book&gt; getBooks(); Book getBook(); int getBookCount(); //ä¼ å‚æ—¶ï¼ŒJavaåŸºæœ¬æ•°æ®ç±»åž‹ã€String ä»¥åŠ CharSequence ä¹‹å¤–çš„ç±»åž‹ //éƒ½éœ€è¦åœ¨å‰é¢åŠ ä¸Šå®šå‘tagï¼Œå…·ä½“åŠ ä»€ä¹ˆé‡éœ€è€Œå®š void setBookPrice(in Book book , int price) void setBookName(in Book book , String name) void addBookIn(in Book book); void addBookOut(out Book book); void addBookInout(inout Book book);&#125; å®Œæˆä¸Šé¢çš„æ­¥éª¤ä¹‹åŽï¼Œbuildé¡¹ç›®ï¼Œç¼–è¯‘å™¨å°±ä¼šä¸ºæˆ‘ä»¬ç”Ÿæˆç›¸åº”çš„ BookManager ç±»ã€‚æ­¤æ—¶å°±å¯ä»¥å¼€å§‹æœåŠ¡ç«¯ã€å®¢æˆ·ç«¯çš„ä»£ç ç¼–å†™ã€‚ æœåŠ¡ç«¯12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758public class AIDLService extends Service &#123; public final String TAG = this.getClass().getSimpleName(); //åŒ…å«Bookå¯¹è±¡çš„list private List&lt;Book&gt; mBooks = new ArrayList&lt;&gt;(); //ç”±AIDLæ–‡ä»¶ç”Ÿæˆçš„BookManager private final BookManager.Stub mBookManager = new BookManager.Stub() &#123; @Override public List&lt;Book&gt; getBooks() throws RemoteException &#123; synchronized (this) &#123; Log.e(TAG, "invoking getBooks() method , now the list is : " + mBooks.toString()); if (mBooks != null) &#123; return mBooks; &#125; return new ArrayList&lt;&gt;(); &#125; &#125; @Override public void addBook(Book book) throws RemoteException &#123; synchronized (this) &#123; if (mBooks == null) &#123; mBooks = new ArrayList&lt;&gt;(); &#125; if (book == null) &#123; Log.e(TAG, "Book is null in In"); book = new Book(); &#125; //å°è¯•ä¿®æ”¹bookçš„å‚æ•°ï¼Œä¸»è¦æ˜¯ä¸ºäº†è§‚å¯Ÿå…¶åˆ°å®¢æˆ·ç«¯çš„åé¦ˆ book.setPrice(2333); if (!mBooks.contains(book)) &#123; mBooks.add(book); &#125; //æ‰“å°mBooksåˆ—è¡¨ï¼Œè§‚å¯Ÿå®¢æˆ·ç«¯ä¼ è¿‡æ¥çš„å€¼ Log.e(TAG, "invoking addBooks() method , now the list is : " + mBooks.toString()); &#125; &#125; &#125;; @Override public void onCreate() &#123; super.onCreate(); Book book = new Book(); book.setName("Androidå¼€å‘è‰ºæœ¯æŽ¢ç´¢"); book.setPrice(28); mBooks.add(book); &#125; @Nullable @Override public IBinder onBind(Intent intent) &#123; Log.e(getClass().getSimpleName(), String.format("on bind,intent = %s", intent.toString())); return mBookManager; &#125;&#125; å®¢æˆ·ç«¯123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293public class AIDLActivity extends AppCompatActivity &#123; //ç”±AIDLæ–‡ä»¶ç”Ÿæˆçš„ Java ç±» private BookManager mBookManager = null; //æ ‡å¿—å½“å‰ä¸ŽæœåŠ¡ç«¯è¿žæŽ¥çŠ¶å†µçš„å¸ƒå°”å€¼ï¼Œfalseä¸ºæœªè¿žæŽ¥ï¼Œtrueä¸ºè¿žæŽ¥ä¸­ private boolean mBound = false; //åŒ…å«Bookå¯¹è±¡çš„list private List&lt;Book&gt; mBooks; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_aidl); &#125; /** * æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ï¼Œç‚¹å‡»ä¹‹åŽè°ƒç”¨æœåŠ¡ç«¯çš„addBookInæ–¹æ³• * * @param view */ public void addBook(View view) &#123; //å¦‚æžœä¸ŽæœåŠ¡ç«¯çš„è¿žæŽ¥å¤„äºŽæœªè¿žæŽ¥çŠ¶æ€ï¼Œåˆ™å°è¯•è¿žæŽ¥ if (!mBound) &#123; attemptToBindService(); Toast.makeText(this, "å½“å‰ä¸ŽæœåŠ¡ç«¯å¤„äºŽæœªè¿žæŽ¥çŠ¶æ€ï¼Œæ­£åœ¨å°è¯•é‡è¿žï¼Œè¯·ç¨åŽå†è¯•", Toast.LENGTH_SHORT).show(); return; &#125; if (mBookManager == null) return; Book book = new Book(); book.setName("APPç ”å‘å½•In"); book.setPrice(30); try &#123; mBookManager.addBook(book); Log.e(getLocalClassName(), book.toString()); &#125; catch (RemoteException e) &#123; e.printStackTrace(); &#125; &#125; /** * å°è¯•ä¸ŽæœåŠ¡ç«¯å»ºç«‹è¿žæŽ¥ */ private void attemptToBindService() &#123; Intent intent = new Intent(); intent.setAction("com.febers.aidl"); intent.setPackage("com.febers.aidldemo"); bindService(intent, mServiceConnection, Context.BIND_AUTO_CREATE); &#125; @Override protected void onStart() &#123; super.onStart(); if (!mBound) &#123; attemptToBindService(); &#125; &#125; @Override protected void onStop() &#123; super.onStop(); if (mBound) &#123; unbindService(mServiceConnection); mBound = false; &#125; &#125; private ServiceConnection mServiceConnection = new ServiceConnection() &#123; @Override public void onServiceConnected(ComponentName name, IBinder service) &#123; Log.e(getLocalClassName(), "service connected"); mBookManager = BookManager.Stub.asInterface(service); mBound = true; if (mBookManager != null) &#123; try &#123; mBooks = mBookManager.getBooks(); Log.e(getLocalClassName(), mBooks.toString()); &#125; catch (RemoteException e) &#123; e.printStackTrace(); &#125; &#125; &#125; @Override public void onServiceDisconnected(ComponentName name) &#123; Log.e(getLocalClassName(), "service disconnected"); mBound = false; &#125; &#125;;&#125; å½“ç„¶ä¸è¦å¿˜è®°åœ¨ Manifest æ–‡ä»¶ä¸­æ³¨å†Œ Serviceã€‚æŽ§åˆ¶å°æ˜¾ç¤ºä¿¡æ¯å¦‚ä¸‹ï¼š //æœåŠ¡ç«¯çš„ log ä¿¡æ¯1ï¼Œon bind,intent = Intent { act=com.lypeer.aidl pkg=com.lypeer.ipcserver }2ï¼Œinvoking getBooks() method , now the list is : [name : Androidå¼€å‘è‰ºæœ¯æŽ¢ç´¢ , price : 28]3ï¼Œinvoking addBooks() method , now the list is : [name : Androidå¼€å‘è‰ºæœ¯æŽ¢ç´¢ , price : 28, name : APPç ”å‘å½•In , price : 2333] //å®¢æˆ·ç«¯çš„ log ä¿¡æ¯1ï¼Œservice connected2ï¼Œ[name : Androidå¼€å‘è‰ºæœ¯æŽ¢ç´¢ , price : 28]3ï¼Œname : APPç ”å‘å½•In , price : 2333 MessagerMessager åº•å±‚ä½¿ç”¨äº† AIDL æ–¹å¼ã€‚å’Œ AIDL ä¸åŒçš„æ˜¯ï¼ŒMessager åˆ©ç”¨ Handler å½¢å¼å¤„ç†æ¶ˆæ¯çš„æŽ¥æ”¶å‘é€ï¼Œå› æ­¤æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè¿™ä¹Ÿè¡¨ç¤ºå®ƒä¸æ”¯æŒå¹¶å‘å¤„ç†ï¼›è€Œ AIDL æ–¹å¼æ˜¯éžçº¿ç¨‹å®‰å…¨çš„ï¼Œæ”¯æŒå¹¶å‘å¤„ç†ï¼Œå› æ­¤ä½¿ç”¨ AIDL æ–¹å¼æ—¶éœ€è¦ä¿è¯ä»£ç çš„çº¿ç¨‹å®‰å…¨ã€‚ æ¦‚å¿µMessenger æœ‰ä¸¤ä¸ªæž„é€ å‡½æ•°ï¼Œåˆ†è´ä»¥ Handler å’Œ Binder ä¸ºå‚æ•°1234567private final IMessenger mTarget;public Messenger(Handler target) &#123; mTarget = target.getIMessenger();&#125;public Messenger(IBinder target) &#123; mTarget = IMessenger.Stub.asInterface(target); //å’Œå‰é¢çš„ AIDL å¾ˆç›¸ä¼¼å§&#125; Handler.getIMessengeræºç ï¼š123456789final IMessenger getIMessenger() &#123; synchronized (mQueue) &#123; if (mMessenger != null) &#123; return mMessenger; &#125; mMessenger = new MessengerImpl(); return mMessenger; &#125;&#125; IMessenger æ˜¯ AIDL ç”Ÿæˆçš„è·¨è¿›ç¨‹æŽ¥å£ï¼Œé‡Œé¢å®šä¹‰äº†ä¸€ä¸ªå‘é€æ¶ˆæ¯çš„æ–¹æ³•send(android.os.Message msg)ã€‚Handler ä¸­ MessengerImpl å®žçŽ°äº†è¯¥æ–¹æ³•ï¼Œä½¿ç”¨ Handler å°†æ¶ˆæ¯å‘å‡ºåŽ»ï¼š123456private final class MessengerImpl extends IMessenger.Stub &#123; public void send(Message msg) &#123; msg.sendingUid = Binder.getCallingUid(); Handler.this.sendMessage(msg); &#125;&#125; æ‰€ä»¥å¯ä»¥ä½¿ç”¨Handler.handlerMessageæŽ¥æ”¶æ¶ˆæ¯ã€‚Messenger ä¸­å¯¹sendçš„å®žçŽ°å¦‚ä¸‹ï¼š123public void send(Message message) throws RemoteException &#123; mTarget.send(message);&#125; Messenger ä¸­æŒæœ‰ä¸€ä¸ª IMessenger çš„å¼•ç”¨ï¼Œåœ¨æž„é€ å‡½æ•°ä¸­å¯ä»¥é€šè¿‡ Handler æˆ–è€… Binder çš„å½¢å¼èŽ·å¾—æœ€ç»ˆçš„å®žçŽ°ï¼Œå†…éƒ¨sendæ–¹æ³•å®žé™…ä¸Šæ˜¯è°ƒç”¨ IMessenger å®žçŽ°çš„sendæ–¹æ³•ã€‚ Messenger æ˜¯ AIDL çš„ç®€åŒ–ç‰ˆï¼ŒæŠŠæŽ¥å£éƒ½å°è£…å¥½ï¼Œå¼€å‘è€…åªéœ€åœ¨ä¸€ä¸ªè¿›ç¨‹åˆ›å»ºä¸€ä¸ª Handler ä¼ é€’ç»™ Messengerï¼ŒMessenger çš†å¯ä»¥æŠŠæ¶ˆæ¯è·¨è¿›ç¨‹ä¼ é€’åˆ°å¦ä¸€ä¸ªè¿›ç¨‹ï¼Œåœ¨å¦ä¸€ä¸ªè¿›ç¨‹çš„ Handler åœ¨å¤„ç†æ¶ˆæ¯å°±å¯ä»¥ã€‚ å®žçŽ°æœåŠ¡ç«¯123456789101112131415161718192021222324252627282930313233343536public class MessengerService extends Service &#123; private final String TAG = this.getClass().getSimpleName(); Messenger mMessenger = new Messenger(new Handler() &#123; @Override public void handleMessage(final Message msg) &#123; if (msg != null &amp;&amp; msg.arg1 == 9527) &#123; if (msg.getData() == null) &#123; return; &#125; String content = (String) msg.getData().get("MSG_CONTENT"); //æŽ¥æ”¶å®¢æˆ·ç«¯çš„æ¶ˆæ¯ Log.e(TAG, "Message from client: " + content); //å›žå¤æ¶ˆæ¯ç»™å®¢æˆ·ç«¯ Message replyMsg = Message.obtain(); replyMsg.arg1 = 9528; Bundle bundle = new Bundle(); bundle.putString("MSG_CONTENT", "å·²æ”¶åˆ°æ¶ˆæ¯"); replyMsg.setData(bundle); try &#123; msg.replyTo.send(replyMsg); //å›žä¿¡ &#125; catch (RemoteException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125;); @Nullable @Override public IBinder onBind(final Intent intent) &#123; return mMessenger.getBinder(); &#125;&#125; å®¢æˆ·ç«¯ä»£ç ç‰‡æ®µ12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849public class MessagerActivity extends AppCompatActivity &#123; Messenger mClientMessenger = new Messenger(new Handler() &#123; @Override public void handleMessage(final Message msg) &#123; if (msg != null &amp;&amp; msg.arg1 == 9528)&#123; if (msg.getData() == null)&#123; return; &#125; String content = (String) msg.getData().get("MSG_CONTENT"); Log.e(TAG, "Message from server: " + content); &#125; &#125; &#125;); //æœåŠ¡ç«¯çš„ Messenger private Messenger mServerMessenger; private ServiceConnection mMessengerConnection = new ServiceConnection() &#123; @Override public void onServiceConnected(final ComponentName name, final IBinder service) &#123; mServerMessenger = new Messenger(service); &#125; @Override public void onServiceDisconnected(final ComponentName name) &#123; mServerMessenger = null; &#125; &#125;; //å‘é€æ¶ˆæ¯ public void sendMsg() &#123; String msgContent = "æ¶ˆæ¯"ï¼› Message message = Message.obtain(); message.arg1 = 9527; Bundle bundle = new Bundle(); bundle.putString("MSG_CONTENT", msgContent); message.setData(bundle); message.replyTo = mClientMessenger; //æŒ‡å®šå›žä¿¡äººæ˜¯å®¢æˆ·ç«¯å®šä¹‰çš„ try &#123; mServerMessenger.send(message); &#125; catch (RemoteException e) &#123; e.printStackTrace(); &#125; &#125;&#125; ContentProviderä¸»è¦ç”¨äºŽä¸åŒçš„åº”ç”¨ç¨‹åºä¹‹é—´å®žçŽ°æ•°æ®å…±äº«åŠŸèƒ½]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>å¤šè¿›ç¨‹é€šä¿¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android åŠ¨ç”»è¯¦è§£]]></title>
    <url>%2FAndroid-%E5%8A%A8%E7%94%BB%E8%AF%A6%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[å¼•è¨€Android æä¾›äº†å¾ˆå¤šä¸°å¯Œçš„ API åŽ»å®žçŽ°åŠ¨ç”»æ•ˆæžœï¼ŒåŠ ä¸Š SDK 25.3 æ—¶æŽ¨å‡ºçš„ SpringAnimationï¼Œæ€»å…±æœ‰ä¸‰å¤§ç±» Animation ä¾›å¼€å‘è€…ä½¿ç”¨ã€‚ View Animationè§†å›¾åŠ¨ç”»çš„ä½œç”¨å¯¹è±¡æ˜¯ Viewï¼Œå¯åˆ†ä¸ºè¡¥é—´åŠ¨ç”»å’Œå¸§åŠ¨ç”»ã€‚ è¡¥é—´åŠ¨ç”»åŠ¨ç”»å¼€å§‹å’Œç»“å°¾çš„ä¸­é—´è¿‡ç¨‹éƒ½æ˜¯å‡è±¡ï¼Œæ˜¯æ¸²æŸ“å‡ºæ¥çš„è¡¨è±¡ï¼Œåªæ˜¯æ˜¾ç¤ºçš„ä½ç½®å˜åŠ¨ï¼ŒViewçš„å®žé™…ä½ç½®æœªæ”¹å˜ï¼Œè¡¨çŽ°ä¸ºViewç§»åŠ¨åˆ°å…¶ä»–åœ°æ–¹ï¼Œç‚¹å‡»äº‹ä»¶ä»åœ¨åŽŸå¤„æ‰èƒ½å“åº”ã€‚åˆ©ç”¨è¡¥é—´åŠ¨ç”»ï¼ŒåŒä¸€ä¸ªå›¾å½¢åœ¨ç•Œé¢ä¸Šå¯ä»¥è¿›è¡Œé€æ˜Žåº¦ï¼ˆAlphaAnimationï¼‰ã€ç¼©æ”¾ï¼ˆScaleAnimationï¼‰ã€æ—‹è½¬ï¼ˆRotateAnimationï¼‰ã€å¹³ç§»ï¼ˆTranslateAnimationï¼‰çš„å˜åŒ–ã€‚ XML æ–¹å¼åˆ›å»ºä¸€ä¸ª set.xml æ–‡ä»¶ï¼Œé€šè¿‡åŠ¨ç”»é›†åˆæ ‡ç­¾&lt;set&gt;å°†å››ç§æ•ˆæžœç»“åˆèµ·æ¥12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;--åŠ¨ç”»é›†åˆinterpolator è¡¨ç¤ºæ‰€é‡‡ç”¨çš„çš„å·®å€¼å™¨ï¼Œå…¶å½±å“åŠ¨ç”»çš„é€Ÿåº¦ï¼Œå¯ä»¥ä¸æŒ‡å®šshareInterpolator è¡¨ç¤ºé›†åˆä¸­çš„åŠ¨ç”»æ˜¯å¦å’Œé›†åˆå…±äº«åŒä¸€ä¸ªå·®å€¼å™¨--&gt;&lt;set xmlns:android="http://schemas.android.com/apk/res/android" android:duration="1000" android:fillAfter="true" android:shareInterpolator="true" android:repeatMode="reverse"&gt; &lt;!-- ç¼©æ”¾åŠ¨ç”» fromXScale è¡¨ç¤ºæ°´å¹³æ–¹å‘ç¼©æ”¾çš„èµ·å§‹å€¼ toXScale è¡¨ç¤ºæ°´å¹³æ–¹å‘çš„ç»“æŸå€¼ fillAfter è¡¨ç¤ºåŠ¨ç”»æ˜¾ç¤ºç»“æŸä¿æŒæœ€åŽä¸€å¸§--&gt; &lt;scale android:duration="1000" android:fillAfter="true" android:fromXScale="0.5" android:fromYScale="0.5" android:toXScale="1" android:toYScale="1" android:repeatCount="infinite"/&gt;&lt;!--æ¬¡æ•° ,infinite ä¸ºæ— çº¿å¾ªçŽ¯æ’­æ”¾--&gt; &lt;!-- é€æ˜Žåº¦åŠ¨ç”» fromAlpha è¡¨ç¤ºèµ·å§‹é€æ˜Žåº¦ toAlpha è¡¨ç¤ºç»“æŸé€æ˜Žåº¦--&gt; &lt;alpha android:duration="2000" android:fillAfter="true" android:fromAlpha="0.7" android:toAlpha="1"/&gt; &lt;!--æ—‹è½¬åŠ¨ç”» fromDegrees è¡¨ç¤ºèµ·å§‹è§’åº¦ toDegrees è¡¨ç¤ºç»“æŸè§’åº¦--&gt; &lt;rotate android:fromDegrees="0" android:toDegrees="90" android:fillAfter="true" android:duration="1000"/&gt; &lt;!--å¹³ç§»åŠ¨ç”»--&gt; &lt;translate android:fromXDelta="0" android:fromYDelta="0" android:toXDelta="100%" android:toYDelta="-100%" android:fillAfter="true" android:duration="2000" /&gt;&lt;/set&gt; ä½¿ç”¨ä»¥ä¸ŠåŠ¨ç”»çš„æ–¹å¼å¦‚ä¸‹12Animation anim = AnimationUtils.loadAnimation(context, R.anim.my_animation);view.startAnimation(anim); Java ä»£ç æ–¹å¼ä½¿ç”¨ Java ä»£ç å®žçŽ°åŠ¨ç”»çš„æ–¹å¼å¦‚ä¸‹1234567891011121314151617181920212223242526public void startAnimationSet() &#123; //åˆ›å»ºåŠ¨ç”»ï¼Œå‚æ•°è¡¨ç¤ºä»–çš„å­åŠ¨ç”»æ˜¯å¦å…±ç”¨ä¸€ä¸ªæ’å€¼å™¨ AnimationSet animationSet = new AnimationSet(true); //æ·»åŠ åŠ¨ç”» animationSet.addAnimation(new AlphaAnimation(1.0f, 0.0f)); //è®¾ç½®æ’å€¼å™¨ animationSet.setInterpolator(new LinearInterpolator()); //è®¾ç½®åŠ¨ç”»æŒç»­æ—¶é•¿ animationSet.setDuration(3000); //è®¾ç½®åŠ¨ç”»ç»“æŸä¹‹åŽæ˜¯å¦ä¿æŒåŠ¨ç”»çš„ç›®æ ‡çŠ¶æ€ animationSet.setFillAfter(true); //è®¾ç½®åŠ¨ç”»ç»“æŸä¹‹åŽæ˜¯å¦ä¿æŒåŠ¨ç”»å¼€å§‹æ—¶çš„çŠ¶æ€ animationSet.setFillBefore(false); //è®¾ç½®é‡å¤æ¨¡å¼ animationSet.setRepeatMode(AnimationSet.REVERSE); //è®¾ç½®é‡å¤æ¬¡æ•° animationSet.setRepeatCount(AnimationSet.INFINITE); //è®¾ç½®åŠ¨ç”»å»¶æ—¶æ—¶é—´ animationSet.setStartOffset(2000); //å–æ¶ˆåŠ¨ç”» animationSet.cancel(); //é‡Šæ”¾èµ„æº animationSet.reset(); //å¼€å§‹åŠ¨ç”» view.startAnimation(animationSet);&#125; è‡ªå®šä¹‰é™¤äº†ç³»ç»Ÿè‡ªå¸¦çš„å››ç§è¡¥é—´åŠ¨ç”»ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰ View åŠ¨ç”»ã€‚æ´¾ç”Ÿä¸€ç§åŠ¨ç”»åªéœ€è¦ç»§æ‰¿æŠ½è±¡ç±» Animationï¼Œç„¶åŽé‡å†™å®ƒçš„initializeå’ŒapplyTransformationæ–¹æ³•å³å¯ï¼Œåœ¨å‰ä¸€ä¸ªæ–¹æ³•ä¸­åšåˆå§‹åŒ–å·¥ä½œï¼ŒåŽä¸€ä¸ªæ–¹æ³•ä¸­è¿›è¡Œç›¸åº”çš„çŸ©é˜µå˜æ¢ï¼Œæœ¬æ–‡ä¸å†è¯¦ç»†ä»‹ç»ã€‚ ç‰¹æ®Šä½¿ç”¨View åŠ¨ç”»è¿˜å¯ä»¥ç”¨åœ¨æŽ§åˆ¶ ViewGroup ä¸­å­å…ƒç´ çš„å‡ºåœºæ•ˆæžœã€å®žçŽ°ä¸åŒ Activity çš„åˆ‡æ¢æ•ˆæžœç­‰åœºæ™¯ä¸­ã€‚ å¸§åŠ¨ç”»å¸§åŠ¨ç”»æ˜¯é¡ºåºæ’­æ”¾ä¸€ç»„é¢„å…ˆå®šä¹‰å¥½çš„å›¾ç‰‡ï¼Œç±»ä¼¼äºŽç”µå½±æ’­æ”¾ã€‚ä¸åŒäºŽè¡¥é—´åŠ¨ç”»ï¼Œç³»ç»Ÿæä¾›äº†å¦å¤–ä¸€ä¸ªç±» AnimationDrawable æ¥ä½¿ç”¨å¸§åŠ¨ç”»ã€‚ é¦–å…ˆéœ€è¦å®šä¹‰ä¸€ä¸ª XML æ–‡ä»¶frame_animation.xml12345678910111213&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;animation-list xmlns:android="http://schemas.android.com/apk/res/android" android:oneshot="false"&gt; &lt;item android:drawable="@mipmap/image1" android:duration="100" /&gt; &lt;item android:drawable="@mipmap/image2" android:duration="100" /&gt; &lt;item android:drawable="@mipmap/iamge2" android:duration="100" /&gt;&lt;/animation-list&gt; ç„¶åŽå°†ä¸Šè¿°çš„ Drawable ä½œä¸º View çš„èƒŒæ™¯å¹¶é€šè¿‡ Drawable æ¥æ’­æ”¾åŠ¨ç”»å³å¯123view.setBackgroundResource(R.drawable.frame_animation)ï¼›AnimationDrawable drawable = (AnimationDrawable) view.getBackground();drawable.start(); Property Animationå±žæ€§åŠ¨ç”»åœ¨ API 11 å¼•å…¥ï¼Œå¯ä»¥çœ‹ä½œæ˜¯å¢žå¼ºç‰ˆçš„è¡¥é—´åŠ¨ç”»ï¼Œä¸Žè¡¥é—´åŠ¨ç”»çš„ä¸åŒä¹‹å¤„ä½“çŽ°åœ¨ï¼š è¡¥é—´åŠ¨ç”»åªèƒ½å®šä¹‰ä¸¤ä¸ªå…³é”®å¸§åœ¨é€æ˜Žã€æ—‹è½¬ã€ä½ç§»å’Œå€¾æ–œè¿™å››ä¸ªå±žæ€§çš„å˜æ¢ï¼Œä½†æ˜¯å±žæ€§åŠ¨ç”»å¯ä»¥å®šä¹‰ä»»ä½•å±žæ€§çš„å˜åŒ–ã€‚ è¡¥é—´åŠ¨ç”»åªèƒ½å¯¹ UI ç»„ä»¶æ‰§è¡ŒåŠ¨ç”»ï¼Œä½†å±žæ€§åŠ¨ç”»å¯ä»¥å¯¹ä»»ä½•å¯¹è±¡æ‰§è¡ŒåŠ¨ç”»ã€‚ ä¸Žè¡¥é—´åŠ¨ç”»ç±»ä¼¼ï¼Œå±žæ€§åŠ¨ç”»ä¹Ÿéœ€è¦å®šä¹‰å‡ ä¸ªæ–¹é¢çš„å±žæ€§ï¼š åŠ¨ç”»æŒç»­æ—¶é—´ã€‚é»˜è®¤ä¸º 300msï¼Œå¯ä»¥é€šè¿‡ android:duration å±žæ€§æŒ‡å®šã€‚ åŠ¨ç”»æ’å€¼æ–¹å¼ã€‚é€šè¿‡ android:interploator æŒ‡å®šã€‚ åŠ¨ç”»é‡å¤æ¬¡æ•°ã€‚é€šè¿‡ android:repeatCount æŒ‡å®šã€‚ é‡å¤è¡Œä¸ºã€‚é€šè¿‡ android:repeatMode æŒ‡å®šã€‚ åŠ¨ç”»é›†ã€‚åœ¨å±žæ€§èµ„æºæ–‡ä»¶ä¸­é€šè¿‡ &lt;set&gt; æ¥ç»„åˆã€‚ å¸§åˆ·æ–°çŽ‡ã€‚æŒ‡å®šå¤šé•¿æ—¶é—´æ’­æ”¾ä¸€å¸§ã€‚é»˜è®¤ä¸º 10 msã€‚ API ValueAnimatorï¼šå±žæ€§åŠ¨ç”»ç”¨åˆ°çš„ä¸»è¦çš„æ—¶é—´å¼•æ“Žï¼Œè´Ÿè´£è®¡ç®—å„ä¸ªå¸§çš„å±žæ€§å€¼ã€‚ ObjectAnimatorï¼š ValueAnimator çš„å­ç±»ï¼Œå¯¹æŒ‡å®šå¯¹è±¡çš„å±žæ€§æ‰§è¡ŒåŠ¨ç”»ã€‚ AnimatorSetï¼šAnimator çš„å­ç±»ï¼Œç”¨äºŽç»„åˆå¤šä¸ª Animatorã€‚ å±žæ€§åŠ¨ç”»è¿˜æä¾›äº†ä¸€ä¸ª Evaluator ï¼Œç”¨æ¥æŽ§åˆ¶å¦‚ä½•è®¡ç®—å±žæ€§å€¼ã€‚ IntEvaluatorï¼šè®¡ç®— int ç±»åž‹å±žæ€§å€¼çš„è®¡ç®—å™¨ã€‚ FloatEvaluatorï¼šç”¨äºŽè®¡ç®— float ç±»åž‹å±žæ€§å€¼çš„è®¡ç®—å™¨ã€‚ ArgbEvaluatorï¼šç”¨äºŽè®¡ç®—åå…­è¿›åˆ¶å½¢å¼è¡¨ç¤ºçš„é¢œè‰²å€¼çš„è®¡ç®—å™¨ã€‚ TypeEvaluatorï¼šå¯ä»¥è‡ªå®šä¹‰è®¡ç®—å™¨ã€‚ ValueAniamtorValueAnimator ç±»ä¸­æœ‰3ä¸ªé‡è¦æ–¹æ³•ï¼š ValueAnimator.ofInt(int values)ValueAnimator.ofFloat(float values)ValueAnimator.ofObject(int values) ofIntå°†åˆå§‹å€¼ä»¥æ•´åž‹æ•°å€¼çš„å½¢å¼è¿‡æ¸¡åˆ°ç»“æŸå€¼,å³ä¼°å€¼å™¨æ˜¯æ•´åž‹ä¼°å€¼å™¨ â€”â€” IntEvaluator ä¸‹é¢çš„ä»£ç å°†å®žçŽ°æŒ‰é’®çš„å®½åº¦ä»Ž 150px æ”¾å¤§åˆ° 500px12345678910111213141516171819202122232425 Button mButton = (Button) findViewById(R.id.Button); // è®¾ç½®å±žæ€§æ•°å€¼çš„åˆå§‹å€¼ &amp; ç»“æŸå€¼ // ValueAnimator.ofInt()å†…ç½®äº†æ•´åž‹ä¼°å€¼å™¨ï¼Œé»˜è®¤è®¾ç½®äº†å¦‚ä½•ä»Žåˆå§‹å€¼150 è¿‡æ¸¡åˆ° ç»“æŸå€¼500 ValueAnimator valueAnimator = ValueAnimator.ofInt(mButton.getLayoutParams().width, 500); // è®¾ç½®åŠ¨ç”»çš„æ’­æ”¾å„ç§å±žæ€§ valueAnimator.setDuration(2000); // å°†å±žæ€§æ•°å€¼æ‰‹åŠ¨èµ‹å€¼ç»™å¯¹è±¡çš„å±žæ€§ï¼Œæ­¤å¤„æ˜¯å°†å€¼èµ‹ç»™æŒ‰é’®çš„å®½åº¦ // è®¾ç½®æ›´æ–°ç›‘å¬å™¨ï¼Œæ•°å€¼æ¯æ¬¡å˜åŒ–æ›´æ–°éƒ½ä¼šè°ƒç”¨è¯¥æ–¹æ³• valueAnimator.addUpdateListener(new AnimatorUpdateListener() &#123; @Override public void onAnimationUpdate(ValueAnimator animator) &#123; // èŽ·å¾—æ¯æ¬¡å˜åŒ–åŽçš„å±žæ€§å€¼ int currentValue = (Integer) animator.getAnimatedValue(); // å°†å€¼æ‰‹åŠ¨èµ‹å€¼ç»™å¯¹è±¡çš„å±žæ€§ï¼Œå®žçŽ°æŒ‰é’®å®½åº¦å±žæ€§çš„åŠ¨æ€å˜åŒ– mButton.getLayoutParams().width = currentValue; // åˆ·æ–°è§†å›¾ï¼Œå³é‡æ–°ç»˜åˆ¶ mButton.requestLayout(); &#125; &#125;); valueAnimator.start(); // å¯åŠ¨åŠ¨ç”»&#125; ofFloatå…¶ä¸Ž ofInt çš„åŒºåˆ«ä»…åœ¨äºŽé‡‡ç”¨äº†æµ®ç‚¹ä¼°å€¼å™¨ï¼ˆFloatEvaluatorï¼‰123456789101112131415161718192021public class FloatEvaluator implements TypeEvaluator &#123; /** * é‡å†™evaluate() * * @param fraction åŠ¨ç”»å®Œæˆåº¦ï¼ˆæ ¹æ®å®ƒæ¥è®¡ç®—å½“å‰åŠ¨ç”»çš„å€¼ï¼‰ * @param startValue åŠ¨ç”»çš„åˆå§‹å€¼ * @param endValue åŠ¨ç”»çš„ç»“æŸå€¼ * @return */ public Object evaluate(float fraction, Object startValue, Object endValue) &#123; float startFloat = ((Number) startValue).floatValue(); // åˆå§‹å€¼è¿‡æ¸¡åˆ°ç»“æŸå€¼çš„ç®—æ³• // 1. ç”¨ç»“æŸå€¼å‡åŽ»åˆå§‹å€¼ï¼Œç®—å‡ºå®ƒä»¬ä¹‹é—´çš„å·®å€¼ // 2. ç”¨ä¸Šè¿°å·®å€¼ä¹˜ä»¥ fraction ç³»æ•° // 3. åŠ ä¸Šåˆå§‹å€¼ï¼Œå¾—åˆ°å½“å‰åŠ¨ç”»çš„å€¼ return startFloat + fraction * (((Number) endValue).floatValue() - startFloat); &#125; &#125; ofObjectå¯¹äºŽ ValueAnimator.ofInt å’Œ ValueAnimator.ofFloat æ¥è¯´ï¼Œç”±äºŽä½¿ç”¨äº†ç³»ç»Ÿå†…ç½®çš„ä¼°å€¼å™¨ â€”â€” FloatEvaluator å’Œ IntEvaluatorï¼Œæ‰€ä»¥å·²ç»é»˜è®¤å®žçŽ°äº†ä»Žåˆå§‹å€¼åˆ°ç»“æŸå€¼çš„é€»è¾‘ã€‚ ä½†å¯¹äºŽ ValueAnimator.ofObjectï¼Œå¹¶æ²¡æœ‰ç³»ç»Ÿé»˜è®¤å®žçŽ°ï¼Œå› ä¸ºå¯¹è±¡çš„åŠ¨ç”»æ“ä½œå¤æ‚å¤šæ ·ï¼Œç³»ç»Ÿæ— æ³•çŸ¥é“å¦‚ä½•ä»Žåˆå§‹å¯¹è±¡è¿‡åº¦åˆ°ç»“æŸå¯¹è±¡ï¼Œå› æ­¤éœ€è¦è‡ªå®šä¹‰ä¼°å€¼å™¨ï¼ˆTypeEvaluatorï¼‰æ¥å‘ŠçŸ¥ç³»ç»Ÿå…·ä½“çš„é€»è¾‘ã€‚ è‡ªå®šä¹‰ä¸€ä¸ªä¼°å€¼å™¨ PointEvaluatorï¼Œå®žçŽ°ä¸€ä¸ªåœ†ä»Žä¸€ä¸ªç‚¹ç§»åŠ¨åˆ°å¦å¤–ä¸€ä¸ªç‚¹ã€‚é»˜è®¤å·²ç»æœ‰äº†ä¸€ä¸ªç‚¹åæ ‡ç±»ï¼šPointï¼Œå…¶å…·æœ‰ x å’Œ y ä¸¤ä¸ªæµ®ç‚¹å±žæ€§ã€‚ 123456789101112131415161718public class PointEvaluator implements TypeEvaluator &#123; @Override public Object evaluate(float fraction, Object startValue, Object endValue) &#123; // å°†åŠ¨ç”»åˆå§‹å€¼startValue å’Œ åŠ¨ç”»ç»“æŸå€¼endValue ç±»åž‹è½¬æ¢æˆPointå¯¹è±¡ Point startPoint = (Point) startValue; Point endPoint = (Point) endValue; // æ ¹æ®fractionæ¥è®¡ç®—å½“å‰åŠ¨ç”»çš„xå’Œyçš„å€¼ float x = startPoint.getX() + fraction * (endPoint.getX() - startPoint.getX()); float y = startPoint.getY() + fraction * (endPoint.getY() - startPoint.getY()); // å°†è®¡ç®—åŽçš„åæ ‡å°è£…åˆ°ä¸€ä¸ªæ–°çš„Pointå¯¹è±¡ä¸­å¹¶è¿”å›ž Point point = new Point(x, y); return point; &#125;&#125; å°†å±žæ€§åŠ¨ç”»ä½œç”¨åˆ°è‡ªå®šä¹‰Viewå½“ä¸­1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950public class MyView extends View &#123; public static final float RADIUS = 70f;// åœ†çš„åŠå¾„ private Point currentPoint;// å½“å‰ç‚¹åæ ‡ private Paint mPaint;// ç»˜å›¾ç”»ç¬” // æž„é€ æ–¹æ³•ï¼Œåˆå§‹åŒ–ç”»ç¬” public MyView(Context context, AttributeSet attrs) &#123; super(context, attrs); mPaint = new Paint(Paint.ANTI_ALIAS_FLAG); mPaint.setColor(Color.BLUE); &#125; // å®žçŽ°ç»˜åˆ¶é€»è¾‘ // å…ˆåœ¨åˆå§‹ç‚¹ç”»åœ†ï¼Œç›‘å¬å½“å‰åæ ‡å€¼çš„å˜åŒ–ï¼Œæ¯æ¬¡å˜åŒ–éƒ½è°ƒç”¨onDraw()é‡æ–°ç»˜åˆ¶åœ†ï¼Œå®žçŽ°åœ†çš„å¹³ç§»åŠ¨ç”»æ•ˆæžœ @Override protected void onDraw(Canvas canvas) &#123; // å¦‚æžœå½“å‰ç‚¹åæ ‡ä¸ºç©º(å³ç¬¬ä¸€æ¬¡) if (currentPoint == null) &#123; currentPoint = new Point(RADIUS, RADIUS); // åˆ›å»ºä¸€ä¸ªç‚¹å¯¹è±¡(åæ ‡æ˜¯(70,70)) float x = currentPoint.getX(); float y = currentPoint.getY(); canvas.drawCircle(x, y, RADIUS, mPaint); // å°†å±žæ€§åŠ¨ç”»ä½œç”¨åˆ°Viewä¸­ Point startPoint = new Point(RADIUS, RADIUS);// åˆå§‹ç‚¹ä¸ºåœ†å¿ƒ(70,70) Point endPoint = new Point(700, 1000);// ç»“æŸç‚¹ä¸º(700,1000) ValueAnimator anim = ValueAnimator.ofObject(new PointEvaluator(), startPoint, endPoint); anim.setDuration(5000); anim.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() &#123; @Override public void onAnimationUpdate(ValueAnimator animation) &#123; currentPoint = (Point) animation.getAnimatedValue(); // æ¯æ¬¡èµ‹å€¼åŽå°±é‡æ–°ç»˜åˆ¶ï¼Œä»Žè€Œå®žçŽ°åŠ¨ç”»æ•ˆæžœ // è°ƒç”¨invalidate()åŽ,å°±ä¼šåˆ·æ–°View,å³æ‰èƒ½çœ‹åˆ°é‡æ–°ç»˜åˆ¶çš„ç•Œé¢,å³onDraw()ä¼šè¢«é‡æ–°è°ƒç”¨ä¸€æ¬¡ invalidate(); &#125; &#125;); anim.start(); &#125; else &#123; // å¦‚æžœåæ ‡å€¼ä¸ä¸º0,åˆ™ç”»åœ† float x = currentPoint.getX(); float y = currentPoint.getY(); canvas.drawCircle(x, y, RADIUS, mPaint); &#125; &#125;&#125; ObjectAnimatorç»§æ‰¿è‡ª ValueAnimator ç±»ï¼Œå³åº•å±‚çš„åŠ¨ç”»å®žçŽ°æœºåˆ¶åŸºäºŽ ValueAnimatorã€‚ObjectAnimator ä¸Ž ValueAnimatorç±»çš„åŒºåˆ«åœ¨äºŽ ValueAnimator ç±»æ˜¯å…ˆæ”¹å˜å€¼ï¼Œç„¶åŽæ‰‹åŠ¨èµ‹å€¼ç»™å¯¹è±¡çš„å±žæ€§ä»Žè€Œå®žçŽ°åŠ¨ç”»ï¼Œå±žäºŽé—´æŽ¥å¯¹å¯¹è±¡å±žæ€§è¿›è¡Œæ“ä½œ ObjectAnimator ç±»æ˜¯å…ˆæ”¹å˜å€¼ï¼Œç„¶åŽè‡ªåŠ¨èµ‹å€¼ç»™å¯¹è±¡çš„å±žæ€§ä»Žè€Œå®žçŽ°åŠ¨ç”»ï¼Œå±žäºŽç›´æŽ¥å¯¹å¯¹è±¡å±žæ€§è¿›è¡Œæ“ä½œ å…·ä½“ä½¿ç”¨å¯¹äºŽ ObjectAnimator animator = ObjectAnimator.ofFloat(Object object, String property, float â€¦.values); å…¶ä¸­ values å‚æ•°ä¸å®šï¼Œè¡¨ç¤ºåŠ¨ç”»åˆå§‹å€¼å’Œç»“æŸå€¼ï¼Œå¦‚æžœæ˜¯ä¸¤ä¸ªå‚æ•°a,bï¼Œåˆ™åŠ¨ç”»æ•ˆæžœæ˜¯ä»Žå±žæ€§çš„aå€¼åˆ°bå€¼ï¼›å¦‚æžœæ˜¯ä¸‰ä¸ªå‚æ•°a,b,cï¼Œåˆ™åŠ¨ç”»æ•ˆæžœæ˜¯ä»Žå±žæ€§çš„aå€¼åˆ°bå€¼å†åˆ°cå€¼ å¯¹ Button è¿›è¡Œå˜æ¢123456ObjectAnimator animator = ObjectAnimator.ofFloat(mButton, "alpha", 1f, 0f, 1f); // æ•ˆæžœ:å¸¸è§„-&gt;å…¨é€æ˜Ž-&gt;å¸¸è§„ObjectAnimator animator = ObjectAnimator.ofFloat(mButton, "rotation", 0f, 360f);......animator.setDuration(5000);animator.start(); è‡ªå®šä¹‰åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç»™ObjectAnimator.ofFloatçš„ç¬¬äºŒä¸ªå‚æ•°String propertyä¼ å…¥alphaã€rotationã€translationX å’ŒscaleYç­‰å€¼ï¼Œå®žé™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä¼ ä»»æ„å±žæ€§å€¼ï¼Œå› ä¸º ObjectAnimator ç±»å®žçŽ°åŠ¨ç”»æ•ˆæžœçš„æœ¬è´¨æ˜¯ï¼šä¸æ–­æŽ§åˆ¶å€¼çš„å˜åŒ–ï¼Œå†ä¸æ–­è‡ªåŠ¨èµ‹ç»™å¯¹è±¡çš„å±žæ€§ï¼Œèµ‹å€¼çš„è¿‡ç¨‹æ˜¯é€šè¿‡è°ƒç”¨å¯¹è±¡çš„get/setæ–¹æ³•è¿›è¡Œçš„ã€‚ æ‰€ä»¥è‡ªå®šä¹‰å±žæ€§å°±å¯ä»¥é€šè¿‡ä¸ºå¯¹è±¡è®¾ç½®éœ€è¦æ“ä½œå±žæ€§çš„set/getæ–¹æ³•ï¼Œå†å®žçŽ° TypeEvaluator å®šä¹‰å±žæ€§å˜åŒ–çš„é€»è¾‘å®Œæˆã€‚ è¿˜æ˜¯å¯¹ä¸€ä¸ªçƒåšå˜æ¢12345678910111213141516171819202122232425262728public class MyView2 extends View &#123; public static final float RADIUS = 100f; private Paint mPaint; private String color; // è®¾ç½®èƒŒæ™¯é¢œè‰²å±žæ€§ // è®¾ç½®èƒŒæ™¯é¢œè‰²çš„get() &amp; set()æ–¹æ³• public String getColor() &#123; return color; &#125; public void setColor(String color) &#123; this.color = color; mPaint.setColor(Color.parseColor(color)); // å°†ç”»ç¬”çš„é¢œè‰²è®¾ç½®æˆæ–¹æ³•å‚æ•°ä¼ å…¥çš„é¢œè‰² invalidate(); &#125; public MyView2(Context context, AttributeSet attrs) &#123; super(context, attrs); mPaint = new Paint(Paint.ANTI_ALIAS_FLAG); mPaint.setColor(Color.BLUE); &#125; @Override protected void onDraw(Canvas canvas) &#123; canvas.drawCircle(500, 500, RADIUS, mPaint); &#125;&#125; å®žçŽ°è‡ªå®šä¹‰ä¼°å€¼å™¨ï¼Œå®Œæˆé¢œè‰²è¿‡æ¸¡çš„é€»è¾‘1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283public class ColorEvaluator implements TypeEvaluator &#123; private int mCurrentRed; private int mCurrentGreen ; private int mCurrentBlue ; // é‡å†™evaluateï¼Œå†™å…¥å¯¹è±¡åŠ¨ç”»è¿‡æ¸¡çš„é€»è¾‘ï¼Œæ­¤å¤„ä¸ºé¢œè‰²è¿‡æ¸¡ @Override public Object evaluate(float fraction, Object startValue, Object endValue) &#123; String startColor = (String) startValue; String endColor = (String) endValue; // é€šè¿‡å­—ç¬¦ä¸²æˆªå–çš„æ–¹å¼å°†åˆå§‹åŒ–é¢œè‰²åˆ†ä¸ºRGBä¸‰ä¸ªéƒ¨åˆ†ï¼Œå¹¶å°†RGBçš„å€¼è½¬æ¢æˆåè¿›åˆ¶æ•°å­— // é‚£ä¹ˆæ¯ä¸ªé¢œè‰²çš„å–å€¼èŒƒå›´æ˜¯0-255 int startRed = Integer.parseInt(startColor.substring(1, 3), 16); int startGreen = Integer.parseInt(startColor.substring(3, 5), 16); int startBlue = Integer.parseInt(startColor.substring(5, 7), 16); int endRed = Integer.parseInt(endColor.substring(1, 3), 16); int endGreen = Integer.parseInt(endColor.substring(3, 5), 16); int endBlue = Integer.parseInt(endColor.substring(5, 7), 16); // å°†åˆå§‹åŒ–é¢œè‰²çš„å€¼å®šä¹‰ä¸ºå½“å‰éœ€è¦æ“ä½œçš„é¢œè‰²å€¼ mCurrentRed = startRed; mCurrentGreen = startGreen; mCurrentBlue = startBlue; // è®¡ç®—åˆå§‹é¢œè‰²å’Œç»“æŸé¢œè‰²ä¹‹é—´çš„å·®å€¼ // è¯¥å·®å€¼å†³å®šç€é¢œè‰²å˜åŒ–çš„å¿«æ…¢ï¼Œå¦‚æžœåˆå§‹é¢œè‰²å€¼å’Œç»“æŸé¢œè‰²å€¼ç›¸è¿‘ï¼Œå˜åŒ–ä¼šæ¯”è¾ƒç¼“æ…¢ int redDiff = Math.abs(startRed - endRed); int greenDiff = Math.abs(startGreen - endGreen); int blueDiff = Math.abs(startBlue - endBlue); int colorDiff = redDiff + greenDiff + blueDiff; if (mCurrentRed != endRed) &#123; // getCurrentColor()å†³å®šå¦‚ä½•æ ¹æ®å·®å€¼æ¥å†³å®šé¢œè‰²å˜åŒ–çš„å¿«æ…¢ -&gt;&gt;å…³æ³¨1 mCurrentRed = getCurrentColor(startRed, endRed, colorDiff, 0, fraction); &#125; else if (mCurrentGreen != endGreen) &#123; mCurrentGreen = getCurrentColor(startGreen, endGreen, colorDiff, redDiff, fraction); &#125; else if (mCurrentBlue != endBlue) &#123; mCurrentBlue = getCurrentColor(startBlue, endBlue, colorDiff, redDiff + greenDiff, fraction); &#125; // å°†è®¡ç®—å‡ºçš„å½“å‰é¢œè‰²çš„å€¼ç»„è£…è¿”å›ž String currentColor = "#" + getHexString(mCurrentRed) + getHexString(mCurrentGreen) + getHexString(mCurrentBlue); return currentColor; &#125; // æ ¹æ®fractionå€¼æ¥è®¡ç®—å½“å‰çš„é¢œè‰²ã€‚ private int getCurrentColor(int startColor, int endColor, int colorDiff, int offset, float fraction) &#123; int currentColor; if (startColor &gt; endColor) &#123; currentColor = (int) (startColor - (fraction * colorDiff - offset)); if (currentColor &lt; endColor) &#123; currentColor = endColor; &#125; &#125; else &#123; currentColor = (int) (startColor + (fraction * colorDiff - offset)); if (currentColor &gt; endColor) &#123; currentColor = endColor; &#125; &#125; return currentColor; &#125; // å°†10è¿›åˆ¶é¢œè‰²å€¼è½¬æ¢æˆ16è¿›åˆ¶ã€‚ private String getHexString(int value) &#123; String hexString = Integer.toHexString(value); if (hexString.length() == 1) &#123; hexString = "0" + hexString; &#125; return hexString; &#125;&#125; å…·ä½“è°ƒç”¨123ObjectAnimator anim = ObjectAnimator.ofObject(myView2, "color", new ColorEvaluator(), "#0000FF", "#FF0000");anim.setDuration(2000);anim.start(); æ­¤æ—¶è¿˜æœ‰ä¸€ä¸ªé—®é¢˜éœ€è¦æˆ‘ä»¬è§£å†³ï¼šå¦‚æžœéœ€è¦å¯¹ view æŽ§ä»¶ï¼ˆæ¯”å¦‚ buttonï¼‰çš„å®½é«˜åšå˜æ¢ï¼Œä½†æ˜¯ç”±äºŽå› ä¸º View ä¸­setWidthå¹¶ä¸æ˜¯è®¾ç½® View çš„å®½åº¦ï¼Œè€Œæ˜¯è®¾ç½®æŽ§ä»¶çš„æœ€å¤§å’Œæœ€å°å®½åº¦ï¼Œæ‰€ä»¥é€šè¿‡get/setæ— æ³•æ”¹å˜æŽ§ä»¶çš„å®½åº¦ï¼Œä¹Ÿå°±æ— æ³•å®žçŽ°åŠ¨ç”»æ•ˆæžœã€‚ è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨è£…é¥°å™¨æ¨¡å¼ï¼ŒåŒ…è£…åŽŸå§‹åŠ¨ç”»å¯¹è±¡ï¼Œé—´æŽ¥ç»™å¯¹è±¡åŠ ä¸Šè¯¥å±žæ€§çš„get/setæ–¹æ³•ã€‚12345678910111213141516171819202122ButtonWrapper wrapper = new ViewWrapper(button);ObjectAnimator.ofInt(wrapper, "width", 500) .setDuration(3000) .start();private static class ViewWrapper &#123; private View mTarget; public ViewWrapper(View target) &#123; mTarget = target; &#125; // ä¸ºå®½åº¦è®¾ç½®get/set public int getWidth() &#123; return mTarget.getLayoutParams().width; &#125; public void setWidth(int width) &#123; mTarget.getLayoutParams().width = width; mTarget.requestLayout(); &#125;&#125; AnimatorSetæœ€åŽä»‹ç»ç»„åˆåŠ¨ç”»ç±»ï¼Œä»…å±•ç¤ºç”¨æ³•12345678910ObjectAnimator translation = ObjectAnimator.ofFloat(mButton, "translationX", curTranslationX, 300,curTranslationX); ObjectAnimator rotate = ObjectAnimator.ofFloat(mButton, "rotation", 0f, 360f); ObjectAnimator alpha = ObjectAnimator.ofFloat(mButton, "alpha", 1f, 0f, 1f); AnimatorSet animSet = new AnimatorSet(); animSet.play(translation).with(rotate).before(alpha); animSet.setDuration(5000); animSet.start(); Spring AnimationSpringAnimationï¼Œå¼¹ç°§åŠ¨ç”»ï¼Œä½äºŽandroid.support.animationåŒ…ä¸­ï¼Œå±žæ€§åŠ¨ç”»ä½äºŽandroid.animation.AnimatoråŒ…ä¸­ï¼Œå…¶å®žé€šè¿‡ BounceInterpolator æˆ–è€… OvershootInterpolator ä½œä¸ºæ’å€¼å™¨ï¼ŒåŒæ ·å¯ä»¥å®žçŽ°å¼¹æ€§åŠ¨ç”»æ•ˆæžœï¼Œå¼•å…¥ SpringAnimation æ˜¯å› ä¸ºå®ƒä½¿ç”¨æ›´ç®€å•ï¼Œè€Œä¸”ä¸Šä¸¤ä¸ªå·®å€¼å™¨å®žçŽ°çš„è½¨è¿¹å¹¶ä¸ç¬¦åˆç‰©ç†å­¦ä¸Šçš„å¼¹è·³æ•ˆæžœã€‚ ä½¿ç”¨ä¹‹å‰éœ€è¦å¯¼å…¥com.android.support:support-dynamic-animationåŒ… API12public SpringAnimation(View v, ViewProperty property)public SpringAnimation(View v, ViewProperty property, float finalPosition) å‚æ•°åˆ†åˆ«æ˜¯æ“ä½œå¯¹åº”çš„Viewï¼Œå¯¹åº”çš„å˜åŒ–å±žæ€§åŠæœ€ç»ˆçš„ä½ç½®ã€‚ ViewProperty åŒ…æ‹¬(Zè½´æ”¯æŒéœ€è¦API &gt;= 21)ï¼š TRANSLATION_XTRANSLATION_YTRANSLATION_ZSCALE_XSCALE_YROTATIONROTATION_XROTATION_YXYZALPHASCROLL_XSCROLL_Y åœ¨ SpringAnimation ä¸­æœ‰ä¸€ä¸ª SpringForce å¯¹è±¡ï¼Œè´Ÿè´£å¯¹åº”çš„å˜é‡è®¾ç½®åŠä½ç½®è®¡ç®—ã€‚å…¶ä¸­åŒ…æ‹¬ä¸¤ä¸ªä¸ªå…³é”®å˜é‡ Stiffness åˆšåº¦(åŠ²åº¦/å¼¹æ€§)ï¼Œåˆšåº¦è¶Šå¤§ï¼Œå½¢å˜äº§ç”Ÿçš„é‡Œä¹Ÿå°±è¶Šå¤§ï¼Œä½“çŽ°åœ¨æ•ˆæžœä¸Šå°±æ˜¯è¿åŠ¨è¶Šå¿« DampingRatio é˜»å°¼ç³»æ•°ï¼Œç³»æ•°è¶Šå¤§ï¼ŒåŠ¨ç”»åœæ­¢çš„è¶Šå¿«ã€‚ä»Žç†è®ºä¸Šè®²åˆ†ä¸ºä¸‰ç§æƒ…å†µ Overdampedè¿‡é˜»å°¼ï¼ˆÎ¶ &gt; 1ï¼‰ã€Critically dampedä¸´ç•Œé˜»å°¼(Î¶ = 1)ã€Underdampedæ¬ é˜»å°¼çŠ¶æ€(0 &lt; Î¶ &lt;1)ã€‚ ç®€å•ä½¿ç”¨1234567SpringAnimation btnAnim = new SpringAnimation(mButton, SpringAnimation.TRANSLATION_Y, 0);btnAnim.getSpring().setStiffness(SpringForce.STIFFNESS_VERY_LOW);btnAnim.getSpring().setDampingRatio(SpringForce.DAMPING_RATIO_LOW_BOUNCY);btnAnim.setStartVelocity(10000); //å¼€å§‹é€Ÿåº¦ï¼Œå•ä½æ˜¯px/second. æ­£æ•°æ˜¯å¼¹ç°§æ”¶ç¼©çš„æ–¹å‘ï¼Œè´Ÿæ•°ç›¸åbtnAnim.start();]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>åŠ¨ç”»å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LeakCanaryæºç è§£æž]]></title>
    <url>%2FLeakCanary%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%2F</url>
    <content type="text"><![CDATA[å¼•è¨€å†…å­˜æ³„æ¼æ˜¯ Android å¼€å‘ä¸­æ— æ³•é¿å…çš„é—®é¢˜ï¼ŒLeakCanary æ¡†æž¶æ˜¯ Square å…¬å¸å¼€æºçš„å†…å­˜æ³„æ¼åˆ†æžå·¥å…·ï¼Œå…¶é›†æˆæ–¹ä¾¿ï¼Œä½¿ç”¨ä¾¿æ·ã€‚ ActivityLifecycleCallbacksLeakCanary çš„å®žçŽ°åŸºç¡€ä¹‹ä¸€ï¼Œæ˜¯ Android å®˜æ–¹åœ¨4.0ï¼ˆAPI 14ï¼‰ä¹‹åŽå¼•å…¥çš„ ActivityLifecycleCallbacksï¼Œå®ƒæ˜¯ Application ç±»çš„å†…éƒ¨æŽ¥å£ï¼Œæä¾›åº”ç”¨ç”Ÿå‘½å‘¨æœŸå›žè°ƒçš„æ³¨å†Œæ–¹æ³•ï¼Œä»¥é›†ä¸­ç®¡ç†åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸã€‚ æŽ¥å£æ–¹æ³•å¯ä»¥çœ‹åˆ°è¯¥æŽ¥å£å®šä¹‰äº†å¦‚ä¸‹çš„ Activity çš„ç”Ÿå‘½å‘¨æœŸå›žè°ƒæ–¹æ³•ï¼Œå…¶ä¸Ž Activity çš„å®Œæ•´å£°æ˜Žå‘¨æœŸå‡ ä¹Žæ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚ 123456789public interface ActivityLifecycleCallbacks &#123; void onActivityCreated(Activity activity, Bundle savedInstanceState); void onActivityStarted(Activity activity); void onActivityResumed(Activity activity); void onActivityPaused(Activity activity); void onActivityStopped(Activity activity); void onActivitySaveInstanceState(Activity activity, Bundle outState); void onActivityDestroyed(Activity activity);&#125; ç®€å•ç”¨æ³•å¼€å‘ä¸­å¦‚æžœæˆ‘ä»¬æƒ³è¦ç»Ÿä¸€ç®¡ç†é¡¹ç›®ä¸­æ‰€æœ‰çš„ Activityï¼Œå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ ActivityManager å®žçŽ°ï¼Œç„¶åŽåœ¨ BaseActivity ä¸­å¯¹æ¯ä¸€ä¸ª Activity åš put/get æ“ä½œï¼Œè¯¥åšæ³•çš„ç¼ºé™·æ˜¯æ— æ³•æŽ§åˆ¶ä¸€äº›ç¬¬ä¸‰æ–¹æ¡†æž¶çš„ Activityã€‚æ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ActivityLifecycleCallbacks ï¼Œåœ¨è‡ªå®šä¹‰çš„ Application ä¸­ç»´æŠ¤ä¸€ä¸ª Activityé“¾è¡¨ï¼Œ ç”±äºŽæ‰€æœ‰çš„ Activity çš„ç”Ÿå‘½å‘¨æœŸéƒ½ä¼šå›žè°ƒè¯¥æŽ¥å£ï¼Œå°±èƒ½å¤Ÿå®žçŽ°å¯¹æ‰€æœ‰ Activity çš„ç»Ÿä¸€æŽ§åˆ¶å’Œç®¡ç†ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647public class MyApplication extends Application &#123; public static List&lt;Activity&gt; activityList; public static final int ACTIVITY_MAX_NUM = 10; @Override public void onCreate() &#123; super.onCreate(); activityList = new LinkedList&lt;&gt;(); registerActivityLifecycleCallbacks(new MyActivityCallbacks()); &#125; class MyActivityCallbacks implements ActivityLifecycleCallbacks &#123; @Override public void onActivityCreated(Activity activity, Bundle savedInstanceState) &#123; if (activityList.size() &gt;= ACTIVITY_MAX_NUM) &#123; activityList.remove(activityList.size()-1).finish(); &#125; activityList.add(activity); &#125; @Override public void onActivityStarted(Activity activity) &#123; &#125; @Override public void onActivityResumed(Activity activity) &#123; &#125; @Override public void onActivityPaused(Activity activity) &#123; &#125; @Override public void onActivityStopped(Activity activity) &#123; &#125; @Override public void onActivitySaveInstanceState(Activity activity, Bundle outState) &#123; &#125; @Override public void onActivityDestroyed(Activity activity) &#123; activityList.remove(activity); &#125; &#125; public static Activity getCurrentActivity() &#123; return activityList.get(0); &#125;&#125; å¼•ç”¨ç±»åž‹åœ¨JDK 1.2ä»¥å‰çš„ç‰ˆæœ¬ä¸­ï¼Œè‹¥ä¸€ä¸ªå¯¹è±¡ä¸è¢«ä»»ä½•å˜é‡å¼•ç”¨ï¼Œé‚£ä¹ˆç¨‹åºå°±æ— æ³•å†ä½¿ç”¨è¿™ä¸ªå¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰å¯¹è±¡å¤„äºŽå¯è§¦åŠï¼ˆreachableï¼‰çŠ¶æ€ï¼Œç¨‹åºæ‰èƒ½ä½¿ç”¨å®ƒã€‚ä»ŽJDK 1.2ç‰ˆæœ¬å¼€å§‹ï¼ŒæŠŠå¯¹è±¡çš„å¼•ç”¨åˆ†ä¸º4ç§çº§åˆ«ï¼Œä»Žè€Œä½¿ç¨‹åºèƒ½æ›´åŠ çµæ´»åœ°æŽ§åˆ¶å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚è¿™4ç§çº§åˆ«ç”±é«˜åˆ°ä½Žä¾æ¬¡ä¸ºï¼šå¼ºå¼•ç”¨ã€è½¯å¼•ç”¨ã€å¼±å¼•ç”¨å’Œè™šå¼•ç”¨ã€‚ å¼ºå¼•ç”¨å¼ºå¼•ç”¨ï¼ˆStrongReferenceï¼‰æ˜¯ä½¿ç”¨æœ€æ™®éçš„å¼•ç”¨ã€‚å¦‚æžœä¸€ä¸ªå¯¹è±¡å…·æœ‰å¼ºå¼•ç”¨ï¼Œé‚£åžƒåœ¾å›žæ”¶å™¨ç»ä¸ä¼šå›žæ”¶å®ƒã€‚å½“å†…å­˜ç©ºé—´ä¸è¶³ï¼ŒJava è™šæ‹Ÿæœºå®æ„¿æŠ›å‡º OutOfMemoryError é”™è¯¯ï¼Œä½¿ç¨‹åºå¼‚å¸¸ç»ˆæ­¢ï¼Œä¹Ÿä¸ä¼šé éšæ„å›žæ”¶å…·æœ‰å¼ºå¼•ç”¨çš„å¯¹è±¡æ¥è§£å†³å†…å­˜ä¸è¶³çš„é—®é¢˜ã€‚æ¯”å¦‚ç»å¸¸ä½¿ç”¨çš„A a = new A()ä¸­çš„å¼•ç”¨aã€‚ è½¯å¼•ç”¨è½¯å¼•ç”¨ï¼ˆSoftReferenceï¼‰ç”¨æ¥æè¿°ä¸€äº›æœ‰ç”¨ä½†å¹¶ä¸æ˜¯å¿…éœ€çš„å¯¹è±¡ï¼Œåªæœ‰åœ¨å†…å­˜ä¸è¶³çš„æ—¶å€™ JVM æ‰ä¼šå›žæ”¶è¯¥å¯¹è±¡ã€‚å› æ­¤ï¼Œè¿™ä¸€ç‚¹å¯ä»¥å¾ˆå¥½åœ°ç”¨æ¥è§£å†³OOMçš„é—®é¢˜ï¼Œå¹¶ä¸”è¿™ä¸ªç‰¹æ€§å¾ˆé€‚åˆç”¨æ¥å®žçŽ°ç¼“å­˜ï¼šæ¯”å¦‚ç½‘é¡µç¼“å­˜ã€å›¾ç‰‡ç¼“å­˜ç­‰ã€‚ è½¯å¼•ç”¨å¯ä»¥å’Œä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ï¼Œå¦‚æžœè½¯å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«JVMå›žæ”¶ï¼Œè¿™ä¸ªè½¯å¼•ç”¨å°±ä¼šè¢«åŠ å…¥åˆ°ä¸Žä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚12SoftReference&lt;String&gt; sr = new SoftReference&lt;String&gt;(new String("hello"));System.out.println(sr.get()); å¼±å¼•ç”¨å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰ä¸Žè½¯å¼•ç”¨çš„åŒºåˆ«åœ¨äºŽï¼šåªå…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡æ‹¥æœ‰æ›´çŸ­æš‚çš„ç”Ÿå‘½å‘¨æœŸã€‚åœ¨åžƒåœ¾å›žæ”¶å™¨çº¿ç¨‹æ‰«æå®ƒæ‰€ç®¡è¾–çš„å†…å­˜åŒºåŸŸçš„è¿‡ç¨‹ä¸­ï¼Œä¸€æ—¦å‘çŽ°äº†åªå…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡ï¼Œä¸ç®¡å½“å‰å†…å­˜ç©ºé—´è¶³å¤Ÿä¸Žå¦ï¼Œéƒ½ä¼šå›žæ”¶å®ƒçš„å†…å­˜ã€‚ä¸è¿‡ï¼Œç”±äºŽåžƒåœ¾å›žæ”¶å™¨æ˜¯ä¸€ä¸ªä¼˜å…ˆçº§ä½Žçš„çº¿ç¨‹ï¼Œå› æ­¤ä¸ä¸€å®šä¼šå¾ˆå¿«å‘çŽ°é‚£äº›åªå…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡ã€‚12345WeakReference&lt;String&gt; sr = new WeakReference&lt;String&gt;(new String("hello")); System.out.println(sr.get());System.gc(); //é€šçŸ¥JVMçš„gcè¿›è¡Œåžƒåœ¾å›žæ”¶System.out.println(sr.get()); æ‰“å°çš„ç»“æžœä¸º hellonull å¼±å¼•ç”¨å¯ä»¥å’Œä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ï¼Œå½“å¼±å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«åžƒåœ¾å›žæ”¶å™¨å›žæ”¶ï¼ŒJava è™šæ‹Ÿæœºå°±ä¼šæŠŠè¿™ä¸ªå¼±å¼•ç”¨åŠ å…¥åˆ°ä¸Žä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚12ReferenceQueue queue = new ReferenceQueue();WeakReference pr = new WeakReference(object, queue); è™šå¼•ç”¨PhantomReferenceï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å½¢åŒè™šè®¾ã€‚ä¸Žå…¶ä»–å‡ ç§å¼•ç”¨éƒ½ä¸åŒï¼Œè™šå¼•ç”¨å¹¶ä¸ä¼šå†³å®šå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚å¦‚æžœä¸€ä¸ªå¯¹è±¡ä»…æŒæœ‰è™šå¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒå°±å’Œæ²¡æœ‰ä»»ä½•å¼•ç”¨ä¸€æ ·ï¼ŒæŸ¥çœ‹æºç å¯ä»¥å‘çŽ°ï¼Œå…¶get()æ°¸è¿œè¿”å›žnull è™šå¼•ç”¨ä¸»è¦ç”¨æ¥è·Ÿè¸ªå¯¹è±¡è¢«åžƒåœ¾å›žæ”¶å™¨å›žæ”¶çš„æ´»åŠ¨ã€‚è™šå¼•ç”¨ä¸Žè½¯å¼•ç”¨ã€å¼±å¼•ç”¨çš„ä¸€ä¸ªåŒºåˆ«åœ¨äºŽï¼šè™šå¼•ç”¨å¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ— ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ã€‚å½“åžƒåœ¾å›žæ”¶å™¨å‡†å¤‡å›žæ”¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æžœå‘çŽ°å®ƒè¿˜æœ‰è™šå¼•ç”¨ï¼Œå°±ä¼šåœ¨å›žæ”¶å¯¹è±¡çš„å†…å­˜ä¹‹å‰ï¼ŒæŠŠè¿™ä¸ªè™šå¼•ç”¨åŠ å…¥åˆ°ä¸Žä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚ 12345678910public class PhantomReference&lt;T&gt; extends Reference&lt;T&gt; &#123; public T get() &#123; return null; &#125; public PhantomReference(T referent, ReferenceQueue&lt;? super T&gt; q) &#123; super(referent, q); &#125;&#125; LeakCanaryæºç å®žé™…ä¸Š LeakCanary æ­£æ˜¯åˆ©ç”¨ Activity çš„ç”Ÿå‘½å‘¨æœŸå›žè°ƒï¼Œé…åˆå¼±å¼•ç”¨æ£€æµ‹å®žçŽ°å†…å­˜æ³„æ¼çš„åˆ†æžã€‚ æ‰§è¡Œæµç¨‹è·Ÿè¸ªè°ƒç”¨çš„å…¥å£æ–¹æ³•install12345public static @NonNull RefWatcher install(@NonNull Application application) &#123; return refWatcher(application).listenerServiceClass(DisplayLeakService.class) .excludedRefs(AndroidExcludedRefs.createAppDefaults().build()) .buildAndInstall();&#125; listenerServiceClassæ–¹æ³•ä½äºŽ AndroidRefWatcherBuilder 123456public @NonNull AndroidRefWatcherBuilder listenerServiceClass( @NonNull Class&lt;? extends AbstractAnalysisResultService&gt; listenerServiceClass) &#123; enableDisplayLeakActivity = DisplayLeakService.class.isAssignableFrom(listenerServiceClass); return heapDumpListener(new ServiceHeapDumpListener(context, listenerServiceClass));&#125; è¯¥ç±»çš„çˆ¶ç±»ï¼ˆRefWatcherBuilderï¼‰å·²ç»é»˜è®¤å®žçŽ° heapDumpListener å’ŒexcludedRefsæ–¹æ³•ï¼ˆå®šä¹‰ä¸€äº›å¼€å‘è€…å¯ä»¥å¿½ç•¥çš„è·¯å¾„ï¼Œå³ä½¿å‘ç”Ÿäº†å†…å­˜æ³„æ¼ï¼ŒLeakCanary ä¹Ÿä¸ä¼šå¼¹å‡ºé€šçŸ¥ã€‚å¤§å¤šæ˜¯ç³»ç»Ÿ Bug å¯¼è‡´ï¼‰ã€‚ä¸‹é¢æ¥çœ‹æœ€ç»ˆè°ƒç”¨çš„æ–¹æ³•ï¼š 12345678910111213141516171819public @NonNull RefWatcher buildAndInstall() &#123; if (LeakCanaryInternals.installedRefWatcher != null) &#123; throw new UnsupportedOperationException("buildAndInstall() should only be called once."); &#125; RefWatcher refWatcher = build(); if (refWatcher != DISABLED) &#123; if (enableDisplayLeakActivity) &#123; LeakCanaryInternals.setEnabledAsync(context, DisplayLeakActivity.class, true); &#125; if (watchActivities) &#123; ActivityRefWatcher.install(context, refWatcher); &#125; if (watchFragments) &#123; FragmentRefWatcher.Helper.install(context, refWatcher); &#125; &#125; LeakCanaryInternals.installedRefWatcher = refWatcher; return refWatcher;&#125; è¯¥æ–¹æ³•ä¸»è¦åšäº†ä¸‰ä»¶äº‹ï¼šBuild RefWatcherï¼›å¯ç”¨ DisplayLeakActivityï¼Œ ç”¨äºŽæ˜¾ç¤ºæ€§èƒ½ç»Ÿè®¡ç»“æžœï¼›install ActivityRefWatcherã€‚ç»§ç»­è·Ÿè¸ªinstallæ–¹æ³• 1234567891011121314public static void install(@NonNull Context context, @NonNull RefWatcher refWatcher) &#123; Application application = (Application) context.getApplicationContext(); ActivityRefWatcher activityRefWatcher = new ActivityRefWatcher(application, refWatcher); application.registerActivityLifecycleCallbacks(activityRefWatcher.lifecycleCallbacks);&#125;//æˆå‘˜å˜é‡ lifecycleCallbacksprivate final Application.ActivityLifecycleCallbacks lifecycleCallbacks = new ActivityLifecycleCallbacksAdapter &#123; @Override public void onActivityDestroyed(Activity activity) &#123; refWatcher.watch(activity); &#125; &#125;; ç”±æ­¤å¯çŸ¥ LeakCanary å†…éƒ¨å®žçŽ°äº†å¯¹ Activity ç”Ÿå‘½å‘¨æœŸçš„ç›‘å¬ï¼ŒActivityLifecycleCallbacksAdapter å…¶å®žæ˜¯å¯¹ Application.ActivityLifecycleCallbacks ä¸­æ‰€æœ‰æ–¹æ³•éƒ½åšäº†ç©ºå®žçŽ°çš„æŠ½è±¡ç±»ã€‚ watchæ–¹æ³•ç”± RefWatcher é»˜è®¤å®žçŽ°ï¼š 12345678public void watch(Object watchedReference, String referenceName) &#123; ...... retainedKeys.add(key); final KeyedWeakReference reference = new KeyedWeakReference(watchedReference, key, referenceName, queue); ensureGoneAsync(watchStartNanoTime, reference);&#125; å…¶ä¸­ retainedKeys æ˜¯ä¸€ä¸ª Set é›†åˆï¼Œæ¯ä¸ªæ£€æµ‹çš„å¯¹è±¡éƒ½å¯¹åº”ä¸€ä¸ªå”¯ä¸€çš„ keyï¼Œå­˜å‚¨åœ¨ retainedKeys ä¸­ã€‚KeyedWeakReference æ˜¯ WeakReference çš„å­ç±»ï¼Œåœ¨å…¶åŸºç¡€ä¸Šæ·»åŠ äº† key å’Œ name ä¸¤ä¸ªå±žæ€§ç”¨ä»¥è·Ÿè¸ªè®°å½•ã€‚å…¶ä¸­ä¼ å…¥äº†ä¸€ä¸ª queue å‚æ•°ï¼Œæ˜Žæ˜¾æ˜¯å¼•ç”¨é˜Ÿåˆ—ã€‚ 1234567private void ensureGoneAsync(final long watchStartNanoTime, final KeyedWeakReference reference) &#123; watchExecutor.execute(new Retryable() &#123; @Override public Retryable.Result run() &#123; return ensureGone(reference, watchStartNanoTime); &#125; &#125;);&#125; watchExecutor ä¸º AndroidWatchExecutor å¯¹è±¡12345678910111213141516public AndroidWatchExecutor(long initialDelayMillis) &#123; mainHandler = new Handler(Looper.getMainLooper()); HandlerThread handlerThread = new HandlerThread(LEAK_CANARY_THREAD_NAME); handlerThread.start(); backgroundHandler = new Handler(handlerThread.getLooper()); this.initialDelayMillis = initialDelayMillis; maxBackoffFactor = Long.MAX_VALUE / initialDelayMillis;&#125;@Override public void execute(@NonNull Retryable retryable) &#123; if (Looper.getMainLooper().getThread() == Thread.currentThread()) &#123; waitForIdle(retryable, 0); &#125; else &#123; postWaitForIdle(retryable, 0); &#125;&#125; åœ¨executeä¸­ï¼Œä¸ç®¡æ˜¯waitForIdleè¿˜æ˜¯postWaitForIdleéƒ½ä¼šåˆ‡æ¢åˆ°ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œæœ€ç»ˆä¼šè°ƒç”¨ä»¥ä¸‹ä»£ç ï¼š123456Looper.myQueue().addIdleHandler(new MessageQueue.IdleHandler() &#123; @Override public boolean queueIdle() &#123; postToBackgroundWithDelay(retryable, failedAttempts); return false; &#125; &#125;); é‚£ä¹ˆ IdleHandler åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ æˆ‘ä»¬éƒ½çŸ¥é“ Handler æ˜¯å¾ªçŽ¯å¤„ç† MessageQueue ä¸­çš„æ¶ˆæ¯çš„ï¼Œå½“æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ²¡æœ‰æ›´å¤šæ¶ˆæ¯éœ€è¦å¤„ç†ï¼Œä¸”å£°æ˜Žäº† IdleHandler æŽ¥å£çš„æ—¶å€™ï¼Œå°±ä¼šåŽ»å¤„ç†è¿™é‡Œçš„æ“ä½œã€‚å³æŒ‡å®šä¸€äº›æ“ä½œï¼Œå½“çº¿ç¨‹ç©ºé—²çš„æ—¶å€™æ¥å¤„ç†ï¼Œæ­¤å¤„æ‰§è¡Œçš„ä¾¿æ˜¯å†…å­˜æ³„æ¼æ£€æµ‹å·¥ä½œã€‚ ensureGoneAsyncæ–¹æ³•æœ€ç»ˆä¼šè°ƒç”¨ensureGone 123456789101112131415161718192021Retryable.Result ensureGone(final KeyedWeakReference reference, final long watchStartNanoTime) &#123; ...... removeWeaklyReachableReferences(); ...... gcTrigger.runGc(); removeWeaklyReachableReferences(); if (!gone(reference)) &#123; ...... File heapDumpFile = heapDumper.dumpHeap(); ...... HeapDump heapDump = heapDumpBuilder.heapDumpFile(heapDumpFile).referenceKey(reference.key) .referenceName(reference.name) .watchDurationMs(watchDurationMs) .gcDurationMs(gcDurationMs) .heapDumpDurationMs(heapDumpDurationMs) .build(); heapdumpListener.analyze(heapDump); &#125; return DONE;&#125; removeWeaklyReachableReferenceséåŽ†å¼•ç”¨é˜Ÿåˆ— queueï¼Œåˆ¤æ–­é˜Ÿåˆ—ä¸­æ˜¯å¦å­˜åœ¨å½“å‰ Activity çš„å¼±å¼•ç”¨ï¼Œå­˜åœ¨åˆ™åˆ é™¤ retainedKeys ä¸­å¯¹åº”å¼•ç”¨çš„ keyå€¼ã€‚ è°ƒç”¨gcTrigger.runGcåŽ»è¿›è¡Œå†…å­˜å›žæ”¶ï¼Œè¿™é‡Œæ²¡æœ‰ä½¿ç”¨System.gcï¼Œæ˜¯å› ä¸ºå®ƒä»…ä»…æ˜¯é€šçŸ¥ç³»ç»Ÿåœ¨åˆé€‚çš„æ—¶é—´è¿›è¡Œä¸€æ¬¡åžƒåœ¾å›žæ”¶æ“ä½œï¼Œå¹¶ä¸èƒ½ä¿è¯ä¸€å®šæ‰§è¡Œã€‚ ä¸»åŠ¨è¿›è¡Œ GC ä¹‹åŽä¼šå†æ¬¡è°ƒç”¨removeWeaklyReachableReferencesæ¸…é™¤ retainedKeys ä¸­å¼±å¼•ç”¨çš„ key å€¼ï¼Œå†åˆ¤æ–­æ˜¯å¦ç§»é™¤ã€‚å¦‚æžœä»ç„¶æ²¡æœ‰ç§»é™¤ï¼Œåˆ¤å®šä¸ºå†…å­˜æ³„æ¼ã€‚ ç”Ÿæˆæ€§èƒ½ç»Ÿè®¡æ–‡ä»¶.hprofï¼Œè¿›è¡Œå†…å­˜æ³„æ¼çš„åˆ†æžã€‚ é‚£ä¹ˆ hprof æ–‡ä»¶æ˜¯è¢«è§£æžæˆä¿¡æ¯çš„å‘¢ 1AnalysisResult result = heapAnalyzer.checkForLeak(heapDump.heapDumpFile, heapDump.referenceKey); 12345678910public AnalysisResult checkForLeak(File heapDumpFile, String referenceKey) &#123; ...... MemoryMappedFileBuffer e = new MemoryMappedFileBuffer(heapDumpFile); HprofParser parser = new HprofParser(e); Snapshot snapshot = parser.parse(); this.deduplicateGcRoots(snapshot); Instance leakingRef = this.findLeakingReference(referenceKey, snapshot); return leakingRef == null ? AnalysisResult.noLeak(this.since(analysisStartNanoTime)) ï¼š this.findLeakTrace(analysisStartNanoTime, snapshot, leakingRef);&#125; checkForLeakæ–¹æ³•ä½¿ç”¨äº† Square å…¬å¸çš„å¦ä¸€ä¸ªåº“ haha æ¥åˆ†æž Android heap dumpï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ‰§è¡Œè½¬åŒ–çš„æ–¹æ³•ä¸º HprofParser çš„parseæ–¹æ³•ï¼Œç„¶åŽå†å°†è½¬åŒ–çš„ä¿¡æ¯å°è£…æˆ AnalysisResult å¯¹è±¡ï¼Œå…¶ä¸­ HprofParser æ˜¯è‡ªå®šä¹‰çš„ç±»ï¼Œé‡Œé¢æœ‰ä¸€å®šçš„ç¯‡å¹…è§£æž .hprof æ–‡ä»¶ã€‚ å¾—åˆ°ç»“æžœåŽå›žè°ƒç»™ DisplayLeakServiceï¼Œè¯¥ Service ä¼šæ ¹æ®ä¼ å…¥è¿›æ¥çš„æ•°æ®å‘é€é€šçŸ¥ï¼Œå­˜å…¥æ•°æ®ã€‚ç‚¹å‡»å¯¹åº”çš„é€šçŸ¥è¿›å…¥ DisplayLeakActivity ç•Œé¢ï¼Œå°±èƒ½æŸ¥çœ‹æ³„æ¼æ—¥å¿—ã€‚ æ€»ç»“LeakCanary æ£€æµ‹å†…å­˜æ³„æ¼çš„è®¾è®¡æ€è·¯ååˆ†å·§å¦™ã€æ¸…æ™°ã€‚æ•´ä¸ªæ¡†æž¶å¯¹äºŽ ActivityLifecycleCallbacksã€WeakReferenceã€ReferenceQueue å’Œ IdleHandler çš„ä½¿ç”¨ï¼Œå››å¤§ç»„ä»¶çš„å¼€å¯å’Œå…³é—­ç­‰ç­‰ï¼Œéƒ½å¾ˆæœ‰æ„æ€ï¼Œå€¼å¾—æ·±å’Œå€Ÿé‰´ã€‚]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>å†…å­˜æ³„æ¼</tag>
        <tag>æºç </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javaè®¾è®¡æ¨¡å¼ï¼šåˆ›å»ºåž‹æ¨¡å¼]]></title>
    <url>%2FJava%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[è®¾è®¡æ¨¡å¼åŠå…¶åˆ†ç±»è®¾è®¡æ¨¡å¼è®¾è®¡æ¨¡å¼ï¼ˆDesign patternï¼‰æ˜¯è½¯ä»¶å¼€å‘äººå‘˜åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­é¢ä¸´çš„ä¸€èˆ¬é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚è¿™äº›è§£å†³æ–¹æ¡ˆæ˜¯ä¼—å¤šè½¯ä»¶å¼€å‘äººå‘˜ç»è¿‡ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´çš„è¯•éªŒå’Œé”™è¯¯æ€»ç»“å‡ºæ¥çš„ã€‚ 1994 å¹´ï¼ŒErich Gammaã€Richard Helmã€Ralph Johnson å’Œ John Vlissides å››äººåˆè‘—å‡ºç‰ˆäº†ä¸€æœ¬ã€ŠDesign Patterns - Elements of Reusable Object-Oriented Softwareï¼ˆè®¾è®¡æ¨¡å¼ - å¯å¤ç”¨çš„é¢å‘å¯¹è±¡è½¯ä»¶å…ƒç´ ï¼‰ã€‹ çš„ä¹¦ï¼Œè¯¥ä¹¦é¦–æ¬¡æåˆ°äº†è½¯ä»¶å¼€å‘ä¸­è®¾è®¡æ¨¡å¼çš„æ¦‚å¿µã€‚ å››ä½ä½œè€…åˆç§° GOFï¼ˆå››äººå¸®ï¼Œå…¨æ‹¼ Gang of Fourï¼‰ã€‚ä»–ä»¬æ‰€æå‡ºçš„è®¾è®¡æ¨¡å¼ä¸»è¦æ˜¯åŸºäºŽä»¥ä¸‹çš„é¢å‘å¯¹è±¡è®¾è®¡åŽŸåˆ™ã€‚ å¯¹æŽ¥å£ç¼–ç¨‹è€Œä¸æ˜¯å¯¹å®žçŽ°ç¼–ç¨‹ã€‚ ä¼˜å…ˆä½¿ç”¨å¯¹è±¡ç»„åˆè€Œä¸æ˜¯ç»§æ‰¿ã€‚ åˆ†ç±»æ¨¡å¼æè¿°åŒ…å«åˆ›å»ºåž‹æ¨¡å¼å·¥åŽ‚æ¨¡å¼ï¼ˆFactory Patternï¼‰æŠ½è±¡å·¥åŽ‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰åŽŸåž‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰ç»“æž„åž‹æ¨¡å¼è¿™äº›è®¾è®¡æ¨¡å¼å…³æ³¨ç±»å’Œå¯¹è±¡çš„ç»„åˆã€‚ç»§æ‰¿çš„æ¦‚å¿µè¢«ç”¨æ¥ç»„åˆæŽ¥å£å’Œå®šä¹‰ç»„åˆå¯¹è±¡èŽ·å¾—æ–°åŠŸèƒ½çš„æ–¹å¼ã€‚é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰æ¡¥æŽ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰è¿‡æ»¤å™¨æ¨¡å¼ï¼ˆFilterã€Criteria Patternï¼‰ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰å¤–è§‚æ¨¡å¼ï¼ˆFacade Patternï¼‰äº«å…ƒæ¨¡å¼ï¼ˆFlyweight Patternï¼‰ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰è¡Œä¸ºåž‹æ¨¡å¼è¿™äº›è®¾è®¡æ¨¡å¼ç‰¹åˆ«å…³æ³¨å¯¹è±¡ä¹‹é—´çš„é€šä¿¡ã€‚è´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibility Patternï¼‰å‘½ä»¤æ¨¡å¼ï¼ˆCommand Patternï¼‰è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreter Patternï¼‰è¿­ä»£å™¨æ¨¡å¼ï¼ˆIterator Patternï¼‰ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediator Patternï¼‰å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMemento Patternï¼‰è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰çŠ¶æ€æ¨¡å¼ï¼ˆState Patternï¼‰ç©ºå¯¹è±¡æ¨¡å¼ï¼ˆNull Object Patternï¼‰ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰æ¨¡æ¿æ¨¡å¼ï¼ˆTemplate Patternï¼‰è®¿é—®è€…æ¨¡å¼ï¼ˆVisitor Patternï¼‰ å¯ä»¥ä½¿ç”¨ä¸€å¼ å›¾æ¥å±•ç¤ºè®¾è®¡æ¨¡å¼ä¹‹é—´çš„å…³ç³»ï¼š å…­ä¸ªåŽŸåˆ™ï¼š å¼€é—­åŽŸåˆ™ï¼ˆOpen Close Principleï¼‰ å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚ é‡Œæ°ä»£æ¢åŽŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰ åŸºç±»å¯ä»¥å‡ºçŽ°çš„ä»»ä½•åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºçŽ°ã€‚ ä¾èµ–å€’è½¬åŽŸåˆ™ï¼ˆDependence Inversion Principleï¼‰ é’ˆå¯¹æŽ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºŽæŠ½è±¡è€Œä¸ä¾èµ–äºŽå…·ä½“ã€‚ æŽ¥å£éš”ç¦»åŽŸåˆ™ï¼ˆInterface Segregation Principleï¼‰ é™ä½Žç±»ä¹‹é—´çš„è€¦åˆåº¦ã€‚ è¿ªç±³ç‰¹æ³•åˆ™ï¼Œåˆç§°æœ€å°‘çŸ¥é“åŽŸåˆ™ï¼ˆDemeter Principleï¼‰ å®žä½“åº”å½“å°½é‡å°‘åœ°ä¸Žå…¶ä»–å®žä½“å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œç³»ç»ŸåŠŸèƒ½æ¨¡å—åº”ç›¸å¯¹ç‹¬ç«‹ã€‚ åˆæˆå¤ç”¨åŽŸåˆ™ï¼ˆComposite Reuse Principleï¼‰ å°½é‡ä½¿ç”¨åˆæˆ/èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿ã€‚ ä¸‰å¤§è®¾è®¡æ¨¡å¼å’Œå…­ä¸ªåŽŸåˆ™æž„æˆäº†è½¯ä»¶è®¾è®¡æ¨¡å¼çš„åŸºæœ¬å†…å®¹ï¼Œä¸‹é¢å°†ä»‹ç»åˆ›å»ºè€…æ¨¡å¼ã€‚ åˆ›å»ºè€…æ¨¡å¼å·¥åŽ‚æ¨¡å¼åˆ›å»ºå¯¹è±¡æ—¶ä¸æš´éœ²åˆ›å»ºé€»è¾‘ï¼Œé€šè¿‡ä½¿ç”¨å…±åŒçš„æŽ¥å£æ¥æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ å·¥åŽ‚æ¨¡å¼å¯åˆ†ä¸ºç®€å•å·¥åŽ‚ã€å·¥åŽ‚æ–¹æ³•ã€æŠ½è±¡å·¥åŽ‚ã€‚ ç®€å•å·¥åŽ‚å·¥åŽ‚ç±»ï¼ˆSimpleFactoryï¼‰æ‹¥æœ‰ä¸€ä¸ªå·¥åŽ‚æ–¹æ³•ï¼ˆcreateï¼‰ï¼ŒæŽ¥å—äº†ä¸€ä¸ªå‚æ•°ï¼Œé€šè¿‡ä¸åŒçš„å‚æ•°å®žä¾‹åŒ–ä¸åŒçš„äº§å“ç±»ã€‚ ç®€å•å·¥åŽ‚ç®€å•ç²—æš´ï¼Œä½†æ˜¯å…¶ç¼ºç‚¹ä¹Ÿå¾ˆæ˜Žæ˜¾ï¼Œä¸€æ˜¯å½“äº§å“ç§ç±»ç¹å¤šæ—¶ä»£ç é‡æé«˜ï¼ŒäºŒæ˜¯å¢žåŠ æ–°äº§å“æ—¶ï¼Œéœ€è¦ä¿®æ”¹å·¥åŽ‚å®žçŽ°ï¼Œè¿èƒŒå¼€é—­åŽŸåˆ™ï¼ˆå¯¹æ‹“å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼‰ã€‚å·¥åŽ‚æ–¹æ³•æ­£å¥½å¯ä»¥è§£å†³ç®€å•å·¥åŽ‚çš„è¿™ä¸¤ä¸ªç¼ºç‚¹ã€‚ å·¥åŽ‚æ–¹æ³•å·¥åŽ‚æ–¹æ³•é’ˆå¯¹æ¯ä¸€ç§äº§å“æä¾›ä¸€ä¸ªå·¥åŽ‚ç±»ï¼Œé€šè¿‡ä¸åŒçš„å·¥åŽ‚å®žä¾‹ï¼Œåˆ›å»ºä¸åŒçš„äº§å“å®žä¾‹ã€‚ ä»Žå›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å·¥åŽ‚æ–¹æ³•ä¸­ï¼Œå¢žåŠ äº§å“ç§ç±»å¹¶ä¸éœ€è¦ä¿®æ”¹å·¥åŽ‚ç±»ï¼Œåªéœ€è¦æ·»åŠ ç›¸åº”çš„å·¥åŽ‚å³å¯ï¼Œç¬¦åˆå¼€æ”¾-å°é—­åŽŸåˆ™ã€‚å…¶ç¼ºç‚¹åœ¨äºŽï¼Œå¯¹äºŽæŸäº›å¯ä»¥å½¢æˆäº§å“æ—çš„æƒ…å†µï¼Œå¤„ç†èµ·æ¥æ¯”è¾ƒå¤æ‚ï¼Œè¿™ä¸€é—®é¢˜ä½¿ç”¨æŠ½è±¡å·¥åŽ‚è§£å†³ã€‚ æŠ½è±¡å·¥åŽ‚å·¥åŽ‚æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§æžç«¯æƒ…å†µçš„æŠ½è±¡å·¥åŽ‚æ¨¡å¼ï¼ˆå³åªç”Ÿäº§ä¸€ç§äº§å“çš„æŠ½è±¡å·¥åŽ‚æ¨¡å¼ï¼‰ï¼Œè€ŒæŠ½è±¡å·¥åŽ‚æ¨¡å¼å¯ä»¥çœ‹æˆæ˜¯å·¥åŽ‚æ–¹æ³•æ¨¡å¼çš„ä¸€ç§æŽ¨å¹¿ï¼Œå…¶é¢å¯¹äº§å“æ—ã€‚ ä»¥ä¸Šä»‹ç»çš„ä¸‰ç§å·¥åŽ‚æ–¹æ³•å„æœ‰ä¼˜ç¼ºç‚¹ ç®€å•å·¥åŽ‚ï¼š ç”¨æ¥ç”Ÿäº§åŒä¸€ç­‰çº§ç»“æž„ä¸­çš„ä»»æ„äº§å“ã€‚ï¼ˆä¸æ”¯æŒæ‹“å±•å¢žåŠ äº§å“ï¼‰ å·¥åŽ‚æ–¹æ³•ï¼šç”¨æ¥ç”Ÿäº§åŒä¸€ç­‰çº§ç»“æž„ä¸­çš„å›ºå®šäº§å“ã€‚ï¼ˆæ”¯æŒæ‹“å±•å¢žåŠ äº§å“ï¼‰ æŠ½è±¡å·¥åŽ‚ï¼šç”¨æ¥ç”Ÿäº§ä¸åŒäº§å“æ—çš„å…¨éƒ¨äº§å“ã€‚ï¼ˆä¸æ”¯æŒæ‹“å±•å¢žåŠ äº§å“ï¼›æ”¯æŒå¢žåŠ äº§å“æ—ï¼‰ å•ä¾‹æ¨¡å¼ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®žä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚å…¶å…³é”®åœ¨äºŽæž„é€ æ–¹æ³•æ˜¯ç§æœ‰çš„ï¼Œé¢å‘æ‰€æœ‰å¯¹è±¡æä¾›å…¨å±€å•ä¾‹ã€‚å•ä¾‹æ¨¡å¼çš„ç¼ºé™·åœ¨äºŽæ²¡æœ‰æŠ½è±¡å±‚ï¼Œæ— æ³•è¿›è¡Œæ‹“å±•ï¼ŒåŒæ—¶å…¶ç±»ç»“æž„å¤æ‚ï¼Œè¿èƒŒäº†å•ä¸€èŒè´£åŽŸåˆ™ã€‚ å•ä¾‹æ¨¡å¼å¯åˆ†ä¸ºçº¿ç¨‹å®‰å…¨æ‡’æ±‰å¼ã€çº¿ç¨‹ä¸å®‰å…¨æ‡’æ±‰å¼ã€é¥¿æ±‰å¼ã€åŒé‡æ£€æŸ¥é”å¼ä»¥åŠé™æ€å†…éƒ¨ç±»ç­‰å¤šç§å®žçŽ°æ–¹å¼ã€‚ æ‡’æ±‰å¼æ”¯æŒå»¶è¿Ÿåˆå§‹åŒ–ï¼Œä»£ç å¦‚ä¸‹ï¼Œç”±äºŽå…¶ä¸æ”¯æŒå¤šçº¿ç¨‹ï¼Œä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´å¹¶ä¸ç®—å•ä¾‹æ¨¡å¼ã€‚ 123456789101112public class Singleton &#123; private static Singleton instance; private Singleton ()&#123;&#125; public static Singleton getInstance() &#123; if (instance == null) &#123; instance = new Singleton(); &#125; return instance; &#125; &#125; è¦æ”¯æŒå¤šçº¿ç¨‹ï¼Œå¯ä»¥ç»™getInstanceæ–¹æ³•åŠ é”synchronizedï¼Œä½†æ˜¯æ•ˆçŽ‡ä¼šå˜å¾—å¾ˆä½Žã€‚ é¥¿æ±‰å¼ä¸ä¼šå»¶è¿Ÿåˆå§‹åŒ–ï¼Œå¤šçº¿ç¨‹å®‰å…¨ï¼Œç”±äºŽæ²¡æœ‰åŠ é”ï¼Œæ‰€ä»¥æ•ˆçŽ‡æ›´é«˜ã€‚ç¼ºç‚¹æ˜¯ç±»åŠ è½½æ—¶å°±åˆå§‹åŒ–ï¼Œå ç”¨å†…å­˜ï¼ŒåŒæ—¶ä¹Ÿå¾ˆå®¹æ˜“äº§ç”Ÿåžƒåœ¾å¯¹è±¡ã€‚ 123456789public class Singleton &#123; private static Singleton instance = new Singleton(); private Singleton ()&#123;&#125; public static Singleton getInstance() &#123; return instance; &#125; &#125; åŒæ£€å¼åŒæ£€å³Double Checked Lockingï¼Œå®‰å…¨ã€æ”¯æŒå»¶è¿Ÿåˆå§‹åŒ–ä¸”åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹èƒ½ä¿æŒé«˜æ€§èƒ½ã€‚getInstance çš„æ€§èƒ½å¯¹åº”ç”¨ç¨‹åºå¾ˆå…³é”®ã€‚ 12345678910111213141516public class Singleton &#123; private volatile static Singleton singleton; private Singleton ()&#123;&#125; public static Singleton getSingleton() &#123; if (singleton == null) &#123; synchronized (Singleton.class) &#123; if (singleton == null) &#123; singleton = new Singleton(); &#125; &#125; &#125; return singleton; &#125; &#125; è¯¥æ–¹æ³•ä½¿ç”¨äº†å…³é”®å­—volatileï¼Œå…³äºŽè¯¥å…³é”®å­—çš„åˆ†æžï¼šJavaå¹¶å‘ç¼–ç¨‹ï¼švolatileå…³é”®å­—è§£æž åœ¨ä¸ä½¿ç”¨ volatile æ—¶ï¼Œå‡è®¾ä¸¤ä¸ªçº¿ç¨‹Aã€Bç¬¬ä¸€æ¬¡è°ƒç”¨å•ä¾‹æ–¹æ³•ï¼Œå¦‚æžœçº¿ç¨‹Aå…ˆæ‰§è¡Œ instance = new Instance()ï¼Œç”±äºŽæž„é€ æ–¹æ³•æ˜¯ä¸€ä¸ªéžåŽŸå­æ“ä½œï¼Œç¼–è¯‘åŽä¼šç”Ÿæˆå¤šæ¡å­—èŠ‚ç æŒ‡ä»¤ï¼Œå› ä¸º Java çš„æŒ‡ä»¤é‡æŽ’åºï¼Œå¯èƒ½ä¼šå…ˆæ‰§è¡Œ instance çš„èµ‹å€¼æ“ä½œâ€”â€”åœ¨å†…å­˜ä¸­å¼€è¾Ÿä¸€ç‰‡å­˜å‚¨å¯¹è±¡çš„åŒºåŸŸï¼Œç„¶åŽç›´æŽ¥è¿”å›žå†…å­˜çš„å¼•ç”¨ã€‚æ­¤æ—¶è™½ç„¶ instance ä¸ä¸ºç©ºï¼Œä½†å®žé™…çš„åˆå§‹åŒ–æ“ä½œå´è¿˜æœªæ‰§è¡Œï¼Œå¦‚æžœçº¿ç¨‹Bè¿›å…¥ï¼Œå°±ä¼šçœ‹åˆ°ä¸€ä¸ªä¸ä¸ºç©ºçš„ä½†æ˜¯ä¸å®Œæ•´ï¼ˆæ²¡æœ‰å®Œæˆåˆå§‹åŒ–ï¼‰çš„ instance å¯¹è±¡ã€‚volatile å…³é”®å­—ä¿è¯ä¸åŒçº¿ç¨‹å¯¹å˜é‡è¿›è¡Œæ“ä½œæ—¶çš„å¯è§æ€§ï¼Œç¦æ­¢æŒ‡ä»¤é‡æŽ’åºä¼˜åŒ–ï¼Œä»Žè€Œå®‰å…¨çš„å®žçŽ°å•ä¾‹ã€‚ é™æ€å†…éƒ¨ç±»å¼èƒ½è¾¾åˆ°åŒæ£€é”æ–¹å¼ä¸€æ ·çš„åŠŸæ•ˆï¼Œä½†å®žçŽ°æ›´ç®€å•ã€‚è¿™ç§æ–¹å¼åªé€‚ç”¨äºŽé™æ€åŸŸçš„æƒ…å†µï¼ŒåŒæ£€é”æ–¹å¼å¯åœ¨å®žä¾‹åŸŸéœ€è¦å»¶è¿Ÿåˆå§‹åŒ–æ—¶ä½¿ç”¨ã€‚ ä¸ŽåŒæ£€å¼æ–¹å¼ä¸€æ ·åˆ©ç”¨ClassLoderæœºåˆ¶æ¥ä¿è¯åˆå§‹åŒ–instanceæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚å…³äºŽ ClassLoaderï¼šä¸€çœ‹ä½ å°±æ‡‚ï¼Œè¶…è¯¦ç»†javaä¸­çš„ClassLoaderè¯¦è§£ 123456789101112public class Singleton &#123; private static class SingletonHolder &#123; private static final Singleton INSTANCE = new Singleton(); &#125; private Singleton ()&#123;&#125; public static final Singleton getInstance() &#123; return SingletonHolder.INSTANCE; &#125; &#125; ç›¸è¾ƒäºŽåŒé‡æ£€æŸ¥é”ï¼Œç”±äºŽé™æ€å†…éƒ¨ç±»çš„ç‰¹æ€§â€”â€”éœ€è¦ä½¿ç”¨æ‰ä¼šè£…è½½åˆ°å†…å­˜ä¸­ï¼Œæ‰€ä»¥å®žé™…ä¸Šåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨getInstanceä¹‹å‰ï¼ŒSingletonHolder æ˜¯æ²¡æœ‰è¢«è£…è½½è¿›æ¥çš„ï¼Œåªæœ‰åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨äº† getInstance() ä¹‹åŽï¼Œå†…éƒ¨é™æ€ç±»çš„å®žä¾‹æ‰ä¼šçœŸæ­£è£…è½½ã€‚ æžšä¸¾å®žçŽ°å•ä¾‹æ¨¡å¼çš„æœ€ä½³æ–¹æ³•ã€‚ç®€æ´ã€æ”¯æŒåºåˆ—åŒ–ã€ç»å¯¹é˜²æ­¢å¤šæ¬¡å®žä¾‹åŒ–ã€‚ 123456public enum Singleton &#123; INSTANCE; public void whateverMethod() &#123;&#125; &#125; å»ºé€ è€…æ¨¡å¼ä½¿ç”¨å¤šä¸ªç®€å•çš„å¯¹è±¡é€æ­¥æž„å»ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ã€‚ä¸‹é¢çš„ä¾‹å­æ¯”è¾ƒç®€å•ç›´è§‚ï¼Œå®žé™…ä¸Šåœ¨å¤æ‚çš„ç³»ç»Ÿä¸­å¯ä»¥åŒ…å«å•ç‹¬çš„ Director ã€Builder ç”šè‡³æŠ½è±¡å±‚ç­‰å…ƒç´ ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546public class Human &#123; private final String name; private final int height; private final int weight; public static class Builder &#123; // å¿…è¦å‚æ•° private final int name; // å¯é€‰å‚æ•° private int height = 170; private int weight = 60; public Builder(String name) &#123; this.name = name &#125; public Builder height(int height) &#123; this.height = height; return this; &#125; public Builder weight(int weight) &#123; this.weight = weight; return this; &#125; public Human build() &#123; return new Human(this); &#125; &#125; private Human(Builder builder) &#123; name = builder.name; height = builder.height; weight = builder.weight; &#125; public static void main(String[] args) &#123; Human human = new Human.Builder("Jack") .height(175) .weight(60) .build(); &#125;&#125; åŽŸåž‹æ¨¡å¼å½“ç›´æŽ¥åˆ›å»ºå¯¹è±¡çš„ä»£ä»·æ¯”è¾ƒå¤§æ—¶ï¼ˆä¾‹å¦‚æ•°æ®åº“å¯¹è±¡æ“ä½œï¼‰ï¼Œå¯ä»¥é‡‡ç”¨è¿™ç§æ¨¡å¼å…‹éš†å‡ºå¤šä¸ªä¸€æ¨¡ä¸€æ ·çš„å¯¹è±¡ã€‚ Javaçš„cloneæ–¹æ³•ä¾¿æ˜¯ä½¿ç”¨äº†è¿™ç§æ–¹æ³•ï¼Œå…³äºŽè¯¥æ–¹æ³•ï¼šjavaå¯¹è±¡å…‹éš†ä»¥åŠæ·±æ‹·è´å’Œæµ…æ‹·è´ 12345678910111213141516public inteface Prototype &#123; Prototype clone();&#125;public class ConcretePrototype implement Prototype &#123; public override Prototype clone() &#123; Prototype prototype = new ConcretePrototype(); return prototype; &#125; public static void main(String[] args) &#123; Prototype p1 = new ConcretePrototype(); Prototype p2 = p1.clone(); &#125;&#125;]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javaè®¾è®¡æ¨¡å¼ï¼šè¡Œä¸ºåž‹æ¨¡å¼]]></title>
    <url>%2FJava%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[è´£ä»»é“¾æ¨¡å¼è´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibility Patternï¼‰ä¸ºè¯·æ±‚åˆ›å»ºä¸€ä¸ªæŽ¥æ”¶è€…å¯¹è±¡çš„é“¾ï¼Œæ¯ä¸ªæŽ¥æ”¶è€…éƒ½åŒ…å«å¯¹å¦ä¸€ä¸ªæŽ¥æ”¶è€…çš„å¼•ç”¨ã€‚å¦‚æžœä¸èƒ½å¤„ç†è¯¥è¯·æ±‚ï¼Œé‚£ä¹ˆå®ƒä¼šæŠŠç›¸åŒçš„è¯·æ±‚ä¼ ç»™ä¸‹ä¸€ä¸ªæŽ¥æ”¶è€…ã€‚è¯¥æ¨¡å¼åœ¨ Java Webä¸­æœ‰å¾ˆå¤šåº”ç”¨ï¼Œå¦‚ Apache Tomcat å¯¹ Encoding çš„å¤„ç†ï¼ŒStruts2 çš„æ‹¦æˆªå™¨ï¼ŒJSP Servlet çš„ Filterç­‰ç­‰ã€‚ åˆ›å»ºæŠ½è±¡ç±» AbstractLoggerï¼Œå¸¦æœ‰è¯¦ç»†çš„æ—¥å¿—è®°å½•çº§åˆ«ï¼Œåœ¨å…¶åŸºç¡€ä¸Šæ‹“å±•å‡ºä¸‰ä¸ªè®°å½•å™¨ï¼Œå¦‚æžœæ¶ˆæ¯çš„çº§åˆ«å±žäºŽè‡ªå·±ï¼Œåˆ™è®°å½•å™¨å°†å…¶æ‰“å°ï¼Œå¦åˆ™æŠŠæ¶ˆæ¯ä¼ ç»™ä¸‹ä¸€ä¸ªè®°å½•å™¨ã€‚ 12345678910111213141516171819202122232425abstract class AbstractLogger &#123; public static int INFO = 1; public static int DEBUG = 2; public static int ERROR = 3; protected int level; //è´£ä»»é“¾ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´  protected AbstractLogger nextLogger; public void setNextLogger(AbstractLogger nextLogger) &#123; this.nextLogger = nextLogger; &#125; public void logMessage(int level, String message) &#123; if (this.level &lt;= level) &#123; write(message); &#125; if (nextLogger != null) &#123; nextLogger.logMessage(level, message); &#125; &#125; abstract protected void write(String message);&#125; åœ¨ DebugLogger ä¸­123456789101112class DebugLogger extends AbstractLogger &#123; public DebugLogger() &#123; super(); level = 2; &#125; @Override protected void write(String message) &#123; System.out.println("DebugLogger: " + message); &#125;&#125; è°ƒç”¨1234567891011121314151617static AbstractLogger getChainOfLogger() &#123; AbstractLogger infoLogger = new InfoLogger(); AbstractLogger debugLogger = new DebugLogger(); AbstractLogger errorLogger = new ErrorLogger(); infoLogger.setNextLogger(debugLogger); debugLogger.setNextLogger(errorLogger); return infoLogger;&#125;public static void main(String[] args) &#123; AbstractLogger logger = getChainOfLogger(); logger.logMessage(AbstractLogger.INFO, "an info msg"); logger.logMessage(AbstractLogger.DEBUG, "a debug msg"); logger.logMessage(AbstractLogger.ERROR, "an error msg");&#125; æŽ§åˆ¶å°è¾“å‡ºç»“æžœä¸º123456InfoLogger: an info msgInfoLogger: a debug msgDebugLogger: a debug msgInfoLogger: an error msgDebugLogger: an error msgErrorLogger: an error msg å…¶ä»–å‘½ä»¤æ¨¡å¼ä¸€ç§æ•°æ®é©±åŠ¨çš„è®¾è®¡æ¨¡å¼ï¼Œè¯·æ±‚ä»¥å‘½ä»¤çš„å½¢å¼åŒ…è£¹åœ¨å¯¹è±¡ä¸­ï¼Œå¹¶ä¼ ç»™è°ƒç”¨å¯¹è±¡ã€‚è°ƒç”¨å¯¹è±¡å¯»æ‰¾å¯ä»¥å¤„ç†è¯¥å‘½ä»¤çš„åˆé€‚çš„å¯¹è±¡ï¼Œå¹¶å°†å‘½ä»¤ä¼ ç»™å®ƒä»¥æ‰§è¡Œå‘½ä»¤ã€‚è°ƒç”¨å¯¹è±¡å¯»æ‰¾åˆé€‚å¯¹è±¡çš„è¿‡ç¨‹å°±åƒå¼€å…³æŽ§åˆ¶ç”µå™¨ï¼Œå®ƒå¹¶ä¸éœ€è¦çŸ¥é“ç”µå™¨çš„å…·ä½“æƒ…å†µï¼Œåªéœ€è¦æ ¹æ®å‘½ä»¤ï¼ŒæŽ§åˆ¶ä¸åŒç”µçº¿çš„è¿žé€šçŠ¶æ€ã€‚æ¨¡å¼å®žçŽ°çš„ä»£ç è¾ƒç¹çï¼Œå…·ä½“çš„ä¾‹å­ç§»æ­¥ï¼šJavaè®¾è®¡æ¨¡å¼â€“å‘½ä»¤æ¨¡å¼ï¼ˆä»¥ç®¡ç†æ™ºèƒ½å®¶ç”µä¸ºä¾‹ï¼‰]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javaè®¾è®¡æ¨¡å¼ï¼šç»“æž„åž‹æ¨¡å¼]]></title>
    <url>%2FJava%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[é€‚é…å™¨æ¨¡å¼åœ¨ Android å¼€å‘ä¸­ï¼Œç»å¸¸èƒ½è§åˆ°å„ç§å„æ ·çš„ Adapter ç±»ï¼Œå…¶é‡‡ç”¨çš„æ­£æ˜¯é€‚é…å™¨æ¨¡å¼ã€‚è¯¥è®¾è®¡æ¨¡å¼ä½œä¸ºä¸¤ä¸ªä¸å…¼å®¹çš„æŽ¥å£ä¹‹é—´çš„æ¡¥æ¢ï¼Œå°†ä¸€ä¸ªç±»çš„æŽ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæŽ¥å£ï¼Œä»Žè€Œä½¿å¾—åŽŸæœ¬ç”±äºŽæŽ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚ ç”¨ç”µæºæŽ¥å£ä¸¾ä¾‹ï¼Œç¬”è®°æœ¬ç”µè„‘çš„ç”µæºéœ€è¦æŽ¥å…¥5Vçš„ç”µåŽ‹ï¼Œæ— æ³•ç›´æŽ¥ä½¿ç”¨220vçš„äº¤æµç”µåŽ‹ï¼Œä¸¤è€…å¹¶ä¸åŒ¹é…ï¼Œåœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œè¯¥çŽ°è±¡ç§°ä¹‹ä¸ºæŽ¥å£ä¸å…¼å®¹ï¼Œæ­¤æ—¶å°±éœ€è¦é€‚é…å™¨æ¥è¿›è¡ŒæŽ¥å£è½¬æ¢ã€‚è¿™ä¸ªè½¬æ¢çš„ä¸­é—´å±‚ä¾¿æ˜¯ Adapter å±‚ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬éœ€è¦5vçš„ç”µåŽ‹ï¼Œå› æ­¤Volt5Vç§°ä¸ºTargetï¼Œè€Œä¸å…¼å®¹çš„220Vç”µåŽ‹ç§°ä¹‹ä¸ºAdapteeï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯é€‚é…è®¾è®¡ä¸€ä¸ªAdpaterï¼Œæ–¹æ³•æœ‰ä¸¤ç§ã€‚ ç±»é€‚é…å™¨æ¨¡å¼123456789101112131415161718192021interface Volt5V &#123; int get5V();&#125;class Volt220V &#123; public int get220V() &#123; return 220; &#125;&#125;class Adapter extends Volt220V implements Volt5V &#123; @Override public int get5V() &#123; return 5; &#125;&#125;public static void main(String[] args) &#123; Adapter adapter = new Adapter(); System.out.println("èŽ·å–éœ€è¦çš„5Vç”µæºï¼š" + adapter.get5V());&#125; å¯¹è±¡é€‚é…å™¨æ¨¡å¼ä¸Žç±»é€‚é…å™¨æ¨¡å¼ä¸€æ ·ï¼Œå¯¹è±¡é€‚é…å™¨æ¨¡å¼æŠŠè¢«é€‚é…çš„ç±»çš„APIè½¬æ¢æˆä¸ºç›®æ ‡ç±»çš„APIï¼Œä¸åŒçš„æ˜¯ï¼Œå¯¹è±¡é€‚é…å™¨æ¨¡å¼çš„è¿žæŽ¥æ–¹å¼ä¸æ˜¯ç»§æ‰¿ï¼Œå…¶ä½¿ç”¨ä»£ç†å…³ç³»è¿žæŽ¥åˆ°Adapteeç±»ã€‚ 1234567891011121314151617class ObjectAdapter implements Volt5V &#123; private Volt220V volt220V; public ObjectAdapter(Volt220V adaptee) &#123; volt220V = adaptee; &#125; @Override public int get5V() &#123; return 5; &#125; public int get220V() &#123; return volt220V.get220V(); &#125; &#125; å…³äºŽ Android ä¸­ ListView ä¸­çš„ Adapterï¼Œå¯ä»¥å‚è€ƒï¼šAndroidæºç ä¹‹ListViewçš„é€‚é…å™¨æ¨¡å¼ ç»„åˆæ¨¡å¼å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æž„æ¥è¡¨çŽ°â€éƒ¨åˆ†-æ•´ä½“â€œçš„å±‚æ¬¡ç»“æž„ï¼Œä½¿å¾—å®¢æˆ·ä»¥ä¸€è‡´çš„æ–¹å¼å¤„ç†å•ä¸ªå¯¹è±¡ä»¥åŠå¯¹è±¡çš„ç»„åˆã€‚ç»„åˆæ¨¡å¼å®žçŽ°çš„æœ€å…³é”®çš„åœ°æ–¹æ˜¯â€”â€”ç®€å•å¯¹è±¡å’Œå¤åˆå¯¹è±¡å¿…é¡»å®žçŽ°ç›¸åŒçš„æŽ¥å£ã€‚è¿™å°±æ˜¯ç»„åˆæ¨¡å¼èƒ½å¤Ÿå°†ç»„åˆå¯¹è±¡å’Œç®€å•å¯¹è±¡è¿›è¡Œä¸€è‡´å¤„ç†çš„åŽŸå› ã€‚ ç»„åˆéƒ¨ä»¶ï¼ˆComponentï¼‰ï¼šå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡è§’è‰²ï¼Œä¸ºè¦ç»„åˆçš„å¯¹è±¡æä¾›ç»Ÿä¸€çš„æŽ¥å£ã€‚ å¶å­ï¼ˆLeafï¼‰ï¼šåœ¨ç»„åˆä¸­è¡¨ç¤ºå­èŠ‚ç‚¹å¯¹è±¡ï¼Œå¶å­èŠ‚ç‚¹ä¸èƒ½æœ‰å­èŠ‚ç‚¹ã€‚ åˆæˆéƒ¨ä»¶ï¼ˆCompositeï¼‰ï¼šå®šä¹‰æœ‰æžèŠ‚ç‚¹çš„è¡Œä¸ºï¼Œç”¨æ¥å­˜å‚¨éƒ¨ä»¶ï¼Œå®žçŽ°åœ¨ComponentæŽ¥å£ä¸­çš„æœ‰å…³æ“ä½œï¼Œå¦‚å¢žåŠ ï¼ˆAddï¼‰å’Œåˆ é™¤ï¼ˆRemoveï¼‰ã€‚ å¯¹äºŽé€æ˜Žç»„åˆæ¨¡å¼æ¥è¯´ï¼ŒComponent ä¸­å£°æ˜Žæ‰€æœ‰ç®¡ç†å­å¯¹è±¡çš„æ–¹æ³•ï¼Œå…¶ä¸­åŒ…æ‹¬Addï¼ŒRemoveç­‰ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å¶èŠ‚ç‚¹å’ŒæžèŠ‚ç‚¹å…·å¤‡å®Œå…¨ä¸€è‡´çš„æŽ¥å£ï¼Œå¯¹äºŽå¤–ç•Œæ²¡æœ‰åŒºåˆ«ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960//æŠ½è±¡æž„ä»¶ï¼Œå£°æ˜Žä¸€ä¸ªæŽ¥å£ç”¨äºŽè®¿é—®å’Œç®¡ç†Componentçš„å­éƒ¨ä»¶abstract class Component &#123; public Component() &#123; &#125; public abstract void add(Component component); public abstract void remove(Component component); //æ˜¾ç¤ºå±‚çº§ç»“æž„ public abstract void Display(int level);&#125;//å¶å­èŠ‚ç‚¹class Leaf extends Component &#123; public Leaf() &#123; super(); &#125; //æ— æ„ä¹‰çš„å®žçŽ° @Override public void add(Component component) &#123; &#125; //æ— æ„ä¹‰çš„å®žçŽ° @Override public void remove(Component component) &#123; &#125; @Override public void Display(int level) &#123; System.out.println("-" + level); &#125;&#125;//æžèŠ‚ç‚¹class Composite extends Component &#123; public Composite() &#123; super(); &#125; private List&lt;Component&gt; children = new ArrayList&lt;&gt;(); @Override public void add(Component component) &#123; children.add(component); &#125; @Override public void remove(Component component) &#123; children.remove(component); &#125; @Override public void Display(int level) &#123; children.forEach( component -&gt; component.Display(level + 2) ); &#125;&#125; å¯¹äºŽè¿™ç§æ–¹å¼æ¥è¯´ï¼Œå¶å­èŠ‚ç‚¹å¹¶ä¸å…·å¤‡ addã€remove ç­‰æ–¹æ³•ï¼Œå¯¹ä»–ä»¬çš„å®žçŽ°æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå¯ä»¥é‡‡ç”¨å®‰å…¨å¼ç»„åˆæ¨¡å¼ï¼Œå°†å¶å­èŠ‚ç‚¹ä¸å…·å¤‡çš„åŠŸèƒ½ä¸‹æ”¾åˆ°æžèŠ‚ç‚¹ä¸­å®žçŽ°ã€‚è¯¥åšæ³•çš„å¼Šç«¯æ˜¯å¯¹äºŽå®¢æˆ·ç«¯æ¥è¯´ï¼Œå¿…é¡»å¯¹å¶èŠ‚ç‚¹å’ŒæžèŠ‚ç‚¹è¿›è¡Œåˆ¤å®šï¼Œä½¿ç”¨ä¸ä¾¿ã€‚ è£…é¥°å™¨æ¨¡å¼å‘ä¸€ä¸ªçŽ°æœ‰çš„å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æž„ã€‚åˆ›å»ºä¸€ä¸ª Shape æŽ¥å£å’Œå®žçŽ°äº† Shape æŽ¥å£çš„å®žä½“ç±»ã€‚ç„¶åŽåˆ›å»ºä¸€ä¸ªå®žçŽ°äº† Shape æŽ¥å£çš„æŠ½è±¡è£…é¥°ç±» ShapeDecoratorï¼Œå¹¶æŠŠ Shape å¯¹è±¡ä½œä¸ºå®ƒçš„å®žä¾‹å˜é‡ã€‚RedShapeDecorator æ˜¯å®žçŽ°äº† ShapeDecorator çš„å®žä½“ç±»ï¼Œç”¨æ¥è£…é¥° Shape å¯¹è±¡ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243interface Shape &#123; void draw();&#125;class Circle implements Shape &#123; @Override public void draw() &#123; System.out.println("Draw a circle"); &#125;&#125;//å®žçŽ°äº† Shape æŽ¥å£çš„æŠ½è±¡è£…é¥°ç±»ã€‚abstract class ShapeDecorator implements Shape &#123; Shape decoratedShape; public ShapeDecorator(Shape decoratedShape) &#123; this.decoratedShape = decoratedShape; &#125; @Override public void draw() &#123; decoratedShape.draw(); &#125;&#125;//å…·ä½“çš„è£…é¥°ç±»class RedShapeDecorator extends ShapeDecorator &#123; public RedShapeDecorator(Shape decoratedShape) &#123; super(decoratedShape); &#125; @Override public void draw() &#123; decoratedShape.draw(); setRedBorder(decoratedShape); &#125; private void setRedBorder(Shape decoratedShape) &#123; System.out.println("Border color: Red"); &#125;&#125; ä»£ç†æ¨¡å¼ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†é™æ€ä»£ç†çš„è¿‡ç¨‹ï¼Œåˆ›å»ºä¸€ä¸ª Image æŽ¥å£å’Œå®žçŽ°äº† Image æŽ¥å£çš„å®žä½“ç±»ã€‚ProxyImage æ˜¯ä¸€ä¸ªä»£ç†ç±»ï¼Œå‡å°‘ RealImage å¯¹è±¡åŠ è½½çš„å†…å­˜å ç”¨ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940interface Image &#123; void display();&#125;class RealImage implements Image &#123; private String fileName; public RealImage(String fileName)&#123; this.fileName = fileName; loadFromDisk(fileName); &#125; @Override public void display() &#123; System.out.println("Displaying " + fileName); &#125; private void loadFromDisk(String fileName)&#123; System.out.println("Loading " + fileName); &#125;&#125;class ProxyImage implements Image &#123; private RealImage realImage; private String fileName; public ProxyImage(String fileName)&#123; this.fileName = fileName; &#125; @Override public void display() &#123; if(realImage == null)&#123; realImage = new RealImage(fileName); &#125; realImage.display(); &#125;&#125; é™æ€ä»£ç†çš„ç¼ºç‚¹æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œç”±äºŽä»£ç†ç±»å’Œå§”æ‰˜ç±»å®žçŽ°ç›¸åŒçš„æŽ¥å£ï¼Œå¯¼è‡´ä»£ç å†—æ‚ã€‚æŽ¥å£çš„å˜åŒ–å°†å¼•èµ·æ‰€æœ‰å®žçŽ°ç±»å’Œä»£ç†ç±»çš„å˜åŒ–ï¼ŒåŒæ—¶å½“ä»£ç†ç±»éœ€è¦ä¸ºå¤šå¯¹è±¡æœåŠ¡æ—¶ä¹Ÿä¼šæ˜¾å¾—åŠ›ä¸ä»Žå¿ƒï¼Œä¸ºæ­¤å¼•å…¥åŠ¨æ€ä»£ç†çš„æ–¹å¼ã€‚Javaä¸­çš„åŠ¨æ€ä»£ç†ç±»å¿…é¡»å®žçŽ° reflect åŒ…ä¸­çš„ InvocationHandler æŽ¥å£ï¼ŒåŒæ—¶ä½¿ç”¨ Proxy ç±»ã€‚å½“é€šè¿‡åŠ¨æ€ä»£ç†å¯¹è±¡è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶å€™ï¼Œè¯¥æ–¹æ³•çš„è°ƒç”¨å°±ä¼šè¢«è½¬å‘åˆ°å®žçŽ° InvocationHandler æŽ¥å£ç±»çš„ invoke æ–¹æ³•ã€‚è¿˜æ˜¯ä»¥é™æ€ä»£ç†ä¸­ Image ä¸¾ä¾‹ï¼Œè¿™æ¬¡ä¸å†åˆ›å»ºä¸€ä¸ª ProxyImageï¼Œ è€Œæ˜¯é€šè¿‡ä¸€ä¸ª DisplayHandler å®žçŽ°åŠ¨æ€ä»£ç†ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849import java.lang.reflect.InvocationHandler;import java.lang.reflect.Method;import java.lang.reflect.Proxy;public class DisplayHandler implements InvocationHandler &#123; //è¦ä»£ç†çš„çœŸå®žå¯¹è±¡ private Object obj; public DisplayHandler(Object obj) &#123; this.obj = obj; &#125; /** * * @param proxy ä»£ç†ç±»ä»£ç†çš„çœŸå®žä»£ç†å¯¹è±¡ * @param method æ‰€è¦è°ƒç”¨æŸä¸ªå¯¹è±¡çœŸå®žçš„æ–¹æ³•çš„Methodå¯¹è±¡ * @param args æŒ‡ä»£ä»£ç†å¯¹è±¡æ–¹æ³•ä¼ é€’çš„å‚æ•° * @return * @throws Throwable */ @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; //çœŸå®žçš„å¯¹è±¡æ‰§è¡Œä¹‹å‰ System.out.println("Before invoke..."); Object invoke = method.invoke(obj, args); //çœŸå®žçš„å¯¹è±¡æ‰§è¡Œä¹‹åŽ System.out.println("After invoke..."); return invoke; &#125;&#125;public static void main(String[] args) &#123; Image image = new RealImage("hello.jpg"); InvocationHandler handler = new DisplayHandler(image); /* * å‚æ•°ä¸€ï¼šhandler.getClass().getClassLoader()ï¼Œä½¿ç”¨handlerå¯¹è±¡çš„classloaderå¯¹è±¡æ¥åŠ è½½æˆ‘ä»¬çš„ä»£ç†å¯¹è±¡ * å‚æ•°äºŒï¼šimage.getClass().getInterfaces()ï¼Œæä¾›çœŸå®žå¯¹è±¡å®žçŽ°çš„æŽ¥å£ï¼Œä½¿ä»£ç†å¯¹è±¡èƒ½è°ƒç”¨æŽ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³• * å‚æ•°ä¸‰ï¼šhandlerï¼Œå°†ä»£ç†å¯¹è±¡å…³è”åˆ°ä¸Šé¢çš„InvocationHandlerå¯¹è±¡ä¸Š */ Image proxy = (Image) Proxy.newProxyInstance( handler.getClass().getClassLoader(), image.getClass().getInterfaces(), handler); proxy.display();&#125; æŽ§åˆ¶å°è¾“å‡ºç»“æžœä¸º1234Loading hello.jpgBefore invoke...Displaying hello.jpgAfter invoke... ä»£ç†æ¨¡å¼å’Œè£…é¥°æ¨¡å¼éžå¸¸ç±»ä¼¼ï¼ŒäºŒè€…æœ€ä¸»è¦çš„åŒºåˆ«æ˜¯ï¼šä»£ç†æ¨¡å¼ä¸­ï¼Œä»£ç†ç±»å¯¹è¢«ä»£ç†çš„å¯¹è±¡æœ‰æŽ§åˆ¶æƒï¼Œå†³å®šå…¶æ‰§è¡Œæˆ–è€…ä¸æ‰§è¡Œã€‚è€Œè£…é¥°æ¨¡å¼ä¸­ï¼Œè£…é¥°ç±»å¯¹ä»£ç†å¯¹è±¡æ²¡æœ‰æŽ§åˆ¶æƒï¼Œåªèƒ½ä¸ºå…¶å¢žåŠ ä¸€å±‚è£…é¥°ï¼Œä»¥åŠ å¼ºè¢«è£…é¥°å¯¹è±¡çš„åŠŸèƒ½ï¼Œä»…æ­¤è€Œå·²ã€‚ å…¶ä»–è¿‡æ»¤å™¨æ¨¡å¼ç®€å•çš„è¯´ï¼Œç­›é€‰å™¨æä¾›ä¸€ä¸ªè¾“å…¥å‚æ•°ä¸ºç‰¹å®šç±»åž‹é›†åˆçš„ç­›é€‰æ–¹æ³•ï¼Œè¿”å›žç­›é€‰ä¹‹åŽçš„é›†åˆï¼ŒåŒæ—¶ç­›é€‰å™¨ä¹‹é—´å¯ä»¥ç»„åˆã€‚ æ¡¥æŽ¥æ¨¡å¼æ¡¥æŽ¥æ¨¡å¼å³å°†æŠ½è±¡éƒ¨åˆ†ä¸Žå®ƒçš„å®žçŽ°éƒ¨åˆ†åˆ†ç¦»å¼€æ¥ï¼Œä½¿ä»–ä»¬éƒ½å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ç”»ç”»è¿™ä¸€è¡Œä¸ºä¸­ï¼Œç”»ç¬”éœ€è¦é€‰æ‹©ä¸åŒçš„é¢œè‰²ã€ç»˜ç”»å½¢çŠ¶ç­‰ï¼Œä¸ºäº†æ–¹ä¾¿æ‹“å±•ï¼Œä½¿ç”¨æ¡¥æŽ¥æ¨¡å¼ï¼ŒæŠ½è±¡å‡ºå½¢çŠ¶å’Œé¢œè‰²ä¸¤ä¸ªçˆ¶ç±»ï¼Œç„¶åŽæ ¹æ®éœ€è¦å¯¹é¢œè‰²å’Œå½¢çŠ¶è¿›è¡Œç»„åˆã€‚å®žé™…ä¸Šè¿™æ˜¯â€œé¢å‘æŽ¥å£ç¼–ç¨‹â€è®¾è®¡æ€æƒ³æœ€ç›´è§‚çš„ä½“çŽ°ã€‚ å¤–è§‚æ¨¡å¼å¤–è§‚æ¨¡å¼éšè—ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œå¹¶å‘å®¢æˆ·ç«¯æä¾›äº†ä¸€ä¸ªå¯ä»¥è®¿é—®ç³»ç»Ÿçš„æŽ¥å£ã€‚ ç®€å•çš„æ¥è¯´å°±æ˜¯å¯¹å¤–æä¾›ä¸€ä¸ªç®€å•æŽ¥å£ï¼Œéšè—å®žçŽ°çš„é€»è¾‘ã€‚æ¯”å¦‚è®¡ç®—æœºçš„ç”µæºé”®ï¼Œç”¨æˆ·åªéœ€æŒ‰ç”µæºé”®ï¼Œå°±å¯ä»¥å¯åŠ¨æˆ–è€…å…³é—­è®¡ç®—æœºï¼Œæ— éœ€çŸ¥é“å®ƒæ˜¯æ€Žä¹ˆå¯åŠ¨çš„(å¯åŠ¨CPUã€å¯åŠ¨å†…å­˜ã€å¯åŠ¨ç¡¬ç›˜)ï¼Œæ€Žä¹ˆå…³é—­çš„(å…³é—­ç¡¬ç›˜ã€å…³é—­å†…å­˜ã€å…³é—­CPU)ã€‚ äº«å…ƒæ¨¡å¼æ‰€è°“äº«å…ƒæ¨¡å¼å°±æ˜¯è¿è¡Œå…±äº«æŠ€æœ¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦å¯¹è±¡çš„å¤ç”¨ã€‚ç³»ç»Ÿä½¿ç”¨å°‘é‡å¯¹è±¡,è€Œä¸”è¿™äº›éƒ½æ¯”è¾ƒç›¸ä¼¼ï¼ŒçŠ¶æ€å˜åŒ–å°ï¼Œå¯ä»¥å®žçŽ°å¯¹è±¡çš„å¤šæ¬¡å¤ç”¨ã€‚é€šè¿‡å…¶ä¸­çš„äº«å…ƒå·¥åŽ‚æ¥å±•ç¤ºè¯¥æ¨¡å¼çš„ç‰¹ç‚¹ 1234567891011121314151617public class FlyweightFactory&#123; static Map&lt;String, Shape&gt; shapes = new HashMap&lt;String, Shape&gt;(); public static Shape getShape(String key)&#123; Shape shape = shapes.get(key); if(shape == null)&#123; shape = new Circle(key); shapes.put(key, shape); &#125; return shape; &#125; public static int getSum()&#123; return shapes.size(); &#125;&#125; è¡¥å……ä»Žä»£ç ä¸Šçœ‹ï¼Œç»“æž„åž‹æ¨¡å¼ä¸­çš„å¾ˆå¤šæ¨¡å¼å…·æœ‰ç›¸å½“å¤§çš„ç›¸ä¼¼æ€§ï¼Œå…·ä½“åŒºåˆ†çš„è¯ï¼Œè£…é¥°å™¨æ¨¡å¼æ˜¯â€œæ–°å¢žè¡Œä¸ºâ€ï¼Œä»£ç†æ¨¡å¼æ˜¯â€œæŽ§åˆ¶è®¿é—®è¡Œä¸ºâ€ï¼Œé€‚é…å™¨æ¨¡å¼æ˜¯â€è½¬æ¢è¡Œä¸ºâ€ï¼Œå¤–è§‚æ¨¡å¼æ˜¯ä¸€ç§â€ç®€åŒ–è¡Œä¸ºâ€ã€‚]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å·´æ´›å…‹çš„çç ï¼šå·´èµ«ã€Šå…­é¦–æ— ä¼´å¥å¤§æç´ç»„æ›²ã€‹]]></title>
    <url>%2F%E5%B7%B4%E6%B4%9B%E5%85%8B%E7%9A%84%E7%8F%8D%E7%8F%A0%EF%BC%9A%E5%B7%B4%E8%B5%AB%E3%80%8A%E5%85%AD%E9%A6%96%E6%97%A0%E4%BC%B4%E5%A5%8F%E5%A4%A7%E6%8F%90%E7%90%B4%E7%BB%84%E6%9B%B2%E3%80%8B%2F</url>
    <content type="text"><![CDATA[å¼•è¨€ ç¬¬ä¸€æ¬¡æŽ¥è§¦â€œå·´æ´›å…‹â€ä¸€è¯ï¼Œæ˜¯åœ¨CCTVéŸ³ä¹åŽ…çš„â€œæ¼«æ­¥ç»å…¸â€ç³»åˆ—ï¼Œä¹Ÿè®¸æ˜¯åˆä¸­çš„ä¸€ä¸ªåˆåŽï¼Œç”µè§†æœºé‡Œä¼ æ¥ç»´ç“¦å°”ç¬¬ã€Šå››å­£ã€‹ç»„æ›²æ‚ æ‰¬æ¬¢å¿«çš„ä¹å£°ï¼Œæ—‹å¾‹é£˜è¿‡æ—¶å…‰ï¼Œé“­åˆ»åœ¨å¿ƒä¸­ã€‚ â€œæ¼«æ­¥ç»å…¸â€ç³»åˆ—å…³äºŽå·´æ´›å…‹éŸ³ä¹çš„ä»‹ç»å…±åˆ†å…­æœŸèŠ‚ç›®ï¼Œè™½è¯´ç‰¹åˆ«åœ¨æ„ï¼Œå®žé™…ä¸Šä¹Ÿæ²¡æœ‰å®Œæ•´åœ°çœ‹å®Œã€‚ä¸çŸ¥é“ä½•æ—¶èµ·ï¼Œå°±æœ‰äº†ç³»ç»Ÿåœ°äº†è§£è¥¿æ–¹å¤å…¸éŸ³ä¹çš„æƒ³æ³•ï¼Œè¿˜ä¸“é—¨åŽ»çŸ¥ä¹Žæµè§ˆè¯¸å¦‚â€œå¤å…¸éŸ³ä¹â€æ€Žä¹ˆå…¥é—¨ä¹‹ç±»çš„é—®ç­”ï¼Œå¯æƒœæ¯æ¬¡éƒ½æ˜¯è¿ˆå‡ºç¬¬ä¸€æ­¥ï¼Œä¾¿å†æ— ä¸‹æ–‡ã€‚ä¸è¿‡å€’ä¹Ÿä¸åœ¨æ„ï¼Œæ¯•ç«Ÿè¦â€œç³»ç»Ÿåœ°â€å¬å®Œå¤å…¸éŸ³ä¹å²ï¼Œå¯¹ä¸€ä¸ªé—¨å¤–æ±‰æ¥è¯´ï¼Œä¹Ÿç€å®žå¯Œæœ‰æŒ‘æˆ˜æ€§ã€‚ ç”Ÿæ´»ä¸­ä¸“é—¨æ¬£èµå¤å…¸éŸ³ä¹çš„æœºä¼šä¸ç®—å¤šã€‚å¿ƒæƒ…çƒ¦èºã€ç™¾æ— èŠèµ–ä¹‹é™…ï¼Œä¼šéšæ€§åœ°æ‰“å¼€å…³äºŽå¤å…¸éŸ³ä¹çš„æ­Œå•ï¼Œæˆ´ä¸Šè€³æœºï¼Œæ„Ÿå—å·´èµ«ä»¬é“¶ç å€¾æ–œèˆ¬é¥±æ»¡çš„æƒ…æ„Ÿã€‚è¿‘æ¥å‘çŽ°ä¸€æœ¬ä¹¦ï¼šã€Šç©¿Tæ¤å¬å¤å…¸éŸ³ä¹ã€‹ï¼Œä½œè€…ç”¨éŸ³ä¹å®¶çš„æ•…äº‹ä¸²è”èµ·è¥¿æ–¹å¤å…¸éŸ³ä¹å²ï¼Œä¸ºæ¬£èµå¤å…¸éŸ³ä¹æä¾›äº†ä¸ä¸€æ ·çš„æ–¹å¼ã€‚ æœ¬æ–‡æ‘˜å½•äº†ä¹¦ä¸­å…³äºŽå·´èµ«ã€Šå…­é¦–æ— ä¼´å¥å¤§æç´ç»„æ›²ã€‹çš„ç« èŠ‚ï¼Œè®°å½•å…³äºŽè¿™ä¸€ä¼Ÿå¤§ä¹ç« èƒŒåŽçš„æ•…äº‹ã€‚ç»„æ›²çš„ç½‘æ˜“äº‘é“¾æŽ¥ä¸ºï¼šå·´èµ«ã€Šå…­é¦–æ— ä¼´å¥å¤§æç´ç»„æ›²ã€‹æ–¯å¡”å…‹ æ­£æ–‡ 1889å¹´ï¼Œ13å²çš„å¡è¨å°”æ–¯ï¼ˆPablo Casalsï¼‰åˆšå¼€å§‹å­¦å¤§æç´ä¸ä¹…ï¼Œæœ‰ä¸€å¤©ï¼Œä»–å’Œçˆ¶äº²åœ¨è¡—å¤´é—²é€›ï¼Œèµ°åˆ°ä¸€é—´æ˜æš—çš„å¤è‘£åº—é‡Œï¼Œæµè§ˆåº—é‡Œç¨€å¥‡å¤æ€ªçš„æ”¶è—ã€‚å¡è¨å°”æ–¯åœ¨è§’è½é‡Œå‘çŽ°äº†ä¸€æœ¬ç ´ç ´çš„ä¹è°±ï¼Œå¤§å¼€æœ¬ï¼Œçº¸è´¨åŽšå®žï¼Œç¿»å¼€æ¥åƒä¸€æœ¬å·¨å¤§çš„ç¥ˆç¥·ä¹¦ã€‚çˆ¶äº²èµ°è¿‡æ¥ï¼Œä»–çœ‹åˆ°ä¸Šé¢æœ‰å·´èµ«ä¸Žå¤§æç´çš„å­—æ ·ï¼Œæ²¡é”™ï¼Œè¿™å°±æ˜¯é—å¤±å·²ä¹…çš„å·´èµ«ä½œå“ã€Šå…­é¦–æ— ä¼´å¥å¤§æç´ç»„æ›²ã€‹ã€‚ å¦‚ä»Šï¼Œå·´èµ«çš„ã€Šå…­é¦–æ— ä¼´å¥å¤§æç´ç»„æ›²ã€‹æ˜¯å¤§æç´å®¶çš„æ—§çº¦åœ£ç»ï¼Œè€Œåœ¨å¡è¨å°”æ–¯å‘çŽ°å®ƒä¹‹å‰ï¼Œå‡ ä¹Žæ— äººæ¼”å¥è¿‡ï¼Œäººä»¬åªå¬è¿‡é›¶æ˜Ÿç‰‡æ®µï¼Œå±…ç„¶è¿˜æœ‰äººç…žæœ‰ä»‹äº‹ç»™å®ƒé…ä¸Šè¹©è„šçš„é’¢ç´ä¼´å¥ã€‚é‚£å¤©ï¼Œå¡è¨å°”æ–¯åƒå—åˆ°ç¥žå¯ä¸€èˆ¬ï¼Œç´§ç´§æŠ±ç€ä¹è°±é£žå¥”å›žå®¶ï¼Œè¿«ä¸åŠå¾…åœ°å¼€å§‹ç»ƒä¹ ã€‚ä»–è¯´ï¼šâ€œè¿™æ¬¡å‘çŽ°æ˜¯å¯¹æˆ‘ç”Ÿå‘½çš„å¥‡å¦™å¯ç¤ºã€‚â€å¯¹äºŽä¸€ä½åˆå­¦å¤§æç´çš„å°‘å¹´ï¼Œå‘çŽ°è¿™æ ·ä¸€ä¸ªå·¨å¤§çš„å®è—ï¼Œå·²ç»æ„å‘³ç€ä¸€ç§å‘½è¿ï¼Œä»–è¦æŠŠæ­¤ç”Ÿå¥‰çŒ®ç»™å¤§æç´ã€‚ å›žé¡¾20ä¸–çºªï¼Œæ²¡æœ‰å“ªä½å¤§æç´å®¶èµ¢å¾—äº†åƒå¡è¨å°”æ–¯é‚£æ ·çš„æˆå°±ä¸Žå½±å“åŠ›ï¼šä»–æ—…è¡Œæ¼”å‡ºçš„è¶³è¿¹éå¸ƒä¸–ç•Œå„åœ°ï¼›ä»–å®Œå–„äº†å¤§æç´æ¼”å¥æŠ€å·§ï¼Œæå‡äº†å¤§æç´ä½œä¸ºç‹¬å¥ä¹å™¨çš„åœ°ä½ï¼›ä»–åå¯¹è¥¿ç­ç‰™å†…æˆ˜è€Œæµäº¡å·´é»Žï¼Œå› æ­¤èŽ·è¯ºè´å°”å’Œå¹³å¥–æåã€‚åœ¨ä»–çš„ç¥–å›½è¥¿ç­ç‰™ï¼Œè¿˜æœ‰ä¸€æ¡åå«å¡è¨å°”æ–¯çš„å…¬è·¯â€¦â€¦ä»–æ˜¯ä¸€ä½ä¼ å¥‡çš„å¤§æç´å®¶ï¼Œä»–è¯´ä»–ä¸ä»…æ˜¯å¤§æç´å®¶ï¼Œä»–é¦–å…ˆæ˜¯ä¸€ä½éŸ³ä¹å®¶ã€‚20å²çš„æ—¶å€™ï¼Œå¡è¨å°”æ–¯åŽ»å·´é»Žçš„å¤§å¸ˆé‚£é‡Œå­¦ç´ï¼Œæ‹‰å®Œä¸€æ›²ï¼Œå¤§å¸ˆèµ·èº«æ‹¥æŠ±ä»–è¯´ï¼Œä½ æ³¨å®šæ˜¯ä¸åŒå‡¡å“çš„éŸ³ä¹å®¶ã€‚ æŽ¢å¯»è¿™éƒ¨ã€Šå…­é¦–æ— ä¼´å¥å¤§æç´ç»„æ›²ã€‹çš„æ•…äº‹ï¼Œå°±æ˜¯å›žé¡¾20ä¸–çºªå¤§æç´æ¼”å¥è‰ºæœ¯å²ã€‚å¡è¨å°”æ–¯æŠŠä¸€ç”Ÿç”¨æ¥æ¼”å¥å’ŒæŽ¨å¹¿è¿™éƒ¨ä¹æ›²ï¼Œå¦‚ä»Šä»–çš„åå­—å·²ç»ä¸Žè¿™éƒ¨æ›²é›†æ°¸è¿œç›¸è¿žï¼Œæ˜¯ä»–çš„æ¯•ç”ŸåŠªåŠ›è®©å®ƒæˆä¸ºå¤§æç´çš„æ ¸å¿ƒæ›²ç›®ã€‚å¦‚ä»Šæ‰€æœ‰å¤§æç´å®¶éƒ½åœ¨ç»ƒä¹ å®ƒï¼ŒæŒ‘æˆ˜å®ƒã€‚å®ƒæ˜¯åœ£ç»ï¼Œäº¦æ˜¯å½’å®¿ã€‚ç«¥å¹´æ—¶ä»£çš„é©¬å‹å‹æŠŠè¿™å¥—å¤§æç´ç»„æ›²å½“ä½œç»ƒä¹ æ›²ï¼Œçˆ¶äº²è¦æ±‚ä»–æ¯å¤©å­¦ä¹ ä¸¤å°èŠ‚ï¼Œäº”å²çš„ä»–ç«Ÿèƒ½å¤Ÿä»Žå¤´è‡³å°¾æ‹‰å¥ï¼Œå¹¶ä¸”ä»¥å®ƒå¼€äº†ç‹¬å¥ä¼šã€‚ä»–ä¸Žå¡è¨å°”æ–¯ä¸€æ ·ï¼Œè‰ºæœ¯äººç”Ÿä»Žå·´èµ«å¼€å§‹ã€‚ å¦‚ä»Šå·²ç»æ— äººçŸ¥é“å·´èµ«åˆ›ä½œã€Šå…­é¦–æ— ä¼´å¥å¤§æç´ç»„æ›²ã€‹çš„ç¡®åˆ‡å¹´ä»½ï¼Œå­¦è€…ä»¬ä»Žé£Žæ ¼ã€ä½“è£ç­‰å› ç´ è€ƒé‡ï¼Œè®¤ä¸ºå®ƒä½œäºŽå·´èµ«åœ¨ç§‘æ»•æ‹…ä»»å®«å»·ä¹é•¿çš„æ—¶æœŸã€‚å·´èµ«çš„å¤§éƒ¨åˆ†å®¤å†…ä¹éƒ½æ˜¯åœ¨é‚£æ—¶å®Œæˆçš„ï¼Œä¸€åŠæ˜¯å› ä¸ºç§‘æ»•çš„é¢†ä¸»å–œæ¬¢çŽ©å®¤å†…ä¹ã€‚è¿™éƒ¨ç»„æ›²ä¸€å…±æœ‰6å¥—36é¦–æ›²ç›®ï¼ŒåŒ…å«6ç§èˆžæ›²ï¼šåºå¥ã€é˜¿åˆ—æ›¼å¾·èˆžæ›²ã€åº“æœ—ç‰¹èˆžæ›²ã€è¨æ‹‰ç­å¾·èˆžæ›²ã€å‰æ ¼èˆžæ›²ã€å°æ­¥èˆžæ›²ã€‚ç»“æž„ä¸Žå½“æ—¶å†™çš„ã€Šæ³•å›½ç»„æ›²ã€‹å’Œã€Šè‹±å›½ç»„æ›²ã€‹ç±»ä¼¼ï¼ŒæŒ‰ç…§å·´æ´›å…‹ç»„æ›²æ–¹å¼æŽ’åˆ—ã€‚å‰ä¸‰å¥—ç»„æ›²å¤§çº¦å†™äºŽ1702å¹´ï¼Œä¹Ÿå°±æ˜¯ã€Šæ— ä¼´å¥å°æç´å¥é¸£æ›²ã€‹æ—¶æœŸï¼ŒåŽä¸‰å¥—æŠ€å·§è‰°æ·±è¡¨è¾¾æ™¦æ¶©ï¼Œåº”è¯¥å†™äºŽæ›´æ™šä¸€äº›å¹´ä»½ã€‚ç§‘æ»•é¢†ä¸»æ˜¯ä¸€ä½èµ„æ·±ä¹è¿·ï¼Œä¹Ÿç§°å¾—ä¸Šæ˜¯ä¸€ä½ä¸šä½™éŸ³ä¹å®¶ï¼Œä»–æŒ‘é€‰çš„ä¹æ‰‹éƒ½æ˜¯ä¸€æµçš„ï¼Œå·´èµ«åœ¨é‚£é‡Œå·¥ä½œå¾—éžå¸¸æ„‰å¿«ã€‚æ®è¯´å…­é¦–å¤§æç´ç»„æ›²æ˜¯ä¸ºå®«å»·é‡Œçš„ä¸¤ä½å¤å¤§æç´å®¶æŽå°¼å¸Œå…‹ï¼ˆChristian Linikeï¼‰å’Œé˜¿è´å°”ï¼ˆChristian Ferdinand Abelï¼‰è€Œä½œï¼Œä»–ä»¬å±…ç„¶åœ¨300å¹´å‰å°±èƒ½èƒœä»»å…¶ä¸­çš„å¤æ‚æŠ€å·§ã€‚ åº”è¯¥å¦‚ä½•æ¼”å¥è¿™éƒ¨ä¹æ›²ï¼Ÿä¹è°±ä¸Šé™¤äº†éŸ³ç¬¦ï¼Œæ²¡æœ‰ä»»ä½•æç¤ºï¼Œæ²¡æœ‰é€Ÿåº¦ï¼Œæ²¡æœ‰å¼ºå¼±è®°å·ï¼Œæ²¡æœ‰åˆ†å¥ï¼Œä¹Ÿæ²¡æœ‰è¡¨æƒ…è®°å·ã€‚å·´èµ«ç»™äº†è‡ªç”±ï¼Œä¹Ÿç»™äº†æŒ‘æˆ˜ã€‚é’å°‘å¹´æ—¶ä»£çš„å¡è¨å°”æ–¯èŠ±12å¹´ç£¨ç‚¼è¿™éƒ¨ä¹æ›²ï¼Œä»–åœ¨ç»ƒä»€ä¹ˆå‘¢ï¼Ÿé¦–å…ˆï¼Œä»–ç»ƒä¹ æ‹‰ç´çš„æŠ€å·§ï¼Œå¯¹ä»–æ¥è¯´æŠ€å·§å·²ç»è·¨è¶Šäº†å…¶æœ¬èº«ï¼Œæˆä¸ºä¸€ç§æ— ç—•çš„è¡¨è¾¾ã€‚å…¶æ¬¡æ˜¯åˆ†å¥ï¼Œå°†å»¶ç»µæ— å°½çš„å·´æ´›å…‹æ›²çº¿æ¡åˆ†ç¼•æžï¼Œå±‚å±‚æŽ¨è¿›ï¼Œé’»ç ”å£°éŸ³çš„é€è§†æ³•ã€‚å·´èµ«æ˜¯å·´æ´›å…‹æ—¶ä»£æœ€åŽçš„å¯¹ä½æ³•å¤§å¸ˆï¼Œå³ä½¿ç‹¬å¥å£°éƒ¨ä¹Ÿè¢«ä»–åµŒå…¥ä¸¤ä¸‰æ¡éšå½¢æ—‹å¾‹ï¼Œåœ¨ä¹å¥ä¸­è‹¥éšè‹¥çŽ°ã€‚éŸ³ä¹ä¸€å¥å¥å±•å¼€ï¼Œä¸€å±‚å±‚æ·±å…¥ï¼Œä¸€åº§ç»“æž„ç²¾å·§çš„å·´æ´›å…‹å»ºç­‘è·ƒç„¶çœ¼å‰ï¼Œå‘ˆçŽ°ç¼œå¯†ç«‹ä½“çš„ä¸‰ç»´ç»“æž„ï¼Œæ¯ä¸ªç»†èŠ‚éƒ½æµç•…è€Œä¸°ç›ˆã€‚ 12å¹´ä¹‹åŽï¼Œ25å²çš„å¡è¨å°”æ–¯å°†å®ƒä»¬å½•åˆ¶æˆäº†å”±ç‰‡ã€‚å¦‚ä»Šå¬æ¥ï¼Œé‚£ä¸€ç‰ˆå½•éŸ³ä¹Ÿæ˜¯ç»å…¸æ¼”ç»Žï¼Œä»¤äººèµžå¹ï¼Œå£°éƒ¨æ„Ÿé”™è½æœ‰è‡´ï¼Œçº¿æ¡æµç•…æ‚ ç„¶ã€‚éŸ³ä¹æ˜¯æ— å½¢çš„ï¼ŒæŠ€æœ¯ä¹Ÿåº”è¯¥æ˜¯æ— å½¢çš„ï¼Œå¤æ‚çš„æŠ€å·§åœ¨ä»–æ‰‹ä¸­å·²ç»å’ŒéŸ³ä¹ä¸€æ ·æ— å½¢æ— ç—•ï¼ŒæµåŠ¨ä¸æ¯ã€‚è¿™æ ·çš„æ¼”å¥é‡Œé¢æœ‰ä¸€ç§ä¸œæ–¹æ„å¢ƒï¼ŒåŽæ¥é©¬å‹å‹å’Œæž—æ€€æ°‘ç»§ç»­åœ¨è¿™éƒ¨ä¹æ›²ä¸­æŽ¢ç´¢ä¸œæ–¹éŸµå‘³ä¸Žä¸­è¥¿æ–¹çš„ç²¾ç¥žè”æŽ¥ã€‚ é©¬å‹å‹ä¸Žå‚ä¸œçŽ‰ä¸‰éƒŽæ›¾ç»åˆä½œäº†ä¸€éƒ¨çºªå½•ç‰‡ï¼Œå«ä½œã€Šå·´èµ«çµæ„Ÿã€‹ä¹‹â€œå·´èµ«æ— ä¼´å¥å¤§æç´ç»„æ›²ä¹‹äº”ï¼Œè¿½å¯»å¸Œæœ›â€ã€‚å‚ä¸œçŽ‰ä¸‰éƒŽæ˜¯æ—¥æœ¬å›½å®çº§æ­Œèˆžä¼Žæ¼”å‘˜ï¼Œåœ¨ç‰‡ä¸­ï¼Œé©¬å‹å‹å’Œä»–ä¸€èµ·æŽ’ç»ƒäº¤æµï¼Œä¸€ä½è¯´è‹±è¯­ï¼Œä¸€ä½è¯´æ—¥è¯­ï¼Œä¸€ä½æ‹‰å¥ï¼Œä¸€ä½èµ·èˆžã€‚ä»–ä»¬åœ¨å¤§æç´æ›²ä¸­äº¤è°ˆï¼ŒèƒŒåŽæ˜¯æŽ’ç»ƒåœºçš„å·¨å¤§çŽ»ç’ƒçª—ï¼ŒæŠŠçª—å¤–å¤§ç‰‡æ—¥æœ¬çš„ç»¿æ™¯æ”¶æ½è¿›ç”»é¢ã€‚å‚ä¸œå¬ç€é©¬å‹å‹çš„ç´å£°ï¼Œç‹¬è¯­ã€ä½Žé¦–ã€å›žæ—‹ã€æ²‰æ€ï¼Œçª—å¤–æ˜¯æ·…æ·…æ²¥æ²¥çš„é›¨å£°ï¼Œä»–ä»¥èˆžè¹ˆæ¼”ç»ŽèŠ‚å¥ã€æ—‹å¾‹çš„èµ·ä¼ã€éŸ³ä¹çš„èµ°å¥ã€‚ä»–ä»¬æŠŠå·´èµ«çš„ç¬¬äº”ç»„æ›²è¯ é‡Šä¸ºâ€œä»ªå¼â€ã€â€œå“€å¹â€ã€â€œå¦å®šâ€ã€â€œç¥ˆâ€ã€â€œæ¢¦â€å’Œâ€œè°ƒå’Œâ€ï¼Œå¦‚æ­¤æç‚¼å·´èµ«éŸ³ä¹ä¸­çš„æˆå‰§åŠ›é‡ã€‚é©¬å‹å‹åœ¨ç™½çº¸ä¸Šç”¨æ¯›ç¬”å†™ä¸‹â€œä»ªå¼â€ã€‚æ˜¯çš„ï¼Œä»ªå¼ï¼Œå·´èµ«ä¸Žæ—¥æœ¬è‰ºæœ¯ï¼Œä¸¤è€…ç›¸é€šä¹‹å¤„å°±æ˜¯å…¶ä¸­çš„ä»ªå¼æ„Ÿã€‚æ—¥æœ¬ä¸Žå·´èµ«æ—¶ä»£éƒ½è®²ç©¶ä»ªå¼æ„Ÿï¼Œä»ªå¼æ˜¯ä¸ºäº†å°Šé‡ï¼Œä¹Ÿæ˜¯ä¸€ç§ç¾Žå­¦ã€‚ä»–ä»¬çš„è¿™äº›è¯ é‡Šçªç ´äº†ä¸œè¥¿æ–¹æ–‡åŒ–çš„ç•Œé™ï¼Œæ˜¯æ¶ˆé™¤æ°‘æ—æ€§æš—ç¤ºçš„ç¢Žç‰‡ï¼Œä¹Ÿæ˜¯è¡”æŽ¥è¿™åœºä¸œè¥¿åˆä½œçš„æ¡¥æ¢ã€‚è¿™åœºè¡¨æ¼”æœ€ç»ˆè®©æˆ‘ä»¬å‘çŽ°ï¼Œå·´èµ«çš„éŸ³ä¹æ— å…³ä¸œè¥¿æ–¹è¯­å¢ƒï¼Œå®ƒæ˜¯æ¯ä¸€ä¸ªé¥±æ»¡å¿ƒçµçš„æ­Œå’ï¼ŒéŸ³ä¹æ­£æ˜¯åœ¨çªç ´è¿™ç§ä¸œè¥¿æ–¹å±€é™ä¹‹åŽæ‰æœ‰å¯èƒ½é è¿‘æ°¸æ’ã€‚ åœ¨æž—æ€€æ°‘çš„çŽ°ä»£èˆžä½œå“ã€Šæ°´æœˆã€‹é‡Œé¢ï¼Œä¸­å›½çš„å¤ªæžå¼èˆžå§¿ä¸­ä¼ æ¥äº†å·´èµ«çš„å¤§æç´ç»„æ›²ç¬¬ä¸€é¦–ï¼ŒéŸ³ä¹å……æ»¡å¾‹åŠ¨ï¼Œèˆžè¹ˆä¸­å´åŸ‹è—ç€æ·±æ·±çš„å¯‚é™ä¸Žå­¤ç‹¬ã€‚èˆžå°çš„åœ°é¢æ˜¯ä¸€å¤§ç‰‡åå…‰çš„é•œå­ï¼Œèˆžè€…ä¸Žä¹‹å½¢å½±ç›¸å¯¹ã€‚ä»–ä»¬èƒ½å¤Ÿæ— ç—•åœ°èžåˆï¼Œæœ¬è´¨ä¸Šæ˜¯å› ä¸ºâ€œç‹¬â€ï¼Œæ²‰éƒçš„ç‹¬å¥ï¼Œä¸€å¤§ç‰‡ç™½å½±é£˜é›¶ï¼Œç´å£°å¦‚ç‹¬èˆžï¼Œå½¼æ­¤åœ¨å­¤ç‹¬ä¸­èˆ’å±•ã€æ²‰é†‰ã€å¿˜æ€€ã€‚ åœ¨éŸ³ä¹å²ä¸Šï¼Œ20ä¸–çºªæ˜¯æ¼”ç»Žçš„æ—¶ä»£ï¼Œå”±ç‰‡å‘è¡Œå’Œå…¨çƒå·¡æ¼”ä¿ƒæˆäº†æ¼”å¥å¤©æ‰è¾ˆå‡ºã€‚åŽæ¥ä¹Ÿæœ‰è¶…è¶Šå¡è¨å°”æ–¯çš„æ¼”ç»Žï¼Œæ¯”å¦‚åŒˆç‰™åˆ©è£”å¤§æç´å®¶æ–¯å¡”å…‹ã€‚ä»–çš„æ¼”å¥æŠ€æœ¯ä¸¥è°¨ç²¾ç¡®ï¼Œå…­æ›²æ‹‰åˆ°å°¾æ¯«ä¸æ¾æ‡ˆï¼Œæ‰€æœ‰ç»†èŠ‚éƒ½æ£±è§’åˆ†æ˜Žï¼Œå±‚æ¬¡é¥±æ»¡ã€‚æ–¯å¡”å…‹çš„éŸ³ä¹é£Žæ ¼ä¸Žä»–çš„å½¢è±¡éƒ½æ˜¯ä¸¥è°¨å†·å†½çš„ï¼Œä¸å¤ªæµéœ²æƒ…æ„Ÿï¼Œä½†ä»–å¯¹è¿™å¥—ä¹æ›²ä¼¼ä¹Žæ˜¯æ„Ÿæƒ…æœ€æ·±çš„ï¼Œå‰åŽå½•äº†äº”éï¼Œä»–è‡ªå·±å¦é™ˆï¼šå‰ä¸‰éä¸»è¦é¡¾åŠç»“æž„å’ŒæŠ€å·§ï¼ŒåŽä¸¤éæ‰æœ‰æ„Ÿæƒ…æµéœ²ã€‚å¦‚æ­¤å¦è¯šçš„æ¼”å¥å®¶ä¸å¤šã€‚åƒæ–¯å¡”å…‹è¿™æ ·çš„æŠ€å·§å¤§å¸ˆéƒ½è¦é¡¾åŠæŠ€å·§ï¼Œå¯è§è¯¥ç¥žæ›²çš„æŠ€å·§æœ‰å¤šéš¾ã€‚æ–¯å¡”å…‹æŠ‘åˆ¶æƒ…æ„Ÿçš„æ¼”å¥è®©äººä»¬æ›´å…³æ³¨ä¹éŸ³çš„è¿åŠ¨ï¼Œè®©äººæƒ³èµ·éŸ³ä¹ç¾Žå­¦å®¶æ±‰æ–¯ç«‹å…‹æ›¾è¯´ï¼šâ€œéŸ³ä¹çš„å†…å®¹å°±æ˜¯ä¹éŸ³çš„è¿åŠ¨å½¢å¼ã€‚â€ä½†åœ¨ç†æ€§èƒŒåŽï¼Œç´éŸ³ä¸­çš„æ²‰éƒæ·±å…¥è‚ºè…‘ï¼Œç‰¹åˆ«æ˜¯ç¬¬å››å¼¦åœ¨éŸ³åˆ—ä¸­ä½Žé¸£ä¸æ¯ï¼Œè®©æ‚²å“€è‹¥éšè‹¥çŽ°ï¼Œæ›´æš—ç¤ºäº†å·´èµ«å¯¹ä½æ³•çš„åšå¤§ç²¾æ·±ã€‚åå¤å¬ä»–çš„æ¼”å¥ï¼Œè§‰å¾—ä»–çš„ä¸¥è°¨åˆ†æ˜Žä¸­ä¼¼ä¹Žæœ‰ä¸€ç§æ— ä»Žè§£é‡Šçš„ç¥žç§˜æ„Ÿï¼Œè¿™æ ·çš„æ¼”å¥æˆ–è®¸æ‰æ˜¯æ·±å…¥å¾·å›½ç²¾é«“çš„ï¼Œæ›´è´´è¿‘ä¸å€¦æŽ¢å¯»äººç±»ç»ˆæžç§˜å¯†çš„æ—¥è€³æ›¼å¿ƒçµã€‚ æœ€æ„Ÿäººçš„è¿˜æ˜¯å¤§å¸ˆä»¬æ™šå¹´çš„æ¼”å¥ï¼Œæƒ…æ„Ÿé¥±è¶³ï¼Œå›žå½’å¤©çœŸã€‚ ç½—æ–¯æ‰˜ç½—æ³¢ç»´å¥‡ï¼ˆMstislav Leopoldovich Rostropovichï¼‰ï¼Œå½“ä»£ä¿„ç½—æ–¯æœ€è‘—åçš„å¤§æç´å®¶ã€‚1989å¹´ï¼ŒæŸæž—å¢™è¢«æŽ¨å€’çš„æ—¶å€™ï¼Œç½—æ–¯æ‰˜ç½—æ³¢ç»´å¥‡æ”¾ä¸‹ä¸€åˆ‡å·¥ä½œï¼ŒèƒŒèµ·å¤§æç´èµ¶èµ´æŸæž—ï¼Œä»Žæœºåœºç›´æŽ¥æ‰“è½¦åˆ°æŸæž—å¢™æ‹†é™¤çš„çŽ°åœºï¼Œå€Ÿäº†æŠŠæ¤…å­ï¼Œåä¸‹å°±å¼€å§‹æ‹‰å¥å·´èµ«çš„ã€Šå…­é¦–æ— ä¼´å¥å¤§æç´ç»„æ›²ã€‹ã€‚ä»–è¯´ï¼šâ€œæˆ‘æ— æ³•å¿˜æ€€æ‰€æœ‰æƒ³è¦ç¿»è¶Šè¿™å µå¢™è€Œä¸§ç”Ÿçš„äººä»¬ï¼Œå½“æˆ‘æ‹‰èµ·è¨æ‹‰ç­å¾·ï¼Œäººç¾¤é‡Œæœ‰ä½å¹´è½»äººå“­äº†ã€‚â€è¿™éƒ¨ä¹æ›²ç½—æ–¯æ‰˜ç½—æ³¢ç»´å¥‡æ‹‰è¿‡æ— æ•°éï¼ŒæŠ€å·§æ— æ‡ˆå¯å‡»ï¼Œä»–çš„å¼ºåŠ¿ä¸Žæ„å¿—è®©å·´èµ«æ·±å…·é˜³åˆšä¹‹ç¾Žã€‚å”¯ç‹¬é‚£ä¸€æ¬¡æ¼”å¥è®©ä»–æ¯•ç”Ÿéš¾å¿˜ã€‚é¢å¯¹å½“æ—¶çš„åœºæ™¯äººä»¬èƒ½å¤Ÿè¯´ä»€ä¹ˆï¼Ÿåªæœ‰å·´èµ«çš„éŸ³ä¹èƒ½å¤ŸæŠšæ…°äººå¿ƒï¼Œæ‚²æ¬£äº¤é›†ï¼Œæ¬¢å–œä¸Žæ‚²ä¼¤ï¼Œæ¬¢åº†ä¸Žè¿½å¿µã€‚è¿™ä¹Ÿæ˜¯äººä»¬ç†è§£å·´èµ«çš„æ—¶åˆ»ï¼Œä»–ä¼¼ä¹Žæ‡‚å¾—ç¦…æ„ï¼Œæ— æ‰€è¯‰è¯´åˆæ— æ‰€ä¸è¯´ã€‚æ¯ä¸€ä¸ªéŸ³ç¬¦éƒ½æ˜¯çž¬é—´ï¼Œéƒ½æ˜¯æ°¸æ’ï¼›éƒ½æ˜¯æ‚²å‰§ï¼Œéƒ½æ˜¯æ•‘èµŽï¼›éƒ½æ˜¯éŸ³ä¹ï¼Œéƒ½æ˜¯çœŸç†ã€‚ ç½—æ–¯æ‰˜ç½—æ³¢ç»´å¥‡èŠ±äº†åŠç”Ÿç ”è¯»è¿™éƒ¨ä¹æ›²ï¼Œåˆ°äº†æ™šå¹´ï¼Œä»–åœ¨æ³•å›½å—éƒ¨çš„å°é•‡ä¸Šé€‰äº†ä¸€åº§æ‹¥æœ‰900å¹´åŽ†å²çš„æ•™å ‚ï¼Œåœ¨é‚£é‡Œå®Œæ•´å½•åˆ¶äº†è¿™éƒ¨ä¹æ›²ã€‚å¹´è½»æ—¶å·²å¯¹æ¯ä¸€ä¸ªéŸ³ç¬¦äº†ç„¶äºŽå¿ƒï¼Œå¦‚ä»Šåœ¨è€æ•™å ‚é‡Œï¼Œåœ¨ç ´æ—§æ‹±å»Šå’Œæ¹®æ²¡çš„çº¿æ¡ä¸­æ„ŸçŸ¥å·´æ´›å…‹éŸµå¾‹ï¼Œæ¯ä¸€ä¸ªéŸ³ç¬¦å¤šä¹ˆç†Ÿæ‚‰ï¼Œåˆåƒæ˜¯ç¬¬ä¸€æ¬¡å¬è§ï¼Œæ‹‰å¥ç€æ·±æ²‰çš„ä½ŽéŸ³ï¼Œå´åˆæ˜¯ä¸€èº«è½»æ¾ã€‚ä»–çš„å¼ºåŠ¿ä¸Žå±‚æ¬¡æ„Ÿï¼Œä»–å¯¹ç»“æž„å…¨å±€çš„æŠŠæ¡ï¼Œä»–çš„ç´§å‡‘æœ‰åŠ›ï¼Œè®©æ¯ä¸ªéŸ³ç¬¦ç»½æ”¾é‡‘è‰²çš„å…‰èŠ’ï¼Œä¹Ÿè®©ä¹æ›²çœŸæ­£éœ‡æ’¼äººå¿ƒã€‚ ä¿„ç½—æ–¯å¤§æç´å®¶æ²™å¤«å…°ï¼ˆDanil Shafranï¼‰çš„ç‰ˆæœ¬æœ€åŠ¨äººä¹Ÿæœ€æœ‰æƒ³è±¡åŠ›ã€‚ä»–çš„éŸ³ç¬¦æ— æ¯”è¿žè´¯é€šé€ï¼Œå»¶ç»µå¦‚åœŸåœ°ï¼Œä¸æ¯å¦‚æ²³æµã€‚å¯¹äºŽå·´èµ«è¿™æ ·å´Žå²–çš„å¤šå£°éƒ¨ç»‡ä½“ï¼Œä¸çŸ¥é“ä»–æ˜¯å¦‚ä½•åšåˆ°å¦‚å±¥å¹³åœ°ï¼Œæ­Œå”±å¾—å¦‚æ­¤é…£ç•…çƒ­æƒ…ã€‚è¿™ä¸€ç‰ˆæœ¬ä¹Ÿæ˜¯æˆ‘å¬è¿‡çš„æœ€å¯Œæœ‰æ­Œå”±æ€§çš„æ¼”å¥ï¼Œè¦çŸ¥é“ï¼Œè¿™éƒ¨ä¹æ›²æœ¬èº«æ˜¯ä¸å¤ªèƒ½æ­Œå”±çš„ã€‚å½“ç„¶æ²™å¤«å…°çš„æ¼”å¥ä¹Ÿæœ€ä¸åƒå·´æ´›å…‹é£Žæ ¼ï¼Œä»–å‘æŒ¥äº†å…¶ä¸­çš„æµªæ¼«æ°”è´¨ã€‚ æ³•å›½å¤§æç´å­¦æ´¾ä¹Ÿå¯¹è¿™éƒ¨ä¹æ›²ä½œå‡ºè´¡çŒ®ã€‚è©¹å¾·é¾™ï¼ˆMaurice Gendronï¼‰ã€å¯Œå°¼åŸƒï¼ˆPierre Fournierï¼‰ã€æ‰˜ç‰¹é‡Œè€¶ï¼ˆPaul Tortelierï¼‰å’Œçº³ç“¦æ‹‰ï¼ˆAndre Navarraï¼‰è¢«ç§°ä¸ºæ³•å›½å¤§æç´å››éª‘å£«ã€‚ä»–ä»¬çš„æ¼”å¥æ²¡æœ‰å¾·å¥¥éŸ³ä¹å®¶é‚£ç§å¼ºç¡¬ï¼Œè€Œæ˜¯æ¸©æš–æµç•…ã€å…³æ³¨ç»†èŠ‚çš„ï¼Œå¸¦ç€å¦™æ›¼çš„å·´é»Žæ²™é¾™æ°”æ¯ã€‚å¯Œå°¼åŸƒçš„ç‰ˆæœ¬æœ€æœ‰å¤å…¸æ°”è´¨ï¼Œä»–çœŸæ˜¯ä¸€ä½å¤©ç”Ÿçš„è´µæ—ï¼Œä¹å¥æ— æ¯”ä¼˜é›…ï¼ŒéŸ³è‰²å¦‚å…‰æ»‘çš„ä¸ç»¸ï¼Œå´ååˆ†è‡ªç„¶ï¼Œå¦‚æ¸©æš–å–„æ„Ÿçš„ç‹¬ç™½ï¼›è©¹å¾·é¾™å†·é™è½»ç›ˆä¸€äº›ï¼Œä¸€æ´¾å…¸é›…çš„å¤å…¸é£ŽèŒƒï¼›æ‰˜ç‰¹é‡Œè€¶æœ‰æ¿€æƒ…ï¼Œç”šè‡³ç¼ç—›æ„Ÿï¼Œå¯ä»¥å¬è§éŸ³ä¹ä¸­å‚¬äººå¥‹èµ·çš„åŠ›é‡ã€‚æ¯ä¸ªäººä¸ªæ€§è¿¥å¼‚ï¼Œä»–ä»¬çš„ä¸ªäººé­…åŠ›ä¸°æ»¡äº†å·´èµ«çš„ä½œå“ï¼Œä¸Žä¹‹äº’ç›¸æˆå°±ã€‚ åªæ˜¯æœæ™®é›·çš„ç‰ˆæœ¬ç•¥æœ‰é€Šè‰²ã€‚è¿™ä¹Ÿæ˜¯æ„æ–™ä¹‹ä¸­ï¼Œå·´èµ«ä¸æ˜¯å¥¹çš„èœ]]></content>
      <categories>
        <category>è‰ºæœ¯</category>
      </categories>
      <tags>
        <tag>éŸ³ä¹</tag>
        <tag>å·´æ´›å…‹</tag>
        <tag>å·´èµ«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¿»è¶ŠGFWè®°]]></title>
    <url>%2F%E7%BF%BB%E8%B6%8AGFW%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[å‰è¨€GFWæ˜¯ä¸­å›½äº’è”ç½‘ä¸Šç‹¬ç‰¹è€Œä¸å¯å¿½è§†çš„å­˜åœ¨ï¼Œå¾ˆå¤šäººåœ¨ç”Ÿæ´»ä¸­éƒ½ä¸»åŠ¨åœ°æ­å»ºç¿»å¢™å·¥å…·æˆ–è€…ä½¿ç”¨ç¿»å¢™æœåŠ¡ï¼Œä»¥æ­¤è®¿é—®â€œä¸å­˜åœ¨çš„ç½‘ç«™â€ã€‚æœ¬æ–‡å°†è®°å½•GFWæ‰€ä¸ºä½•ç‰©ï¼Œä»¥åŠç¿»çš„åŽŸç†ã€‚ GFWæ‰€ä¸ºä½•ç‰©GFWï¼šGreat Firewall (of the Peopleâ€™s Republic of China)ï¼Œä¸­å›½å›½å®¶é˜²ç«å¢™ï¼Œç”±äºŽè°éŸ³the Great Wallï¼Œæ‰€ä»¥ä¹Ÿç§°é•¿åŸŽé˜²ç«å¢™ï¼Œæ˜¯ä¸­å›½æ”¿åºœåœ¨å…¶äº’è”ç½‘è¾¹ç•Œçš„å®¡æŸ¥ç³»ç»Ÿï¼ˆåŒ…æ‹¬ç›¸å…³è¡Œæ”¿å®¡æŸ¥ç³»ç»Ÿï¼‰ï¼Œå…·ä½“æŒ‡ç›‘æŽ§å’Œè¿‡æ»¤äº’è”ç½‘å†…å®¹çš„è½¯ç¡¬ä»¶ç³»ç»Ÿï¼Œç”±æœåŠ¡å™¨å’Œè·¯ç”±å™¨ç­‰è®¾å¤‡ã€ç›¸å…³çš„åº”ç”¨ç¨‹åºæž„æˆã€‚ å½¢è±¡çš„æè¿°ï¼Œåœ¨æ²¡æœ‰ GFW çš„æ—¶ä»£ï¼Œè®¿é—®äº’è”ç½‘çš„æ–¹å¼å¦‚ä¸‹ GFW å‡ºçŽ°ä¹‹åŽï¼Œåˆ™å˜æˆ å…¶å†…éƒ¨æž„é€ å¦‚ä¸‹ å®ƒå˜æˆäº†æœ¬åœ°æµè§ˆå™¨å’Œç½‘ç«™æœåŠ¡å™¨ä¹‹é—´çš„ä¸€é“å¢™ï¼Œé˜»æ‹¦äº†è®¿é—®ç‰¹å®šç½‘ç«™çš„è¯·æ±‚ï¼Œå®žé™…ä¸Šï¼ŒGFW çš„æ‹¦æˆªæ–¹å¼æ˜¯å¤šæ ·çš„ã€‚ GFWçš„å…·ä½“åŽŸç†å¯ä»¥æŸ¥çœ‹æ­¤æ–‡ç« ï¼šå…¨é¢å­¦ä¹ GFW å¦‚ä½•å·¥ä½œå…³é”®å­—è¿‡æ»¤é˜»æ–­å…³é”®å­—è¿‡æ»¤ç³»ç»Ÿèƒ½å¤Ÿä»Žå‡ºå£ç½‘å…³æ”¶é›†åˆ†æžä¿¡æ¯ï¼Œè¿‡æ»¤ã€å—…æŽ¢æŒ‡å®šçš„å…³é”®å­—ã€‚ä¸»è¦é’ˆå¯¹ HTTP çš„é»˜è®¤ç«¯å£ï¼š80ç«¯å£ï¼Œå› ä¸º HTTP ä¼ æ’­çš„å†…å®¹æ˜¯æ˜Žæ–‡çš„å†…å®¹ï¼Œæ²¡æœ‰ç»è¿‡åŠ å¯†ï¼Œè€Œ GFW æ˜¯ä¸€ä¸ª IDS(Intrusion detection system)ã€‚æ™®é€šçš„å…³é”®è¯å¦‚æžœå‡ºçŽ°åœ¨ HTTP è¯·æ±‚æŠ¥æ–‡çš„å¤´éƒ¨(å¦‚â€œHost: www.youtube.comâ€)æ—¶ï¼Œåˆ™ä¼šé©¬ä¸Šä¼ªè£…æˆå¯¹æ–¹å‘è¿žæŽ¥ä¸¤ç«¯çš„è®¡ç®—æœºå‘é€ RST åŒ…(reset)å¹²æ‰°ä¸¤è€…æ­£å¸¸çš„ TCP è¿žæŽ¥ï¼Œè¿›è€Œä½¿è¯·æ±‚çš„å†…å®¹æ— æ³•ç»§ç»­æŸ¥çœ‹ã€‚å¦‚æžœGFWåœ¨æ•°æ®æµä¸­å‘çŽ°äº†ç‰¹æ®Šçš„å†…æ–‡å…³é”®è¯æ—¶ï¼Œå…¶ä¹Ÿä¼šè¯•å›¾æ‰“æ–­å½“å‰çš„è¿žæŽ¥ï¼Œä»Žè€Œå‡ºçŽ°ç”¨æˆ·çš„ç½‘é¡µå¼€å¯ä¸€éƒ¨åˆ†åŽï¼Œçªç„¶åœæ­¢çš„æƒ…å†µã€‚ IPåœ°å€å°é”è·¯ç”±å™¨çš„æ­£å¸¸å·¥ä½œæ–¹å¼æ˜¯ï¼šé‡åˆ°ç¬¦åˆå·²çŸ¥çš„IPè½¬å‘è§„åˆ™çš„æ•°æ®åŒ…ï¼Œåˆ™æŒ‰å·²ç»è§„åˆ™å‘é€ï¼Œé‡åˆ°æœªçŸ¥è§„åˆ™IPçš„æ•°æ®ï¼Œåˆ™è½¬å‘åˆ°ä¸Šä¸€çº§ç½‘å…³ã€‚GFW é€šè¿‡è·¯ç”±å™¨ï¼Œåœ¨é€šå¾€å›½å¤–çš„æœ€åŽä¸€ä¸ªç½‘å…³ä¸ŠåŠ ä¸Šä¸€æ¡ä¼ªé€ çš„è·¯ç”±è§„åˆ™ï¼Œå¯¼è‡´é€šå¾€è¢«å±è”½ç½‘ç«™çš„IPæ•°æ®åŒ…æ— æ³•åˆ°è¾¾ã€‚æ­¤å¤–ï¼ŒGFW å¯¹äºŽæŸäº›ç½‘ç«™ä¼šé‡‡å–ç‹¬ç«‹IPå°é”æŠ€æœ¯ï¼Œå¦‚æžœè¯¥ç½‘ç«™ä½¿ç”¨äº†ç”±è™šæ‹Ÿä¸»æœºæœåŠ¡æä¾›å•†æä¾›çš„å¤šåŸŸåã€å•(åŒ)IPçš„ä¸»æœºæ‰˜ç®¡æœåŠ¡ï¼Œå°±ä¼šé€ æˆæ‰€æœ‰è¯¥æœåŠ¡æä¾›å•†çš„å…¶å®ƒä½¿ç”¨ç›¸åŒIPåœ°å€æœåŠ¡å™¨çš„ç½‘ç«™ç”¨æˆ·é­æ®ƒï¼Œå°±ç®—è¿™äº›ç½‘ç«™çš„å†…å®¹å¯èƒ½å¹¶æ— ä¸å½“ä¹‹å¤„ï¼Œä¹Ÿä¸èƒ½åœ¨ä¸­å›½å¤§é™†æ­£å¸¸è®¿é—®ã€‚ DNSæ±¡æŸ“ã€åŠ«æŒDNS æ±¡æŸ“æ˜¯æŒ‡ GFW åˆ»æ„åˆ¶é€ å‡ºç‰¹å®šçš„åŸŸåæœåŠ¡å™¨åˆ†ç»„ï¼ŒæŠŠåŸŸåæŒ‡å¾€ä¸æ­£ç¡®çš„IPåœ°å€ã€‚å¯¹äºŽå«æœ‰å¤šä¸ªIPåœ°å€æˆ–ç»å¸¸å˜æ›´IPåœ°å€é€ƒé¿å°é”çš„åŸŸåï¼ŒGFWé€šå¸¸ä¼šä½¿ç”¨æ­¤æ–¹æ³•è¿›è¡Œå°é”ã€‚2002å¹´è¢«å°é”æœŸé—´ï¼ŒGoogleçš„åŸŸåå°±è¢«åŠ«æŒåˆ°ç™¾åº¦ä¸Šã€‚ DNSåŠ«æŒå’Œæ±¡æŸ“çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š ä¸€ç§æ˜¯é€šè¿‡ç½‘ç»œæœåŠ¡æä¾›å•†(Internet Service Provider)æä¾›çš„ DNS æœåŠ¡å™¨è¿› DNS æ¬ºéª—ï¼Œå½“è®¿é—®æŸä¸ªç½‘ç«™æ—¶ï¼Œéœ€è¦è¦æŠŠåŸŸåè½¬æ¢ä¸ºä¸€ä¸ªIPåœ°å€ï¼ŒDNS æœåŠ¡å™¨è´Ÿè´£å°†åŸŸåè½¬æ¢ä¸ºIPåœ°å€ï¼Œä¸­å›½å¤§é™†çš„ ISP æŽ¥å—é€šä¿¡ç®¡ç†å±€çš„å±è”½ç½‘ç«™çš„æŒ‡ä»¤åŽåœ¨ DNS æœåŠ¡å™¨é‡ŒåŠ å…¥æŸäº›ç‰¹å®šåŸŸåçš„è™šå‡è®°å½•ï¼Œå½“ä½¿ç”¨æ­¤ DNS æœåŠ¡å™¨çš„ç½‘ç»œç”¨æˆ·è®¿é—®æ­¤ç‰¹å®šç½‘ç«™æ—¶ï¼ŒDNS æœåŠ¡ä¾¿ç»™å‡ºè™šå‡çš„IPåœ°å€ï¼Œå¯¼è‡´è®¿é—®ç½‘ç«™å¤±è´¥ï¼Œç”šè‡³è¿”å›ž ISP è¿è¥å•†æä¾›çš„å‡ºé”™é¡µé¢å’Œå¹¿å‘Šé¡µé¢ã€‚ å¦ä¸€ç§æ˜¯ GFW åœ¨ DNS æŸ¥è¯¢ä½¿ç”¨çš„ UDP çš„53ç«¯å£ä¸Šæ ¹æ®blacklistè¿›è¡Œè¿‡æ»¤ï¼Œé‡åˆ°é€šå¾€å›½å¤–çš„ä½¿ç”¨UDP 53ç«¯å£è¿›è¡ŒæŸ¥è¯¢çš„ DNS è¯·æ±‚ï¼Œå°±è¿”å›žä¸€ä¸ªè™šå‡çš„IPåœ°å€ã€‚ å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒIPv4æ—¶ä»£ï¼Œå…¨çƒä¸€å…±æœ‰13ç»„æ ¹åŸŸåæœåŠ¡å™¨ï¼Œä¸­å›½å¤§é™†æ—©æœŸæœ‰Fã€Iä¸¤ä¸ªæ ¹åŸŸ DNS é•œåƒï¼Œä½†å› ä¸ºå¤šæ¬¡ DNS æ±¡æŸ“å›½å¤–ç½‘ç»œï¼Œè¢«æ–­å¼€ä¸Žå›½é™…äº’è”ç½‘çš„è¿žæŽ¥ï¼Œç›¸å…³äº‹ä»¶æŸ¥çœ‹ç»´åŸºç™¾ç§‘ï¼šä¸­å›½é˜²ç«é•¿åŸŽ-æ±¡æŸ“æ”»å‡»å¤§äº‹è®°ã€‚ é™¤äº†ä»¥ä¸Šå‡ ç§å°é”æ–¹æ³•ï¼ŒGFWè¿˜ä¼šé‡‡ç”¨SSLè¿žæŽ¥é˜»æ–­ã€ç‰¹å®šç«¯å£å°é”ç­‰å·¥ä½œæ–¹å¼ã€‚ ç¿»è¶Šè®°ç¿»ä¿®æ”¹Hostsæ–‡ä»¶è¶³å¤Ÿç®€å•çš„æ–¹å¼ï¼Œä»¥è§£å†³ GFW çš„ DNS æ±¡æŸ“å’ŒåŠ«æŒçš„é—®é¢˜ã€‚Hosts æ–‡ä»¶æ˜¯ä¸€ä¸ªå‚¨å­˜è®¡ç®—æœºç½‘ç»œä¸­å„èŠ‚ç‚¹ä¿¡æ¯çš„æ–‡ä»¶ï¼Œè´Ÿè´£å°†ä¸»æœºåæ˜ å°„åˆ°ç›¸åº”çš„IPåœ°å€ï¼Œé€šå¸¸ç”¨äºŽè¡¥å……æˆ–å–ä»£ç½‘ç»œä¸­DNSçš„åŠŸèƒ½ã€‚å’ŒDNSä¸åŒçš„æ˜¯ï¼Œç”¨æˆ·å¯ä»¥ç›´æŽ¥å¯¹ Hosts æ–‡ä»¶è¿›è¡ŒæŽ§åˆ¶ã€‚ Hosts æ–‡ä»¶çš„åŽŸæœ¬ç›®çš„æ˜¯æé«˜è§£æžçš„æ•ˆçŽ‡ã€‚åœ¨è¿›è¡Œ DNS è¯·æ±‚ä»¥å‰ï¼Œç³»ç»Ÿå…ˆæ£€æŸ¥è‡ªå·±çš„ Hosts æ–‡ä»¶ä¸­æ˜¯å¦æœ‰åœ°å€æ˜ å°„å…³ç³»ï¼Œå¦‚æžœæœ‰åˆ™è°ƒç”¨è¯¥IPåœ°å€æ˜ å°„ï¼Œå¦‚æžœæ²¡æœ‰å†å‘å·²çŸ¥çš„ DNS æœåŠ¡å™¨æå‡ºåŸŸåè§£æžã€‚ç”±äºŽ Hosts çš„è¯·æ±‚çº§åˆ«æ¯”DNSé«˜ï¼Œå½“ Hosts æ–‡ä»¶é‡Œé¢æœ‰å¯¹åº”çš„IPæ—¶ï¼Œå®¢æˆ·ç«¯å°±ä¼šç›´æŽ¥è®¿é—®é‚£ä¸ªIPï¼Œè€Œä¸å¿…é€šè¿‡ DNSã€‚å„æ“ä½œç³»ç»Ÿçš„ Hosts æ–‡ä»¶å„æœ‰ä¸åŒï¼Œç½‘ç»œä¸Šæœ‰å¾ˆå¤šç›¸å…³èµ„æ–™ï¼Œåœ¨æ­¤ä¸èµ˜è¿°ã€‚ æ‰€ä»¥ï¼Œå°† Googleã€Twitterã€Facebook ä¹‹ç±»çš„IPæ”¾å…¥ Hosts æ–‡ä»¶ï¼Œå°±å¯ä»¥ä¸å— GFW çš„ DNS æ±¡æŸ“å¹²æ‰°ã€‚ä½†ç”±äºŽ GFW çš„IPå°é”ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¯¥æ–¹æ³•å¾ˆéš¾æœ‰æ•ˆã€‚ SSH TunnelSSHï¼ˆSecure Shellï¼‰æ˜¯ä¸€ä¸ªæä¾›æ•°æ®é€šä¿¡å®‰å…¨ã€è¿œç¨‹ç™»å½•ã€è¿œç¨‹æŒ‡ä»¤æ‰§è¡Œç­‰åŠŸèƒ½çš„å®‰å…¨ç½‘ç»œåè®®ã€‚æ­å»ºä¸€ä¸ª SSH éš§é“ç¿»å¢™ï¼Œåªéœ€è¦æœ‰ä¸€å°æ”¯æŒ SSH çš„å¢™å¤–æœåŠ¡å™¨ï¼Œä¸”è¯¥æœåŠ¡å™¨èƒ½ SSH è¿žæŽ¥å³å¯ã€‚ é¦–å…ˆç”¨æˆ·å’Œå¢ƒå¤–æœåŠ¡å™¨åŸºäºŽ SSH å»ºç«‹èµ·ä¸€æ¡åŠ å¯†çš„é€šé“ (1) ç”¨æˆ·é€šè¿‡å»ºç«‹èµ·çš„éš§é“è¿›è¡Œä»£ç†ï¼Œé€šè¿‡ SSH Server å‘çœŸå®žçš„æœåŠ¡å‘èµ·è¯·æ±‚ (2-3) æœåŠ¡é€šè¿‡ SSH Serverï¼Œå†é€šè¿‡åˆ›å»ºå¥½çš„éš§é“è¿”å›žç»™ç”¨æˆ· (4-5) ç”±äºŽ SSH æœ¬èº«åŸºäºŽ RSA åŠ å¯†æŠ€æœ¯ï¼Œæ‰€ä»¥ GFW æ— æ³•ä»Žæ•°æ®ä¼ è¾“çš„è¿‡ç¨‹ä¸­çš„åŠ å¯†æ•°æ®å†…å®¹è¿›è¡Œå…³é”®è¯åˆ†æžï¼Œé¿å…äº†è¢«é‡ç½®é“¾æŽ¥çš„é—®é¢˜ï¼Œä½†ç”±äºŽåˆ›å»ºéš§é“å’Œæ•°æ®ä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼ŒSSH æœ¬èº«çš„ç‰¹å¾å¾ˆæ˜Žæ˜¾ï¼Œæ‰€ä»¥ GFW ä¸€åº¦é€šè¿‡åˆ†æžè¿žæŽ¥çš„ç‰¹å¾è¿›è¡Œå¹²æ‰°ï¼Œå¯¼è‡´ SSH å­˜åœ¨è¢«å®šå‘è¿›è¡Œå¹²æ‰°çš„é—®é¢˜ã€‚ VPNå¯¹äºŽä¼ä¸šæ¥è¯´ï¼Œä¸ºäº†å…±äº«èµ„æºã€ååŒå·¥ä½œï¼Œéœ€è¦è¿žæŽ¥å„åœ°çš„åˆ†æ”¯æœºæž„ï¼Œä¼ ç»Ÿçš„ä¸“çº¿è”ç½‘æ–¹å¼ä»·æ ¼æ˜‚è´µï¼Œä¸€èˆ¬ä¸­å°ä¼ä¸šéš¾ä»¥è´Ÿæ‹…ã€‚è¿™æ—¶ä½Žæˆæœ¬çš„VPNæŠ€æœ¯å­•è‚²è€Œç”Ÿã€‚VPNï¼ˆVirtual Private Networkï¼‰å³è™šæ‹Ÿä¸“ç”¨ç½‘ç»œï¼Œåˆ©ç”¨å»‰ä»·æŽ¥å…¥çš„å…¬å…±ç½‘ç»œï¼ˆä¸»è¦ä½¿ç”¨Inter-netï¼‰æ¥ä¼ è¾“ç§æœ‰æ•°æ®ï¼Œå…·æœ‰æˆæœ¬ä¼˜åŠ¿ï¼Œå› æ­¤è¢«å¾ˆå¤šä¼ä¸šå’Œç”µä¿¡è¿è¥å•†é‡‡ç”¨ã€‚ VPN æ¯”Shadowsocksæ›´åŠ åº•å±‚ï¼Œå®ƒé€šè¿‡æ“ä½œç³»ç»Ÿçš„æŽ¥å£ç›´æŽ¥è™šæ‹Ÿå‡ºä¸€å¼ ç½‘å¡ï¼ŒåŽç»­æ•´ä¸ªæ“ä½œç³»ç»Ÿçš„ç½‘ç»œé€šè®¯éƒ½å°†é€šè¿‡è¿™å¼ è™šæ‹Ÿçš„ç½‘å¡è¿›è¡Œæ”¶å‘â€”â€”ç½‘ç»œä»£ç†çš„å®žçŽ°æ€è·¯å¤§éƒ½å¦‚æ­¤ã€‚ VPN çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š VPN çš„è®¾ç½®æ˜¯å…¨å±€çš„ï¼Œå³æ‰€æœ‰è”ç½‘ç¨‹åºéƒ½è‡ªåŠ¨ä½¿ç”¨VPNï¼›ä½†SSHéš§é“éœ€è¦ç¨‹åºè®¾å®šï¼Œæ‰ä¼šä½¿ç”¨éš§é“è”ç½‘ã€‚ å•†ç”¨çš„VPNä¸€èˆ¬éƒ½æ˜¯ä»˜è´¹çš„ï¼Œè€Œè‡ªä¸»æ­å»ºVPN çš„éš¾åº¦è¦å¤§äºŽSSHéš§é“ï¼Œå› ä¸ºSSHéš§é“åªè¦ä¸€å°å¯ä»¥SSHçš„æœåŠ¡å™¨å³å¯ï¼Œä¸éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šé…ç½®ä»»ä½•ä¸œè¥¿ã€‚ VPN åœ¨IPå±‚å·¥ä½œï¼Œè€ŒShadowsocksåœ¨ TCP/UDP å±‚å·¥ä½œã€‚ ShadowsocksVPNä¹‹ç±»çš„æŠ€æœ¯ï¼Œæœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºé™·ï¼šå®ƒä»¬è™½ç„¶é€šè¿‡äº†æ— æ³•ç ´è§£çš„RSAåŠ å¯†ç®—æ³•æ¥å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œä½†æ˜¯åœ¨äº¤æ¢å¯†é’¥ã€å»ºç«‹èµ·éš§é“å‰ä»åœ¨è¿›è¡Œæ˜Žæ–‡ä¼ è¾“ï¼ŒGFWæ­£æ˜¯åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œåœ¨äº¤æ¢ç§˜é’¥çš„è¿‡ç¨‹ä¸­æš´åŠ›ç ´è§£ï¼Œè¿™æ„å‘³ç€æŽ¥ä¸‹æ¥çš„åŠ å¯†æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚Shadowsocksæ‰€åšçš„ä¸€ç‚¹ï¼Œå°±æ˜¯æå‰è§„å®šå¥½åŠ å¯†æ–¹å¼ï¼Œè§£å†³ GFW é€šè¿‡åˆ†æžæµé‡ç‰¹å¾è¿›è¡Œå¹²æ‰°çš„é—®é¢˜ã€‚ æŠ€æœ¯åŽŸç†ä¸Šï¼ŒShadowsocks æ˜¯å°†åŽŸæ¥ SSH åˆ›å»ºçš„ Socks5 åè®®æ‹†å¼€æˆ Server ç«¯å’Œ Client ç«¯ï¼Œå…¶å·¥ä½œè¿‡ç¨‹å¦‚ä¸‹ 1)ã€6) å®¢æˆ·ç«¯å‘å‡ºçš„è¯·æ±‚åŸºäºŽ Socks5 åè®®è·Ÿ SS Local ç«¯è¿›è¡Œé€šè®¯ï¼Œç”±äºŽè¿™ä¸ª SS Local ä¸€èˆ¬æ˜¯æœ¬æœºæˆ–è·¯ç”±å™¨æˆ–å±€åŸŸç½‘çš„å…¶ä»–æœºå™¨ï¼Œä¸ç»è¿‡ GFWï¼Œè§£å†³äº†è¢« GFW é€šè¿‡ç‰¹å¾åˆ†æžè¿›è¡Œå¹²æ‰°çš„é—®é¢˜ 2)ã€5) SS Local å’Œ SS Server ä¸¤ç«¯é€šè¿‡å¤šç§å¯é€‰çš„åŠ å¯†æ–¹æ³•è¿›è¡Œé€šè®¯ï¼Œç»è¿‡ GFW çš„æ—¶å€™æ˜¯å¸¸è§„çš„TCPåŒ…ï¼Œæ²¡æœ‰æ˜Žæ˜¾çš„ç‰¹å¾ç è€Œä¸” GFW ä¹Ÿæ— æ³•å¯¹é€šè®¯æ•°æ®è¿›è¡Œè§£å¯† 3)ã€4) SS Server å°†æ”¶åˆ°çš„åŠ å¯†æ•°æ®è¿›è¡Œè§£å¯†ï¼Œè¿˜åŽŸåŽŸæ¥çš„è¯·æ±‚ï¼Œå†å‘é€åˆ°ç”¨æˆ·éœ€è¦è®¿é—®çš„æœåŠ¡ï¼ŒèŽ·å–å“åº”åŽŸè·¯è¿”å›žã€‚ ç›¸æ¯”ä¼ ç»Ÿçš„ VPN (IKE, IPSec, PPTPâ€¦)ï¼ŒShadowsocks åè®®å…·æœ‰æ›´å¥½çš„çµæ´»æ€§å’Œéšè”½æ€§ï¼Œä¸”æ­å»ºç›¸å¯¹ç®€å•ï¼Œå¯ä»¥æ‹¥æœ‰ç›¸å¯¹ä¼ ç»ŸVPNæ›´å¿«çš„é€Ÿåº¦å’Œæ›´é«˜çš„ç¨³å®šæ€§ï¼›è€Œå¯¹æ¯” V2Ray è¿™ç§ç§‘å­¦ä¸Šç½‘çš„é›†åˆä½“ï¼ŒShadowsocksåœ¨æœåŠ¡ç«¯æ›´åŠ è½»é‡ï¼Œå•ä¸€åè®®å®Œå–„ç¨‹åº¦æ›´é«˜ï¼›åŒæ—¶ï¼ŒShadowsocksåœ¨ç§»åŠ¨ç«¯æœ‰æ›´ä¸°å¯Œçš„å®¢æˆ·ç«¯é€‰æ‹©ï¼Œå…¼å®¹æ€§å’Œçµæ´»æ€§æ›´ä¼˜ã€‚ Shadowsocks-Rè™½è¯´Shadowsocksâ€œæŠ¹é™¤äº†æµé‡ç‰¹å¾â€ï¼Œä½†ä»Žå¦ä¸€ä¸ªè§’åº¦çœ‹ï¼Œå…¶å®žå®ƒçš„ç‰¹å¾ä¹Ÿå¾ˆæ˜Žæ˜¾ï¼šTCP/UDPä¸Šå±‚çš„åŒ…å…¨æ˜¯å¯†æ–‡ï¼Œå‡ ä¹Žå’ŒVPNæ²¡æœ‰åŒºåˆ«ã€‚ä¸ºè§£å†³è¿™ä¸€é—®é¢˜ï¼Œå‡ºçŽ°äº†Shadowsocks-Rï¼Œå®ƒçš„å…¶ä¸­ä¸€ä¸ªç‰¹æ€§ï¼Œæ˜¯åœ¨åŽŸ Shadowsocks åè®®çš„æ•°æ®æµå‰é¢åŠ ä¸ŠHTTPå¤´ï¼Œè®©GFWè¯¯è®¤ä¸ºæ˜¯HTTPåè®®ï¼Œä»Žè€Œå¯¹æ•°æ®æµåº”ç”¨é’ˆå¯¹HTTPçš„è§„åˆ™ã€‚ ä½œä¸ºSSçš„ä¸€ä¸ªå‘å±•åˆ†æ”¯ï¼Œç”±äºŽSSRçš„ä½œè€…ä¸€å¼€å§‹æœªå°†å…¶å¼€æºï¼ˆè¿åäº† GPL åè®®ï¼‰ï¼Œæ‰€ä»¥å®žé™…ä¸Šä¸¤è€…æ—©æœŸæœ‰ä¸å¯è°ƒå’Œçš„åˆ†æ­§ã€‚SSRæ‹¥æœ‰æ›´å¤šçš„åŠŸèƒ½ï¼Œæ”¯æŒæ›´å¤šçš„åŠ å¯†æ–¹å¼ï¼Œæ­¤å¤–SSRè¿˜å¯ä»¥åˆ©ç”¨è¿è¥å•†çš„æ¼æ´žï¼Œå¼€å¯å…æµæœåŠ¡ï¼Œä¸è¿‡è¿™æ˜¯å¦ä¸€ä¸ªé—®é¢˜äº†ã€‚ V2RayV2Ray çš„å®žçŽ°åŽŸç†è·ŸShadowsocksä¸€è„‰ç›¸æ‰¿ï¼Œå…¶ç‰¹ç‚¹åœ¨äºŽå¼•å…¥æ–°çš„é€šä¿¡åè®®ï¼Œæ”¹æ­£ Shadowsockså·²æœ‰çš„ç¼ºç‚¹ï¼Œä½¿æµé‡ç‰¹å¾æ›´éš¾è¢« GFW æ£€æµ‹åˆ°ï¼›åŒæ—¶ä½¿ç”¨ UDP ä½œä¸ºä¸‹å±‚åè®®ï¼Œé¿å… TCP å¸¦æ¥çš„çª—å£å’Œ RTO(Retry Timeout)ç­‰å¯¼è‡´ç½‘é€Ÿå˜æ…¢çš„é—®é¢˜ã€‚ è®° 1998å¹´ï¼Œå…¬å®‰éƒ¨å¼€å±•â€é‡‘ç›¾å·¥ç¨‹â€å»ºè®¾ã€‚æ¬¡å¹´ï¼Œæ–¹æ»¨å…´è°ƒä»»å›½å®¶è®¡ç®—æœºç½‘ç»œä¸Žä¿¡æ¯å®‰å…¨ç®¡ç†ä¸­å¿ƒå‰¯æ€»å·¥ç¨‹å¸ˆã€‚ 2002å¹´ï¼ŒGoogleç»åŽ†å¤šæ¬¡å°é”ä¸Žè§£å°ï¼Œä¸»è¦æ‰‹æ®µä¸ºDNSåŠ«æŒã€TCPä¼šè¯é˜»æ–­ç­‰ã€‚ 2004å¹´ï¼Œç»´åŸºç™¾ç§‘é­é‡ç½‘ç»œå°é”ï¼Œè‡³ä»Šæœªè§£å°ã€‚ 2008å¹´ï¼ŒåŒ—äº¬å¥¥è¿ä¼šæœŸé—´ï¼Œä¸­å›½æ”¿åºœçŸ­æš‚æ”¾å®½GFWçš„å°é”èŒƒå›´ã€‚ 2010å¹´ï¼ŒGoogleå› å†…å®¹å®¡æŸ¥é—®é¢˜ä¸Žä¸­å›½æ”¿åºœäº¤æ¶‰æ— æ•ˆåŽï¼Œé€€å‡ºä¸­å›½ã€‚ 2013å¹´ï¼ŒGFWåˆ©ç”¨åŸŸåæ±¡æŸ“å’Œå…³é”®è¯è¿‡æ»¤ç­‰æ‰‹æ®µå±è”½GitHubï¼Œå‡ å¤©åŽè¢«è§£å°ã€‚ 2015å¹´ï¼ŒShadowsocksä½œè€… @clowwindyé­é‡å…¬å®‰æœºå…³è°ƒæŸ¥ï¼ŒéšåŽåˆ é™¤ä»£ç ï¼Œä¸å†å‚ä¸Žå¼€å‘ã€‚ 2017å¹´ï¼ŒShadowsocks-Rä½œè€… @BreakWa11è¢«äººè‚‰å’Œäººèº«å¨èƒï¼ŒéšåŽåˆ é™¤æ‰€æœ‰é¡¹ç›®ä»£ç ã€‚ ç»“è¯­ä»ŽäºŒåå¹´å‰â€œé‡‘ç›¾å·¥ç¨‹â€è‡³ä»Šï¼Œä¸­å›½çš„äº’è”ç½‘ç®¡åˆ¶æœªæ›¾æ¾åŠ¨ï¼Œåœ¨å¯é¢„è§çš„æœªæ¥ï¼Œåº”è¯¥ä¹Ÿä¸ä¼šæœ‰æ‰€æ”¾ç¼“ã€‚GFWç»è¿‡åå‡ å¹´çš„å‘å±•ï¼Œå·²ç»è¶³å¤Ÿæˆç†Ÿï¼ŒåŒæ—¶å¯¹äºŽç¿»å¢™è¿™ä¸€è¡Œä¸ºï¼Œæ‰§æ”¿å…šçš„æ²»ç†ä¾§é‡ç‚¹ä¹Ÿæœ‰ä»ŽæŠ€æœ¯æ‰‹æ®µè½¬å‘è¡Œæ”¿æ‰‹æ®µçš„è¶‹åŠ¿ï¼Œæ¯å¹´ï¼Œä¸ªäººå› ä¸ºç¿»å¢™æˆ–è€…å‡ºå”®ç¿»å¢™æœåŠ¡è€Œè¢«é€®æ•çš„æ—¶é—´å±¡å±¡è§è¯¸æŠ¥ç«¯ã€‚ ç¿»å¢™æŠ€æœ¯å’ŒGFWæ¯å¤©éƒ½åœ¨ä¸Šæ¼”é“é«˜ä¸€å°ºé­”é«˜ä¸€ä¸ˆçš„æˆç ï¼Œä¸¤è€…çš„æ–—äº‰æ›´è¿›ä¸€æ­¥ï¼Œå¯èƒ½æ˜¯äººå·¥æ™ºèƒ½åœ¨GFWä¸Šçš„æ·±åº¦éƒ¨ç½²ï¼Œæˆ–è€…IPv6çš„å…¨é¢æ™®åŠã€‚ æœ¬æ–‡çš„ç»å¤§å¤šæ•°èµ„æ–™å’Œå›¾ç‰‡å‡æ¥è‡ªäº’è”ç½‘ï¼Œé¿å…ç´¯èµ˜ï¼Œä¸å†æ·»åŠ å¼•ç”¨è¯´æ˜Žã€‚]]></content>
      <categories>
        <category>äº’è”ç½‘</category>
      </categories>
      <tags>
        <tag>ç¿»å¢™</tag>
        <tag>äº’è”ç½‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LeetCodeï¼šæœ€é•¿å›žæ–‡å­ä¸²ï¼ˆLongest Palindromic Substringï¼‰çš„è§£æ³•]]></title>
    <url>%2FLeetCode%EF%BC%9A%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E4%B8%B2%EF%BC%88Longest-Palindromic-Substring%EF%BC%89%E7%9A%84%E8%A7%A3%E6%B3%95%2F</url>
    <content type="text"><![CDATA[é¢˜ç›®ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œæ‰¾åˆ° s ä¸­æœ€é•¿çš„å›žæ–‡å­ä¸²ã€‚ä½ å¯ä»¥å‡è®¾ s çš„æœ€å¤§é•¿åº¦ä¸º1000ã€‚ Input: â€œbabcdâ€Output: â€œbabâ€ æœ¬æ–‡å°†ä»‹ç»ä¸‰ç§è§£æ³•ï¼Œé‡ç‚¹ä»‹ç»æ—¶é—´å¤æ‚åº¦æœ€ä½Žçš„Manacherç®—æ³•ã€‚ O(n^3)ç®—æ³•æ€è·¯ ä»Žæœ€é•¿çš„å­ä¸²å¼€å§‹ï¼ŒéåŽ†æ‰€æœ‰è¯¥åŽŸå­—ç¬¦ä¸²çš„å­ä¸²ï¼› æ¯æ‰¾å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°±åˆ¤æ–­è¯¥å­—ç¬¦ä¸²æ˜¯å¦ä¸ºå›žæ–‡ï¼› å­ä¸²ä¸ºå›žæ–‡æ—¶ï¼Œåˆ™æ‰¾åˆ°äº†æœ€é•¿çš„å›žæ–‡å­ä¸²ï¼Œå› æ­¤ç»“æŸï¼›åä¹‹ï¼Œç»§ç»­éåŽ†ã€‚ æ—¶é—´å¤æ‚åº¦ éåŽ†å­—ç¬¦ä¸²å­ä¸²ï¼šåµŒå¥—ä¸€ä¸ªå¾ªçŽ¯ï¼šO(n^2)ï¼› åˆ¤æ–­æ˜¯å¦ä¸ºå›žæ–‡ï¼šå†æ¬¡åµŒå¥—ä¸€ä¸ªå¾ªçŽ¯ï¼šO(n^3)ã€‚ ä»£ç 1234567891011121314151617public static String longestPalindrome(String s) &#123; if(s.length() &lt;= 1) return s; for(int i = s.length();i &gt; 0; i--) &#123;//å­ä¸²é•¿åº¦ for(int j = 0; j &lt;= s.length() - i; j++) &#123; String sub = s.substring(j , i + j);//å­ä¸²ä½ç½® int count = 0;//è®¡æ•°ï¼Œç”¨æ¥åˆ¤æ–­æ˜¯å¦å¯¹ç§° for (int k = 0; k &lt; sub.length() / 2; k++) &#123;//å·¦å³å¯¹ç§°åˆ¤æ–­ if (sub.charAt(k) == sub.charAt(sub.length() - k - 1)) count++; &#125; if (count == sub.length() / 2) return sub; &#125; &#125; return "";//è¡¨ç¤ºå­—ç¬¦ä¸²ä¸­æ— å›žæ–‡å­ä¸²&#125; O(n^2)ç®—æ³•æ€è·¯ å°†å­ä¸²åˆ†ä¸ºå•æ ¸å’ŒåŒæ ¸çš„æƒ…å†µï¼Œå•æ ¸å³æŒ‡å­ä¸²é•¿åº¦ä¸ºå¥‡æ•°ï¼ŒåŒæ ¸åˆ™ä¸ºå¶æ•°ï¼› éåŽ†æ¯ä¸ªé™¤æœ€åŽä¸€ä¸ªä½ç½®çš„å­—ç¬¦index(å­—ç¬¦ä½ç½®)ï¼Œå•æ ¸ï¼šåˆå§‹low = åˆå§‹high = indexï¼Œlowå’Œhighå‡ä¸è¶…è¿‡åŽŸå­—ç¬¦ä¸²çš„ä¸‹é™å’Œä¸Šé™ï¼›åˆ¤æ–­lowå’Œhighå¤„çš„å­—ç¬¦æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰åˆ™low++ã€high++ï¼ˆåŒæ ¸ï¼šåˆå§‹high = åˆå§‹low+1 = index + 1ï¼‰ï¼› æ¯æ¬¡lowä¸Žhighå¤„çš„å­—ç¬¦ç›¸ç­‰æ—¶ï¼Œéƒ½å°†å½“å‰æœ€é•¿çš„å›žæ–‡å­ä¸²é•¿åº¦ä¸Žhigh-low+1æ¯”è¾ƒã€‚åŽè€…å¤§æ—¶ï¼Œå°†æœ€é•¿çš„å›žæ–‡å­ä¸²æ”¹ä¸ºlowä¸Žhighä¹‹é—´çš„ï¼› é‡å¤æ‰§è¡Œç¬¬äºŒã€ä¸‰æ­¥ï¼Œç›´è‡³high-low+1 ç­‰äºŽåŽŸå­—ç¬¦ä¸²é•¿åº¦æˆ–è€…éåŽ†åˆ°æœ€åŽä¸€ä¸ªå­—ç¬¦ï¼Œå–å½“å‰æˆªå–åˆ°çš„å›žæ–‡å­ä¸²ï¼Œè¯¥å­ä¸²å³ä¸ºæœ€é•¿çš„å›žæ–‡å­ä¸²ã€‚ æ—¶é—´å¤æ‚åº¦ éåŽ†å­—ç¬¦ï¼šä¸€å±‚å¾ªçŽ¯â€”â€”O(n-1)ï¼› æ‰¾ä»¥å½“å‰å­—ç¬¦ä¸ºä¸­å¿ƒçš„æœ€é•¿å›žæ–‡å­ä¸²ï¼šåµŒå¥—ä¸¤ä¸ªç‹¬ç«‹å¾ªçŽ¯â€”â€”O(2n*(n-1)) = O(n^2) ä»£ç 12345678910111213141516171819202122232425262728private static int maxLen = 0;private static String sub = "";public static String longestPalindrome(String s) &#123; if(s.length() &lt;= 1) return s; for(int i = 0;i &lt; s.length()-1;i++)&#123; findLongestPalindrome(s,i,i);//å•æ ¸å›žæ–‡ findLongestPalindrome(s,i,i+1);//åŒæ ¸å›žæ–‡ &#125; return sub;&#125;public static void findLongestPalindrome(String s,int low,int high) &#123; while (low &gt;= 0 &amp;&amp; high &lt;= s.length()-1)&#123; if(s.charAt(low) == s.charAt(high))&#123; if(high - low + 1 &gt; maxLen)&#123; maxLen = high - low + 1; sub = s.substring(low , high+1); &#125; low --;//å‘ä¸¤è¾¹æ‰©æ•£æ‰¾å½“å‰å­—ç¬¦ä¸ºä¸­å¿ƒçš„æœ€å¤§å›žæ–‡å­ä¸² high ++; &#125; else break; &#125;&#125; O(n)ç®—æ³•â€”â€”Manacherç®—æ³•æ€è·¯Manacherç®—æ³•æ˜¯é€šè¿‡æ±‚è§£ä¸€ä¸ªä¸­å¿ƒç‚¹ï¼Œåœ¨è·ç¦»è¿™ä¸ªç‚¹Ré•¿åº¦ä»¥å†…éƒ½æ˜¯å…³äºŽè¿™ä¸ªç‚¹å·¦å³å¯¹ç§°çš„ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªé•¿åº¦ä¸º2Rçš„å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªå›žæ–‡ä¸²ï¼Œæœ€åŽå†æ¯”è¾ƒå¤§å°ï¼Œæ±‚å‡ºæœ€å¤§çš„é•¿åº¦2RåŠå…¶ä¸­å¿ƒç‚¹ã€‚æ•´ä¸ªè¿‡ç¨‹åªæ‰«ææ•´ä¸ªå­—ç¬¦ä¸²ä¸€éã€‚è¿™é‡Œä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œå› ä¸ºè¦æ±‚å›žæ–‡å­ä¸²çš„ä¸­å¿ƒç‚¹ï¼Œè¿™ä¸ªä¸­å¿ƒç‚¹ä¹Ÿæ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥å®ƒåªèƒ½å¤„ç†å­—ç¬¦ä¸²æ˜¯å¥‡æ•°ä½çš„æƒ…å†µã€‚å› æ­¤ç¬¬ä¸€æ­¥å°±æ˜¯æŠŠå­—ç¬¦ä¸²é•¿åº¦å˜ä¸ºå¥‡æ•°ï¼Œè¿™é‡Œä½¿ç”¨ä¸€ä¸ªéžå¸¸å·§å¦™çš„æ–¹å¼ï¼ŒæŠŠå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦ä½¿ç”¨ä¸€ä¸ªå…¶å®ƒå­—ç¬¦å·åŒ…å›´èµ·æ¥ï¼Œè¿™é‡Œä»¥ï¼ƒå·ä¸ºä¾‹ï¼Œå¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œè¦æŠŠæ¯ä¸ªå­—ç¬¦éƒ½ä½¿ç”¨#å·åŒ…è£¹ï¼Œé‚£ä¹ˆéœ€è¦çš„#å·æ€»æ˜¯è¦æ¯”åŽŸæ¥çš„å­—ç¬¦ä¸²é•¿åº¦å¤šä¸€ä½ï¼Œæ‰èƒ½ä¿è¯æ¯ä¸ªå­—ç¬¦éƒ½èƒ½è¢«æ’å…¥åˆ°#ä¸Ž#ä¸­é—´ï¼Œæ¯”å¦‚ï¼š a -&gt; #a#abaf -&gt; #a#b#a#f# å¯ä»¥çœ‹å‡ºï¼Œä¸ç®¡åŽŸæ¥çš„å­—ç¬¦ä¸²é•¿åº¦æ˜¯ä»€ä¹ˆï¼Œå¥‡æ•°åŠ å¶æ•°ç»“æžœè‚¯å®šä¸ºå¥‡æ•°ï¼Œåœ¨è¿™ä¹‹åŽï¼Œå°±å¯ä»¥å¼€å§‹æ±‚æœ€é•¿å›žæ–‡å­ä¸²çš„åŠå¾„Räº†ã€‚ å€ŸåŠ©ä¸¤ä¸ªå˜é‡centerã€rightåˆ†åˆ«è®°å½•å›žæ–‡å­ä¸²å¯¹åº”çš„ä¸­å¿ƒç‚¹å’Œå³ç«¯ç‚¹ å¯ä»¥ç›´æŽ¥çœ‹å‡ºï¼Œrightå°±æ˜¯2*center-iï¼ˆä¹Ÿå°±æ˜¯iå…³äºŽcenterçš„å¯¹ç§°ç‚¹ï¼‰ï¼Œæ—¢ç„¶æ˜¯å¯¹ç§°ç‚¹ï¼Œé‚£ä¹ˆå½“ç«¯ç‚¹right &gt; iæ—¶ï¼Œç«¯ç‚¹iéœ€è¦è¿›è¡Œè®¡ç®—å›žæ–‡å­ä¸²Rï¼Œä½†å®ƒçš„å¯¹ç§°ç‚¹æœ‰å¯èƒ½ä¹Ÿè¿›è¡Œè¿‡è®¡ç®—ï¼Œæ‰€ä»¥å¯ä»¥æ— éœ€ä»Žå¤´å¼€å§‹åŒ¹é…ï¼Œå› ä¸ºè¿™äº›ç‚¹éƒ½åŒ…å«åœ¨ä¸€ä¸ªå·²ç»è¿›è¡Œè¿‡åŒ¹é…çš„çˆ¶å›žæ–‡ä¸²ä¸­ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ç›´æŽ¥å–right-iå’Œå®ƒçš„å¯¹ç§°ç‚¹å›žæ–‡å­ä¸²åŠå¾„é•¿åº¦è¾ƒå°çš„ï¼Œç”¨æ¥ä¿è¯ç»å¯¹è¿›è¡Œè¿‡è®¡ç®—çš„å›žæ–‡å­ä¸²çš„éƒ¨åˆ†;åä¹‹ï¼Œå°±åªèƒ½ä»Ž1ä¸ªé•¿åº¦å¼€å§‹åŒ¹é…äº†ï¼Œå°±æ˜¯ä¸‹é¢çš„è¿™è¡Œä»£ç : 1r[i] = right &gt; i ? (Math.min(r[2*center-i], right-i)) : 1 è¿™é‡Œå€ŸåŠ©ä¸€ä¸ªè¾…åŠ©çš„æ•°ç»„r[]æ¥è®°å½•å›žæ–‡å­ä¸²çš„åŠå¾„Rï¼Œr[i]è¡¨ç¤ºçš„æ˜¯ä»¥iä¸ºä¸­å¿ƒç‚¹çš„å›žæ–‡å­—ç¬¦ä¸²çš„åŠå¾„é•¿åº¦(åˆå§‹æƒ…å†µä¸‹ä¸º1)ï¼ŒçŸ¥é“r[i]åŽï¼Œå°±å¯ä»¥ç»§ç»­æŠŠç´¢å¼•å‘å·¦å³ä¸¤è¾¹æ‰©å……ï¼Œä¹Ÿå°±æ˜¯çœ‹i+r[i]ä¸Ži-r[i]å·¦å³ç«¯ç‚¹çš„ä½ç½®æ‰€å¯¹åº”çš„å­—ç¬¦æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰çš„è¯å°±æŠŠå›žæ–‡åŠå¾„r[i]ç»§ç»­æ‰©å……ï¼Œç›´åˆ°ä¸ç›¸ç­‰ä¸ºæ­¢ã€‚è¿›è¡Œè¿™ä¸€è½®æ‰©å……åŽï¼Œè§‚å¯Ÿä¹‹å‰çš„å³ç«¯ç‚¹rightæ˜¯å¦å°äºŽå›žæ–‡å­ä¸²æ‰©å……åŽçš„å³ç«¯ç‚¹i+r[i],å°äºŽå°±ç›´æŽ¥æ›´æ–°å³ç«¯ç‚¹å’Œä¸­å¿ƒç‚¹ï¼Œä¸å°äºŽå°±è¯´æ˜Žå½“å‰å›žæ–‡å­ä¸²è¿˜æ˜¯åœ¨å½“å‰rightç«¯ç‚¹çš„å†…éƒ¨ã€‚ æ—¶é—´å¤æ‚åº¦åªéœ€è¿›è¡Œä¸€æ¬¡éåŽ†ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œå…·ä½“çš„è¯æ˜Žè¿‡ç¨‹çœç•¥ã€‚ ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940public static String longestPalindrome(String s) &#123; if(s == null || s.length() &lt; 1) &#123; return s; &#125; StringBuilder builder = new StringBuilder(); // é˜²æ­¢å·¦ç«¯ç‚¹è¶Šç•Œ builder.append("&amp;#"); char[] c = s.toCharArray(); for (char a : c) &#123; builder.append(a).append("#"); &#125; String newStr = builder.toString(); c = newStr.toCharArray(); // å›žæ–‡åŠå¾„ int[] r = new int[newStr.length()]; // å›žæ–‡å­ä¸²æœ€å¤§å³ç«¯ç‚¹ã€ä¸­å¿ƒç‚¹ int right=0, center=0; // æœ€å¤§å›žæ–‡åŠå¾„ã€æœ€å¤§ä¸­å¿ƒç‚¹ int maxR=0, maxC=0; for (int i=1;i &lt; c.length;i++) &#123; // ä»¥iä¸ºä¸­å¿ƒç‚¹çš„å›žæ–‡åŠå¾„ï¼Œå¯ä»¥é‡å¤åˆ©ç”¨ä»¥åŠåŒ¹é…è¿‡å¯¹ç§°ç‚¹çš„åŠå¾„ r[i] = right &gt; i ? (Math.min(r[2*center-i], right-i)) : 1; while (i+r[i]&lt;c.length &amp;&amp; c[i+r[i]]==c[i-r[i]]) &#123; ++r[i]; &#125; // æ›´æ–°å³ç«¯ç‚¹å’Œä¸­å¿ƒç‚¹ if (right &lt; i+r[i]) &#123; right = i+r[i]; center = i; &#125; // æ›´æ–°æœ€å¤§åŠå¾„å’Œæœ€å¤§ä¸­å¿ƒç‚¹ if (maxR &lt; r[i]) &#123; maxR = r[i]; maxC = i; &#125; &#125; //è®¡ç®—åœ¨åŽŸå­—ç¬¦ä¸²ä¸­çš„èµ·å§‹ç‚¹ int start = (maxC-maxR)/2; return s.substring(start, start+maxR-1);&#125;]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>LeetCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Github Pages+Hexoæ­å»ºä¸ªäººåšå®¢]]></title>
    <url>%2FGithub-Pages-Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%2F</url>
    <content type="text"><![CDATA[å¼•è¨€&emsp;&emsp;ä¸Šä¸€ä¸ªåšå®¢æ˜¯ä½¿ç”¨WordPressæ­å»ºåœ¨äº‘æœåŠ¡å™¨ä¸Šçš„ï¼Œéƒé—·çš„æ˜¯è¿™ä¸ªä½äºŽç¾Žå›½çš„æœåŠ¡å™¨ipè¢«å¢™äº†ï¼Œæ— å¥ˆæ”¾å¼ƒã€‚æ­£å¥½æœ€è¿‘æŠ½å‡ºæ—¶é—´ï¼Œåˆè¿«åˆ‡åœ°æƒ³è®°å½•ç‚¹ä¸œè¥¿ï¼Œé€‰æ‹©äº†åŸºæœ¬ä¸ä¼šè¢«å¢™çš„Github Pagesï¼Œæ­é…Hexoæ¡†æž¶ï¼Œæž„å»ºäº†ä¸€ä¸ªè½»é‡çº§çš„åšå®¢ï¼Œåœ¨æ­¤å°†å…¶è¿‡ç¨‹è®°å½•ä¸‹æ¥ã€‚ &emsp;&emsp;ä½œè€…çš„çŽ¯å¢ƒåŸºäºŽWindowsï¼Œå…¶ä»–çŽ¯å¢ƒçš„æ­å»ºè¿‡ç¨‹å¤§åŒå°å¼‚ã€‚ å‡†å¤‡å·¥ä½œGithub Pages&emsp;&emsp;åˆ›å»ºGithub Pagesï¼Œé¦–å…ˆéœ€è¦ä¸€ä¸ªGithubå¸å·ï¼Œæ–°å»ºä¸€ä¸ªä»“åº“ï¼Œä»“åº“åä¸º{è´¦æˆ·å}.github.ioï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«å¹¶å°†å…¶è®¾ä¸ºGithub Pagesã€‚æ³¨æ„çš„æ˜¯ä»“åº“æƒé™è¦è®¾ç½®ä¸ºpublicã€‚ä¹‹åŽæµè§ˆå™¨æ‰“å¼€ï¼šhttps://{è´¦æˆ·å}.github.ioä¾¿å¯ä»¥çœ‹åˆ°ç¼ºçœçš„ç•Œé¢ã€‚ Hexo&emsp;&emsp;Hexoæ˜¯ä¸€ä¸ªåŸºäºŽNode.jsçš„é™æ€åšå®¢æ¡†æž¶ï¼Œå¿«é€Ÿã€é«˜æ•ˆä¸”ç®€æ´ã€‚éœ€è¦å®‰è£…åœ¨æœ¬åœ°ï¼Œå…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š å®‰è£…Gitå®¢æˆ·ç«¯ï¼Œå‰å¾€Gitä¸»é¡µä¸‹è½½ï¼Œå®‰è£…åŽç™»å½•å¸å·ã€‚ å®‰è£…Node.jsçŽ¯å¢ƒï¼Œå‰å¾€Nodeä¸»é¡µä¸‹è½½ã€‚ å®‰è£…Hexoï¼Œæ–°å»ºä¸€ä¸ªå‘½åä»»æ„çš„æ–‡ä»¶å¤¹ï¼Œåœ¨å…¶ä¸­æ‰“å¼€Git Bashï¼Œé”®å…¥Hexoçš„å®‰è£…å‘½ä»¤ï¼š 1npm install -g hexo-cli åˆå§‹åŒ–Hexoï¼Œprojectnameçœç•¥æ—¶ï¼Œè¦æ±‚å½“å‰æ–‡ä»¶å¤¹ä¸ºç©ºã€‚ 1hexo init [projectname] å…³è”&emsp;&emsp;ç»è¿‡å‰é¢çš„è¿‡ç¨‹ï¼Œå·²ç»èŽ·å¾—äº†Github Pageså’Œæœ¬åœ°çš„HexoçŽ¯å¢ƒï¼ŒæŽ¥ä¸‹æ¥å°±æ˜¯å…³è”ä¸¤è€…ã€‚åœ¨åšå®¢çš„æ–‡ä»¶å¤¹ä¸­æœ‰_config.ymlæ–‡ä»¶ï¼Œä¸ºHexoçš„é…ç½®æ–‡ä»¶ï¼Œæ‰“å¼€å¹¶å°†ç›¸åº”ä½ç½®è®¾ç½®ä¸ºï¼š1234deploy: type: gitrepo: è¯¥å¤„å¡«å†™ä»“åº“çš„å®Œæ•´è·¯å¾„branch: master è¯¥è¿‡ç¨‹å…¶å®žæ˜¯ç»™hexo dè¿™ä¸€å‘½ä»¤åšç›¸åº”çš„é…ç½®ï¼Œè®©hexoçŸ¥é“blogéƒ¨ç½²çš„ä½ç½®ï¼Œæ˜¾ç„¶éƒ¨ç½²åœ¨GitHubçš„ä»“åº“é‡Œã€‚ä¿å­˜æ–‡ä»¶ä¹‹åŽï¼Œå®‰è£…Gitéƒ¨ç½²æ’ä»¶ï¼Œåœ¨Git Bashä¸­é”®å…¥å‘½ä»¤ï¼š1npm install hexo-deployer-git --save æŽ¥ä¸‹æ¥å°±æ˜¯æ¸…é™¤hexoç¼“å­˜ï¼š1hexo clean ç”Ÿæˆé™æ€æ–‡ä»¶1hexo g éƒ¨ç½²ç½‘ç«™ï¼Œdçš„æ„æ€æ˜¯deploy 1hexo d åŽä¸¤ä¸ªå‘½ä»¤å¯ä»¥åˆå¹¶ä¸ºä¸€æ¡ï¼Œå…³äºŽHexoçš„å‘½ä»¤è¯·è®¿é—®ï¼šHexoæŒ‡ä»¤ã€‚ 1hexo g -d &emsp;&emsp;è‡³æ­¤ï¼Œåšå®¢å·²ç»æ­å»ºå®Œæ¯•ï¼Œæµè§ˆå™¨é”®å…¥https://{è´¦æˆ·å}.github.ioï¼Œå‘çŽ°æ‰“å¼€äº†ä¸€ä¸ªä½¿ç”¨Hexoæ­å»ºçš„Github Pagesåšå®¢ã€‚ é…ç½®&emsp;&emsp;åšå®¢æ–‡ä»¶å¤¹ä¸‹çš„_config.ymlæ–‡ä»¶å¯ä»¥é…ç½®æ•´ä¸ªåšå®¢çš„åç§°ã€ä¸»é¢˜ç­‰åŸºæœ¬åŠŸèƒ½ï¼Œ/theme/æ–‡ä»¶å¤¹ä¸‹çš„_config.ymlæ–‡ä»¶åˆ™ç”¨äºŽé…ç½®å…·ä½“çš„ä¸»é¢˜é…ç½®ã€‚ å‘è¡¨ä¸Žåˆ é™¤&emsp;&emsp;åœ¨åšå®¢æ–‡ä»¶å¤¹æ‰“å¼€Git Bashï¼Œé”®å…¥ 1hexo n &quot;æ–‡ç« çš„æ ‡é¢˜&quot; ä¹‹åŽä¾¿ä¼šç”Ÿæˆä¸€ä¸ªmdæ–‡ä»¶ï¼Œåœ¨mdæ–‡ä»¶ä¸­ç¼–è¾‘æ–‡ç« ä¿å­˜ï¼Œç„¶åŽé”®å…¥hexo g -dä¾¿ä¼šå‘å¸ƒæ–‡ç« ã€‚ &emsp;&emsp;å¦‚æžœè¦åˆ é™¤æ–‡ç« ï¼Œç›´æŽ¥åˆ é™¤å¯¹åº”çš„mdæ–‡ä»¶ã€‚åŸºæœ¬ä¸Šæ¯ä¸€æ¬¡å¯¹åšå®¢çš„ä¿®æ”¹ï¼Œéƒ½éœ€è¦ç”Ÿæˆé™æ€æ–‡ä»¶å’Œéƒ¨ç½²å‘½ä»¤ã€‚ ä¸»é¢˜&emsp;&emsp;ç½‘ç»œä¸Šæœ‰å¾ˆå¤šä¼˜ç§€çš„Hexoä¸»é¢˜ï¼Œå…³äºŽä¸»é¢˜é€‰æ‹©ï¼Œå¯ä»¥æŸ¥çœ‹è¿™ä¸ªçŸ¥ä¹Žé—®ç­”ï¼šæœ‰å“ªäº›å¥½çœ‹çš„ Hexoä¸»é¢˜ã€‚ç¬”è€…ä½¿ç”¨çš„æ˜¯NexTã€‚ &emsp;&emsp;åœ¨åšå®¢æ–‡ä»¶å¤¹ä¸‹çš„_config.ymlæ–‡ä»¶ä¸­ï¼Œå°†themeé€‰é¡¹è®¾ç½®ä¸ºä¸‹è½½çš„ä¸»é¢˜ï¼Œæ³¨æ„çš„æ˜¯æ‰€æœ‰çš„é€‰é¡¹å†’å·ä¹‹åŽè¦æœ‰ä¸€ä¸ªåŠè§’ç©ºæ ¼ï¼Œå¦åˆ™è®¾ç½®å°†å¤±æ•ˆã€‚Hexoä¼šè‡ªåŠ¨æ£€æµ‹åšå®¢_config.ymlæ–‡ä»¶çš„æ›´æ”¹ï¼Œä¿å­˜ç‰‡åˆ»å³ç”Ÿæ•ˆã€‚ åŸŸåç»‘å®š&emsp;&emsp;å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š éœ€è¦ä¸€ä¸ªåŸŸåï¼Œå¯ä»¥å‰å¾€ä¸‡ç½‘ç­‰æä¾›å•†è´­ä¹°ï¼Œä¹‹åŽåœ¨åŽå°è®¾ç½®æ·»åŠ è§£æžï¼Œä¸€èˆ¬éœ€è¦è§£æžä¸‰ä¸ªï¼ŒGithubçš„IPåœ°å€ï¼Œ{è´¦æˆ·å}.github.ioçš„IPåœ°å€ï¼Œè¿˜æœ‰ä¸€ä¸ªçš„è®°å½•ç±»åž‹ä¸ºCNAMEï¼Œè®°å½•å€¼ä¸ºï¼š{è´¦æˆ·å}.github.ioã€‚ è¿›å…¥GitHub Pagesçš„ä»“åº“ï¼Œç‚¹å‡»settingsï¼Œè®¾ç½®Custom domainï¼Œè¾“å…¥è´­ä¹°çš„åŸŸåï¼Œä¿å­˜ã€‚ è¿›å…¥åšå®¢æ–‡ä»¶å¤¹ä¸­çš„/source/ï¼Œæ–°å»ºä¸€ä¸ªè®°äº‹æœ¬æ–‡ä»¶ï¼Œåªéœ€å¡«å†™åŸŸåå³å¯ã€‚å¦‚æžœåœ¨åŸŸåå‰å¡«äº†wwwï¼Œåˆ™æ¯æ¬¡æµè§ˆå™¨è®¿é—®éƒ½è¦å¡«å…¥wwwï¼Œä¸å¡«åˆ™æ²¡è¿™ä¸ªå¿…è¦ã€‚ä¹‹åŽå°†è¯¥æ–‡ä»¶ä¿å­˜ä¸ºæ‰€æœ‰æ–‡ä»¶ï¼Œåç§°ä¸ºCNAMEã€‚ å¤‡ä»½ä¸Žæ¢å¤&emsp;&emsp;ç”±äºŽåœ¨Github Pagesçš„ä»“åº“ä¸­ï¼Œåªæœ‰ç”Ÿæˆçš„é™æ€ç½‘é¡µçš„æ–‡ä»¶ï¼Œæ²¡æœ‰æ•´ä¸ªåšå®¢çš„æºæ–‡ä»¶ï¼Œå¦‚æžœå½“å‰ç”µè„‘å‡ºçŽ°é—®é¢˜ï¼Œæˆ–è€…éœ€è¦å¤šè®¾å¤‡æ“ä½œæ—¶ï¼Œå°±ä¼šå¾ˆéº»çƒ¦ã€‚æ‰€ä»¥éœ€è¦å¯¹åšå®¢è¿›è¡Œå¤‡ä»½ä¸Žæ¢å¤ã€‚ å¤‡ä»½&emsp;&emsp;åˆ›å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œç”¨æ¥ä¿å­˜ç½‘ç«™æºæ–‡ä»¶ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹: æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¦‚hexoï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºé»˜è®¤ æœ¬åœ°cloneä½ çš„Github Pagesä»“åº“ï¼Œå¾—åˆ°ä¸€ä¸ªioæ–‡ä»¶å¤¹ï¼š{è´¦æˆ·å}.github.ioçš„æ–‡ä»¶å¤¹ã€‚ å°†åŽŸæ¥åšå®¢æ–‡ä»¶å¤¹ä¸­çš„_config.ymlï¼Œthemes/ï¼Œsource/ï¼Œscffolds/ï¼Œpackage.jsonï¼Œ.gitignoreå¤åˆ¶åˆ°cloneä¸‹æ¥çš„æ–‡ä»¶å¤¹ï¼Œæ³¨æ„è¦å°†theme/ä¸»é¢˜çš„.git/åˆ é™¤ã€‚ åœ¨cloneä¸‹çš„æ–‡ä»¶å¤¹æ‰§è¡Œnpm installï¼Œnpm install hexo-deployer-gitã€‚ æ­¤æ—¶{è´¦æˆ·å}.github.ioæ–‡ä»¶å¤¹å·²ç»æˆä¸ºåŒ…å«ä½ åšå®¢æ‰€æœ‰æ–‡ä»¶çš„å·¥ä½œæ–‡ä»¶å¤¹ï¼Œåœ¨éƒ¨ç½²(hexo g -d)ä¹‹å‰ï¼Œæ‰§è¡Œä¸‹é¢ä¸‰æ¡å‘½ä»¤ï¼Œä»¥ä½¿ç”¨hexoåˆ†æ”¯æ›´æ–°gitä¸Šçš„æºæ–‡ä»¶:123git add .git commit -m &quot;æ›´æ–°æºæ–‡ä»¶&quot;git push origin hexo è¿™æ ·ä¸€æ¥ï¼Œè¾¾åˆ°äº†åœ¨masteråˆ†æ”¯ä¸Šéƒ¨ç½²ç½‘é¡µé™æ€æ–‡ä»¶ï¼Œåœ¨hexoåˆ†æ”¯ä¸Šå¤‡ä»½ç½‘ç«™æºæ–‡ä»¶çš„ç›®çš„ã€‚ æ¢å¤&emsp;&emsp;å½“åœ¨æ–°çš„çŽ¯å¢ƒä¸­éœ€è¦å¯¹åšå®¢è¿›è¡Œæ“ä½œï¼ŒåŒ…æ‹¬å†™æ–‡ç« ã€é…ç½®åšå®¢æ—¶ï¼Œéœ€è¦èŽ·å–æ•´ä¸ªç½‘ç«™çš„æºæ–‡ä»¶ï¼Œå½“ç„¶å‰ææ˜¯Node.jsçš„å®‰è£…ï¼Œæ­¥éª¤å¦‚ä¸‹: cloneä½ çš„Github Pagesä»“åº“ï¼Œå¾—åˆ°ä¸€ä¸ªioæ–‡ä»¶å¤¹ã€‚ åœ¨æ–‡ä»¶å¤¹ä¸­æ‰“å¼€Git Bashï¼Œé”®å…¥ä»¥ä¸‹å‘½ä»¤:123npm install hexo-cli -gnpm install npm install hexo-deployer-git çŽ°åœ¨å°±å¯ä»¥åœ¨è¯¥æ–‡ä»¶å¤¹è¿›è¡Œåšå®¢çš„æ“ä½œäº†ï¼Œå¦‚æžœå¤šç»ˆç«¯åŒæ—¶å·¥ä½œæ—¶ï¼Œè®°å¾—ä½¿ç”¨pullå‘½ä»¤æ›´æ–°æœ¬åœ°æ–‡ä»¶ï¼Œä¸”åˆ†æ”¯å§‹ç»ˆä¸ºhexoã€‚ å¦‚æžœåœ¨æ‹‰å–è¿‡ç¨‹ä¸­æç¤ºæœ¬åœ°åˆ†æ”¯ä¸Žè¿œç¨‹ä»“åº“å†²çªï¼Œå¯ä»¥ä½¿ç”¨git reset --hardå‘½ä»¤é‡ç½®ä¹‹åŽå†æ¬¡pullã€‚å¦‚æžœæç¤º The following untracked working tree files would be overwritten by merge å¯ä»¥ä½¿ç”¨git clean -d -fxï¼Œå…³äºŽè¯¥å‘½ä»¤ git clean -f -n //é€‰é¡¹-nå°†æ˜¾ç¤ºæ‰§è¡Œä¸‹ä¸€æ­¥æ—¶å°†ä¼šç§»é™¤å“ªäº›æ–‡ä»¶ã€‚ git clean -f //è¯¥å‘½ä»¤ä¼šç§»é™¤æ‰€æœ‰ä¸Šä¸€æ¡å‘½ä»¤ä¸­æ˜¾ç¤ºçš„æ–‡ä»¶ã€‚ git clean -fd //ç§»é™¤æ–‡ä»¶å¤¹ï¼Œä½¿ç”¨é€‰é¡¹-dã€‚ git clean -fX //åªæƒ³ç§»é™¤å·²è¢«å¿½ç•¥çš„æ–‡ä»¶ï¼Œä½¿ç”¨é€‰é¡¹-Xã€‚ git clean -fx //æƒ³ç§»é™¤å·²è¢«å¿½ç•¥å’Œæœªè¢«å¿½ç•¥çš„æ–‡ä»¶ï¼Œä½¿ç”¨é€‰é¡¹-xã€‚ Hexoå„æ–‡ä»¶ï¼ˆå¤¹ï¼‰è¯´æ˜Ž _config.ymlï¼šç«™ç‚¹çš„é…ç½®æ–‡ä»¶ï¼Œå¤‡ä»½è¿‡ç¨‹ä¸­éœ€è¦æ‹·è´ï¼› themes/ï¼šä¸»é¢˜æ–‡ä»¶å¤¹ï¼Œéœ€è¦æ‹·è´ï¼› sourceï¼šåšå®¢æ–‡ç« çš„.mdæ–‡ä»¶ï¼Œéœ€è¦æ‹·è´ï¼› scaffolds/ï¼šæ–‡ç« çš„æ¨¡æ¿ï¼Œéœ€è¦æ‹·è´ï¼› package.jsonï¼šå®‰è£…åŒ…çš„åç§°ï¼Œéœ€è¦æ‹·è´ï¼› .gitignoreï¼šé™å®šåœ¨pushæ—¶å“ªäº›æ–‡ä»¶å¯ä»¥å¿½ç•¥ï¼Œéœ€è¦æ‹·è´ï¼› .git/ï¼šä¸»é¢˜å’Œç«™ç‚¹éƒ½æœ‰ï¼Œæ ‡å¿—è¿™æ˜¯ä¸€ä¸ªgité¡¹ç›®ï¼Œä¸éœ€è¦æ‹·è´ï¼› node_modules/ï¼šæ˜¯å®‰è£…åŒ…çš„ç›®å½•ï¼Œåœ¨æ‰§è¡Œnpm installçš„æ—¶å€™ä¼šé‡æ–°ç”Ÿæˆï¼Œä¸éœ€è¦æ‹·è´ï¼› publicï¼šhexo gç”Ÿæˆçš„é™æ€ç½‘é¡µï¼Œä¸éœ€è¦æ‹·è´ï¼› .deploy_gitï¼šåŒä¸Šï¼Œhexo gä¹Ÿä¼šç”Ÿæˆï¼Œä¸éœ€è¦æ‹·è´ï¼› db.jsonï¼šæ–‡ä»¶ï¼Œä¸éœ€è¦æ‹·è´ã€‚]]></content>
      <categories>
        <category>äº’è”ç½‘</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åè¿‡å±±è½¦çš„äºº]]></title>
    <url>%2F%E5%9D%90%E8%BF%87%E5%B1%B1%E8%BD%A6%E7%9A%84%E4%BA%BA%2F</url>
    <content type="text"><![CDATA[&emsp;&emsp;è·ç¦»2019å¹´çš„å¼€å§‹ï¼Œå·²ç»è¿‡åŽ»äº†åå¤©ï¼Œæ ‡é¢˜èµ·çš„ä¼¼ä¹Žä¸é‚£ä¹ˆå‡†ç¡®ã€‚&emsp;&emsp;å‰å‡ å¤©è¯»å®Œäº†æ–°ä¸€å¹´çš„ç¬¬ä¸€æœ¬ä¹¦â€”â€”æ‘ä¸Šæ˜¥æ ‘çš„ã€Š1Q84ã€‹ï¼Œä½œè€…â€œæµ©æµ©æ±¤æ±¤â€æ‰¯äº†ä¸‰å¤§å·ï¼Œçœ‹åˆ°æœ€åŽï¼Œæ‰å‘çŽ°è®²äº†ä¸€å¯¹ç”·å¥³çš„â€œäº’ç›¸è¿½å¯»â€ï¼Œé¡¿æ„Ÿé¢“è´¥ã€‚ä¹¦ä¸­çš„å®—æ•™ã€ç§‘å¹»ã€æš´åŠ›ç­‰å…ƒç´ æ²¡è®©äººç”Ÿå‡ºå¤ªå¤šå…´è¶£ï¼Œæœ€å¤§äº®ç‚¹ï¼Œå¯èƒ½æ˜¯è´¯ç©¿å…¨ä¹¦çš„åŒçº¿ç”šè‡³åŽæœŸçš„ä¸‰çº¿å™äº‹ï¼Œæœ‰ä¸€ç§åœ¨çœ‹ç›–é‡Œå¥‡çš„ç”µå½±çš„æ„Ÿè§‰ã€‚æ–‡å­¦æ€§æ–¹é¢ï¼Œé«˜ä¸­æ—¶è¯»è¿‡ä½œè€…çš„ã€ŠæŒªå¨çš„æ£®æž—ã€‹ï¼Œè¯­è¨€é£Žæ ¼ä¼¼ä¹Žæ²¡æœ‰å˜åŒ–ï¼Œå¾ˆå¤šæ¯”å–»éƒ½æœ‰ä½œè€…â€”â€”ä¹Ÿè®¸æ˜¯å¤§å¤šæ•°æ—¥æœ¬ä½œå®¶â€”â€”çš„ç‰¹ç‚¹ï¼Œæ•´ä½“èŠ‚å¥è¿‡äºŽç¼“æ…¢ï¼Œå½“ç„¶ï¼Œè¿™ä¹Ÿæ›´èƒ½é”¤ç‚¼è¯»è€…çš„å¿ƒæ€ã€‚æˆ‘æ˜¯åœ¨é©¬å…‹æ€åŽŸç†æœŸæœ«è€ƒè¯•å‰ä¸€æ™šè¯»åˆ°æœ€åŽä¸€é¡µçš„ï¼Œä¹‹åŽæ¾äº†å£æ°”ï¼Œå¤§æ„Ÿæ„‰æ‚¦â€”â€”è‡ªå·±ç»ˆäºŽæ²¡æœ‰ä¸¢æŽ‰é•¿æ–‡æœ¬é˜…è¯»çš„èƒ½åŠ›ã€‚ æˆ‘ä»¬ä¹˜åè¿‡å±±è½¦é£žå‘æœªæ¥ï¼Œä»–å’Œæˆ‘çš„æ‰‹é‡Œå„æç€ä¸€å¼ ç¥¨ï¼Œé‚£æ˜¯é£žå‘æœªæ¥çš„å°èˆ¢æ¿ï¼Œèµ·ä¼çš„æ³¢æµªæ˜¯æˆ‘æ— ç•çš„æƒ³è±¡åŠ›ã€‚ä¹˜åæˆ‘çš„æƒ³è±¡åŠ›ï¼Œä»–ä»¬å°½æƒ…è¹‚èºè¿™äº›æ— è¾œçš„å¥³å­©å’Œç”·å­©ï¼Œè¿™äº›æ— è¾œçš„å°ç‹—å’Œå°çŒ«ã€‚åœ¨æ³¢æµªä¹‹ä¸‹ï¼Œåœ¨æ³¢æµªçš„ä¸‹é¢ä¸€ç›´åŒåŒç€è¡°å¼±çš„æ•…äº‹äººï¼Œä»–æ›¾ç»æ˜¯æœ€ä¼Ÿå¤§çš„åˆ›é€ è€…ï¼ŒåŒåŒåœ¨æœ€ä¸‹é¢çš„é£žå¾—æœ€é«˜ï¼Œå…¨æ˜¯ç—›è‹¦ï¼Œå…¨éƒ¨éƒ½æ˜¯ç—›è‹¦ã€‚é‚£äº›ä¸Žæˆ‘è€³è¯­è€…ï¼Œä¸ªä¸ªèªæ˜Žæ— æ¯”ï¼Œä»–ä»¬è¯´æ™ºæ…§æ¥è‡ªç—›è‹¦ï¼Œä»–ä»¬è¯´ï¼šæ¥ï¼Œç»™ä½ æ™ºæ…§ä¹‹è·¯ã€‚å“¦ï¼Œæ¯ä¸€ä¸ªåè¿‡å±±è½¦çš„äººéƒ½æ˜¯è¿‡å±±è½¦å»ºé€ åŽ‚çš„å·¥äººï¼Œæ¯ä¸€åŒæ‰‹éƒ½å……æ»¡æ™ºæ…§ï¼Œæ˜¯ç—›è‹¦çš„å·¥è‰ºåŒ ã€‚ä»–ä»¬ä¹Ÿåˆ¶é€ ä¸åŒçš„å¿ƒçµï¼Œè¿™äº›å¿ƒçµé‡Œå­•è‚²ç€å¥–åŠ±ï¼Œé‚£äº›æ¸´æœ›å¥–åŠ±çš„äººï¼Œé‚£äº›æœ€æ™ºæ…§çš„äººï¼Œä»–ä»¬æ€»åœ¨æ²‰é»˜ï¼Œä¸åœåœ°è¢«ä»Žè¿‡å±±è½¦ä¸ŠæŽ¨ä¸‹åŽ»ï¼Œåœ¨ç©ºä¸­é£˜è¡ï¼Œåœ¨é£˜è¡ä¸­ï¼Œæˆ‘ä»¬æŽ¥å»ï¼Œå°±åƒé‚£äº›æ‹äººï¼Œé‚£äº›è¢«åŽ‹ç¼©åœ¨è¯å…¸å†Œé¡µä¸­çš„çˆ±æƒ…æ•…äº‹ï¼Œè¿˜æœ‰å®¶åº­ï¼Œäººé—´çš„äº’ç›¸æ‹¯æ•‘ã€‚å¦‚æžœå­˜åœ¨ä¸€ä¸ªç©ºé—´ï¼Œæ¼‚æµ®ç€æ— æ•°åˆ—è¿‡å±±è½¦ï¼Œç—›è‹¦çš„è¿‡å±±è½¦â€¦â€¦ â€”â€”é©¬é›ï¼šã€Šæˆ‘ä»¬ä¹˜åç€è¿‡å±±è½¦é£žå‘æœªæ¥ã€‹ &emsp;&emsp;å…ƒæ—¦å°†è‡³ï¼Œæ”¶åˆ°ä¸€ç¯‡æŽ¨é€ï¼Œæ¥è‡ªé€ä¸–9å¹´çš„å¹´è½»è¯—äººçš„ä¸€é¦–å°è¯—ï¼Œå¾ˆæ˜¯å–œæ¬¢ã€‚&emsp;&emsp;åœ¨è¿œç¦»é˜…è¯»çš„æ—¥å­ï¼Œå®Œå…¨æ˜¯é çœ‹ä¸€äº›å°è¯—ç»´æŒç€æ–‡å­¦çš„ä¹ æƒ¯ã€‚ä¸Šä¸€æ¬¡å®Œæ•´çš„çœ‹å®Œä¸€æœ¬ä¹¦ï¼Œè¿˜æ˜¯åœ¨åŽ»å¹´çš„å…­ä¸ƒæœˆä»½ï¼Œè¯»å®Œäº†æ¯›å§†çš„ã€Šæœˆäº®ä¸Žå…­ä¾¿å£«ã€‹ä»¥åŠã€Šåˆ€é”‹ã€‹ã€‚å…¶é—´ï¼Œå¶å°”ä¹Ÿç¿»é˜…é‡‘åº¸å…ˆç”Ÿçš„æ­¦ä¾ å°è¯´ï¼Œå…¶ä¸­ã€Šç¬‘å‚²æ±Ÿæ¹–ã€‹æœ€æ˜¯å–œæ¬¢ï¼Œã€Šå¤©é¾™ã€‹ä¹Ÿç”šå¥½ã€‚ã€Šå¤©é¾™å…«éƒ¨ã€‹åº”è¯¥æ˜¯é‡‘åº¸çš„ä½œå“ä¸­è¯„ä»·æœ€é«˜çš„ä¸€éƒ¨ï¼Œæ‰€è°“â€œæ— äººä¸å†¤â€ï¼Œå¯Œæœ‰è¥¿æ–¹æˆå‰§çš„æ‚²å‰§è‰²å½©ã€‚å¯æƒœè¯»åˆ°ã€Šç¥žé›•ã€‹ï¼Œå¾€å¾€æ˜¯è¯»å‡ é¡µä¾¿æ”¾ä¸‹ï¼Œæ¬¡æ•°å¤šäº†ï¼Œå…´è¶£ä¹Ÿæ¶ˆç£¨çš„å·®ä¸å¤šã€‚æœ€åˆå¦‚æžœå…ˆä»Žã€Šç¥žé›•ã€‹å¼€å§‹è¯»ï¼Œæˆ–è®¸å°±ä¸ä¼šåˆè¿™ä¹ˆå¤§çš„å¤±è½æ„Ÿã€‚ä¹Ÿè®¸ç»å¤§å¤šæ•°æˆ‘è¿™ä¸ªå¹´çºªçš„äººï¼Œè®¤è¯†é‡‘åº¸çš„æ­¦ä¾ æ±Ÿæ¹–ï¼Œéƒ½æ˜¯ä»Žå°æ—¶å€™çš„ç”µè§†å‰§å¼€å§‹ï¼ŒçŸ¥é“é˜…è¯»äº†åŽŸè‘—ï¼Œæˆ‘æ‰æ˜Žç™½ï¼Œé‡‘åº¸æ­¦ä¾ çš„æ–‡å­¦é­…åŠ›ï¼Œè¿œè¿œä¸æ˜¯ç”µè§†å‰§æ‰€èƒ½å±•çŽ°çš„ï¼Œä¸è¯»åŽŸè‘—ï¼Œä¸è¯†é‡‘åº¸ã€‚&emsp;&emsp;æ­¦ä¾ å°è¯´çš„é‡ç‚¹å¤§éƒ½åœ¨æ•…äº‹çš„å…‰æ€ªç¦»å¥‡ï¼Œå…¶å®žè¶Šè¯»è¶Šæ…Œï¼Œä¹Ÿè®¸æ˜¯å› ä¸ºï¼Œåœ¨å…¶ä¸­å¾ˆéš¾æ‰¾åˆ°å½’å®¿â€”â€”æ‰€è°“çš„æ‰¾åˆ°å½’å®¿ï¼Œè¯´ä¸æ¸…é“ä¸æ˜Žï¼Œç„¶è€Œæˆ‘ä¹Ÿä¸æ•¢åœ¨æ­¤æ—¶å¦„è®ºâ€œæ­¦ä¾ å°è¯´â€çš„æ–‡å­¦æ„ä¹‰ã€‚åŽ»å¹´ï¼Œæœ‰å¹¸è¯»äº†æ²ˆä»Žæ–‡å…ˆç”Ÿçš„ã€Šè¾¹åŸŽã€‹ï¼Œåœ¨å§‹ç»ˆå¼¥æ¼«ä¸€å±‚æ·¡æ·¡é›¾çº±çš„æ¹˜è¥¿ï¼Œæ—¶é—´ç¼“ç¼“æµæ·Œï¼Œé£Žæ™¯å¦‚æ¢¦ä¼¼å¹»ã€‚æ­¤æ—¶å›žæƒ³ï¼Œè„‘ä¸­æµ®çŽ°å‡ºé›·å£°å¤§ä½œçš„é›¨å¤œï¼Œæ¸¡èˆ¹çš„å°å§‘å¨˜åœ¨ç¡æ¢¦ä¸­å¤±åŽ»äº†ç›¸ä¾ä¸ºå‘½çš„çˆ·çˆ·ï¼Œæœˆè‰²ä¸‹æ²³å¯¹å²¸æ¢¦ä¸­äººå”±æƒ…æ­Œçš„èº«å½±ä¹Ÿæ°¸è¿œçš„ç¦»å¥¹è€ŒåŽ»ï¼Œè¿œå¤„çš„å°åŸŽèŒ¶å³’åœ¨é›·å£°ä¸­ä¸€é—ªè€Œè¿‡ï¼Œé»˜é»˜æ— è¨€ã€‚åœ¨è¯»å®Œã€Šè¾¹åŸŽã€‹çš„ä¸€æ®µæ—¶é—´é‡Œï¼Œæˆ‘éƒ½ææä¸å®‰ï¼Œæ¯æ¬¡èµ°è¿‡å›¾ä¹¦é¦†çš„è¿‡é“ï¼Œéƒ½è¦å°å¿ƒç¿¼ç¿¼ï¼Œç”Ÿæ€•ç ´åäº†å¿ƒä¸­é‚£ç¾Žå¥½è€Œå¹³æ·¡çš„â€œå¼‚ä¸–ç•Œâ€ã€‚&emsp;&emsp;è¿™ç§ä¹ æƒ¯åœ¨ä¸‹åŠå¹´æ¶ˆå¤±çš„ä¸€å¹²äºŒå‡€ï¼Œä¸ºäº†æ¥å¹´çš„å¤å¤©èƒ½å¤Ÿæ‰¾åˆ°ä¸€ä»½å¿ƒä»ªçš„å®žä¹ ï¼Œä¸å¾—ä¸è¿½å¯»æ—¶é—´çš„è„šæ­¥ï¼Œæ›´åŠ åœ°æŠ•èº«åˆ°ä»£ç ä¸Žç®—æ³•çš„ä¸–ç•Œï¼Œè¯¾ç¨‹åˆå®žåœ¨ä¸æ˜¯è½»æ¾ï¼Œçºµç„¶æµ·ç»µé‡Œè¿˜æœ‰æ°´ï¼Œä¹Ÿå†æ²¡åŠ›æ°”å†åŽ»æŒ¤å¼„ã€‚å…¶é—´åªèƒ½åœ¨å…¬ä¼—å·çš„è¯—æ­ŒæŽ¨é€é‡Œï¼Œç•¥è§£é¥¥æ¸´ã€‚åœ¨ç´§å‡‘å¿«èŠ‚å¥çš„ç”Ÿæ´»ä¸­ï¼Œè¯»è¯—ç¡®å®žä¸å®¹æ˜“ã€‚&emsp;&emsp;ç­‰åˆ°æ–°ä¸€å¹´çš„é’Ÿå£°æ•²å“ï¼Œå‘çŽ°æ—¶é—´å·²ç„¶æ‚„æ‚„åœ°èµ°è¿œï¼Œè¡ŒåŠ¨éšè”½è‡ªå¦‚ï¼Œä¸ä¸ºäººå¯Ÿè§‰ã€‚åŽŸæ¥è‡ªå·±æœ‰åŠå¹´ï¼Œæ²¡æœ‰å¥½å¥½è¯»è¿‡ä¸€æœ¬ä¹¦ã€‚ä¹Ÿè®¸äººå°±æ˜¯è¿™æ ·ï¼Œç­‰åˆ°æ—¥åŽ†è¢«ç¿»è¿‡ä¸€é¡µï¼Œæ‰æç„¶å¤§æ‚Ÿï¼Œå¼€å§‹æ„Ÿæ…¨å…‰é˜´ä¼¼ç®­ï¼Œç”Ÿå‡ºè­¦è§‰ï¼Œä¸ç”±è‡ªä¸»åœ°è¦å›žå¿†è¿‡åŽ»ï¼Œæ‚”æ¨å’Œæ„§ç–šä¹Ÿä¼šåº”æ™¯åœ°æ¶Œä¸Šå¿ƒå¤´ï¼Œè¿‡åŽç…§æ—§ã€‚&emsp;&emsp;ç”Ÿæ´»ä¹Ÿè®¸å¦‚è¿‡å±±è½¦ï¼Œè½½ç€æ— éœ€é—¨ç¥¨çš„ä¹˜å®¢ï¼Œé£žå‘æœªæ¥ã€‚ç„¶è€Œæœªæ¥å¦‚ä½•ï¼Œèµ·ä¼ä¸Žæ³¢æŠ˜åœ¨å“ªé‡Œä¼šå‡ºçŽ°ï¼Œå´æ— äººçŸ¥æ™“ï¼Œæ¯ä¸ªç”Ÿæ¥ä¾¿å¤±åŽ»é€‰æ‹©çš„æ—…å®¢ï¼Œæœ‰äº›ä½¿åŠ²æŠ“ç€å®‰å…¨æ†ï¼Œå®³æ€•è¢«ç”©ä¸‹ï¼Œæœ‰äº›åˆ™æ•žå¼€æ€€æŠ±ï¼Œäº«å—åˆºæ¿€ä¸Žå°–å«ã€‚&emsp;&emsp;å’Œè­¬å¦‚éŸ³ä¹ã€ç”µå½±ä¹‹ç±»çš„å…´è¶£ä¸åŒï¼Œé˜…è¯»æ˜¯æˆ‘ä¸€ç”Ÿéƒ½è¿½éšçš„ç›®æ ‡ï¼Œç»å…¸çš„æ–‡å­¦ä½œå“ï¼Œä¸ä»…èµäºˆä½ é€ƒé¿ç”Ÿæ´»çš„ç©ºé—´ï¼Œä¹Ÿé¼“èˆžæ¯ä¸€ä¸ªäººå‹‡æ•¢é¢å¯¹ç‹‚é£Žæš´é›¨ï¼›æ€…ç„¶è‹¥å¤±æ—¶ï¼Œé™ªä½ æ—…è¡Œï¼Œæ˜¥é£Žå¾—æ„æ—¶ä¾¿æ— è¨€æ²‰é»˜ï¼›ä½ å­¤ç‹¬ï¼Œä¹¦ä¸­æœ‰æ›´å­¤ç‹¬å¯‚å¯žè€…ï¼Œä½ æ‚²è‹¦ï¼Œä¸–äººçš†æ‚²æ— ä¸è‹¦ã€‚æœ‰äººè¯´è¿‡ï¼Œâ€œè¯»ä¹¦äººæ˜¯ä¸–é—´å¹¸ç¦äººï¼Œå› ä¸ºä»–é™¤äº†æ‹¥æœ‰çŽ°å®žçš„ä¸–ç•Œä¹‹å¤–ï¼Œè¿˜æ‹¥æœ‰å¦ä¸€ä¸ªæ›´ä¸ºæµ©ç€šä¹Ÿæ›´ä¸ºä¸°å¯Œçš„ä¸–ç•Œâ€â€”â€”ä»¥æ­¤ï¼Œæ¿€åŠ±è‡ªå·±ï¼Œåœ¨è¶Šæ¥è¶Šç¹å¿™çš„ç”Ÿæ´»ä¸­ï¼Œæ°¸è¿œè®°å¾—æ‹¿èµ·ä¸€æœ¬ä¹¦ã€‚]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>éšç¬”</tag>
        <tag>è¯—æ­Œ</tag>
      </tags>
  </entry>
</search>
