{"meta":{"title":"ReBE","subtitle":"Febersçš„åšå®¢","description":null,"author":"Febers","url":"http://yoursite.com"},"pages":[{"title":"categories","date":"2019-01-11T16:43:43.000Z","updated":"2019-01-11T16:44:58.000Z","comments":true,"path":"categories/index.html","permalink":"http://yoursite.com/categories/index.html","excerpt":"","text":"document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });"},{"title":"tags","date":"2019-03-15T15:33:56.000Z","updated":"2019-03-15T15:46:34.000Z","comments":true,"path":"tags/index.html","permalink":"http://yoursite.com/tags/index.html","excerpt":"","text":"document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });"}],"posts":[{"title":"Markdown è¯­æ³•è¯¦è§£","slug":"Markdown-è¯­æ³•è¯¦è§£","date":"2019-05-19T07:36:02.000Z","updated":"2019-05-19T13:13:38.000Z","comments":true,"path":"Markdown-è¯­æ³•è¯¦è§£/","link":"","permalink":"http://yoursite.com/Markdown-è¯­æ³•è¯¦è§£/","excerpt":"å¼•è¨€è¿™ç¯‡æ–‡ç« æœ¬åº”è¯¥åœ¨æ­å»ºåšå®¢ä¹‹åå°±å‘å¸ƒï¼Œä¸€å¼€å§‹è§‰å¾— Markdown çš„è¯­æ³•è¶³å¤Ÿç®€å•ï¼Œç†Ÿèƒ½ç”Ÿå·§ï¼Œæ— éœ€èŠ±è´¹ç¯‡å¹…å»è®°å½•ï¼›è¿‘æ¥æ— äº‹ï¼Œåçœäº†ä¸€ä¸‹è‡ªå·±çš„é”™è¯¯è®¤è¯†ï¼Œé™¤å»ä¸€äº›é«˜çº§ç”¨æ³•ï¼Œäº†è§£è¿™é—¨ç”¨é€”å¹¿æ³›çš„æ ‡è®°è¯­è¨€çš„ç”±æ¥ä¸å‘å±•ï¼Œå›é¡¾å®ƒçš„åŸºç¡€è¯­æ³•å¦‚ä½•å°†æ’ç‰ˆå˜æˆä¸€ä»¶å……æ»¡ä¹è¶£çš„äº‹ï¼Œå®Œå…¨å€¼å¾—ä¸“é—¨å†™ä¸€ç¯‡æ–‡ç« ã€‚","text":"å¼•è¨€è¿™ç¯‡æ–‡ç« æœ¬åº”è¯¥åœ¨æ­å»ºåšå®¢ä¹‹åå°±å‘å¸ƒï¼Œä¸€å¼€å§‹è§‰å¾— Markdown çš„è¯­æ³•è¶³å¤Ÿç®€å•ï¼Œç†Ÿèƒ½ç”Ÿå·§ï¼Œæ— éœ€èŠ±è´¹ç¯‡å¹…å»è®°å½•ï¼›è¿‘æ¥æ— äº‹ï¼Œåçœäº†ä¸€ä¸‹è‡ªå·±çš„é”™è¯¯è®¤è¯†ï¼Œé™¤å»ä¸€äº›é«˜çº§ç”¨æ³•ï¼Œäº†è§£è¿™é—¨ç”¨é€”å¹¿æ³›çš„æ ‡è®°è¯­è¨€çš„ç”±æ¥ä¸å‘å±•ï¼Œå›é¡¾å®ƒçš„åŸºç¡€è¯­æ³•å¦‚ä½•å°†æ’ç‰ˆå˜æˆä¸€ä»¶å……æ»¡ä¹è¶£çš„äº‹ï¼Œå®Œå…¨å€¼å¾—ä¸“é—¨å†™ä¸€ç¯‡æ–‡ç« ã€‚ å…³äºMarkdown æ˜¯ä¸€é—¨è½»é‡çº§çš„æ ‡è®°è¯­è¨€ï¼Œç”±ç¾å›½å·¥ç¨‹å¸ˆ John Gruber äº2004å¹´åˆ›é€ ã€‚è¿™é—¨è¯­è¨€çš„ç›®çš„æ˜¯è®©äººä»¬ä½¿ç”¨æ˜“äºé˜…è¯»ã€æ˜“äºæ’°å†™çš„çº¯æ–‡å­—æ ¼å¼ï¼Œå¹¶é€‰æ‹©æ€§åœ°è½¬æ¢æˆæœ‰æ•ˆçš„ XHTMLï¼ˆæˆ–æ˜¯ HTMLï¼‰ã€‚ Markdown æ‰€è°“çš„æ˜“è¯»å¹¶ä¸æ˜¯æŒ‡æ’ç‰ˆä¹‹åå‘ˆç°çš„ç»“æœæ˜“è¯»ï¼Œè€Œæ˜¯æŒ‡åŸå§‹æ ¼å¼ä¸‹çš„æ–‡ä»¶ä¾ç„¶æ‹¥æœ‰ä¼˜ç§€çš„å¯è¯»æ€§ï¼Œä¸ä¼šåƒé˜…è¯»åŸå§‹ HTML ä»£ç ä¸€æ ·ï¼Œæ»¡çœ¼éƒ½æ˜¯å°–æ‹¬å·ï¼ˆå¯ä»¥é€šè¿‡ å³é”®æµè§ˆå™¨é¡µé¢ -> æŸ¥çœ‹æºä»£ç  ä½“éªŒï¼‰ã€‚Markdown çš„æ˜“å†™åˆ™ä½“ç°åœ¨å…¶è¯­æ³•è¶³å¤Ÿç®€å•ï¼Œå­¦ä¹ æ›²çº¿å¹³ç¼“ï¼Œå¹¶ä¸”åœ¨å†™ä½œä¸­åŸºæœ¬å¯ä»¥è„±ç¦»é¼ æ ‡æ“ä½œã€‚ Markdown çš„è½»é‡çº§æ˜¯ç›¸å¯¹äº LaTeX æ¥è¯´çš„ï¼Œè¿™ç§åŸºäº Tex çš„æ’ç‰ˆç³»ç»Ÿå¹¿æ³›è¿ç”¨åœ¨é«˜è´¨é‡ä¹¦ç±å°åˆ·å’Œå¤æ‚å…¬å¼è®ºæ–‡ä¸­ã€‚ä¸è¿‡ä½¿ç”¨ Markdown ä»ç„¶å¯ä»¥ä½¿ç”¨ä¸€äº›åŸºæœ¬çš„æ•°å­¦å…¬å¼ï¼Œæ¯”å¦‚$ E = mc^2 $ã€$ \\int_0^xf(x)dx $ $ E = mc^2 $ $ \\int_0^xf(x)dx $ è¿™éœ€è¦ä¸åŒå¹³å°ä¸Šçš„ Markdown æ•°å­¦å…¬å¼æ’ä»¶çš„æ”¯æŒï¼Œæœ¬åšå®¢ä½¿ç”¨Hexo + Github Pagesæ­å»ºï¼Œå¯ä»¥é€šè¿‡å®‰è£… MathJax å®ç°ã€‚ åˆ†ç±»è·Ÿæ—©æœŸçš„ HTML ç±»ä¼¼ï¼ŒMarkdown åœ¨å‘å±•çš„è¿‡ç¨‹ä¸­è¡ç”Ÿå‡ºäº†ä¸åŒçš„ç‰ˆæœ¬ï¼Œå®ƒä»¬çš„åŸºæœ¬è¯­æ³•ä¸Šç›¸é€šï¼Œä½†æ˜¯åœ¨è¯¸å¦‚è¡¨æ ¼ã€é”šç‚¹ã€æ—¶åºå›¾ç­‰å®ç°ä¸Šå‡ºç°äº†ä¸ä¸€è‡´ã€‚åœ¨å…³äºè¯­æ³•è§„èŒƒåŒ–çš„è®¨è®ºä¸­ï¼Œä½œè€… John Gruber è®¤ä¸ºï¼Œä¸åŒçš„ç½‘ç«™ï¼ˆå’Œäººä»¬ï¼‰æœ‰ä¸åŒçš„éœ€æ±‚ï¼Œæ²¡æœ‰ä¸€ç§è¯­æ³•å¯ä»¥è®©æ‰€æœ‰äººæ»¡æ„ã€‚ ç°ä»Š Markdown çš„ä¸»è¦åˆ†ç±»å¦‚ä¸‹ CommonMarkï¼šç”± Stack Exchangeã€Githubã€Reddit ç­‰ç»„ç»‡å‘èµ·çš„æ ‡å‡†åŒ–é¡¹ç›®ã€‚ä¸€å¼€å§‹åç§°ä¸ºStandard Markdownï¼Œç”±äºé­åˆ°ä½œè€…çš„åå¯¹ï¼Œæ›´åCommonMark GFMï¼šGithub Flavored Markdownï¼Œç”± Github äº2017å¹´å‘å¸ƒï¼ŒåŸºäº CommonMarkã€‚ç›¸ä¿¡å¾ˆå¤šå¼€å‘è€…éƒ½æ˜¯é€šè¿‡ä¸€ä»½README.mdæ–‡ä»¶è®¤è¯† Markdownï¼Œè¿™ä¹Ÿæ˜¯æœ¬åšå®¢é‡‡ç”¨çš„ç‰ˆæœ¬ã€‚ Markdown Extraï¼šåŸºäº PHPã€Python å’Œ Rudy ä¸­å®ç°çš„ Markdownã€‚ ç¼–è¾‘å™¨å¸‚é¢ä¸Šä¼˜ç§€çš„ Markdown ç¼–è¾‘å™¨å±‚å‡ºä¸ç©·ï¼Œè¿™ä¹Ÿæœ‰åŠ›æ¨åŠ¨äº† Markdown çš„å‘å±•ã€‚å¯ä»¥ä½¿ç”¨Sublime Texté…åˆæ’ä»¶ç¼–è¾‘å†™ä½œï¼Œå¯ä»¥ä½¿ç”¨Typoraç­‰ä¼˜ç§€çš„è·¨å¹³å°å·¥å…·å®ç°æ‰€è§å³æ‰€å¾—ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ Cmd Markdown åœ¨çº¿ä¹¦å†™å¹¶å¯¼å‡ºã€å‘å¸ƒã€‚ åšä¸»ä½¿ç”¨çš„æ˜¯Typoraã€‚ ç›¸å…³é“¾æ¥ï¼šç å­—å¿…å¤‡ï¼š18 æ¬¾ä¼˜ç§€çš„ Markdown å†™ä½œå·¥å…· | 2015 å¹´åº¦ç›˜ç‚¹ã€ ç”¨ Markdown å†™ä½œç”¨ä»€ä¹ˆæ–‡æœ¬ç¼–è¾‘å™¨ï¼Ÿ - çŸ¥ä¹ åˆçº§è¯­æ³•æ ‡é¢˜123456# ä¸€çº§æ ‡é¢˜## äºŒçº§æ ‡é¢˜### ä¸‰çº§æ ‡é¢˜#### å››çº§æ ‡é¢˜##### äº”çº§æ ‡é¢˜###### å…­çº§æ ‡é¢˜ ä¸‰çº§æ ‡é¢˜å››çº§æ ‡é¢˜äº”çº§æ ‡é¢˜å…­çº§æ ‡é¢˜ å¦å¤–åœ¨ GFM ä¸­ï¼Œä»»æ„ 1-6 ä¸ª # æ ‡æ³¨çš„æ ‡é¢˜éƒ½ä¼šè¢«æ·»åŠ ä¸ŠåŒåçš„é”šç‚¹é“¾æ¥ï¼Œæ¯”å¦‚# First Titleä¼šè¢«æ ‡æ³¨æˆ[First Title](#first-title)ï¼ˆæ³¨æ„å°å†™è½¬æ¢ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨æ–‡ç« çš„å…¶ä»–åœ°æ–¹ï¼Œä½¿ç”¨æ ‡æ³¨ä¹‹åçš„æ ¼å¼è·³è½¬åˆ°ä»»ä½•æ ‡é¢˜ï¼Œæ¯”å¦‚[è·³è½¬è‡³å¼•è¨€](#å¼•è¨€) æ–‡å­— æ ¼å¼ æ•ˆæœ *æ–œä½“1* æ–œä½“1 _æ–œä½“2_ æ–œä½“2 **ç²—ä½“1** ç²—ä½“1 __ç²—ä½“2__ ç²—ä½“2 ~~åˆ é™¤çº¿~~ åˆ é™¤çº¿ ***æ–œç²—ä½“1*** æ–œç²—ä½“1 ___æ–œç²—ä½“2___ æ–œç²—ä½“2 ***~~æ–œç²—ä½“åˆ é™¤çº¿1~~***ã€~~***æ–œç²—ä½“åˆ é™¤çº¿2***~~ æ–œç²—ä½“åˆ é™¤çº¿ è¡¨æƒ…GFM è¯­æ³•æ”¯æŒæ·»åŠ  emoji è¡¨æƒ…ï¼Œè¾“å…¥ä¸åŒçš„ç¬¦å·ç ï¼ˆä¸¤ä¸ªå†’å·åŒ…å›´çš„å­—ç¬¦ï¼‰å¯ä»¥æ˜¾ç¤ºå‡ºä¸åŒçš„è¡¨æƒ…ã€‚æ¯”å¦‚:stuck_out_tongue_winking_eye:ï¼šğŸ˜œ ğŸ‘» ğŸ¶ ğŸ’© ğŸ”¥ ğŸ™‡ â‰ ğŸš£ ğŸ‰ ğŸŠ ğŸ‚ å¯ä»¥åœ¨æ­¤æ‰¾åˆ°ä¸åŒè¡¨æƒ…å¯¹åº”çš„ç¬¦å·ç ï¼šEmoji cheat sheet for GitHub, Basecamp, Slack & more Hexo é»˜è®¤ä¸æ”¯æŒ emoji è¡¨æƒ…ï¼Œå¯ä»¥é€šè¿‡å®‰è£… hexo-filter-github-emojis å®ç° åˆ†å‰²çº¿ä½¿ç”¨ä¸‰ä¸ªï¼ˆæˆ–å¤šä¸ªè¿ç»­ï¼‰çš„-ã€*ã€-å®ç°åˆ†å‰²çº¿æ•ˆæœ 123---___****** é“¾æ¥é“¾æ¥åˆ†ä¸ºæ–‡å­—é“¾æ¥å’Œå›¾ç‰‡é“¾æ¥B æ–‡å­—é“¾æ¥[ReBe](https://febers.github.io \"é¼ æ ‡æ‚¬åœæ˜¾ç¤º\")ï¼š[ReBe æ”¯æŒä½¿ç”¨æ ‡è¯†ç¬¦æ ‡å¿—åœ°å€ï¼Œå°†çœŸæ­£çš„URLåœ°å€æ”¾åœ¨æ–‡æœ«ï¼Œæ¯”å¦‚ 12[Github][Github URL][Github URL]:https://github.com/Febers æ•ˆæœå¦‚ä¸‹: Github å›¾ç‰‡é“¾æ¥åŸºæœ¬æ ¼å¼ä¸º![title](url)ï¼Œå…¶ä¸­titleå¯çœç•¥ï¼Œ![](https://camo.githubusercontent.com/abf9d87ce112444bca1ddfffaa2063f02a2c26d0/68747470733a2f2f7261772e6769746875622e636f6d2f6164616d2d702f6d61726b646f776e2d686572652f6d61737465722f73746f72652d6173736574732f646f732d65717569732d4d44482e6a7067) åˆ—è¡¨æœ‰åºåˆ—è¡¨çœ‹èµ·æ¥å¹¶ä¸æ˜æ˜¾ 121. PHPæ˜¯æœ€å¥½çš„è¯­è¨€ï¼Ÿ2. PHPæ˜¯æœ€å¥½çš„è¯­è¨€ï¼ PHPæ˜¯æœ€å¥½çš„è¯­è¨€ï¼Ÿ PHPæ˜¯æœ€å¥½çš„è¯­è¨€ï¼ æ— åºåˆ—è¡¨å¯ä»¥ä½¿ç”¨-ã€*ã€+å¼€å¤´æ¥ç©ºæ ¼ï¼Œä½†åœ¨å¤šçº§åˆ—è¡¨ä¸­æœ€å¥½ä½¿ç”¨- 12345- PHPæ˜¯æœ€å¥½çš„è¯­è¨€ï¼Ÿ* PHPæ˜¯æœ€å¥½çš„è¯­è¨€ã€‚+ PHPæ˜¯æœ€å¥½çš„è¯­è¨€ï¼ - æ¯«æ— ç–‘é—® - ä¼—æ‰€å‘¨çŸ¥ PHPæ˜¯æœ€å¥½çš„è¯­è¨€ï¼Ÿ PHPæ˜¯æœ€å¥½çš„è¯­è¨€ã€‚ PHPæ˜¯æœ€å¥½çš„è¯­è¨€ï¼ æ¯«æ— ç–‘é—® ä¼—æ‰€å‘¨çŸ¥ å¤é€‰æ¡†åˆ—è¡¨1234- [x] å¤§ä¸€- [x] å¤§äºŒ- [ ] å¤§ä¸‰- [ ] å¤§å›› [x] å¤§ä¸€ [x] å¤§äºŒ [ ] å¤§ä¸‰ [ ] å¤§å›› Hexo é»˜è®¤çš„æ¸²æŸ“å¼•æ“ Marked ä¸æ”¯æŒ TODO listï¼Œå¯ä»¥æ›´æ¢ä¸º markdown-itï¼Œä¹‹åå®ç°çš„æ•ˆæœå¦‚ Typora é¢„è§ˆ å¼•ç”¨ä¸é«˜äº®å¼•ç”¨ä½¿ç”¨>å®ç°å¼•ç”¨ï¼Œå¤šä¸ª>å®ç°å¼•ç”¨å±‚çº§ 1234> PHP>> æ˜¯>>> æœ€å¥½çš„>>>> è¯­è¨€ PHP æ˜¯ æœ€å¥½çš„ è¯­è¨€ ä¸€èˆ¬ç”¨åœ¨å¼•ç”¨åŸæ–‡å†…å®¹ä¸­ ä¸€è¯­æœªäº†ï¼Œåªå¬åé™¢ä¸­æœ‰äººç¬‘å£°ï¼Œè¯´ï¼šâ€œæˆ‘æ¥è¿Ÿäº†ï¼Œä¸æ›¾è¿æ¥è¿œå®¢ï¼â€é»›ç‰çº³ç½•é“ï¼šâ€œè¿™äº›äººä¸ªä¸ªçš†æ•›å£°å±æ°”ï¼Œæ­è‚ƒä¸¥æ•´å¦‚æ­¤ï¼Œè¿™æ¥è€…ç³»è°ï¼Œè¿™æ ·æ”¾è¯æ— ç¤¼ï¼Ÿâ€å¿ƒä¸‹æƒ³æ—¶ï¼Œåªè§ä¸€ç¾¤åª³å¦‡ä¸«é¬Ÿå›´æ‹¥ç€ä¸€ä¸ªäººä»åæˆ¿é—¨è¿›æ¥ã€‚è¿™ä¸ªäººæ‰“æ‰®ä¸ä¼—å§‘å¨˜ä¸åŒï¼Œå½©ç»£è¾‰ç…Œï¼Œæè‹¥ç¥å¦ƒä»™å­ï¼šå¤´ä¸Šæˆ´ç€é‡‘ä¸å…«å®æ”’ç é«»ï¼Œç»¾ç€æœé˜³äº”å‡¤æŒ‚ç é’—ï¼›é¡¹ä¸Šæˆ´ç€èµ¤é‡‘ç›˜è­ç’çåœˆï¼Œè£™è¾¹ç³»ç€è±†ç»¿å®«ç»¦ï¼ŒåŒè¡¡æ¯”ç›®ç«ç‘°ä½©ï¼›èº«ä¸Šç©¿ç€ç¼•é‡‘ç™¾è¶ç©¿èŠ±å¤§çº¢æ´‹ç¼çª„è¤ƒè¢„ï¼Œå¤–ç½©äº”å½©åˆ»ä¸çŸ³é’é“¶é¼ è¤‚ï¼›ä¸‹ç€ç¿¡ç¿ æ’’èŠ±æ´‹ç»‰è£™ã€‚ä¸€åŒä¸¹å‡¤ä¸‰è§’çœ¼ï¼Œä¸¤å¼¯æŸ³å¶åŠæ¢¢çœ‰ï¼Œèº«é‡è‹—æ¡ï¼Œä½“æ ¼é£éªšï¼Œç²‰é¢å«æ˜¥å¨ä¸éœ²ï¼Œä¸¹å”‡æœªèµ·ç¬‘å…ˆé—»ã€‚é»›ç‰è¿å¿™èµ·èº«æ¥è§ã€‚ é«˜äº®ä½¿ç”¨å•ä¸ªåå¼•å·å®ç°å•è¡Œæ–‡æœ¬é«˜äº®ï¼Œä¸‰ä¸ªåå¼•å·å®ç°ä»£ç å—é«˜äº®ã€‚å¯ä»¥åœ¨ç¬¬ä¸€ä¸ª123456789```markdownPHPæ˜¯`æœ€å¥½çš„`è¯­è¨€â€‹```Kotlinfun main(args: Array) { print(\"hello\")}â€‹ 1234567PHPæ˜¯`æœ€å¥½çš„`è¯­è¨€```Kotlinfun main(args: Array) { print(\"hello\")} é«˜çº§è¿›é˜¶åœ¨ä¸åŒçš„ Markdown ç‰ˆæœ¬ä¸­å®ç°å¯èƒ½ä¸åŒ è¡¨æ ¼1234| åºå· | åˆ—å1 | åˆ—å2 || - | - | - || 0 | ä¸€ä¸€ | ä¸€äºŒ || 1 | äºŒä¸€ | äºŒäºŒ | åºå· åˆ—å1 åˆ—å2 0 ä¸€ä¸€ ä¸€äºŒ 1 äºŒä¸€ äºŒäºŒ åœ¨åˆ†éš”è¡Œï¼ˆç¬¬äºŒè¡Œï¼‰ä¸­çš„-å³è¾¹æ·»åŠ :ï¼Œè¡¨æ ¼å†…å®¹å®ç°å³å¯¹é½æ•ˆæœï¼Œä¸¤è¾¹éƒ½åŠ åˆ™ä¸ºå±…ä¸­å¯¹é½ï¼Œé»˜è®¤ä¸ºå·¦å¯¹é½ 123| åºå· | åˆ—å1 | åˆ—å2 || :-: | :-: | :-: || 0 | ä¸€ä¸€ | ä¸€äºŒ | åºå· åˆ—å1 åˆ—å2 0 ä¸€ä¸€ ä¸€äºŒ æµç¨‹å›¾åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†å®šä¹‰å…ƒç´ ï¼Œç¬¬äºŒéƒ¨åˆ†å®šä¹‰å…ƒç´ èµ°å‘ã€‚å®šä¹‰å…ƒç´ è¯­æ³•ä¸ºtag=>type: content:>urlï¼Œå…¶ä¸­tagä¸ºå…ƒç´ åç§°ï¼Œtypeä¸ºå…ƒç´ ç±»å‹ï¼Œæœ‰ä»¥ä¸‹6ç§ type å«ä¹‰ start å¼€å§‹ end ç»“æŸ operation æ“ä½œ subroutine å­ç¨‹åº condition æ¡ä»¶ inputoutput è¾“å…¥æˆ–è¾“å‡º contentä¸ºåœ¨æµç¨‹å›¾æ–¹æ¡†ä¸­æ˜¾ç¤ºçš„å†…å®¹ 12345678910st=>start: å¼€å§‹:>https://www.markdown-syntax.comio=>inputoutput: è¾“å…¥æˆ–è¾“å‡ºop=>operation: æ“ä½œcond=>condition: Yes or No?sub=>subroutine: å­ç¨‹åºe=>end: ç»“æŸst->io->op->condcond(yes)->econd(no)->sub->io Hexo åŸç”Ÿå¹¶ä¸æ”¯æŒæµç¨‹å›¾ï¼Œéœ€è¦å®‰è£…hexo-filter-flowchart æ—¶åºå›¾titleä¸ºæ—¶åºå›¾æ ‡é¢˜ï¼Œparticipantå®šä¹‰æ—¶åºå›¾å¯¹è±¡ï¼Œnoteå®šä¹‰æ—¶åºå›¾ä¸­çš„è¯´æ˜ï¼Œæœ‰ä¸‰ç§æ–¹ä½æ§åˆ¶ left of, è¡¨ç¤ºè¯´æ˜ä½äºå½“å‰å¯¹è±¡çš„å·¦ä¾§ right of, è¡¨ç¤ºè¯´æ˜ä½äºå½“å‰å¯¹è±¡çš„å³ä¾§ over, è¡¨ç¤ºè¯´æ˜è¦†ç›–åœ¨å½“å‰å¯¹è±¡ï¼ˆä»¬ï¼‰ä¸Š ä¸åŒå¯¹è±¡ä¹‹é—´ä½¿ç”¨ç®­å¤´æ§åˆ¶æŒ‡å‘ ->ï¼šå®çº¿å®ç®­å¤´ â€“>ï¼šè™šçº¿å®ç®­å¤´ ->>ï¼šå®çº¿è™šç®­å¤´ â€“>>ï¼šè™šçº¿è™šç®­å¤´ 1234567891011121314title: æ—¶åºå›¾æ ‡é¢˜participant å¤§ä¸€participant å¤§äºŒparticipant å¤§ä¸‰note left of å¤§ä¸€: å¤§ä¸€å¥½å¥½å­¦ä¹ note over å¤§äºŒ: å¤§äºŒè¯¾ç¨‹å¾ˆå¤šnote right of å¤§ä¸‰: å¤§ä¸‰é¢ä¸´æ¯•ä¸šå¤§ä¸€->å¤§ä¸€:å¤§ä¸€ç•™çº§å¤§ä¸€->å¤§äºŒ:å¤§ä¸€è¿Ÿæ—©è¦åˆ°å¤§äºŒå¤§äºŒ-->å¤§ä¸‰:å¤§äºŒä¸ä¸€å®šèƒ½å‡å¤§ä¸‰å¤§äºŒ->>å¤§ä¸‰:å¤§äºŒä¸ä¸€å®šèƒ½å‡å¤§ä¸‰å¤§ä¸‰-->>å¤§ä¸€:å¤§ä¸‰ä¹Ÿå¯èƒ½å›ç‚‰é‡é€  Hexo é»˜è®¤åŒæ ·ä¸æ”¯æŒæ—¶åºå›¾ï¼Œä½¿ç”¨`hexo-filter-sequenceã€‚å…·ä½“çš„åšæ³•å‚è€ƒ ä¸º Hexo å¢åŠ æ—¶åºå›¾è§£æåŠŸèƒ½st=>start: å¼€å§‹:>https://www.markdown-syntax.com io=>inputoutput: è¾“å…¥æˆ–è¾“å‡º op=>operation: æ“ä½œ cond=>condition: Yes or No? sub=>subroutine: å­ç¨‹åº e=>end: ç»“æŸ st->io->op->cond cond(yes)->e cond(no)->sub->io{\"scale\":1,\"line-width\":2,\"line-length\":50,\"text-margin\":10,\"font-size\":12} var code = document.getElementById(\"flowchart-0-code\").value; var options = JSON.parse(decodeURIComponent(document.getElementById(\"flowchart-0-options\").value)); var diagram = flowchart.parse(code); diagram.drawSVG(\"flowchart-0\", options);title: å¤§å­¦ç”Ÿæ´» participant å¤§ä¸€ participant å¤§äºŒ participant å¤§ä¸‰ note left of å¤§ä¸€: å¤§ä¸€å¥½å¥½å­¦ä¹  note over å¤§äºŒ: å¤§äºŒè¯¾ç¨‹å¾ˆå¤š note right of å¤§ä¸‰: å¤§ä¸‰é¢ä¸´æ¯•ä¸š å¤§ä¸€->å¤§ä¸€:å¤§ä¸€æƒ¨é­ç•™çº§ å¤§ä¸€->å¤§äºŒ:å¤§ä¸€è¿Ÿæ—©è¦åˆ°å¤§äºŒ å¤§äºŒ-->å¤§ä¸‰:å¤§äºŒä¸ä¸€å®šèƒ½å‡å¤§ä¸‰ å¤§äºŒ->>å¤§ä¸‰:å¤§äºŒä¸ä¸€å®šèƒ½å‡å¤§ä¸‰ å¤§ä¸‰-->>å¤§ä¸€:å¤§ä¸‰ä¹Ÿå¯èƒ½å›ç‚‰é‡é€ {\"theme\":\"simple\"} var code = document.getElementById(\"sequence-0-code\").value; var options = JSON.parse(decodeURIComponent(document.getElementById(\"sequence-0-options\").value)); var diagram = Diagram.parse(code); diagram.drawSVG(\"sequence-0\", options); document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Markdown","slug":"Markdown","permalink":"http://yoursite.com/categories/Markdown/"}],"tags":[{"name":"Markdown","slug":"Markdown","permalink":"http://yoursite.com/tags/Markdown/"}]},{"title":"åˆ©ç”¨åå°„å®ç° DrawerLayout å…¨å±æ»‘åŠ¨","slug":"åˆ©ç”¨åå°„å®ç°-DrawerLayout-å…¨å±æ»‘åŠ¨","date":"2019-05-06T04:58:30.000Z","updated":"2019-05-19T07:32:52.000Z","comments":true,"path":"åˆ©ç”¨åå°„å®ç°-DrawerLayout-å…¨å±æ»‘åŠ¨/","link":"","permalink":"http://yoursite.com/åˆ©ç”¨åå°„å®ç°-DrawerLayout-å…¨å±æ»‘åŠ¨/","excerpt":"å¼•è¨€åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­éœ€è¦ç”¨åˆ° DrawerLayoutï¼Œä½†æ˜¯å…¶é»˜è®¤å®ç°ä¸ºè¾¹ç¼˜æ»‘åŠ¨æ‰“å¼€ä¾§æ»‘ç•Œé¢ï¼Œåªèƒ½æŒ‡å®šå·¦è¾¹ç¼˜æˆ–è€…å³è¾¹ç¼˜ã€‚æƒ³è¦å®ç°å…¨å±æ»‘åŠ¨ï¼Œæ€è·¯æ˜¯é€šè¿‡åå°„çš„æ–¹å¼ä¿®æ”¹ DrawerLayout çš„ç›¸åº”å±æ€§ï¼Œæ¶‰åŠåˆ°æ¯ç‡¥çš„æºç é˜…è¯»ã€‚åœ¨å®Œæˆå…¨å±æ»‘åŠ¨ä¹‹åï¼Œåˆå‘ç°å…¶é»˜è®¤å®ç°äº†é•¿æŒ‰å¼¹å‡ºä¾§æ»‘ç•Œé¢ï¼Œåœ¨å…¨å±æ»‘åŠ¨ä¸‹ï¼Œç”¨æˆ·é•¿æŒ‰ä»»ä½•åœ°æ–¹éƒ½ä¼šè·³å‡ºä¾§æ»‘èœå•ï¼Œè€Œä¸”è¿˜ä¼šå‡ºç°ç•™ç™½é—®é¢˜ã€‚ç ”ç©¶åŠå¤©ï¼Œè¿˜æ˜¯åˆ©ç”¨åå°„çš„æ€è·¯ä¸€å¹¶è§£å†³ï¼Œç‰¹æ­¤è®°å½•ã€‚","text":"å¼•è¨€åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­éœ€è¦ç”¨åˆ° DrawerLayoutï¼Œä½†æ˜¯å…¶é»˜è®¤å®ç°ä¸ºè¾¹ç¼˜æ»‘åŠ¨æ‰“å¼€ä¾§æ»‘ç•Œé¢ï¼Œåªèƒ½æŒ‡å®šå·¦è¾¹ç¼˜æˆ–è€…å³è¾¹ç¼˜ã€‚æƒ³è¦å®ç°å…¨å±æ»‘åŠ¨ï¼Œæ€è·¯æ˜¯é€šè¿‡åå°„çš„æ–¹å¼ä¿®æ”¹ DrawerLayout çš„ç›¸åº”å±æ€§ï¼Œæ¶‰åŠåˆ°æ¯ç‡¥çš„æºç é˜…è¯»ã€‚åœ¨å®Œæˆå…¨å±æ»‘åŠ¨ä¹‹åï¼Œåˆå‘ç°å…¶é»˜è®¤å®ç°äº†é•¿æŒ‰å¼¹å‡ºä¾§æ»‘ç•Œé¢ï¼Œåœ¨å…¨å±æ»‘åŠ¨ä¸‹ï¼Œç”¨æˆ·é•¿æŒ‰ä»»ä½•åœ°æ–¹éƒ½ä¼šè·³å‡ºä¾§æ»‘èœå•ï¼Œè€Œä¸”è¿˜ä¼šå‡ºç°ç•™ç™½é—®é¢˜ã€‚ç ”ç©¶åŠå¤©ï¼Œè¿˜æ˜¯åˆ©ç”¨åå°„çš„æ€è·¯ä¸€å¹¶è§£å†³ï¼Œç‰¹æ­¤è®°å½•ã€‚ DrawerLayout ä¾§æ»‘åœ¨ DrawerLayout ä¸­å®šä¹‰äº†ä¸¤ä¸ªå˜é‡ï¼Œåˆ†åˆ«å¯¹åº” Gravity ä¸º Left å’Œ Right çš„æ»‘åŠ¨æƒ…æ™¯ï¼Œä¸¤è€…å¹¶æ— å®è´¨åˆ†åˆ«ï¼Œæœ¬æ–‡åªåˆ†æ Left çš„æƒ…å†µã€‚æ­¤å¤–ï¼ŒDrawerLayout åŒ…å«ä¸‰ç§çŠ¶æ€ï¼ŒSTATE_IDLEï¼ˆå·²æ‰“å¼€æˆ–å·²å…³é—­ï¼‰ï¼ŒSTATE_DRAGGINGï¼ˆæ­£åœ¨æ‹–åŠ¨ï¼‰ï¼ŒSTATE_SETTLINGï¼ˆæ‰§è¡Œæ‰“å¼€æˆ–å…³é—­çš„åŠ¨ç”»è¿‡ç¨‹ä¸­ï¼‰ã€‚ 12private final ViewDragHelper mLeftDragger;private final ViewDragHelper mRightDragger; æ„é€ å‡½æ•°å¯¹ä¸€äº›å˜é‡åšäº†åˆå§‹åŒ– 123456mLeftCallback = new ViewDragCallback(Gravity.LEFT);mLeftDragger = ViewDragHelper.create(this, TOUCH_SLOP_SENSITIVITY, mLeftCallback);mLeftDragger.setEdgeTrackingEnabled(ViewDragHelper.EDGE_LEFT);mLeftDragger.setMinVelocity(minVel);mLeftCallback.setDragger(mLeftDragger); ViewDraghelper æ˜¯å®˜æ–¹æä¾›çš„ä¸“é—¨ä¸ºè‡ªå®šä¹‰ ViewGroup å¤„ç†æ‹–æ‹½çš„æ‰‹åŠ¿ç±»ã€‚æ­¤å¤„ç”¨åˆ°çš„æ„é€ æ–¹æ³•ä¸º 12public static ViewDragHelper create(@NonNull ViewGroup forParent, float sensitivity, @NonNull Callback cb) DrawerLayout ä¸­ä¾§æ»‘æ‰“å¼€ç•Œé¢æ­£æ˜¯é€šè¿‡ ViewDragHelper å®ç°çš„ï¼ŒæŸ¥çœ‹ DrawerLayout çš„onTouchEventæ–¹æ³• 1234567891011121314@Overridepublic boolean onTouchEvent(MotionEvent ev) { mLeftDragger.processTouchEvent(ev); mRightDragger.processTouchEvent(ev); final int action = ev.getAction(); boolean wantTouchEvents = true; switch (action & MotionEvent.ACTION_MASK) { ...... } return wantTouchEvents;} å…¶æ˜æ˜¾è°ƒç”¨äº† ViewDragHelper çš„processTouchEventæ–¹æ³•å¤„ç† Touch äº‹ä»¶ 12345678910111213141516171819202122public void processTouchEvent(MotionEvent ev) { ...... switch (action) { case MotionEvent.ACTION_DOWN: { final float x = ev.getX(); final float y = ev.getY(); final int pointerId = ev.getPointerId(0); //æ‰¾åˆ°å½“å‰è§¦æ‘¸ç‚¹çš„æœ€é¡¶å±‚çš„å­View,ä½œä¸ºéœ€è¦æ“ä½œçš„View final View toCapture = findTopChildUnder((int) x, (int) y); //ä¿å­˜å½“å‰Touchç‚¹å‘ç”Ÿçš„åˆå§‹çŠ¶æ€ saveInitialMotion(x, y, pointerId); //è¿™é‡Œæ˜¯ç‚¹åœ¨ä¸€ä¸ªæ­£åœ¨æ»‘åŠ¨çš„ä¾§æ»‘æ ä¸Šï¼Œä½¿ä¾§æ»‘æ çš„çŠ¶æ€ç”±æ­£åœ¨æ»‘åŠ¨çŠ¶æ€å˜ä¸ºæ­£åœ¨æ‹–åŠ¨çŠ¶æ€ tryCaptureViewForDrag(toCapture, pointerId); //å¤„ç†ä¾§æ»‘æ çš„è§¦æ‘¸è§¦å‘åŒºåŸŸæ˜¯å¦è§¦æ‘¸ï¼Œå¦‚æœè§¦æ‘¸åˆ™é€šçŸ¥å›è°ƒï¼Œåœ¨DrawerLayoutä¸­å¤„ç†ï¼Œæ‰§è¡Œä¸€ä¸ªä¾§æ»‘å¾®å¼¹çš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯ç¨å¾®å¼¹å‡ºä¸€ç‚¹ï¼Œè¡¨ç¤ºè§¦å‘äº†ä¾§æ»‘æ“ä½œ final int edgesTouched = mInitialEdgesTouched[pointerId]; if ((edgesTouched & mTrackingEdges) != 0) { mCallback.onEdgeTouched(edgesTouched & mTrackingEdges, pointerId); } break; } ......} é‡ç‚¹åœ¨mInitialEdgesTouched[pointerId]ï¼Œå…¶ä¸ºä¸€ä¸ªä¿å­˜è¾¹ç¼˜æ»‘åŠ¨å€¼çš„ int æ•°ç»„ã€‚åœ¨saveInitialMotionæ–¹æ³•ä¸­å‘ç°å…¶èµ‹å€¼è¿‡ç¨‹ 1234567private void saveInitialMotion(float x, float y, int pointerId) { ensureMotionHistorySizeForId(pointerId); mInitialMotionX[pointerId] = mLastMotionX[pointerId] = x; mInitialMotionY[pointerId] = mLastMotionY[pointerId] = y; mInitialEdgesTouched[pointerId] = getEdgesTouched((int) x, (int) y); mPointersDown |= 1 mParentView.getRight() - mEdgeSize) result |= EDGE_RIGHT; if (y > mParentView.getBottom() - mEdgeSize) result |= EDGE_BOTTOM; return result;} å¯ä»¥çœ‹åˆ°ï¼Œè¯¥æ–¹æ³•å°†åˆ¤æ–­x < mParentView.get*() + mEdgeSizeï¼Œç„¶åå°†å¯¹åº”çš„ result è¿”å›ã€‚mEdgeSizeå³ä¸ºè¾¹ç¼˜æ»‘åŠ¨çš„ä¸´ç•Œå€¼ï¼Œå…¶åˆå§‹åŒ–å€¼ä¸º 12final float density = context.getResources().getDisplayMetrics().density;mEdgeSize = (int) (EDGE_SIZE * density + 0.5f); å› æ­¤ï¼Œè¦è®© DrawerLayout æ”¯æŒå…¨å±æ»‘åŠ¨æ‰“å¼€ä¾§æ»‘èœå•è€Œä¸æ˜¯è¾¹ç¼˜æ»‘åŠ¨ï¼Œé‡ç‚¹ä¾¿æ˜¯è¦ä¿®æ”¹è¯¥å€¼ï¼Œå°†å…¶è®¾ä¸ºå±å¹•å®½åº¦ã€‚ å…·ä½“çš„åå°„ä»£ç ï¼ˆkotlinï¼‰ 123456789101112//è·å– ViewDragHelperï¼Œæ›´æ”¹ edgeSizeFieldval leftDraggerField = drawerLayout.javaClass.getDeclaredField(\"mLeftDragger\")leftDraggerField.isAccessible = trueval leftDragger = leftDraggerField.get(drawerLayout) as ViewDragHelperval edgeSizeField = leftDragger.javaClass.getDeclaredField(\"mEdgeSize\")edgeSizeField.isAccessible = trueval edgeSize = edgeSizeField.getInt(leftDragger)val displaySize = Point()activity.windowManager.defaultDisplay.getSize(displaySize)edgeSizeField.setInt(leftDragger, displaySize.x) DrawerLayout é•¿æŒ‰å¼¹å‡ºå¼•è¨€ åœ¨ DrawerLayout ä¸­ï¼Œç”¨æˆ·åœ¨éä¾§æ»‘ç•Œé¢çš„ mEdgeSize èŒƒå›´å†…é•¿æŒ‰ï¼Œä¾§æ»‘ç•Œé¢å°†å¼¹å‡ºã€‚å½“æˆ‘ä»¬ä¿®æ”¹ mEdgeSize ä¸ºå±å¹•å®½åº¦ä¹‹åï¼Œç”¨æˆ·æ‰€æœ‰çš„é•¿æŒ‰åŠ¨ä½œéƒ½å°†è§¦å‘åŸæ¥çš„å¼¹å‡ºé€»è¾‘ï¼Œè€Œä¸”è§¦å‘èŒƒå›´ä¸ºå±å¹•å®½åº¦ï¼Œä¾§æ»‘èœå•å°†è¿‡åº¦å³ç§»ï¼Œé€ æˆå·¦ä¾§è¾¹ç¼˜æœ‰ç©ºç™½ã€‚ åŸæ¥æ˜¯ DrawerLayout çš„ç§æœ‰å†…éƒ¨ç±» ViewDragCallback é‡å†™äº†onEdgeTouchedæ–¹æ³• 1private class ViewDragCallback extends ViewDragHelper.Callback 1234@Overridepublic void onEdgeTouched(int edgeFlags, int pointerId) { postDelayed(mPeekRunnable, PEEK_DELAY);} è¯¥æ–¹æ³•ä¼šæ‰§è¡Œä¸€ä¸ª mPeekRunnableï¼Œå…¶ä¸ºå†…éƒ¨ç±»çš„ç§æœ‰ Runnable ç±»å‹çš„å±æ€§ï¼Œå…¶runæ–¹æ³•æ‰§è¡Œäº†peekDraweræ–¹æ³• 12345678910111213141516171819202122232425void peekDrawer() { final View toCapture; final int childLeft; final int peekDistance = mDragger.getEdgeSize(); final boolean leftEdge = mAbsGravity == Gravity.LEFT; if (leftEdge) { toCapture = findDrawerWithGravity(Gravity.LEFT); childLeft = (toCapture != null ? -toCapture.getWidth() : 0) + peekDistance; } else { toCapture = findDrawerWithGravity(Gravity.RIGHT); childLeft = getWidth() - peekDistance; } // Only peek if it would mean making the drawer more visible and the drawer isn't locked if (toCapture != null && ((leftEdge && toCapture.getLeft() < childLeft) || (!leftEdge && toCapture.getLeft() > childLeft)) && getDrawerLockMode(toCapture) == LOCK_MODE_UNLOCKED) { final LayoutParams lp = (LayoutParams) toCapture.getLayoutParams(); mDragger.smoothSlideViewTo(toCapture, childLeft, toCapture.getTop()); lp.isPeeking = true; invalidate(); closeOtherDrawer(); cancelChildViewTouch(); }} æ³¨æ„mDragger.smoothSlideViewTo(toCapture, childLeft, toCapture.getTop())å°±æ˜¯é•¿æŒ‰å±å¹•æ—¶ï¼Œä¾§æ»‘èœå•ä¼šè‡ªåŠ¨æ»‘å‡ºæ¥çš„åŸå› ã€‚ è§£å†³è¿™ä¸ªé—®é¢˜ç€å®è´¹äº†ä¸€ç•ªè„‘ç­‹ï¼Œå› ä¸º ViewDragCallback ä¸ºç§æœ‰å†…éƒ¨ç±»ï¼Œå¤–éƒ¨æ— æ³•ç›´æ¥å¾—åˆ°å…¶å¼•ç”¨ã€‚å¹¸å¥½è§‚å¯Ÿä¹‹åå‘ç°å…¶å®ç°äº† ViewDragHelper.Callback æ¥å£ï¼Œä»è€Œè®©æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å¤šæ€çš„æ–¹å¼ï¼Œè·å–å…¶åå°„å®ä¾‹ 123456789101112//è·å– Layout çš„ ViewDragCallBack å®ä¾‹â€œmLeftCallbackâ€//æ›´æ”¹å…¶å±æ€§ mPeekRunnableval leftCallbackField = drawerLayout.javaClass.getDeclaredField(\"mLeftCallback\")leftCallbackField.isAccessible = true//å› ä¸ºæ— æ³•ç›´æ¥è®¿é—®ç§æœ‰å†…éƒ¨ç±»ï¼Œæ‰€ä»¥è¯¥ç§æœ‰å†…éƒ¨ç±»å®ç°çš„æ¥å£éå¸¸é‡è¦ï¼Œé€šè¿‡å¤šæ€çš„æ–¹å¼è·å–å®ä¾‹val leftCallback = leftCallbackField.get(drawerLayout) as ViewDragHelper.Callbackval peekRunnableField = leftCallback.javaClass.getDeclaredField(\"mPeekRunnable\")peekRunnableField.isAccessible = trueval nullRunnable = Runnable { }peekRunnableField.set(leftCallback, nullRunnable) å®Œç¾è§£å†³é—®é¢˜ï¼ æœ€åä¾¿æ˜¯æ„å»ºä¸€ä¸ªå·¥å…·ç±» 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354object DrawerLayoutHelper { /** * é€šè¿‡åå°„çš„æ–¹å¼å°† DrawerLayout çš„ä¾§æ»‘èŒƒå›´è®¾ä¸ºå…¨å± * è¯¥æ–¹æ³•å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨ä¾§æ»‘èŒƒå›´å†…é•¿æŒ‰ï¼Œä¹Ÿä¼šåˆ’å‡ºèœå• * é€šè¿‡æŸ¥çœ‹ DrawerLayout çš„æºç åˆ†æï¼Œå…¶å†…éƒ¨ç±» ViewDragCallback * é‡å†™äº† onEdgeTouched æ–¹æ³•ï¼Œç„¶åè°ƒç”¨ä¸€ä¸ª Runnable å±æ€§çš„å˜é‡ â€œmPeekRunnableâ€ * è¯¥å˜é‡è°ƒç”¨äº† peekDraw æ–¹æ³•ï¼Œå®ç°äº†é•¿æŒ‰åˆ’å‡ºä¾§æ»‘èœå•çš„åŠŸèƒ½ * åŒæ ·ä½¿ç”¨åå°„å°†è¯¥ Runnable æ›´æ”¹ä¸ºç©ºå®ç° * * @param activity * @param drawerLayout * @param displayWidthPercentage */ fun setDrawerLeftEdgeSize(activity: Activity?, drawerLayout: DrawerLayout?, displayWidthPercentage: Float) { if (activity == null || drawerLayout == null) return try { //è·å– ViewDragHelperï¼Œæ›´æ”¹å…¶ edgeSizeField ä¸º displayWidthPercentage*å±å¹•å¤§å° val leftDraggerField = drawerLayout.javaClass.getDeclaredField(\"mLeftDragger\") leftDraggerField.isAccessible = true val leftDragger = leftDraggerField.get(drawerLayout) as ViewDragHelper val edgeSizeField = leftDragger.javaClass.getDeclaredField(\"mEdgeSize\") edgeSizeField.isAccessible = true val edgeSize = edgeSizeField.getInt(leftDragger) val displaySize = Point() activity.windowManager.defaultDisplay.getSize(displaySize) edgeSizeField.setInt(leftDragger, Math.max(edgeSize, (displaySize.x * displayWidthPercentage).toInt())) //è·å– Layout çš„ ViewDragCallBack å®ä¾‹â€œmLeftCallbackâ€ //æ›´æ”¹å…¶å±æ€§ mPeekRunnable val leftCallbackField = drawerLayout.javaClass.getDeclaredField(\"mLeftCallback\") leftCallbackField.isAccessible = true //å› ä¸ºæ— æ³•ç›´æ¥è®¿é—®ç§æœ‰å†…éƒ¨ç±»ï¼Œæ‰€ä»¥è¯¥ç§æœ‰å†…éƒ¨ç±»å®ç°çš„æ¥å£éå¸¸é‡è¦ï¼Œé€šè¿‡å¤šæ€çš„æ–¹å¼è·å–å®ä¾‹ val leftCallback = leftCallbackField.get(drawerLayout) as ViewDragHelper.Callback val peekRunnableField = leftCallback.javaClass.getDeclaredField(\"mPeekRunnable\") peekRunnableField.isAccessible = true val nullRunnable = Runnable { } peekRunnableField.set(leftCallback, nullRunnable) } catch (e: Exception) { e.printStackTrace() } } fun setDrawerLeftEdgeFullScreen(activity: Activity?, drawerLayout: DrawerLayout?) { setDrawerLeftEdgeSize(activity, drawerLayout, 1.0f) }} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Android","slug":"Android","permalink":"http://yoursite.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://yoursite.com/tags/Android/"},{"name":"åå°„","slug":"åå°„","permalink":"http://yoursite.com/tags/åå°„/"}]},{"title":"Android è‡ªå®šä¹‰ View è¯¦è§£","slug":"Android-è‡ªå®šä¹‰-View-è¯¦è§£","date":"2019-05-03T10:34:00.000Z","updated":"2019-05-19T07:25:08.000Z","comments":true,"path":"Android-è‡ªå®šä¹‰-View-è¯¦è§£/","link":"","permalink":"http://yoursite.com/Android-è‡ªå®šä¹‰-View-è¯¦è§£/","excerpt":"å¼•è¨€å¼€å‘è€…å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ View å®ç°ç‚«é…·çš„æ•ˆæœï¼Œå…¶è¿‡ç¨‹æ¶‰åŠåˆ° View çš„å±‚æ¬¡ç»“æ„ã€äº‹ä»¶åˆ†å‘æœºåˆ¶å’Œ View çš„å·¥ä½œåŸç†ç­‰æŠ€æœ¯ç»†èŠ‚ã€‚æœ¬æ–‡å°†ä¸²è”ä¸ªçŸ¥è¯†ç‚¹ï¼Œé€šè¿‡ä»£ç æ­å¼€è‡ªå®šä¹‰ View çš„é¢çº±ã€‚","text":"å¼•è¨€å¼€å‘è€…å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ View å®ç°ç‚«é…·çš„æ•ˆæœï¼Œå…¶è¿‡ç¨‹æ¶‰åŠåˆ° View çš„å±‚æ¬¡ç»“æ„ã€äº‹ä»¶åˆ†å‘æœºåˆ¶å’Œ View çš„å·¥ä½œåŸç†ç­‰æŠ€æœ¯ç»†èŠ‚ã€‚æœ¬æ–‡å°†ä¸²è”ä¸ªçŸ¥è¯†ç‚¹ï¼Œé€šè¿‡ä»£ç æ­å¼€è‡ªå®šä¹‰ View çš„é¢çº±ã€‚ CanvasPaintè‡ªå®šä¹‰ Viewè‡ªå®šä¹‰ ViewGroup document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Android","slug":"Android","permalink":"http://yoursite.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://yoursite.com/tags/Android/"},{"name":"View","slug":"View","permalink":"http://yoursite.com/tags/View/"}]},{"title":"Dart å¼‚æ­¥ç¼–ç¨‹","slug":"Dart-å¼‚æ­¥ç¼–ç¨‹","date":"2019-04-30T00:21:26.000Z","updated":"2019-04-30T14:17:28.000Z","comments":true,"path":"Dart-å¼‚æ­¥ç¼–ç¨‹/","link":"","permalink":"http://yoursite.com/Dart-å¼‚æ­¥ç¼–ç¨‹/","excerpt":"å¼•è¨€Dart å±äºå•çº¿ç¨‹ç¼–ç¨‹è¯­è¨€ï¼Œåœ¨è¿›è¡Œ I/O æ“ä½œæˆ–è€…å…¶ä»–è€—æ—¶æ“ä½œçš„æ—¶å€™ï¼Œç¨‹åºä¼šè¿›å…¥é˜»å¡çŠ¶æ€ã€‚å¼‚æ­¥æ˜¯ Dart å¹¶å‘æ–¹æ¡ˆçš„åŸºç¡€ã€‚","text":"å¼•è¨€Dart å±äºå•çº¿ç¨‹ç¼–ç¨‹è¯­è¨€ï¼Œåœ¨è¿›è¡Œ I/O æ“ä½œæˆ–è€…å…¶ä»–è€—æ—¶æ“ä½œçš„æ—¶å€™ï¼Œç¨‹åºä¼šè¿›å…¥é˜»å¡çŠ¶æ€ã€‚å¼‚æ­¥æ˜¯ Dart å¹¶å‘æ–¹æ¡ˆçš„åŸºç¡€ã€‚ äº‹ä»¶å¾ªç¯ä½œä¸ºä¸€ä¸ªäº‹ä»¶é©±åŠ¨è¯­è¨€ï¼ŒDart åŒæ ·æ‹¥æœ‰äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼Œç±»ä¼¼äº Android ä¸­çš„Looper/Handlerï¼‰ã€‚Dart æœ‰ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªæ˜¯å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆMicroTask Queueï¼‰ï¼Œä¸€ä¸ªæ˜¯äº‹ä»¶é˜Ÿåˆ—ï¼ˆEvent Queueï¼‰ å¾®ä»»åŠ¡é˜Ÿåˆ—åŒ…å« Dart å†…éƒ¨çš„å¾®ä»»åŠ¡ï¼Œä¸»è¦é€šè¿‡scheduleMicrotaskè°ƒåº¦ äº‹ä»¶é˜Ÿåˆ—åŒ…å«å¤–éƒ¨äº‹ä»¶ï¼Œå¦‚ I/Oã€Timerã€ç»˜åˆ¶äº‹ä»¶ç­‰ ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼ŒDart å¤„ç†äº‹ä»¶å¾ªç¯çš„é€»è¾‘ é¦–å…ˆå¤„ç†æ‰€æœ‰å¾®ä»»åŠ¡é˜Ÿåˆ—é‡Œçš„å¾®ä»»åŠ¡ å¤„ç†å®Œæ‰€æœ‰å¾®ä»»åŠ¡ä¹‹åï¼Œå¤„ç†äº‹ä»¶é˜Ÿåˆ—é‡Œçš„ä¸€ä¸ªäº‹ä»¶ å›åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ç»§ç»­å¾ªç¯ å¯¹äºå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸€æ¬¡æ€§å…¨éƒ¨å¤„ç†ï¼Œå¯¹äºäº‹ä»¶é˜Ÿåˆ—ï¼Œä¸€æ¬¡åªå¤„ç†ä¸€ä¸ªã€‚ å¾®ä»»åŠ¡å’Œäº‹ä»¶å¾®ä»»åŠ¡dart:asyncå®šä¹‰äº†ä¸€ä¸ªé¡¶çº§å‡½æ•°scheduleMicrotaskï¼Œä½¿ç”¨å…¶è®©ä»£ç ä»¥å¾®ä»»åŠ¡çš„æ–¹å¼å¼‚æ­¥æ‰§è¡Œ 123456789import 'dart:async'; //ä¸‹æ–‡ä¸å†æ˜¾å¼å¯¼å…¥void main() { print('å¼€å§‹'); scheduleMicrotask(() { print('è¿™æ˜¯ä¸€ä¸ªå¾®ä»»åŠ¡'); }); print(\"ç»“æŸ\");} æ§åˆ¶å°è¾“å‡º å¼€å§‹ç»“æŸè¿™æ˜¯ä¸€ä¸ªå¾®ä»»åŠ¡ äº‹ä»¶ä½¿ç”¨Timer.run(callback)è®©ä»£ç ä»¥äº‹ä»¶çš„æ–¹å¼å¼‚æ­¥æ‰§è¡Œ 12345678910111213void main() { print('å¼€å§‹'); Timer.run(() { print('è¿™æ˜¯ä¸€ä¸ªäº‹ä»¶'); }); scheduleMicrotask((){ print('è¿™æ˜¯å¾®ä»»åŠ¡0'); }); scheduleMicrotask((){ print('è¿™æ˜¯å¾®ä»»åŠ¡1'); }); scheduleMicrotask((){ print('è¿™æ˜¯å¾®ä»»åŠ¡2'); }); print(\"ç»“æŸ\");} æ§åˆ¶å°è¾“å‡º å¼€å§‹ç»“æŸè¿™æ˜¯å¾®ä»»åŠ¡0è¿™æ˜¯å¾®ä»»åŠ¡1è¿™æ˜¯å¾®ä»»åŠ¡2è¿™æ˜¯ä¸€ä¸ªäº‹ä»¶ åŒæ—¶å¯ä»¥çœ‹å‡ºå’Œ Java ä½¿ç”¨new Threadï¼ˆRunnable rï¼‰ä¸åŒï¼Œåœ¨ Dart ä¸­ï¼Œå¾®ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºæ˜¯æœ‰åºçš„ã€‚ è€ƒè™‘ä¸‹é¢çš„ä»£ç ï¼Œä¼šè¾“å‡ºè¿™æ˜¯ä¸€ä¸ªäº‹ä»¶å—ï¼Ÿ 123456789Timer.run(() { print('è¿™æ˜¯ä¸€ä¸ªäº‹ä»¶');});foo() { scheduleMicrotask(foo);}foo(); æ ¹æ®ä¸Šé¢ Dart å¤„ç†äº‹ä»¶å¾ªç¯çš„é€»è¾‘å›¾ï¼ŒTimer.runæ°¸è¿œä¸ä¼šè¢«æ‰§è¡Œï¼Œå› ä¸ºscheduleMicrotaskæ°¸è¿œåœ¨æ‰§è¡Œã€‚ ä»…ä»…ä½¿ç”¨å›è°ƒå‡½æ•°å®ç°å¼‚æ­¥å¾ˆå®¹æ˜“é™·å…¥â€œå›è°ƒåœ°ç‹±ï¼ˆCallback hellï¼‰â€ï¼Œä¸ºæ­¤ Dart å¼•å…¥äº†Future FutureFuture å°è£…äº†ä¸€ç³»åˆ—é™æ€å‡½æ•°å®Œæˆå¼‚æ­¥æ“ä½œï¼Œå…¶å†…éƒ¨é€šè¿‡scheduleMicrotaskå’ŒTimerå®ç°ã€‚æ­¤å¤–è¿˜æœ‰ä¸€ä¸ªthenæ–¹æ³•ï¼Œæ¥æ”¶ä¸€ä¸ªåä¸ºonValueçš„é—­åŒ…ä½œä¸ºå‚æ•°ï¼Œè¯¥é—­åŒ…åœ¨ Future æˆåŠŸå®Œæˆæ—¶è¢«è°ƒç”¨ å‡½æ•° ç”¨é€” Future(FutureOr computation()) åˆ›å»ºäº‹ä»¶ä»»åŠ¡ microtask(FutureOr computation()) åˆ›å»ºmicrotaskä»»åŠ¡ sync(FutureOr computation()) åˆ›å»ºåŒæ­¥ä»»åŠ¡ delayed(Duration duration, [FutureOr computation()]) åˆ›å»ºå»¶è¿Ÿä»»åŠ¡ é€šè¿‡ä»£ç ç†è§£ 123456789101112131415161718192021222324void main() { print('å¼€å§‹'); Timer.run(() => print('è¿™æ˜¯ä¸€ä¸ªäº‹ä»¶')); scheduleMicrotask((){print('è¿™æ˜¯å¾®ä»»åŠ¡0');}); scheduleMicrotask((){print('è¿™æ˜¯å¾®ä»»åŠ¡1');}); scheduleMicrotask((){print('è¿™æ˜¯å¾®ä»»åŠ¡2');}); print(\"ç»“æŸ\"); Future(() => print('æ™®é€šFutureï¼Œé€šè¿‡Timerå®ç°')); Future.delayed(const Duration(seconds: 2), () => print('å»¶è¿ŸFutureï¼Œé€šè¿‡Timerå®ç°')); Future.microtask(() => print('Futureåˆ›å»ºå¾®ä»»åŠ¡ï¼Œé€šè¿‡scheduleMicrotaskå®ç°')); Future.sync(() => print('åŒæ­¥Futureï¼Œæ‰§è¡ŒåŒæ­¥ä»£ç ')) .then((a) => print('thenä¸­çš„ä»£ç 0')) .then((b) => print('thenä¸­çš„ä»£ç 1')) .then((c) { throw 'æŠ›å‡ºthenä¸­çš„é”™è¯¯'; }) .catchError((error) => print('æ•è·Error $error')) .whenComplete(() {print('thenä»»åŠ¡å®Œæˆ');});} è¾“å‡ºç»“æœ å¼€å§‹ç»“æŸåŒæ­¥Futureï¼Œæ‰§è¡ŒåŒæ­¥ä»£ç è¿™æ˜¯å¾®ä»»åŠ¡0è¿™æ˜¯å¾®ä»»åŠ¡1è¿™æ˜¯å¾®ä»»åŠ¡2Futureåˆ›å»ºå¾®ä»»åŠ¡ï¼Œé€šè¿‡scheduleMicrotaskå®ç°thenä¸­çš„ä»£ç 0thenä¸­çš„ä»£ç 1æ•è·Error æŠ›å‡ºthenä¸­çš„é”™è¯¯thenä»»åŠ¡å®Œæˆè¿™æ˜¯ä¸€ä¸ªäº‹ä»¶æ™®é€šFutureï¼Œé€šè¿‡Timerå®ç° //å»¶è¿Ÿ2s å»¶è¿ŸFutureï¼Œé€šè¿‡Timerå®ç° åœ¨dart:asyncä¸­ï¼Œé™¤äº† Futureï¼Œè¿˜æœ‰ Completerï¼Œç”¨æ¥å°†å…·ä½“çš„ Future æµç¨‹æ§åˆ¶æƒäº¤ç»™å¼€å‘è€… 12345var completer = Completer();var future = completer.future;future.then((d) => 'è¿”å›çš„å­—ç¬¦ä¸²') .then((e) => print('è·å¾—Completerä¸­çš„future $e'));completer.complete((e) => print('è®¾ä¸ºå®ŒæˆçŠ¶æ€')); æ§åˆ¶å°è¾“å‡º è·å¾—Completerä¸­çš„future è¿”å›çš„å­—ç¬¦ä¸² è™½ç„¶ Future ç¼“è§£äº†å›è°ƒåœ°ç‹±çš„é—®é¢˜ï¼Œä½†å¦‚æœä¸²å¤ªå¤šçš„thenä»£ç ï¼Œå¯è¯»æ€§ä»ç„¶ä¼šéå¸¸å·®ï¼Œç‰¹åˆ«æ˜¯å„ç§ Future åµŒå¥—çš„æ—¶å€™ã€‚ä¸ JavaScript ç±»ä¼¼ï¼ŒDart å¼•å…¥äº†async/awaitã€‚ async å’Œ awaitasync å…³é”®å­—ä¿®é¥°çš„å‡½æ•°ä¸ä¼ ç»Ÿå‡½æ•°å¹¶æ— åŒºåˆ«ï¼Œåªæ˜¯å°†è¿”å›å€¼ç±»å‹ä½¿ç”¨ Future è¿›è¡Œäº†å°è£…ã€‚ é€šè¿‡ä»£ç å…·ä½“ç†è§£ 12345678void main() async { getInt().then((i) => print('getInt: $i')); getString().then((s) => print('getString: $s')); print('main');}getInt() async => 2333;getString() async => 'hello'; æ§åˆ¶å°è¾“å‡º maingetInt: 2333getString: hello å¯ä»¥çœ‹åˆ°ï¼Œè°ƒç”¨asyncæ–¹æ³•çš„ä»£ç è½¬æ¢æˆäº†å¼‚æ­¥ä»»åŠ¡ã€‚è¦æƒ³ä½¿ä¹‹å˜æˆåŒæ­¥é¡ºåºï¼Œä½¿ç”¨awaitå…³é”®å­—ã€‚ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥å…³é”®å­—å¿…é¡»è¦åœ¨asyncå‡½æ•°ä¸­ä½¿ç”¨ 123456789void main() async { var i = await getInt(); print('getInt: $i'); var s = await getString(); print('getString: $s'); print('main');} æ§åˆ¶å°è¾“å‡º getInt: 2333getString: hellomain ç»§ç»­ä¸‹é¢çš„ä¾‹å­ 12345678910111213141516void main() { print('main 0'); foo(); print('main 1');}foo() async { print('Foo'); var s = await bar(); print('from bar: $s');}bar() { print('Bar'); return 'hello';} æ§åˆ¶å°è¾“å‡ºä¸º main 0FooBarmain 1from bar: hello ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨fooä¸­ï¼Œé™¤äº†ç¬¬ä¸€è¡Œä»£ç ä»¥åŠbar()è¿™ä¸€å‡½æ•°è°ƒç”¨ä¹‹å¤–çš„å…¶ä»–ä»£ç å‡ä¸ºå¼‚æ­¥æ‰§è¡Œã€‚å½“ä½¿ç”¨awaitçš„æ—¶å€™ï¼Œå…¶å³è¾¹ä¼šé©¬ä¸Šè¿”å›ä¸€ä¸ª Future å¯¹è±¡ï¼Œä¸‹é¢çš„ä»£ç åˆ™ä¼šä»¥thençš„å½¢å¼è¿è¡Œã€‚ ä¸Šé¢çš„ä»£ç è½¬æ¢æˆ Future é£æ ¼ 1234foo() { print('Foo'); return Future.sync(bar).then((s) => print('from bar: $s'));} Generatorstreamstream æ˜¯ Dart ä¸­ä¸€ä¸ªé•¿åº¦ä¸ç¡®å®šçš„å€¼åˆ—è¡¨ï¼Œå¯ä»¥æ˜¯æœ‰é™çš„æˆ–è€…æ— é™çš„ï¼Œé‡è¦çš„æ˜¯æˆ‘ä»¬ä¸çŸ¥é“ stream ä½•æ—¶ç»“æŸæˆ–å·²ç»ç»“æŸã€‚éšæ—¶é—´æ”¹å˜çš„é¼ æ ‡ä½ç½®ã€æ‰€æœ‰ç´ æ•°çš„åˆ—è¡¨æˆ–è€…ç½‘ç»œä¸Šçš„è§†é¢‘æµï¼Œéƒ½å¯ä»¥çœ‹åšä¸€ä¸ª streamã€‚ å¯ä»¥é€šè¿‡ä¸º stream æ³¨å†Œä¸€ä¸ªæˆ–å¤šä¸ªå›è°ƒå‡½æ•°çš„æ–¹å¼ï¼Œå¯¹å…¶è¿›è¡Œè®¢é˜…ç›‘å¬ã€‚ yieldyield è¯­å¥è¢«ç”¨äºç”Ÿæˆå™¨å‡½æ•°å†…ï¼Œç›®çš„æ˜¯ç»™ç”Ÿæˆçš„é›†åˆæ·»åŠ æ–°çš„ç»“æœã€‚yield è¯­å¥æ€»æ˜¯ä½¿å®ƒçš„è¡¨è¾¾å¼è¢«æ±‚å€¼ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæ±‚å€¼ç»“æœä¼šè¢«è¿½åŠ åˆ°å¤–å±‚ç”Ÿæˆå™¨æ‰€å…³è”çš„é›†åˆä¸­ã€‚å¦‚æœç”Ÿæˆå™¨æ˜¯åŒæ­¥çš„ï¼Œåˆ™å…³è”çš„é›†åˆæ˜¯ä¸€ä¸ª iterableï¼›å¦‚æœæ˜¯å¼‚æ­¥çš„ï¼Œåˆ™å…³è”çš„é›†åˆæ˜¯ä¸€ä¸ª streamã€‚ æ­¤å¤–ï¼Œyield ä¹Ÿä¼šå› å¤–å±‚çš„ç”Ÿæˆå™¨æ˜¯å¦åŒæ­¥äº§ç”Ÿä¸åŒçš„è¡Œä¸ºï¼šåŒæ­¥æ—¶ yield ä¼šæš‚åœå¤–å±‚ç”Ÿæˆå™¨ï¼Œç›´è‡³è°ƒç”¨moveNextä¸”è¿”å›å€¼ä¸º trueï¼Œå¼‚æ­¥æ—¶ç”Ÿæˆå™¨çš„æ‰§è¡Œä¼šç»§ç»­ã€‚ å¼‚æ­¥ä¸€ä¸ªå‡½æ•°ä½“æ ‡è®°æœ‰async*ä¿®é¥°ç¬¦çš„å‡½æ•°ï¼Œå°†ä½œä¸º stream çš„ç”Ÿæˆå‡½æ•°ã€‚ä¸‹é¢çš„å‡½æ•°ç”Ÿæˆä¸€ä¸ªåŒ…å«è‡ªç„¶æ•°åºåˆ—çš„ stream 123456789101112get naturals async* { int k = 0; while (k < 3) { yield await k++; }}void main() async { await for (var i in naturals) { print('get a natural $i'); }} è¿è¡Œmainå‡½æ•°ï¼Œæ§åˆ¶å°å°†è¾“å‡º get a natural 0get a natural 1get a natural 2 å½“ naturals è¢«è°ƒç”¨æ—¶ï¼Œç«‹å³è¿”å›ä¸€ä¸ªæ–°çš„ streamï¼Œä¸€æ—¦ stream è¢«ç›‘å¬ï¼Œå‡½æ•°ä½“å°†è¿è¡Œï¼Œä»¥ä¾¿ç”Ÿæˆå€¼æ¥å¡«å…… streamã€‚æ¯ä¸€æ¬¡è¿­ä»£æ‰§è¡Œä¸€æ¬¡ yield è¯­å¥ï¼Œk å°†è‡ªå¢ï¼ˆç”±äº await çš„å­˜åœ¨ï¼Œå‡½æ•°ä¼šæœ‰çŸ­æš‚åœæ­¢ï¼‰ï¼Œç„¶åå‡½æ•°å°†ç»§ç»­æ‰§è¡Œå¹¶ä½¿ç”¨æ–°çš„ k å€¼ï¼Œè¯¥å€¼å°†è¢« yield è¿½åŠ åˆ° stream ä¸­ã€‚ åŒæ­¥ä¸Šè¿°å‡½æ•°çš„åŒæ­¥å½¢å¼ 123456Iterable naturalsTo(n) sync* { int k = 0; while(k < n) { yield k++; }} é€šè¿‡ä¸€ä¸ªæ··åˆç¼–ç¨‹çš„ä¾‹å­æ¥ä½“ä¼šä¸¤è€…çš„åŒºåˆ« 1234567891011121314151617181920212223Iterable nSync(n) sync* { int k = 0; while (k < n) { print('sync before k++ and k is $k'); yield k++; print('sync after k++ and k is $k'); }}Stream nAsync(n) async* { int k = 0; while (k < n) { print('async before k++ and k is $k'); yield await k++; print('async after k++ and k is $k'); }}void main() { nAsync(2).last; nSync(2).last; print('main');} æ§åˆ¶å°è¾“å‡ºä¸º sync before k++ and k is 0sync after k++ and k is 1sync before k++ and k is 1sync after k++ and k is 2mainasync before k++ and k is 0async after k++ and k is 1async before k++ and k is 1async after k++ and k is 2 document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Dart","slug":"Dart","permalink":"http://yoursite.com/categories/Dart/"}],"tags":[{"name":"Dart","slug":"Dart","permalink":"http://yoursite.com/tags/Dart/"},{"name":"å¼‚æ­¥","slug":"å¼‚æ­¥","permalink":"http://yoursite.com/tags/å¼‚æ­¥/"}]},{"title":"ã€Šçº¢æ¥¼æ¢¦ã€‹è¯»ä¹¦ç¬”è®°","slug":"ã€Šçº¢æ¥¼æ¢¦ã€‹è¯»ä¹¦ç¬”è®°","date":"2019-04-24T03:35:40.000Z","updated":"2019-04-24T04:01:00.000Z","comments":true,"path":"ã€Šçº¢æ¥¼æ¢¦ã€‹è¯»ä¹¦ç¬”è®°/","link":"","permalink":"http://yoursite.com/ã€Šçº¢æ¥¼æ¢¦ã€‹è¯»ä¹¦ç¬”è®°/","excerpt":"å¼•è¨€å®Œæ•´è®¤çœŸåœ°è¯»å®Œä¸€éã€Šçº¢æ¥¼æ¢¦ã€‹ï¼Œåº”è¯¥æ˜¯é•¿ä¹…ä»¥æ¥çš„å¿µæƒ³ã€‚å°å­¦æ—¶ ï¼Œå››å”å¯„ç»™æˆ‘ä¸€å¥—ä¸­åä¹¦å±€å‡ºç‰ˆçš„å››å¤§åè‘—ï¼Œä»é‚£æ—¶å¼€å§‹ä¸ä¹‹ç»“ç¼˜ã€‚ä¸­å­¦è‡³ä»Šï¼Œä¹¦è¯»å¾—ä¸å°‘ï¼Œä½†ç»ˆç©¶æ²¡æœ‰ä¸€æ¬¡è®¤çœŸç»†è‡´åœ°æ‹œè¯»è¿™ä¸€å¤å…¸è‘—ä½œã€‚å‰å‡ å¤©ï¼ŒæŸä¸ªå§‘å¨˜è¯´å¥¹çœ‹ã€Šçº¢æ¥¼æ¢¦ã€‹çš„æ—¶å€™æœ€å¹³é™ï¼Œâ€œçœ‹äº†å¥½å¤šéâ€ï¼Œé¡¿æ„Ÿæ„§ç–šã€‚éšå³åŠ¨èº«é˜…è¯»ã€‚è¿™ç¯‡è¯»ä¹¦ç¬”è®°ï¼Œä¸»è¦æ˜¯è®°å½•ç« èŠ‚æ¦‚æ‹¬å’Œç²¾å½©ä¹‹å¤„ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¯¹è‡ªå·±çš„ç£ä¿ƒã€‚","text":"å¼•è¨€å®Œæ•´è®¤çœŸåœ°è¯»å®Œä¸€éã€Šçº¢æ¥¼æ¢¦ã€‹ï¼Œåº”è¯¥æ˜¯é•¿ä¹…ä»¥æ¥çš„å¿µæƒ³ã€‚å°å­¦æ—¶ ï¼Œå››å”å¯„ç»™æˆ‘ä¸€å¥—ä¸­åä¹¦å±€å‡ºç‰ˆçš„å››å¤§åè‘—ï¼Œä»é‚£æ—¶å¼€å§‹ä¸ä¹‹ç»“ç¼˜ã€‚ä¸­å­¦è‡³ä»Šï¼Œä¹¦è¯»å¾—ä¸å°‘ï¼Œä½†ç»ˆç©¶æ²¡æœ‰ä¸€æ¬¡è®¤çœŸç»†è‡´åœ°æ‹œè¯»è¿™ä¸€å¤å…¸è‘—ä½œã€‚å‰å‡ å¤©ï¼ŒæŸä¸ªå§‘å¨˜è¯´å¥¹çœ‹ã€Šçº¢æ¥¼æ¢¦ã€‹çš„æ—¶å€™æœ€å¹³é™ï¼Œâ€œçœ‹äº†å¥½å¤šéâ€ï¼Œé¡¿æ„Ÿæ„§ç–šã€‚éšå³åŠ¨èº«é˜…è¯»ã€‚è¿™ç¯‡è¯»ä¹¦ç¬”è®°ï¼Œä¸»è¦æ˜¯è®°å½•ç« èŠ‚æ¦‚æ‹¬å’Œç²¾å½©ä¹‹å¤„ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¯¹è‡ªå·±çš„ç£ä¿ƒã€‚ ç¬¬ä¸€å› ç”„å£«éšæ¢¦å¹»è¯†é€šçµ è´¾é›¨æ‘é£å°˜æ€€é—ºç§€ç¼˜èµ· æ›¾å†è¿‡ä¸€ç•ªæ¢¦å¹»ä¹‹åï¼Œæ•…å°†çœŸäº‹éšå»ï¼Œè€Œå€Ÿé€šçµè¯´æ­¤ã€ŠçŸ³å¤´è®°ã€‹ä¸€ä¹¦ä¹Ÿï¼Œæ•…æ›°â€œç”„å£«éšâ€äº‘äº‘ã€‚ â€œâ€¦.æˆ‘è™½ä¸å­¦æ— æ–‡ï¼Œåˆä½•å¦¨ç”¨å‡è¯­æ‘è¨€æ•·æ¼”å‡ºæ¥ï¼Ÿäº¦å¯ä½¿é—ºé˜æ˜­ä¼ ã€‚å¤å¯ç ´ä¸€æ—¶ä¹‹é—·ï¼Œé†’åŒäººä¹‹ç›®ï¼Œä¸äº¦å®œä¹ï¼Ÿâ€æ•…æ›°â€œè´¾é›¨æ‘â€äº‘äº‘ã€‚ å¥³å¨²è¡¥å¤©æ‰€ç”¨ä¸‰ä¸‡å…­åƒäº”ç™¾é›¶ä¸€å—çŸ³å¤´å‰©ä¸€å—é€šçµï¼Œè¢«ä¸€é“äººé•Œåˆ»æ–‡å­—äºå…¶ä¸Šï¼Œåã€ŠçŸ³å¤´è®°ã€‹ ä¸Šé¢è¿°ç€å •è½ä¹‹ä¹¡ã€æŠ•èƒä¹‹å¤„ï¼Œä»¥åŠå®¶åº­çäº‹ã€é—ºé˜é—²æƒ…ã€è¯—è¯è°œè¯­ï¼Œå€’è¿˜å…¨å¤‡ åæ‰€è®°å½•è¢«ç©ºç©ºé“äººæ‰€æŠ„å†™ï¼Œæ”¹ã€Šæƒ…åƒ§å½•ã€‹ï¼Œä¸œé²å­”æ¢…æºªé¢˜ã€Šé£æœˆå®é‰´ã€‹ï¼Œæ›¹é›ªèŠ¹äºæ‚¼çº¢è½©æ‰¹é˜…å¢åˆ ã€åˆ†ç›®å½•ç« èŠ‚ï¼Œé¢˜æ›°ã€Šé‡‘é™µåäºŒè¡©ã€‹ï¼Œæ­¤ä¸ºã€ŠçŸ³å¤´è®°ã€‹ç¼˜èµ·ã€‚æ›¹é›ªèŠ¹é¢˜è¯— æ»¡çº¸è’å”è¨€ï¼Œä¸€æŠŠè¾›é…¸æ³ªã€‚ éƒ½äº‘ä½œè€…ç—´ï¼Œæ°´è§£å…¶ä¸­å‘³ï¼ å¼€ç¯‡å§‘è‹åŸä»é’å··ä¸­æœ‰ä¸€ä¹¡å®¦ç”„å£«éšï¼Œæ¢¦ä¸­å¿½é€¢ä¸€åƒ§ä¸€é“äº†ç»“çµçŸ³å…¬æ¡ˆã€‚åŸæ¥é‚£çŸ³å¤´å„åœ°æ¸¸ç©ï¼Œå…¥è­¦å¹»ä»™å­éº¾ä¸‹ï¼Œä»»èµ¤éœå®«ç¥ç‘›ä¾è€…ã€‚å› ä»¥ç”˜éœ²çŒæº‰è¥¿æ–¹çµæ²³ç»›ç è‰ï¼Œç»“ä¸‹å§»ç¼˜ã€‚ç»›ç è‰ä¸ºæ„Ÿè°¢é›¨éœ²ä¹‹æƒ ï¼Œæ¬²â€œè¿˜æ³ªâ€è§£ç¼˜ã€‚ä¸€åƒ§ä¸€é“æºä¸€ä¼—é£æµå†¤å®¶ä¸‹å‡¡ã€‚ä¸‰äººè¡Œè‡³â€œå¤ªè™šå¹»å¢ƒâ€ï¼Œä¸¤è¾¹æœ‰ä¸€å¯¹è” å‡ä½œçœŸæ—¶çœŸäº¦å‡ æ— ä¸ºæœ‰å¤„æœ‰è¿˜æ—  ç”„å£«éšä¸é™„è¿‘è‘«èŠ¦åº™ç©·å„’è´¾é›¨æ‘äº¤å¥½ã€‚ä¸­ç§‹ä½³èŠ‚ä¸¤äººç•…é¥®ï¼Œç”„å£«éšèµ„åŠ©è´¾é›¨æ‘è¿›äº¬èµ¶è€ƒåï¼Œç‹¬å¥³è‹±è²èµ°å¤±ï¼Œå®¶é™¢å› ç«ç¾çƒ§æˆç“¦ç ¾ï¼ŒæŠ•é å²³çˆ¶å°è‚ƒé­å—ç™½çœ¼éè®®ã€‚ä¸€æ—¥ç¢°ä¸€è·›è¶³é“äººï¼Œå¬é“äººè¯­æœ‰æ„Ÿ é‡‘æ»¡ç®±ï¼Œé“¶æ»¡ç®±ï¼Œè½¬çœ¼ä¹ä¸äººçš†è°¤ã€‚æ­£å¹ä»–äººå‘½ä¸é•¿ï¼Œé‚£çŸ¥è‡ªå·±å½’æ¥ä¸§ï¼Ÿè®­æœ‰æ–¹ï¼Œä¿ä¸å®šæ—¥ååšå¼ºæ¢ã€‚æ‹©è†ç²±ï¼Œè°æ‰¿æœ›æµè½åœ¨çƒŸèŠ±å··ï¼å› å«Œçº±å¸½å°ï¼Œè‡´ä½¿é”æ·æ‰›ã€‚æ˜¨æ€œç ´è¢„å¯’ï¼Œä»Šå«Œç´«èŸ’é•¿ï¼šä¹±çƒ˜çƒ˜ä½ æ–¹å”±ç½¢æˆ‘ç™»åœºï¼Œåè®¤ä»–ä¹¡æ˜¯æ•…ä¹¡ã€‚æ•…è’å”ï¼Œåˆ°å¤´æ¥éƒ½æ˜¯â€œä¸ºä»–äººä½œå«è¡£è£³â€ã€‚ ä¾¿äºé“äººé£˜é£˜è€Œå»ã€‚ ç¬¬äºŒå› è´¾å¤«äººä»™é€æ‰¬å·åŸ å†·å­å…´æ¼”è¯´è£å›½åºœè´¾é›¨æ‘å—ç”„å£«éšèµ é“¶ã€è¿›äº¬èµ¶è€ƒï¼Œä¸­äº†è¿›å£«ï¼Œå‡ä»»æœ¬å¿å¤ªçˆ·ï¼Œé£äººè‡³å°åºœç­”è°¢ç”„å£«éšï¼ŒåŒæ—¶å°†å½“å¹´åœ¨ç”„å£«éšå®¶ä¸­å›é¦–ç›¸é¡¾çš„ä¸«å¤´å¨‡æå¨¶ä½œäºŒæˆ¿ã€‚ç„¶å…¶æƒæ‰è´ªè…ï¼Œä¸åˆ°ä¸€å¹´ä¾¿è¢«é©èŒï¼Œäºæ˜¯å‰å¾€å„åœ°æ¸¸è§ˆã€‚ æ¸¸è‡³ç»´æ‰¬æ—¶ï¼Œå…¥å½“æœç›æ”¿å®˜æ—å¦‚æµ·åºœä¸­ç»™å…¶å¹¼å¥³æ—é»›ç‰ä½œè¥¿å¸­ã€‚æ—å¦‚æµ·å¹´è¿‡äº”åï¼Œé»›ç‰ä¸ºå«¡å¦»è´¾æ°æ‰€ç”Ÿï¼Œèªæ˜ä¿Šç§€ä½†ä½“å¼±å¤šç—…ï¼Œå…¶æ¯ä¸€ç—…èº«äº¡ï¼Œéœ€å®ˆä¸§å°½ç¤¼ï¼Œæ—§ç—…å¤å‘ã€‚è´¾é›¨æ‘ä¾¿é—²å±…æ— èŠã€‚ ä¸€æ—¥è´¾é›¨æ‘éƒŠå¤–æ‘è‚†ä¸­å¶é‡æ—§å‹å†·å­å…´ï¼ŒäºŒäººèŠèµ·è£ã€å®ä¸¤åºœã€‚å®å›½å…¬ä¸è£å›½å…¬æ˜¯ä¸€æ¯åŒèƒå…„å¼Ÿã€‚å®å›½å…¬è´¾æ¼”ç”Ÿæœ‰ä¸¤å­ï¼Œé•¿å­è´¾ä»£åŒ–åŒæœ‰ä¸¤å­ï¼Œç¨é•¿ä¹‹å­è´¾æ•·æ—©æ­»ï¼Œæ¬¡å­è´¾æ•¬è¢­å®˜ï¼Œç„¶è€Œä¸€å‘³å¥½é“ç»ˆæ—¥ç‚¼ä¸¹ã€‚è´¾æ•¬æœ‰ä¸€å­è´¾çï¼Œç”Ÿä¸‹ä¸€å­åè´¾è“‰ã€‚è£å›½å…¬è´¾æºçš„é•¿å­è´¾ä»£å–„åœ¨å…¶å»ä¸–åè¢­å®˜ï¼Œå¨¶é‡‘é™µä¸–å®¶å²ä¾¯çš„å°å§ä¸ºå¦»ï¼Œç”Ÿæœ‰ä¸¤å­ï¼Œé•¿å­è´¾èµ¦è¢­å®˜ï¼Œæ¬¡å­è´¾æ”¿ä»»å‘˜å¤–éƒã€‚è´¾æ”¿å¤«äººç‹æ°ç”Ÿä¸‹äºŒèƒå¥³å„¿åå‡ å¹´åï¼Œç«Ÿåˆç”Ÿä¸€å˜´è¡”äº”å½©æ™¶ç‰çš„ç”·å­©ï¼Œå…¶åè´¾å®ç‰ã€‚ document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"æ–‡å­¦","slug":"æ–‡å­¦","permalink":"http://yoursite.com/categories/æ–‡å­¦/"}],"tags":[{"name":"æ–‡å­¦","slug":"æ–‡å­¦","permalink":"http://yoursite.com/tags/æ–‡å­¦/"},{"name":"ç¬”è®°","slug":"ç¬”è®°","permalink":"http://yoursite.com/tags/ç¬”è®°/"},{"name":"çº¢æ¥¼æ¢¦","slug":"çº¢æ¥¼æ¢¦","permalink":"http://yoursite.com/tags/çº¢æ¥¼æ¢¦/"}]},{"title":"Dart é¢å‘å¯¹è±¡","slug":"Dart-é¢å‘å¯¹è±¡","date":"2019-04-23T01:10:53.000Z","updated":"2019-04-24T05:40:10.000Z","comments":true,"path":"Dart-é¢å‘å¯¹è±¡/","link":"","permalink":"http://yoursite.com/Dart-é¢å‘å¯¹è±¡/","excerpt":"å¼•è¨€ä½œä¸ºä¸€é—¨é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼ŒDart åœ¨å¾ˆå¤šæ–¹é¢è·Ÿ Java éƒ½å¾ˆç›¸ä¼¼ã€‚Dart ä¸­æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯ç±»çš„å®ä¾‹ï¼Œæ‰€æœ‰ç±»éƒ½å±äº Object çš„å­ç±»ï¼Œç±»çš„ç»§æ‰¿åˆ™ä½¿ç”¨ Mixin æœºåˆ¶ã€‚","text":"å¼•è¨€ä½œä¸ºä¸€é—¨é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼ŒDart åœ¨å¾ˆå¤šæ–¹é¢è·Ÿ Java éƒ½å¾ˆç›¸ä¼¼ã€‚Dart ä¸­æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯ç±»çš„å®ä¾‹ï¼Œæ‰€æœ‰ç±»éƒ½å±äº Object çš„å­ç±»ï¼Œç±»çš„ç»§æ‰¿åˆ™ä½¿ç”¨ Mixin æœºåˆ¶ã€‚ å®šä¹‰ä½¿ç”¨ class å…³é”®å­—å®šä¹‰ä¸€ä¸ªç±»ã€‚ä¸ Java ç±»ä¼¼ï¼Œå¦‚æœæ²¡æœ‰æ˜¾ç¤ºåœ°å®šä¹‰æ„é€ å‡½æ•°ï¼Œä¼šé»˜è®¤ä¸€ä¸ªæ— å‚æ„é€ å‡½æ•°ã€‚ä½¿ç”¨ new å…³é”®å­—å’Œæ„é€ å‡½æ•°æ¥åˆ›å»ºå¯¹è±¡ã€‚ 12345678910class Point { num x; num y; num z;}void main() { var point = new Point(); print(point.hasCode);//æœªå®šä¹‰çˆ¶ç±»çš„æ—¶å€™ï¼Œé»˜è®¤ç»§æ‰¿è‡ªObject} æ„é€ å‡½æ•°å¯ä»¥åœ¨æ„é€ å‡½æ•°çš„å‚æ•°å‰åŠ  this å…³é”®å­—ç›´æ¥èµ‹å€¼ 12345678910111213141516171819202122232425262728293031323334353637class Point { num x; num y; num z; //ç¬¬ä¸€ä¸ªå€¼ä¼ é€’ç»™this.xï¼Œç¬¬äºŒä¸ªå€¼ä¼ é€’ç»™this.y Point(this.x, this.y, z) { this.z = z; } //å‘½åæ„é€ å‡½æ•°ï¼Œæ ¼å¼ä¸ºClass.name(var param) Point.fromeList(var list): x = list[0], y = list[1], z = list[2]{ //ä½¿ç”¨å†’å·åˆå§‹åŒ–å˜é‡ } //å½“ç„¶ï¼Œä¸Šé¢ä¹Ÿå¯ä»¥ç®€å†™ä¸ºï¼š //Point.fromeList(var list):this(list[0], list[1], list[2]); String toString() => 'x:$x y:$y z:$z';}//è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•class ColorPoint extends Point { String color; ColorPoint.fromXYZAndColor(num x, num y, num z, String color) : super.fromXYZ(x, y, z) { this.color = color; print('ColorPoint'); }}void main() { var p1 = new Point(1, 2, 3); var p2 = new Point.fromeList([1, 2, 3]); print(p1); //é»˜è®¤è°ƒç”¨toString()å‡½æ•°} éœ€è¦åˆ›å»ºä¸å¯å˜å¯¹è±¡çš„è¯ï¼Œå¯ä»¥åœ¨æ„é€ å‡½æ•°å‰ä½¿ç”¨constå…³é”®å­—å®šä¹‰ç¼–è¯‘æ—¶å¸¸é‡å¯¹è±¡ 123456class ImmutablePoint { final num x; final num y; const ImmutablePoint(this.x, this.y); // å¸¸é‡æ„é€ å‡½æ•° static final ImmutablePoint origin = const ImmutablePoint(0, 0); // åˆ›å»ºä¸€ä¸ªå¸¸é‡å¯¹è±¡ä¸èƒ½ç”¨newï¼Œè¦ç”¨const} å·¥å‚æ„é€ å‡½æ•°Dart ä¸­ä¸€ç§è·å–å•ä¾‹å¯¹è±¡çš„æ–¹å¼ï¼Œä½¿ç”¨å·¥å‚æ¨¡å¼æ¥å®šä¹‰æ„é€ å‡½æ•°ã€‚å¯¹äºè°ƒç”¨è€…æ¥è¯´ï¼Œä»ç„¶ä½¿ç”¨ new å…³é”®å­—æ¥è·å–å¯¹è±¡ï¼Œå…·ä½“çš„å®ç°ç»†èŠ‚å¯¹å¤–éšè—ã€‚ 12345678910111213141516171819202122232425262728class Logger { final String name; bool mute = false; // å˜é‡å‰åŠ ä¸‹åˆ’çº¿è¡¨ç¤ºç§æœ‰å±æ€§ static final Map _cache = {}; factory Logger(String name) { if (_cache.containsKey(name)) { return _cache[name]; } else { final logger = new Logger._internal(name); _cache[name] = logger; return logger; } } Logger._internal(this.name); void log(String msg) { if (!mute) { print('$name: $msg'); } } } var logger = new Logger('UI'); logger.log('Button clicked'); Getter / Setterç”¨æ¥è¯»å†™å¯¹è±¡çš„å±æ€§ï¼Œæ¯ä¸ªå±æ€§éƒ½å¯¹åº”ä¸€ä¸ªéšå¼çš„ Getter å’Œ Setterï¼Œé€šè¿‡obj.xè°ƒç”¨ã€‚ç±»ä¼¼äº Kotlinï¼Œå¯ä»¥ä½¿ç”¨getã€setå…³é”®å­—æ‹“å±•ç›¸åº”çš„åŠŸèƒ½ã€‚å¦‚æœå±æ€§ä¸ºfinalæˆ–è€…constï¼Œåˆ™åªæœ‰å¯¹å¤–çš„ Getterã€‚ 1234567891011121314151617181920212223class Rectangle { num left; num top; num width; num height; Rectangle(this.left, this.top, this.width, this.height); // right å’Œ bottom ä¸¤ä¸ªå±æ€§çš„è®¡ç®—æ–¹æ³• num get right => left + width; set right(num value) => left = value - width; num get bottom => top + height; set bottom(num value) => top = value - height;}void main() { var rect = new Rectangle(3, 4, 20, 15); assert(rect.left == 3); rect.right = 12; assert(rect.left == -8);} ç±»æ–¹æ³•å®ä¾‹æ–¹æ³•è·Ÿ Java ç±»ä¼¼ï¼ŒæŠ½è±¡æ–¹æ³•æœ‰æ‰€ä¸åŒï¼Œä¸éœ€è¦ä½¿ç”¨abstractæ˜¾ç¤ºå®šä¹‰ï¼Œåªéœ€è¦åœ¨æ–¹æ³•ç­¾ååç”¨;æ¥ä»£æ›¿æ–¹æ³•ä½“å³è¡¨ç¤ºå…¶ä¸ºä¸€æŠ½è±¡æ–¹æ³•ï¼ŒDart ä¸­éæŠ½è±¡ç±»ä¹Ÿå¯ä»¥å®šä¹‰æŠ½è±¡æ–¹æ³•ã€‚ 1234567891011abstract class Bird { void fly();}class Sparrow extends Bird { void fly() { } void sleep();} ç»§æ‰¿åœ¨ Dart ä¸­æ²¡æœ‰â€œæ¥å£â€è¿™ä¸€æ¦‚å¿µï¼Œç±»åˆ†ä¸ºæŠ½è±¡ç±»å’ŒéæŠ½è±¡ç±»ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯åè€…ä¸å¯ç›´æ¥å®ä¾‹åŒ–ã€‚Dart ä¸­ä»ç„¶ä½¿ç”¨äº†implementså’Œextendså…³é”®å­—ï¼Œä¸è¿‡ä¸¤è€…æœ‰æ‰€ä¸åŒ implements ä»£è¡¨å®ç°ï¼Œå­ç±»æ— æ³•è®¿é—®çˆ¶ç±»çš„å‚æ•°ï¼Œå¯ä»¥å®ç°å¤šä¸ªç±» extends ä»£è¡¨ç»§æ‰¿ï¼Œå¯ç»§æ‰¿çˆ¶ç±»çš„éç§æœ‰å˜é‡ï¼Œä½¿ç”¨å•ç»§æ‰¿æœºåˆ¶ åœ¨æ„é€ å‡½æ•°ä½“å‰ä½¿ç”¨ superå…³é”®å­—è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œä½¿ç”¨@overrideæ¥æ³¨è§£å¤å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚ Mixin ç»§æ‰¿æœºåˆ¶ç»§æ‰¿æ­§ä¹‰åœ¨äº†è§£è¯¥æœºåˆ¶ä¹‹å‰å…ˆè®¤è¯†â€œç»§æ‰¿æ­§ä¹‰â€ï¼Œä¹Ÿå«â€œè±å½¢é—®é¢˜â€ã€‚å½“ä¸¤ä¸ªç±» B å’Œ C ç»§æ‰¿è‡ª Aï¼ŒDç±»ç»§æ‰¿è‡ª B å’Œ C æ—¶å°†äº§ç”Ÿæ­§ä¹‰ã€‚å½“ A ä¸­æœ‰ä¸€ä¸ªæ–¹æ³•åœ¨ B å’Œ C ä¸­å·²ç»é‡å†™ï¼Œè€Œ D æ²¡æœ‰ é‡å†™ï¼Œé‚£ä¹ˆ D ç»§æ‰¿çš„æ–¹æ³•çš„ç‰ˆæœ¬æ˜¯ B è¿˜æ˜¯ Cï¼Ÿ ä¸åŒçš„ç¼–ç¨‹è¯­è¨€æœ‰ä¸åŒçš„æ–¹æ³•å¤„ç†è¯¥é—®é¢˜ è¯­è¨€ è§£å†³æ–¹æ¡ˆ C++ éœ€è¦æ˜¾å¼åœ°å£°æ˜è¦ä½¿ç”¨çš„ç‰¹æ€§æ˜¯ä»å“ªä¸ªçˆ¶ç±»è°ƒç”¨çš„(å¦‚ï¼šWorker::Human.Age)ã€‚C++ä¸æ”¯æŒæ˜¾å¼çš„é‡å¤ç»§æ‰¿ï¼Œå› ä¸ºæ— æ³•é™å®šè¦ä½¿ç”¨å“ªä¸ªçˆ¶ç±» Java 8 Java 8 åœ¨æ¥å£ä¸Šå¼•å…¥é»˜è®¤æ–¹æ³•ã€‚å¦‚æœAã€Bã€Cæ˜¯æ¥å£ï¼ŒBã€Cå¯ä»¥ä¸ºAçš„æŠ½è±¡æ–¹æ³•æä¾›ä¸åŒçš„å®ç°ï¼Œä»è€Œå¯¼è‡´è±å½¢é—®é¢˜ã€‚Dç±»å¿…é¡»é‡æ–°å®ç°è¯¥æ–¹æ³•ï¼Œå¦åˆ™å‘ç”Ÿç¼–è¯‘é”™è¯¯ã€‚ï¼ˆJava 8 ä¹‹å‰ä¸æ”¯æŒå¤šé‡ç»§æ‰¿ã€æ²¡æœ‰é»˜è®¤æ–¹æ³•ï¼‰ Dart ä½¿ç”¨ Mixin æœºåˆ¶è§£å†³è¯¥æ–¹æ³•ï¼Œæˆ–è€…å†™ä½œâ€œmix-inï¼ˆæ··å…¥ï¼‰â€æ›´å®¹æ˜“ç†è§£ã€‚ Mixinåœ¨ Java8 ä¹‹å‰ï¼Œç”±äºå•ç»§æ‰¿æœºåˆ¶ä»¥åŠæ¥å£æ²¡æœ‰é»˜è®¤æ–¹æ³•ï¼Œé¿å…äº†ç»§æ‰¿æ­§ä¹‰ï¼Œè€Œ Dart è™½ç„¶ä¹Ÿä½¿ç”¨äº†å•ç»§æ‰¿æœºåˆ¶ï¼Œä½†æ˜¯æ²¡æœ‰interfaceè¿™ä¸€æ¦‚å¿µ â€”â€” å®é™…ä¸Šï¼ŒDart ä¸­çš„æ¯ä¸€ä¸ªç±»éƒ½å¯ä»¥è¢«implements â€”â€” æ‰€ä»¥ä½¿ç”¨äº†åŸºäºçº¿æ€§é€»è¾‘çš„Mixinè§£å†³è¯¥é—®é¢˜ã€‚ Mixinå³ä¸ºæ··å…¥ï¼šMixins are a way of reusing a classâ€™s code in multiple class hierarchiesã€‚ é€šè¿‡ä¸€ä¸ªä¾‹å­ç†è§£ 1234567891011121314151617181920212223242526272829class A { var s = 'A'; get() => 'A';}class B { var s = 'B'; get() => 'B';}class P { var s = 'P'; get() => 'P';}class AB extends P with A, B { var s = 'AB';}class BA extends P with B, A {}void main() { AB ab = AB(); print(ab.get()); print(ab.s); BA ba = BA(); print(ba.get());} æ§åˆ¶å°è¾“å‡ºä¸ºï¼š BABA è¿™æ˜¯å› ä¸ºä¸‹é¢çš„ä»£ç  123class AB extends P with A, B {}class BA extends P with B, A {} ç›¸å½“äº 123456789class PA = P with A;class PAB = PA with B;class AB extends PAB {}class PB = P with B;class PBA = PB with A;class BA extends PBA {} ç»§æ‰¿å›¾å¦‚ä¸‹ æœ‰æ„æ€çš„æ˜¯ï¼Œå½“æˆ‘ä»¬å°†ä¸Šé¢çš„ä»£ç ä¸­çš„withæ¢æˆimplementsæ—¶ï¼Œè¾“å‡ºçš„ç»“æœå°†ä¸º PABP extendsã€withã€implementsåœ¨ Dart ä¸­ï¼Œç±»å£°æ˜å¿…é¡»ä¸¥æ ¼æŒ‰ç…§ extends -> with -> implements çš„é¡ºåº extends çš„ç”¨æ³•ç±»ä¼¼äº Javaï¼Œå”¯ä¸€çš„ä¸åŒåœ¨äºå­ç±»å¯ä»¥å®Œå…¨è®¿é—®çˆ¶ç±»çš„å±æ€§å’Œå‡½æ•°ï¼Œå› ä¸ºåœ¨ Dart ä¸­å¹¶æ²¡æœ‰ç§æœ‰ã€å…¬æœ‰çš„æ¦‚å¿µï¼Œä¸‹åˆ’çº¿_çš„ä»…ä»…æ˜¯ä¸€ç§çº¦å®šã€‚ é™¤äº†ä¸Šé¢çš„å†…å®¹ï¼Œwithè¿˜å¯ä»¥ä¸ä¹‹æ­é…å…³é”®å­—onï¼Œè¡¨ç¤ºè¦è¿›è¡Œ mixin çš„ç±»å¿…é¡»å…ˆ â€œimplementsâ€ è¢« mixin çš„ç±»å£°æ˜ä¸­ on å…³é”®å­—åé¢çš„ç±»ï¼Œå¦åˆ™ç¼–è¯‘å¤±è´¥ 1234567891011121314abstract class D { void fromD();}mixin C on D { fromC() => 'C';}/* ä¸‹é¢çš„ä»£ç å°†ç¼–è¯‘å¤±è´¥ï¼Œå› ä¸º F è¦ mixin C å¿…é¡»å…ˆâ€œimplementsâ€ D ä½†æ˜¯ implements å…³é”®å­—åˆå¿…é¡»åœ¨ with çš„åé¢ï¼Œæ‰€ä»¥åªèƒ½å®šä¹‰ä¸€ä¸ªæ–°çš„ç±» E ä½¿ E implements Dï¼ŒF å† extends Eï¼Œæ‰èƒ½ mixin C */class F with C { } æ­£ç¡®çš„åšæ³• 123456class E implements D { @override void fromD() => 'E';}class F extends E with C { } Dart ä¸­æ¯ä¸ªç±»éƒ½æ˜¯ä¸€ä¸ªéšå¼åœ°æ¥å£ã€‚implementsä¸€ä¸ªç±»ä¹‹åï¼Œå¿…é¡»overrideæ‰€æœ‰çš„æ–¹æ³•å’Œæˆå‘˜å˜é‡ document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Dart","slug":"Dart","permalink":"http://yoursite.com/categories/Dart/"}],"tags":[{"name":"Dart","slug":"Dart","permalink":"http://yoursite.com/tags/Dart/"}]},{"title":"Dart åŸºç¡€å…¥é—¨","slug":"Dart åŸºç¡€å…¥é—¨","date":"2019-04-22T06:27:18.000Z","updated":"2019-04-22T12:01:14.000Z","comments":true,"path":"Dart åŸºç¡€å…¥é—¨/","link":"","permalink":"http://yoursite.com/Dart åŸºç¡€å…¥é—¨/","excerpt":"å¼•è¨€ç»ˆäºå¼€å§‹ Flutter çš„å…·ä½“å­¦ä¹ ï¼Œä¸€åˆ‡ä» Dart è¯­è¨€å¼€å§‹ã€‚ 123void main() { print('hello world');}","text":"å¼•è¨€ç»ˆäºå¼€å§‹ Flutter çš„å…·ä½“å­¦ä¹ ï¼Œä¸€åˆ‡ä» Dart è¯­è¨€å¼€å§‹ã€‚ 123void main() { print('hello world');} ç¯å¢ƒæ­å»ºDart çš„ SDK ä¸‹è½½å¯èƒ½éœ€è¦æ¢¯å­ã€‚ä½œè€…ä½¿ç”¨çš„å¼€å‘ç¯å¢ƒæ˜¯ Intellij IDEAï¼Œé¦–å…ˆä¸‹è½½ Dart çš„ Pluginï¼Œé‡å¯ IDEA ä¹‹ååˆ›å»ºä¸€ä¸ª Dart Projectï¼Œå½“ç„¶é¦–å…ˆéœ€è¦ç¡®è®¤ SDK çš„è·¯å¾„ã€‚ åˆ›å»ºä¹‹åçš„æ–‡ä»¶çª—å£å¦‚ä¸‹ï¼Œå³é”® DartDemo æ–‡ä»¶å¤¹ï¼Œæ–°å»ºä¸€ä¸ª dart æ–‡ä»¶ï¼Œå’Œ C/C++ ç±»ä¼¼ï¼ŒDart è¯­è¨€ä»¥æ–‡ä»¶ä¸­çš„mainå‡½æ•°ä½œä¸ºè¿è¡Œçš„å…¥å£ã€‚åœ¨runä¹‹å‰éœ€è¦edit configurationï¼Œå¾ˆç®€å•ï¼Œåªè¦æŒ‡å®šå¯¹åº”çš„æ–‡ä»¶å³å¯ã€‚ å£°æ˜å˜é‡Dart æ˜¯ä¸€é—¨å®Œå…¨é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼ŒåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹ã€å‡½æ•°éƒ½æ˜¯å¯¹è±¡ï¼Œç»§æ‰¿è‡ª Objectã€‚å£°æ˜ä¸€ä¸ªå¯¹è±¡å¯ä»¥åˆå§‹åŒ–ï¼Œå¦åˆ™å…¶å€¼ä¸ºnullã€‚å¯ä»¥ä½¿ç”¨å…·ä½“çš„ç±»å‹å£°æ˜ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨varã€dynamicã€constã€finalç­‰å…³é”®å­— 12345678910void main() { var i = 0; var d = 2.0; var s = 'hello'; var b = true; var l = [1, 2, 3]; var m = {0: 'a', 1: 'b'}; print(main is Function); //true} é€šè¿‡æŸ¥çœ‹å®˜æ–¹åº“çš„coreåŒ…ï¼Œå¯ä»¥å¤§æ¦‚çœ‹å‡ºå…¶ç»“æ„ æ•°æ®ç±»å‹NumbersåŒ…æ‹¬ int å’Œ doubleï¼Œåˆ†åˆ«ä»£è¡¨æ•´å½¢å’Œæµ®ç‚¹å‹ã€‚ int çš„æ•°å€¼èŒƒå›´ä¸è¶…è¿‡2çš„64ä½ï¼Œå…·ä½“ä¸å¹³å°æœ‰å…³ï¼Œä¸€èˆ¬ä¸º -2^53 to 2^53ã€‚double åˆ™å±äº64ä½çš„åŒç²¾åº¦æµ®ç‚¹å‹æ•°æ®ã€‚ Stringåœ¨ Dart ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡ï¼Œæˆ–è€…ä½¿ç”¨ä¸‰å¼•å·å®šä¹‰æ ¼å¼å­—ç¬¦ä¸²ã€‚Dart çš„å­—ç¬¦ä¸²ä½¿ç”¨ UTF-16 ç¼–ç  123456var s1 = \"hello\";var s2 = 'world';var s3 = 'hello' + 'world';var s4 = 'hello' 'world';var s5 = \"\"\"hello world\"\"\"; å¦‚æœè¦ä½¿ç”¨ UTF-32 ç¼–ç ï¼Œåˆ™è¦é€šè¿‡ Runesï¼ˆç¬¦å·æ–‡å­—ï¼‰ï¼Œå®ƒå¯ä»¥æŠŠæ–‡å­—è½¬æ¢æˆç¬¦å·è¡¨æƒ…æˆ–è€…ç‰¹å®šæ–‡å­—ã€‚ 12345var clapping = '\\u{1f44f}';print(clapping);Runes runes = new Runes('\\u{1f44d}');print(new String.fromCharCode(runes.first)); ä¸Šé¢çš„è¾“å‡ºä¸º 12ğŸ‘ğŸ‘ Booleanæä¾› bool ç”¨æ¥å£°æ˜å¸ƒå°”å‹å˜é‡ï¼Œé»˜è®¤ä¸º falseã€‚ List å’Œ Map12345678List l = [1,2,3];l.forEach((x) => print(x)); //forEachçš„å‚æ•°ä¸º Functionfor(var x in l) { //ä½¿ç”¨for-in print(x);}Map map = {0: \"a\", 1: \"b\"};map[0] = \"c\"; Functionæ™®é€šFunctionå‡½æ•°æˆ–è€…æ–¹æ³•ã€‚å’ŒJava ä¸åŒï¼ŒDart ä¸­æ–¹æ³•æ˜¯æœ‰ç±»å‹çš„ï¼Œå±äº Functionã€‚ 12345678910111213141516171819void main() { single1('Tom', 20); single2('Tom', 20); single3('Tom', 20, weight: 30); //ç”±äºæ²¡æœ‰ä½ç½®çº¦æŸï¼Œå¿…é¡»æŒ‡å®šå½¢å‚åç§° single4('Tom', 20, 20, 30);}bool single1(String name, int age) { return true;}//è¿”å›ç±»å‹å’Œå‚æ•°ç±»å‹å¯çœç•¥ï¼Œæ”¯æŒè¿”å›è¡¨è¾¾å¼single2(name, age) => true;//å¯é€‰å‘½åå‚æ•°ï¼Œè°ƒç”¨æ—¶æ²¡æœ‰é¡ºåºè¦æ±‚ï¼ŒåŒæ—¶å¯é€‰å‚æ•°å¯ä»¥æŒ‡å®šé»˜è®¤å€¼bool single3(String name, int age, {int weight = 60, int height}) => true;//å¯é€‰ä½ç½®å‚æ•°ï¼Œé€šè¿‡ä½ç½®æ¥ç¡®å®šå‚æ•°å€¼ï¼Œè¦æƒ³æŒ‡å®š height å¿…é¡»å…ˆæŒ‡å®š weightbool single4(String name, int age, [int weight, int height]) => true; å¯¹äºmainæ–¹æ³•æ¥è¯´ï¼Œå¯ä»¥å®šä¹‰å…¶ä¸ºä¸€ä¸ªæœ‰å‚çš„æ–¹æ³•ï¼ŒåŒæ ·å¯ä»¥ä½œä¸ºå…¥å£æ–¹æ³•ã€‚åœ¨ Flutter é¡¹ç›®ä¸­çš„å…¥å£æ–¹æ³•ä¸ºï¼š 1void main() => runApp(MyApp()); Lambdaè¡¨è¾¾å¼åœ¨ Lambda è¡¨è¾¾å¼ä¸­ï¼Œå‡½æ•°å¯ä»¥â€œæ²¡æœ‰åå­—â€ï¼ŒåŒæ ·ï¼Œä¹Ÿå¯ä»¥åƒ kotlin ä¸€æ ·ï¼Œå®šä¹‰ä¸€ä¸ªå‡½æ•°å˜é‡ 123456789101112var f = (c) { print(c);};f('hello');var list = [1, 2, 3];printElement(x) { //æ–¹æ³•ç­¾åå†™æˆ void printElement(int x) æ›´ç›´è§‚ print(x);}list.forEach(printElement); forEachçš„å‡½æ•°å®šä¹‰å¦‚ä¸‹ 123void forEach(void f(E element)) { for (E element in this) f(element);} ä¸‹é¢çš„ä¾‹å­ç›´è§‚å±•ç¤ºå°†å‡½æ•°ä½œä¸ºå˜é‡ä¼ é€’çš„æ€æƒ³ 1234567891011121314Function makeAdder(num n) { return (num i) => n + i;} //æ›´æ˜æ™°çš„å†™æ³•Function makeAdder_(num n) { Function add = (num i) { return i + n; }; return add;}var adder2 = makeAdder(2);print(adder2(3)); æ§åˆ¶å°å°†è¾“å‡º 5 è¿ç®—ç¬¦èµ‹å€¼æ“ä½œç¬¦é™¤äº†=ï¼Œè¿˜æœ‰??=ï¼Œè¡¨ç¤ºå¦‚æœå·¦è¾¹çš„å˜é‡ä¸º nullï¼Œåˆ™å°†å³è¾¹çš„å€¼èµ‹äºˆå®ƒï¼Œå¦åˆ™å·¦è¾¹å€¼ä¸å˜ã€‚ ç›¸ç­‰==å°†æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å±æ€§æ˜¯å¦ç›¸ç­‰ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºåŒä¸€å¯¹è±¡ä½¿ç”¨çš„æ˜¯é¢„å®šä¹‰çš„identicalæ–¹æ³• 1external bool identical(Object a, Object b); é™¤æ³• æ“ä½œç¬¦ å«ä¹‰ / é™¤ï¼Œæ¯”å¦‚ 5/2 = 2.5 ~/ æ•´é™¤ï¼Œ 5/2 = 2 ç±»å‹åˆ¤æ–­ æ“ä½œç¬¦ å«ä¹‰ is å¯¹è±¡å±äºæŒ‡å®šç±»å‹åˆ™è¿”å›true is! å¯¹è±¡ä¸å±äºæŒ‡å®šç±»å‹è¿”å›true as ç±»å‹è½¬æ¢ æ¡ä»¶è¡¨è¾¾å¼åˆ†ä¸ºä¸¤ç§ 12condition ? expr1 : expr2 //é€šç”¨è¡¨è¾¾å¼expr1 ?? expr2 //å¦‚æœ expr1 éç©ºï¼Œè¿”å›å…¶å€¼ï¼Œå¦åˆ™è¿”å› expr2 çº§è”è°ƒç”¨ä¸éç©ºè°ƒç”¨1234567891011121314//å¸¸è§„å†™æ³•var button = querySelector('#button');button.text = 'Confirm';button.classes.add('important');button.onClick.listen((e) => window.alert('Confirmed!'));//ä½¿ç”¨çº§è”è¡¨è¾¾å¼querySelector('#button') // Get an object. ..text = 'Confirm' // Use its members. ..classes.add('important') ..onClick.listen((e) => window.alert('Confirmed!'));//éç©ºè°ƒç”¨print(button?.text); å…¶ä»–Dart è¯­è¨€åœ¨æ¯”å¦‚ if/elseã€[doã€]whileã€forã€switch/caseç­‰è¯­å¥ä¸Šè·Ÿ Java ç±»ä¼¼ï¼Œä¸å†èµ˜è¿°ã€‚ å¼‚å¸¸å¤„ç†çš„åšæ³•å¦‚ä¸‹ 12345678910111213141516171819//æŠ›å‡ºå¼‚å¸¸throw 'x should be less than 10'; throw new FormatException('Expected at least 1 section');//æ•è·å¼‚å¸¸try { breedMoreLlamas();} on OutOfLlamasException { buyMoreLlamas();}try { //...} on Exception catch (e) { print('Unknown exception: $e');} catch (e, s) { print('Exception details:\\n $e'); print('Stack trace:\\n $s');} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Dart","slug":"Dart","permalink":"http://yoursite.com/categories/Dart/"}],"tags":[{"name":"Dart","slug":"Dart","permalink":"http://yoursite.com/tags/Dart/"}]},{"title":"Android Binder æºç è§£æ","slug":"Android-Binder-æºç è§£æ","date":"2019-03-23T04:18:53.000Z","updated":"2019-04-24T05:31:52.000Z","comments":true,"path":"Android-Binder-æºç è§£æ/","link":"","permalink":"http://yoursite.com/Android-Binder-æºç è§£æ/","excerpt":"","text":"TODO document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Android","slug":"Android","permalink":"http://yoursite.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://yoursite.com/tags/Android/"},{"name":"Binder","slug":"Binder","permalink":"http://yoursite.com/tags/Binder/"}]},{"title":"Java çº¿ç¨‹å’Œçº¿ç¨‹æ± è¯¦è§£","slug":"Java-çº¿ç¨‹å’Œçº¿ç¨‹æ± è¯¦è§£","date":"2019-03-20T09:29:06.000Z","updated":"2019-03-21T10:02:08.000Z","comments":true,"path":"Java-çº¿ç¨‹å’Œçº¿ç¨‹æ± è¯¦è§£/","link":"","permalink":"http://yoursite.com/Java-çº¿ç¨‹å’Œçº¿ç¨‹æ± è¯¦è§£/","excerpt":"å¼•è¨€çº¿ç¨‹åœ¨ Java å¼€å‘ä¸­æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µã€‚ åœ¨Javaä¸­ï¼Œâ€œçº¿ç¨‹â€æŒ‡ä¸¤ä»¶ä¸åŒçš„äº‹æƒ…ï¼š java.lang.Thread ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼› çº¿ç¨‹çš„æ‰§è¡Œã€‚","text":"å¼•è¨€çº¿ç¨‹åœ¨ Java å¼€å‘ä¸­æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µã€‚ åœ¨Javaä¸­ï¼Œâ€œçº¿ç¨‹â€æŒ‡ä¸¤ä»¶ä¸åŒçš„äº‹æƒ…ï¼š java.lang.Thread ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼› çº¿ç¨‹çš„æ‰§è¡Œã€‚ Java çº¿ç¨‹çº¿ç¨‹å’Œè¿›ç¨‹æ¦‚å¿µè¿›ç¨‹æ˜¯æŒ‡ä¸€ä¸ªå†…å­˜ä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ä¸€å—å†…å­˜ç©ºé—´ï¼Œå³è¿›ç¨‹ç©ºé—´ï¼ˆè™šç©ºé—´ï¼‰ã€‚è¿›ç¨‹ä¸ä¾èµ–äºçº¿ç¨‹è€Œç‹¬ç«‹å­˜åœ¨ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥å¯åŠ¨å¤šä¸ªçº¿ç¨‹ã€‚ç³»ç»Ÿè¿è¡Œä¸€ä¸ªç¨‹åºå³æ˜¯ä¸€ä¸ªè¿›ç¨‹ä»åˆ›å»ºã€è¿è¡Œåˆ°æ¶ˆäº¡çš„è¿‡ç¨‹ã€‚ çº¿ç¨‹æ˜¯æŒ‡è¿›ç¨‹ä¸­çš„ä¸€ä¸ªæ‰§è¡Œæµç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥è¿è¡Œå¤šä¸ªçº¿ç¨‹ã€‚çº¿ç¨‹æ€»æ˜¯å±äºæŸä¸ªè¿›ç¨‹ï¼Œçº¿ç¨‹æ²¡æœ‰è‡ªå·±çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œä¸è¿›ç¨‹å†…çš„å…¶ä»–çº¿ç¨‹ä¸€èµ·å…±äº«åˆ†é…ç»™è¯¥è¿›ç¨‹çš„æ‰€æœ‰èµ„æºã€‚ï¼Œçº¿ç¨‹æ˜¯ CPU æ‰§è¡Œçš„åŸºæœ¬å•ä½ï¼Œæ˜¯èŠ±è´¹æœ€å°å¼€é”€çš„å®ä½“ã€‚ åŒºåˆ«è¿›ç¨‹æœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œè¿›ç¨‹ä¸­çš„æ•°æ®å­˜æ”¾ç©ºé—´ï¼ˆå †ç©ºé—´å’Œæ ˆç©ºé—´ï¼‰æ˜¯ç‹¬ç«‹çš„ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚ çº¿ç¨‹ä¸­å †ç©ºé—´æ˜¯å…±äº«çš„ï¼Œæ ˆç©ºé—´æ˜¯ç‹¬ç«‹çš„ï¼Œçº¿ç¨‹æ¶ˆè€—çš„èµ„æºæ¯”è¿›ç¨‹å°çš„å¤šã€‚ ä¸€ä¸ªè¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹æ˜¯å¹¶å‘è¿è¡Œçš„ï¼Œä»å¾®è§‚è§’åº¦çœ‹å­˜åœ¨å…ˆåé¡ºåºï¼Œå“ªä¸ªçº¿ç¨‹è¢«æ‰§è¡Œå®Œå…¨å–å†³äº CPU çš„è°ƒåº¦ï¼Œç¨‹åºå‘˜æ— æ³•å¹²æ¶‰ã€‚è¿™ä¹Ÿå°±é€ æˆäº†å¤šçº¿ç¨‹çš„éšæœºæ€§ã€‚ Java ç¨‹åºçš„è¿›ç¨‹é‡Œé¢è‡³å°‘åŒ…å«ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸»çº¿ç¨‹ä¹Ÿå°±æ˜¯ main() æ–¹æ³•çº¿ç¨‹ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯åƒåœ¾å›æ”¶æœºåˆ¶çº¿ç¨‹ã€‚æ¯å½“ä½¿ç”¨ java å‘½ä»¤æ‰§è¡Œä¸€ä¸ªç±»æ—¶ï¼Œå®é™…ä¸Šéƒ½ä¼šå¯åŠ¨ä¸€ä¸ª JVMï¼Œå¯¹åº”ä¸€ä¸ªè¿›ç¨‹ã€‚ ç”±äºåˆ›å»ºä¸€ä¸ªçº¿ç¨‹çš„å¼€é”€æ¯”åˆ›å»ºä¸€ä¸ªè¿›ç¨‹çš„å¼€é”€å°çš„å¤šï¼Œåœ¨å¼€å‘å¤šä»»åŠ¡è¿è¡Œçš„æ—¶å€™ï¼Œé€šå¸¸è€ƒè™‘åˆ›å»ºå¤šçº¿ç¨‹ï¼Œè€Œä¸æ˜¯åˆ›å»ºå¤šè¿›ç¨‹ã€‚ å®é™…å¼€å‘ä¸­ä½¿ç”¨å¤šçº¿ç¨‹çš„ä¼˜åŠ¿åœ¨äº è¿›ç¨‹ä¹‹é—´ä¸èƒ½å…±äº«å†…å­˜ï¼Œè€Œçº¿ç¨‹ä¹‹é—´å¯ä»¥å…±äº«å†…å­˜ã€‚ ç³»ç»Ÿåˆ›å»ºè¿›ç¨‹éœ€è¦ä¸ºè¯¥è¿›ç¨‹é‡æ–°åˆ†é…ç³»ç»Ÿèµ„æºï¼Œåˆ›å»ºçº¿ç¨‹çš„ä»£ä»·åˆ™å°çš„å¤šï¼Œå› æ­¤å¤šä»»åŠ¡å¹¶å‘æ—¶ï¼Œå¤šçº¿ç¨‹æ•ˆç‡é«˜ã€‚ Java è¯­è¨€æœ¬èº«å†…ç½®å¤šçº¿ç¨‹åŠŸèƒ½çš„æ”¯æŒï¼Œè€Œä¸æ˜¯å•çº¯ä½œä¸ºåº•å±‚ç³»ç»Ÿçš„è°ƒåº¦æ–¹å¼ï¼Œä»è€Œç®€åŒ–äº†å¤šçº¿ç¨‹ç¼–ç¨‹ã€‚ çº¿ç¨‹çš„çŠ¶æ€å›¾ä¸€ å›¾äºŒ åˆ†ç±»Java ä¸­çš„çº¿ç¨‹å¯ä»¥åˆ†ä¸ºç”¨æˆ·çº¿ç¨‹ï¼ˆUser Threadï¼‰å’Œå®ˆæŠ¤çº¿ç¨‹ï¼ˆDaemon Threadï¼‰ã€‚ åªè¦å½“å‰ JVM å®ä¾‹ä¸­å­˜åœ¨ä»»ä½•ä¸€ä¸ªéå®ˆæŠ¤çº¿ç¨‹æ²¡æœ‰ç»“æŸï¼Œå®ˆæŠ¤çº¿ç¨‹å°±å…¨éƒ¨å·¥ä½œï¼›å½“æœ€åä¸€ä¸ªéå®ˆæŠ¤çº¿ç¨‹ç»“æŸï¼Œå³è™šæ‹Ÿæœºä¸­åªå­˜åœ¨å®ˆæŠ¤çº¿ç¨‹æ—¶ï¼ŒJVM å°±ä¼šåœæ­¢è¿è¡Œã€‚Daemon Thread çš„ä½œç”¨æ˜¯ä¸ºå…¶ä»–çº¿ç¨‹æä¾›å„ç§æœåŠ¡ï¼Œæœ€å…¸å‹çš„åº”ç”¨å°±æ˜¯åƒåœ¾æ”¶é›†å™¨ã€‚12345678public class Main { public static void main(String[] args) { Thread thread = new Thread(); thread.setDaemon(true); System.out.println(\"is daemon thread? \" + thread.isDaemon()); }} è¾“å‡ºä¸º1is daemon thread? true ä½¿ç”¨å®ˆæŠ¤çº¿ç¨‹è¦æ³¨æ„çš„ç‚¹ thread.setDaemon(true) å¿…é¡»åœ¨ thread.start() ä¹‹å‰è®¾ç½®ï¼Œå¦åˆ™æŠ›å‡ºä¸€ä¸ª IllegalThreadStateException å¼‚å¸¸ã€‚å› ä¸ºä¸èƒ½æŠŠæ­£åœ¨è¿è¡Œçš„å¸¸è§„çº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚ åœ¨ Daemon Thread ä¸­äº§ç”Ÿçš„æ–°çº¿ç¨‹ä¹Ÿå±äº Daemon Threadã€‚ ä¸è¦åœ¨ Daemon Thread ä¸­åˆ†é…è¯»å†™æ“ä½œæˆ–è€…è®¡ç®—é€»è¾‘ä»»åŠ¡ã€‚ Runnable å’Œ ThreadRunnable æ˜¯ä¸€ä¸ªçº¿ç¨‹æ¥å£ï¼ŒæŸ¥çœ‹å…¶æ„é€ 123public interface Runnable { public abstract void run();} å…¶ä¸­åªå®šä¹‰äº†ä¸€ä¸ªrunæ–¹æ³• Thread æ˜¯å®ç°äº† Runnable æ¥å£çš„ç±»ï¼Œæ‰€æœ‰æ–°å»º Thread å®ä¾‹çš„æ–¹æ³•æœ€åéƒ½ä¼šè°ƒç”¨åˆ°å†…éƒ¨çš„init123private void init(ThreadGroup g, Runnable target, String name, long stackSize, AccessControlContext acc, boolean inheritThreadLocals) è§‚å¯Ÿ Thread ä¸­é‡å†™çš„runæ–¹æ³•123456@Overridepublic void run() { if (target != null) { target.run(); }} å…¶ä¸­ target ä¸º Runnable å¯¹è±¡ï¼Œå³è°ƒç”¨ Thread çš„runå®é™…ä¸Šæ˜¯è°ƒç”¨æˆ‘ä»¬ä¼ è¿›å»çš„ Runnable çš„å¯¹åº”æ–¹æ³• è§‚å¯Ÿå…¶startæ–¹æ³•123456789101112131415161718192021222324public synchronized void start() { //ä¸èƒ½é‡å¤è°ƒç”¨ start æ–¹æ³• if (threadStatus != 0) throw new IllegalThreadStateException(); //å°†çº¿ç¨‹åŠ å…¥çº¿ç¨‹ç»„ group.add(this); //çº¿ç¨‹å¼€å§‹æ ‡å¿— boolean started = false; try { //è°ƒç”¨nativeæ–¹æ³•å¼€å§‹å¤šçº¿ç¨‹ start0(); started = true; } finally { try { if (!started) { group.threadStartFailed(this); } } catch (Throwable ignore) { /* do nothing. If start0 threw a Throwable then it will be passed up the call stack */ } }} å…¶ä¸­start0æ˜¯ native æ–¹æ³•ï¼Œåœ¨å…¶ä¸­æ–°å»ºçº¿ç¨‹ï¼Œç„¶åå›è°ƒ target çš„ run æ–¹æ³•ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥è°ƒç”¨runæ–¹æ³•ï¼Œç›¸å½“äºè°ƒç”¨æ™®é€šæ–¹æ³•ï¼Œä¸ä¼šæœ‰å¤šçº¿ç¨‹æ•ˆæœã€‚åªæœ‰è°ƒç”¨startæ‰ä¼šåœ¨åå°å¼€å¯å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œç­‰å¾… CPU è°ƒåº¦ã€‚ å¤šçº¿ç¨‹ APIObjectå®é™…ä¸Šé™¤äº† Threadï¼ŒJava çš„åŸºç±» Object ä¸­ä¹Ÿå®šä¹‰äº†ä¸€äº›å…³äºå¤šçº¿ç¨‹æ“ä½œçš„æ–¹æ³• æ–¹æ³• æè¿° wait() é”å¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•ä½¿å½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œå¹¶ç«‹åˆ»é‡Šæ”¾é”å¯¹è±¡ï¼Œç›´åˆ°è¢«å…¶ä»–çº¿ç¨‹å”¤é†’è¿›å…¥ç­‰é”æ±  wait(long) é”å¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•ä½¿å½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼ŒåŒæ—¶é‡Šæ”¾é”å¯¹è±¡ã€‚ä½†æ˜¯è¶…è¿‡ç­‰å¾…çš„æ—¶é—´åçº¿ç¨‹ä¼šè‡ªåŠ¨å”¤é†’ï¼Œæˆ–è€…è¢«å…¶ä»–çº¿ç¨‹å”¤é†’ï¼Œå¹¶è¿›å…¥ç­‰é”æ± ä¸­ã€‚ wait(long, int) å’Œo.wait(long)æ–¹æ³•ä¸€æ ·ï¼Œå¦‚æœintå‚æ•°å¤§äº0åˆ™å‰é¢çš„longæ•°å­—åŠ 1000 notify() éšæœºå”¤é†’ä¸€ä¸ªå¤„äºç­‰å¾…ä¸­çš„çº¿ç¨‹ï¼ˆåŒä¸€ä¸ªç­‰å¾…é˜»å¡æ± ä¸­ï¼‰ notifyAll() å”¤é†’æ‰€æœ‰ç­‰å¾…ä¸­çš„çº¿ç¨‹ï¼ˆåŒä¸€ä¸ªç­‰å¾…é˜»å¡æ± ä¸­ï¼‰ ä»¥ä¸Šçš„æ–¹æ³•å¿…é¡»å†™åœ¨ synchronized æ–¹æ³•å†…éƒ¨æˆ–è€… synchronized å—å†…éƒ¨ï¼Œå› ä¸ºå®ƒä»¬è¦æ±‚å½“å‰æ­£åœ¨è¿è¡Œobject.wait()æ–¹æ³•çš„çº¿ç¨‹æ‹¥æœ‰ object çš„å¯¹è±¡é”ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œæµ‹è¯•ä»£ç å¦‚ä¸‹12345678910111213141516171819202122232425public class ThreadTest { public static void main(String[] args) { Thread t = Thread.currentThread(); try { t.wait(2000); //ç”±äºæ²¡æœ‰è·å¾—é”ï¼Œå°†æŠ›å‡º IllegalMonitorStateException å¼‚å¸¸ } catch (InterruptedException e) { e.printStackTrace(); } System.out.println(\"current Thread info in Main: \" + t.toString()); A a = new A(); a.printThreadInfo(); }}class A { public synchronized void printThreadInfo() { Thread t = Thread.currentThread(); try { wait(2000); } catch (InterruptedException e) { e.printStackTrace(); } System.out.println(\"current Thread info in A: \" + t.toString()); }} åˆ é™¤mainä¸­ try/catch è¯­å¥ä¹‹åï¼Œæ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹123current Thread info in Main: Thread[main,5,main]//ç­‰å¾…ä¸¤ç§’current Thread info in A: Thread[main,5,main] ä¸ºä»€ä¹ˆéœ€è¦åœ¨ synchronized ä¸­ï¼Ÿ waitå’Œnotifyç”¨äºçº¿ç¨‹é—´é€šä¿¡ã€‚ä»¥ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼ä¸¾ä¾‹ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…é€šè¿‡é˜Ÿåˆ—è¿›è¡Œé€šä¿¡ï¼Œå¯¹äºé˜Ÿåˆ—çš„æ“ä½œè¦ä¿è¯çº¿ç¨‹å®‰å…¨æ€§ ä¸€èˆ¬å¯¹é˜Ÿåˆ—çš„æ“ä½œå¦‚ä¸‹:while(queue.size() == MAX_SIZE){ wait() } å‡å¦‚ä¸å¯¹è¿™æ®µä»£ç åŠ é”ï¼Œå°±ä¼šå‡ºç°é—®é¢˜ã€‚æ¨¡æ‹Ÿä¸€ä¸ªç”Ÿäº§è€…çº¿ç¨‹t1å’Œä¸€ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹t2 t1åˆ¤æ–­é˜Ÿåˆ—æ»¡ï¼Œéœ€è¦ wait é˜»å¡çº¿ç¨‹ã€‚ ä½†æ˜¯å°±åœ¨t1è¿˜æ²¡æœ‰è°ƒç”¨ wait çš„æ—¶å€™ï¼Œæ¶ˆè´¹è€…t2æ¶ˆè´¹äº†ä¸€ä¸ªäº§å“ï¼Œå¯¼è‡´é˜Ÿåˆ—éæ»¡ã€‚ è¿™æ—¶å€™ç”Ÿäº§è€…çº¿ç¨‹t1è°ƒç”¨ wait é˜»å¡ï¼Œé€ æˆçš„æƒ…å†µå°±æ˜¯é˜Ÿåˆ—éæ»¡ï¼Œä½†æ˜¯ç”Ÿäº§è€…çº¿ç¨‹é˜»å¡äº†ã€‚ å‡å¦‚æ­¤æ—¶æ¶ˆè´¹è€…ä¸æ¶ˆè´¹äº†ï¼Œé‚£ä¹ˆç”Ÿäº§è€…åˆ™ä¼šä¸€ç›´é˜»å¡ä¸‹å»ã€‚ æ‰€ä»¥åœ¨è°ƒç”¨ waitã€notify ä»¥åŠ notifyAll ç­‰æ–¹æ³•æ—¶ä¸€å®šè¦è¿›è¡ŒåŒæ­¥å¤„ç†ã€‚ ä¸ºä»€ä¹ˆå®šä¹‰åœ¨ Object ä¸­ï¼Ÿ Object ä¸­çš„wait(), notify()ç­‰æ–¹æ³•ï¼Œå’Œ synchronized ä¸€æ ·ï¼Œä¼šå¯¹â€œå¯¹è±¡çš„åŒæ­¥é”â€è¿›è¡Œæ“ä½œã€‚ wait()ä¼šä½¿â€œå½“å‰çº¿ç¨‹â€ç­‰å¾…ã€‚è¿›å…¥ç­‰å¾…çŠ¶æ€æ—¶ï¼Œçº¿ç¨‹åº”è¯¥é‡Šæ”¾å®ƒé”æŒæœ‰çš„â€œåŒæ­¥é”â€ï¼Œå¦åˆ™å…¶å®ƒçº¿ç¨‹è·å–ä¸åˆ°è¯¥â€œåŒæ­¥é”â€å°†æ— æ³•è¿è¡Œï¼å½“çº¿ç¨‹é‡Šæ”¾å®ƒæŒæœ‰çš„â€œåŒæ­¥é”â€ä¹‹åå˜æˆç­‰å¾…çº¿ç¨‹ï¼Œå¯ä»¥è¢«notify()æˆ–notifyAll()å”¤é†’ã€‚é‚£ä¹ˆï¼Œnotify()ä¾æ®ä»€ä¹ˆå”¤é†’ç­‰å¾…çº¿ç¨‹çš„ï¼Ÿæˆ–è€…è¯´ï¼Œwait()ç­‰å¾…çº¿ç¨‹å’Œnotify()ä¹‹é—´é€šè¿‡ä»€ä¹ˆå…³è”èµ·æ¥ï¼Ÿç­”æ¡ˆæ˜¯ï¼šä¾æ®â€œå¯¹è±¡çš„åŒæ­¥é”â€ã€‚ è´Ÿè´£å”¤é†’ç­‰å¾…çº¿ç¨‹çš„é‚£ä¸ªçº¿ç¨‹(â€œå”¤é†’çº¿ç¨‹â€)ï¼Œåªæœ‰åœ¨è·å–â€œè¯¥å¯¹è±¡çš„åŒæ­¥é”â€(è¿™é‡Œçš„åŒæ­¥é”å¿…é¡»å’Œç­‰å¾…çº¿ç¨‹çš„åŒæ­¥é”æ˜¯åŒä¸€ä¸ª)ï¼Œå¹¶ä¸”è°ƒç”¨notify()æˆ–notifyAll()æ–¹æ³•ä¹‹åï¼Œæ‰èƒ½å”¤é†’ç­‰å¾…çº¿ç¨‹ã€‚æ­¤æ—¶å› ä¸ºå”¤é†’çº¿ç¨‹è¿˜æŒæœ‰â€œè¯¥å¯¹è±¡çš„åŒæ­¥é”â€ï¼Œæ‰€ä»¥å¿…é¡»ç­‰åˆ°å”¤é†’çº¿ç¨‹é‡Šæ”¾äº†â€œå¯¹è±¡çš„åŒæ­¥é”â€ä¹‹åï¼Œç­‰å¾…çº¿ç¨‹æ‰èƒ½è·å–åˆ°â€œå¯¹è±¡çš„åŒæ­¥é”â€è¿›è€Œç»§ç»­è¿è¡Œã€‚ æ€»ä¹‹ï¼Œnotify(), wait()ä¾èµ–äºâ€œåŒæ­¥é”â€ï¼Œè€Œâ€œåŒæ­¥é”â€æ˜¯å¯¹è±¡é”æŒæœ‰ï¼Œå¹¶ä¸”æ¯ä¸ªå¯¹è±¡æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªï¼ è¿™å°±æ˜¯notify(), wait()ç­‰å‡½æ•°å®šä¹‰åœ¨ Object ç±»ï¼Œè€Œä¸æ˜¯ Thread ç±»ä¸­çš„åŸå› ã€‚ æ¥è‡ª JAVA çº¿ç¨‹çŠ¶æ€åŠè½¬åŒ– Thread æ–¹æ³• æè¿° Thread.currentThread() è¿”å›å¯¹å½“å‰çº¿ç¨‹å¯¹è±¡çš„å¼•ç”¨ Thread.interrupted() æ£€æµ‹å½“å‰çº¿ç¨‹æ˜¯å¦å·²ç»ä¸­æ–­ï¼ˆè°ƒç”¨è¯¥æ–¹æ³•åå°†è¯¥çº¿ç¨‹çš„ä¸­æ–­æ ‡å¿—ä½è®¾ä¸ºfalseï¼Œè¿ç»­ä¸¤æ¬¡è°ƒç”¨è¯¥æ–¹æ³•ç¬¬äºŒæ¬¡è‚¯å®šä¸ºfalseï¼‰ Thread.sleep(long millis) ä½¿å½“å‰çº¿ç¨‹ç¡çœ ï¼ˆä¸ä¼šé‡Šæ”¾é”å¯¹è±¡ï¼Œå¯ä»¥è®©å…¶ä»–çº¿ç¨‹æœ‰æ‰§è¡Œçš„æœºä¼šï¼‰ Thread.yield() ä½¿å½“å‰çº¿ç¨‹æ”¾å¼ƒcpuçš„æ‰§è¡Œæƒï¼ˆæœ‰å¯èƒ½ç«‹åˆ»åˆè¢«é‡æ–°é€‰ä¸­ç»§ç»­æ‰§è¡Œï¼Œåªå¯èƒ½ç»™ä¼˜å…ˆçº§æ›´é«˜çš„çº¿ç¨‹æœºä¼šï¼‰ t.getId()â€¦ è¿”å›è¯¥çº¿ç¨‹çš„ id ç­‰ç­‰ä¿¡æ¯ t.interrupt() å°†è¯¥çº¿ç¨‹ä¸­æ–­ï¼ˆå®é™…å¹¶ä¸ä¼šä¸­æ–­ï¼Œåªæ˜¯å°†ä¸­æ–­æ ‡å¿—è®¾ç½®ä¸ºtrueï¼‰ t.isInterrupted() æ£€æµ‹è¯¥çº¿ç¨‹æ˜¯å¦å·²ç»ä¸­æ–­ t.join() åœ¨açº¿ç¨‹ä¸­è°ƒç”¨b.join()ï¼Œåˆ™açº¿ç¨‹é˜»å¡ï¼Œç›´åˆ°bçº¿ç¨‹æ‰§è¡Œå®Œ t.join(long millis) åŒä¸Šï¼Œä¸è¿‡açº¿ç¨‹é˜»å¡çš„æ—¶é—´æ ¹æ®longçš„å¤§å°æœ‰å…³ï¼Œå¦‚æœè¾¾åˆ°è®¾å®šçš„é˜»å¡æ—¶é—´ï¼Œå°±ç®—bçº¿ç¨‹æ²¡æœ‰æ‰§è¡Œå®Œï¼Œaçº¿ç¨‹ä¹Ÿä¼šè¢«å”¤é†’ã€‚ å…³äº interruptï¼ŒJAVA interruptã€interruptedå’ŒisInterruptedçš„åŒºåˆ« interrupt æ–¹æ³•æ˜¯ç”¨äºä¸­æ–­çº¿ç¨‹çš„ï¼Œè°ƒç”¨è¯¥æ–¹æ³•çš„çº¿ç¨‹çš„çŠ¶æ€å°†è¢«ç½®ä¸ºâ€ä¸­æ–­â€çŠ¶æ€ã€‚ æ³¨æ„ï¼šçº¿ç¨‹ä¸­æ–­ä»…ä»…æ˜¯è®¾ç½®çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ä½ï¼Œä¸ä¼šåœæ­¢çº¿ç¨‹ã€‚éœ€è¦ç”¨æˆ·è‡ªå·±å»ç›‘è§†çº¿ç¨‹çš„çŠ¶æ€å¹¶åšå¤„ç†ã€‚æ”¯æŒçº¿ç¨‹ä¸­æ–­çš„æ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯çº¿ç¨‹ä¸­æ–­åä¼šæŠ›å‡º InterruptedException çš„æ–¹æ³•ï¼Œæ¯”å¦‚è¿™é‡Œçš„sleepï¼Œä»¥åŠObject.waitç­‰æ–¹æ³•ï¼‰å°±æ˜¯åœ¨ç›‘è§†çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ï¼Œä¸€æ—¦çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€è¢«ç½®ä¸ºâ€œä¸­æ–­çŠ¶æ€â€ï¼Œå°±ä¼šæŠ›å‡ºä¸­æ–­å¼‚å¸¸ã€‚ åºŸå¼ƒæ–¹æ³• stopï¼šä¼šé‡Šæ”¾è¯¥çº¿ç¨‹æ‰€æŒæœ‰çš„æ‰€æœ‰é”ï¼Œä½†è¿™ç§é‡Šæ”¾æ˜¯ä¸å¯æ§åˆ¶ã€éé¢„æœŸçš„ã€‚è€Œä¸”ä¸€ä¸ªçº¿ç¨‹ä¸åº”è¯¥ç”±å…¶ä»–çº¿ç¨‹æ¥å¼ºåˆ¶ä¸­æ–­æˆ–åœæ­¢ï¼Œè€Œåº”è¯¥è‡ªè¡Œåœæ­¢ suspendï¼šçº¿ç¨‹åœ¨æš‚åœçš„æ—¶å€™ä»ç„¶å æœ‰è¯¥èµ„æºï¼Œå¯¼è‡´éœ€è¦è¯¥èµ„æºçš„çº¿ç¨‹äº§ç”Ÿç¯è·¯ç­‰å¾…ï¼Œä»è€Œé€ æˆæ­»é”ã€‚ resumeï¼šç”¨æ¥å›å¤è¢«æŒ‚èµ·çš„çº¿ç¨‹ï¼Œè·Ÿ suspend å¯¹åº”ã€‚ çº¿ç¨‹æ± Java ä¸­å…³äºçº¿ç¨‹æ± çš„ç»§æ‰¿å…³ç³»å¦‚ä¸‹ Executor æ˜¯ä¸€ä¸ªé¡¶å±‚æ¥å£ï¼Œå…¶ä¸­åªå£°æ˜äº†ä¸€ä¸ªæ–¹æ³•execute(Runnable)ï¼Œç”¨æ¥æ‰§è¡Œä¼ è¿›å»çš„ä»»åŠ¡ ExecutorService æ¥å£ç»§æ‰¿äº† Executor æ¥å£ï¼Œå¹¶å£°æ˜äº†ä¸€äº›æ–¹æ³•ï¼šsubmitã€invokeAllã€invokeAnyä»¥åŠshutDown ç­‰ æŠ½è±¡ç±» AbstractExecutorService å®ç°äº† ExecutorService æ¥å£ï¼ŒåŸºæœ¬å®ç°äº† ExecutorService ä¸­å£°æ˜çš„æ‰€æœ‰æ–¹æ³• ThreadPoolExecutor ç»§æ‰¿äº†ç±» AbstractExecutorServiceï¼Œæ˜¯çº¿ç¨‹æ± å®ç°ç±»ï¼Œæ„é€ æ–¹æ³•å¦‚ä¸‹123456789101112131415161718192021public ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue workQueue, ThreadFactory threadFactory, RejectedExecutionHandler handler) { if (corePoolSize < 0 || maximumPoolSize { System.out.println(Thread.currentThread()); });} æ§åˆ¶å°è¾“å‡º12Thread[main,5,main]Thread[pool-1-thread-1,5,main] å·¥ä½œåŸç†è§‚å¯Ÿ ThreadPoolExecutor ä¸­çš„executeæ–¹æ³•1234567891011121314151617181920212223242526public void execute(Runnable command) { if (command == null) throw new NullPointerException(); /** * ä¸€ã€åˆ¤æ–­å½“å‰æ´»è·ƒçº¿ç¨‹æ•°æ˜¯å¦å°äº corePoolSizeï¼Œå¦‚æœå°äºï¼Œè°ƒç”¨ addWorker åˆ›å»ºçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ * äºŒã€å¦‚æœå¤§äº corePoolSizeï¼Œå°†ä»»åŠ¡æ·»åŠ åˆ° workQueue é˜Ÿåˆ—ã€‚ * ä¸‰ã€å¦‚æœåŠ å…¥ workQueue å¤±è´¥ï¼Œåˆ™åˆ›å»ºçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œ * å¦‚æœåˆ›å»ºçº¿ç¨‹å¤±è´¥(å½“å‰çº¿ç¨‹æ•°å¤§äºmaximumPoolSize)ï¼Œå°±ä¼šè°ƒç”¨reject(å†…éƒ¨ç”¨handler)å¤„ç†æ‹’ç»ä»»åŠ¡ã€‚ */ int c = ctl.get(); if (workerCountOf(c) < corePoolSize) { if (addWorker(command, true)) return; c = ctl.get(); } if (isRunning(c) && workQueue.offer(command)) { int recheck = ctl.get(); if (! isRunning(recheck) && remove(command)) reject(command); else if (workerCountOf(recheck) == 0) addWorker(null, false); } else if (!addWorker(command, false)) reject(command); } è·Ÿè¸ªaddWorkeræ–¹æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566private boolean addWorker(Runnable firstTask, boolean core) { retry: for (int c = ctl.get();;) { // Check if queue empty only if necessary. if (runStateAtLeast(c, SHUTDOWN) && (runStateAtLeast(c, STOP) || firstTask != null || workQueue.isEmpty())) return false; for (;;) { /* *åœ¨åˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹ï¼Œå³coreç­‰äºfalseæ—¶ã€‚åˆ¤æ–­å½“å‰çº¿ç¨‹æ•°æ˜¯å¦å¤§äºç­‰äºmaximumPoolSizeï¼Œ *å¦‚æœå¤§äºç­‰äºåˆ™è¿”å›falseï¼Œå³ä¸Šè¾¹è¯´çš„ç¬¬ä¸‰æ­¥ä¸­åˆ›å»ºçº¿ç¨‹å¤±è´¥çš„æƒ…å†µ */ if (workerCountOf(c) >= ((core ? corePoolSize : maximumPoolSize) & COUNT_MASK)) return false; if (compareAndIncrementWorkerCount(c)) break retry; c = ctl.get(); // Re-read ctl if (runStateAtLeast(c, SHUTDOWN)) continue retry; // else CAS failed due to workerCount change; retry inner loop } } boolean workerStarted = false; boolean workerAdded = false; Worker w = null; try { /* * åˆ›å»ºWorkeræ—¶ä¼šè°ƒç”¨threadFactoryæ¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ã€‚ * ä¸Šè¾¹çš„ç¬¬äºŒæ­¥ä¸­ä¸­å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ä¼šè§¦å‘Workerçš„runæ–¹æ³•è¢«çº¿ç¨‹è°ƒç”¨ã€‚ */ w = new Worker(firstTask); final Thread t = w.thread; if (t != null) { final ReentrantLock mainLock = this.mainLock; mainLock.lock(); try { int c = ctl.get(); if (isRunning(c) || (runStateLessThan(c, STOP) && firstTask == null)) { if (t.isAlive()) // precheck that t is startable throw new IllegalThreadStateException(); workers.add(w); int s = workers.size(); if (s > largestPoolSize) largestPoolSize = s; workerAdded = true; } } finally { mainLock.unlock(); } if (workerAdded) { t.start(); workerStarted = true; } } } finally { if (! workerStarted) addWorkerFailed(w); } return workerStarted;} æ–°å»º Work ï¼ŒåŒæ—¶ä¹Ÿä¼šåˆ©ç”¨å·¥å‚ç±»å®ä¾‹åŒ–ä¸€ä¸ªçº¿ç¨‹12345Worker(Runnable firstTask) { setState(-1); // inhibit interrupts until runWorker this.firstTask = firstTask; this.thread = getThreadFactory().newThread(this);} å¦‚æœ workerAddedï¼Œè°ƒç”¨t.start()123public void run() { runWorker(this);} è·Ÿè¸ªrunWorker123456789101112131415161718192021222324252627282930313233final void runWorker(Worker w) { Thread wt = Thread.currentThread(); Runnable task = w.firstTask; w.firstTask = null; w.unlock(); // allow interrupts boolean completedAbruptly = true; try { while (task != null || (task = getTask()) != null) { if ((runStateAtLeast(ctl.get(), STOP) || (Thread.interrupted() && runStateAtLeast(ctl.get(), STOP))) && !wt.isInterrupted()) wt.interrupt(); try { beforeExecute(wt, task); try { task.run(); afterExecute(task, null); } catch (Throwable ex) { afterExecute(task, ex); throw ex; } } finally { task = null; w.completedTasks++; w.unlock(); } } completedAbruptly = false; } finally { processWorkerExit(w, completedAbruptly); }} å¯ä»¥çœ‹åˆ°getTaskæ–¹æ³•ä¸æ–­ä» workerQueue ä¸­è¯»å–ä»»åŠ¡ç„¶åæ‰§è¡Œã€‚åªè¦getTaskæ–¹æ³•ä¸è¿”å› nullï¼Œå¾ªç¯å°±ä¸ä¼šé€€å‡ºã€‚1234567891011121314151617181920212223242526272829303132333435363738private Runnable getTask() { boolean timedOut = false; // Did the last poll() time out? for (;;) { int c = ctl.get(); if (runStateAtLeast(c, SHUTDOWN) && (runStateAtLeast(c, STOP) || workQueue.isEmpty())) { decrementWorkerCount(); return null; } int wc = workerCountOf(c); //æ˜¯åˆ¤æ–­å½“å‰çº¿ç¨‹æ•°æ˜¯å¦å¤§äº corePoolSize boolean timed = allowCoreThreadTimeOut || wc > corePoolSize; if ((wc > maximumPoolSize || (timed && timedOut)) && (wc > 1 || workQueue.isEmpty())) { if (compareAndDecrementWorkerCount(c)) return null; continue; } /* * å¦‚æœå½“å‰çº¿ç¨‹æ•°å¤§äº corePoolSizeï¼Œè°ƒç”¨ workQueue çš„pollæ–¹æ³•è·å–ä»»åŠ¡ * è¶…æ—¶æ—¶é—´ä¸º keepAliveTimeã€‚å¦‚æœè¶…æ—¶ï¼Œpollè¿”å›äº†nullï¼Œä¸Šè¾¹çš„whileå¾ªåºå°±ä¼šé€€å‡º * å¦‚æœå½“å‰çº¿ç¨‹æ•°å°äº corePoolSizeï¼Œè°ƒç”¨ workQueue çš„takeæ–¹æ³•é˜»å¡å½“å‰ */ try { Runnable r = timed ? workQueue.poll(keepAliveTime, TimeUnit.NANOSECONDS) : workQueue.take(); if (r != null) return r; timedOut = true; } catch (InterruptedException retry) { timedOut = false; } }} æœ€åç”¨ä¸€å¼ å›¾æ€»ç»“ä¸Šè¿°è¿‡ç¨‹ document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"å¤šçº¿ç¨‹","slug":"å¤šçº¿ç¨‹","permalink":"http://yoursite.com/tags/å¤šçº¿ç¨‹/"},{"name":"çº¿ç¨‹æ± ","slug":"çº¿ç¨‹æ± ","permalink":"http://yoursite.com/tags/çº¿ç¨‹æ± /"}]},{"title":"Java æ•°æ®åº“çŸ¥è¯†æ•´ç†","slug":"Java-æ•°æ®åº“çŸ¥è¯†æ•´ç†","date":"2019-03-18T02:45:26.000Z","updated":"2019-04-24T05:32:46.000Z","comments":true,"path":"Java-æ•°æ®åº“çŸ¥è¯†æ•´ç†/","link":"","permalink":"http://yoursite.com/Java-æ•°æ®åº“çŸ¥è¯†æ•´ç†/","excerpt":"","text":"TODO document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://yoursite.com/tags/æ•°æ®åº“/"}]},{"title":"ã€Šå‰‘æŒ‡offerã€‹é¢˜ç›® Java å®ç°","slug":"ã€Šå‰‘æŒ‡offerã€‹é¢˜ç›®-Java-å®ç°","date":"2019-03-18T02:42:29.000Z","updated":"2019-03-25T09:17:06.000Z","comments":true,"path":"ã€Šå‰‘æŒ‡offerã€‹é¢˜ç›®-Java-å®ç°/","link":"","permalink":"http://yoursite.com/ã€Šå‰‘æŒ‡offerã€‹é¢˜ç›®-Java-å®ç°/","excerpt":"Problem1ï¼šå•ä¾‹æ¨¡å¼å®ç°12345678910111213141516public class Singleton { private volatile static Singleton singleton; private Singleton (){} public static Singleton getSingleton() { if (singleton == null) { synchronized (Singleton.class) { if (singleton == null) { singleton = new Singleton(); } } } return singleton; } }","text":"Problem1ï¼šå•ä¾‹æ¨¡å¼å®ç°12345678910111213141516public class Singleton { private volatile static Singleton singleton; private Singleton (){} public static Singleton getSingleton() { if (singleton == null) { synchronized (Singleton.class) { if (singleton == null) { singleton = new Singleton(); } } } return singleton; } } Problem2ï¼šäºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾åœ¨ä¸€ä¸ªäºŒç»´æ•°ç»„ä¸­ï¼Œæ¯ä¸€è¡Œéƒ½æŒ‰ç…§ä»å·¦åˆ°å³é€’å¢çš„é¡ºåºæ’åºï¼Œæ¯ä¸€åˆ—éƒ½æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹é€’å¢çš„é¡ºåºæ’åºã€‚è¯·å®Œæˆä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥è¿™æ ·çš„ä¸€ä¸ªäºŒç»´æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°ï¼Œåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å«æœ‰è¯¥æ•´æ•°ã€‚ 12345678910111213141516171819202122 /** * ä»äºŒç»´æ•°ç»„çš„å³ä¸Šè§’å¼€å§‹é€‰å–ä¸ key æ¯”è¾ƒçš„æ•´æ•° * column çš„å˜åŒ–:arr[0].length - 1 ---> 0 * row çš„å˜åŒ– 0 ---> arr.length * * @param arr * @param key */public static boolean find(int[][] arr, int key) { int col = arr[0].length - 1; int row = 0; while (col >= 0 && row < arr.length) { if (arr[row][col] == key) { return true; } else if (arr[row][col] > key) { //å¤§äºæŸ¥æ‰¾å€¼ï¼Œåˆ™å¾€å‰æ¨ä¸€åˆ— col--; } else { //å°äºæŸ¥æ‰¾å€¼ï¼Œåˆ™å¾€ä¸‹æ¨ä¸€è¡Œ row++; } } return false;} Problem3ï¼šæ›¿æ¢ç©ºæ ¼è¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œå°†å­—ç¬¦ä¸²çš„æ¯ä¸ªç©ºæ ¼æ›¿æ¢ä¸ºâ€%20â€ã€‚ä¾‹å¦‚è¾“å…¥We are happyï¼Œåˆ™è¾“å‡ºWe%20are%20happyã€‚ 1234567891011121314151617181920/** * ä½¿ç”¨ StringBuilder * * @param str * @return */public static String replace(String str) { if (str.isEmpty()) { return \"\"; } StringBuilder builder = new StringBuilder(); for (int i = 0; i < str.length(); i++) { if (str.charAt(i) == ' ') { builder.append(\"%20\"); } else { builder.append(str.charAt(i)); } } return builder.toString();} Problem4ï¼šä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨è¾“å…¥ä¸€ä¸ªé“¾è¡¨çš„å¤´ç»“ç‚¹ï¼ŒæŒ‰ç…§ä»å°¾åˆ°å¤´çš„é¡ºåºæ‰“å°å‡ºæ¯ä¸ªèŠ‚ç‚¹çš„å€¼ 12345678910111213141516171819202122232425262728293031static class ListNode { T value; ListNode next; public ListNode(T value) { this.value = value; }}/** * ä½¿ç”¨æ ˆå®ç° * * @param headNode */public static void printListReverse(ListNode headNode) { Stack stack = new Stack(); while (headNode != null) { stack.push(headNode); headNode = headNode.next; } while (!stack.empty()) { System.out.println(stack.pop().value + \" \"); }}public static void main(String[] args) { ListNode node = new ListNode(1); node.next = new ListNode(2); node.next.next = new ListNode(3); printListReverse(node);} Problem5ï¼šé‡å»ºäºŒå‰æ ‘è¾“å…¥æŸäºŒå‰æ ‘çš„å‰åºéå†å’Œä¸­åºéå†ç»“æœï¼Œè¯·é‡å»ºå‡ºè¯¥äºŒå‰æ ‘ã€‚ å‡è®¾è¾“å…¥çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœä¸­éƒ½ä¸åŒ…å«é‡å¤çš„æ•°å­—ã€‚ ä¾‹å¦‚è¾“å…¥å‰åºéå†åºåˆ—ï¼š {1, 2, 4, 7, 3, 5, 6, 8} ä¸­åºéå†åºåˆ—ï¼š{4, 7, 2, 1, 5, 3, 8, 6} é‡å»ºå‡ºæ‰€ç¤ºäºŒå‰æ ‘å¹¶ä¸”è¾“å‡ºå®ƒçš„å¤´ç»“ç‚¹ã€‚ 1234567 1 / \\ 2 3 / / \\4 5 6 \\ / 7 8 çŸ¥è¯†ç‚¹è¡¥å…… å‰åºéå†ï¼šå…ˆè®¿é—®æ ¹èŠ‚ç‚¹ï¼Œå†è®¿é—®å·¦å­ç»“ç‚¹ï¼Œæœ€åè®¿é—®å³å­ç»“ç‚¹ï¼›ï¼ˆæ ¹å·¦å³ï¼‰ ä¸­åºéå†ï¼šå…ˆè®¿é—®å·¦å­ç»“ç‚¹ï¼Œå†è®¿é—®æ ¹ç»“ç‚¹ï¼Œæœ€åè®¿é—®å³å­ç»“ç‚¹ï¼›ï¼ˆå·¦æ ¹å³ï¼‰ ååºéå†ï¼šå…ˆè®¿é—®å·¦å­ç»“ç‚¹ï¼Œå†è®¿é—®å³å­ç»“ç‚¹ï¼Œæœ€åè®¿é—®æ ¹ç»“ç‚¹ï¼›ï¼ˆå·¦å³æ ¹ï¼‰ äºŒå‰æœç´¢æ ‘ï¼šå·¦å­ç»“ç‚¹æ€»æ˜¯å°äºæˆ–ç­‰äºæ ¹ç»“ç‚¹ï¼Œè€Œå³å­ç»“ç‚¹æ€»æ˜¯å¤§äºæˆ–ç­‰äºæ ¹ç»“ç‚¹ã€‚ äºŒå‰æ ‘çš„ç‰¹ä¾‹æ˜¯å †å’Œçº¢é»‘æ ‘ã€‚ å †åˆ†ä¸ºæœ€å¤§å †å’Œæœ€å°å †ã€‚åœ¨æœ€å¤§å †ä¸­æ ¹èŠ‚ç‚¹çš„å€¼æœ€å¤§ï¼Œåœ¨æœ€å°å †ä¸­æ ¹èŠ‚ç‚¹çš„å€¼æœ€å°ã€‚ çº¢é»‘æ ‘æ˜¯æŠŠæ ‘ä¸­çš„ç»“ç‚¹å®šä¹‰ä¸ºçº¢ã€é»‘ä¸¤ç§é¢œè‰²ï¼Œå¹¶é€šè¿‡è§„åˆ™ç¡®ä¿ä»æ ¹ç»“ç‚¹åˆ°å¶ç»“ç‚¹çš„æœ€é•¿è·¯å¾„çš„é•¿åº¦ä¸è¶…è¿‡æœ€çŸ­è·¯å¾„çš„ä¸¤å€ã€‚ Problem6ï¼šç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—ç”¨ä¸¤ä¸ªæ ˆå®ç°ä¸€ä¸ªé˜Ÿåˆ—ã€‚é˜Ÿåˆ—çš„å£°æ˜å¦‚ä¸‹ï¼Œè¯·å®ç°å®ƒçš„ä¸¤ä¸ªå‡½æ•°appendTailå’ŒdeleteHead,åˆ†åˆ«å®Œæˆåœ¨é˜Ÿåˆ—å°¾éƒ¨æ’å…¥ç»“ç‚¹å’Œåœ¨é˜Ÿåˆ—å¤´éƒ¨åˆ é™¤ç»“ç‚¹çš„åŠŸèƒ½123456789101112131415161718192021222324252627282930313233343536public class ConstructQueue { /* s1 ç”¨æ¥å®ç°æ”¾å…¥æ–°çš„å…ƒç´ ï¼Œç›´æ¥æ”¾åˆ°æ ˆé¡¶ s2 ç”¨æ¥è¾…åŠ©åˆ é™¤å…ƒç´ ï¼Œåˆ é™¤é˜Ÿå¤´æ—¶ï¼Œå…ˆå°† s1 ä¸­é™¤åº•éƒ¨å…ƒç´ ä¹‹å¤–å…¨éƒ½ç§»åˆ° s2 ç„¶ååˆ é™¤åº•éƒ¨å…ƒç´ ï¼Œå†å°† s2 å…ƒç´ ç§»å› s1 */ Stack stack1 = new Stack(); Stack stack2 = new Stack(); // å®ç°appendTailå‡½æ•° public void appendTail(String s) { stack1.push(s); } // å®ç°deleteHeadå‡½æ•° public String deleteHead() { while (!stack1.empty()) { stack2.push(stack1.pop()); } String head = stack2.pop(); while (!stack2.empty()) { stack1.push(stack2.pop()); } return head; } public static void main(String[] args) { ConstructQueue queue = new ConstructQueue(); queue.appendTail(\"a\"); queue.appendTail(\"b\"); queue.appendTail(\"c\"); queue.appendTail(\"d\"); System.out.println(queue.deleteHead()); System.out.println(queue.deleteHead()); }} è¾“å‡ºå¦‚ä¸‹12ab Problem7ï¼šæ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—æŠŠä¸€ä¸ªæ•°ç»„æœ€å¼€å§‹çš„è‹¥å¹²ä¸ªå…ƒç´ æ¬åˆ°æ•°ç»„çš„æœ«å°¾ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæ•°ç»„çš„æ—‹è½¬ ã€‚è¾“å…¥ä¸€ä¸ªé€’å¢æ’åºçš„æ•°ç»„çš„æ—‹è½¬ï¼Œè¾“å‡ºæ—‹è½¬æ•°ç»„çš„æœ€å°å…ƒç´ ã€‚ä¾‹å¦‚æ•°ç»„ {3, 4, 5, 1, 2}ä¸º{1, 2, 3, 4, 5}çš„ä¸€ä¸ªæ—‹è½¬ï¼Œè¯¥æ•°ç»„çš„æœ€å°å€¼ä¸º 1; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657public static void main(String[] args) { int[] a = {3, 4, 5, 1, 2}; System.out.println(minNumInRotateArray(a));}/** * æ³¨æ„åˆ°æ—‹è½¬ä¹‹åçš„æ•°ç»„å¯ä»¥åˆ’åˆ†ä¸ºä¸¤ä¸ªæ’åºå­æ•°ç»„ï¼Œå‰é¢çš„å­æ•°ç»„å…ƒç´ éƒ½å¤§äºæˆ–ç­‰äºåé¢å­æ•°ç»„çš„å…ƒç´ ã€‚ * è¿˜å¯ä»¥æ³¨æ„åˆ°æœ€å°çš„å…ƒç´ åˆšå¥½æ˜¯è¿™ä¸¤ä¸ªå­æ•°ç»„çš„åˆ†ç•Œç‚¹ã€‚åœ¨æ’åºæ•°ç»„ä¸­æˆ‘ä»¬å¯ä»¥ç”¨äºŒåˆ†æŸ¥æ‰¾æ³•å®ç°O(logn)çš„æŸ¥æ‰¾ã€‚ * * ç”¨ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ å’Œæœ€åä¸€ä¸ªå…ƒç´ ã€‚æŒ‰ç…§æ—‹è½¬è§„åˆ™ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ åº”è¯¥å¤§äºç­‰äºæœ€åä¸€ä¸ªå…ƒç´ ã€‚ * æ¥ç€å¯ä»¥æ‰¾åˆ°æ•°ç»„ä¸­é—´çš„å…ƒç´ ã€‚å¦‚æœä¸­é—´å…ƒç´ ä½äºå‰é¢çš„é€’å¢æ•°ç»„ï¼Œåˆ™å®ƒåº”è¯¥å¤§äºç­‰äºç¬¬ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ ï¼Œ * æ­¤æ—¶æˆ‘ä»¬è¦æ‰¾åˆ°çš„æœ€å°å…ƒç´ è‚¯å®šåº”è¯¥ä½äºè¯¥ä¸­é—´å…ƒç´ çš„åé¢ã€‚è¿™æ ·æˆ‘ä»¬æŠŠç¬¬ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸­é—´å…ƒç´ ï¼Œä»è€Œç¼©å°æŸ¥æ‰¾èŒƒå›´ã€‚ * åŒç†ç¬¬äºŒä¸ªæŒ‡é’ˆçš„èŒƒå›´ä¹Ÿå°†é€æ¸ç¼©å° * * ç¬¬ä¸€ä¸ªæŒ‡é’ˆæ€»æ˜¯æŒ‡å‘å‰é¢çš„é€’å¢æ•°ç»„å…ƒç´ ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆæ€»æ˜¯æŒ‡å‘åé¢çš„é€’å¢æ•°ç»„å…ƒç´ ã€‚ * æœ€ç»ˆç¬¬ä¸€ä¸ªæŒ‡é’ˆå°†æŒ‡å‘å‰é¢çš„å­æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆå°†æŒ‡å‘åé¢çš„å­æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œ * å³äºŒè€…æœ€åæŒ‡å‘ç›¸é‚»çš„å…ƒç´ ï¼Œä¸”ç¬¬äºŒä¸ªæŒ‡é’ˆæŒ‡å‘çš„åˆšå¥½æ˜¯æœ€å°çš„å…ƒç´ â€”â€”å¾ªç¯ç»“æŸæ¡ä»¶ã€‚ * * @param array */public static int minNumInRotateArray(int[] array) { if (array == null) { return 0; } int left = 0; int right = array.length - 1; int mid = 0; while (array[left] >= array[right]) { if (right - left == 1) { mid = right; break; } mid = (left + right) / 2; // æ­¤æ—¶åº”è¯¥ç”¨é¡ºåºæŸ¥æ‰¾ï¼Œå› ä¸ºä¸ç¡®å®šarray[mid]ä½äºå“ªä¸ªæœ‰åºå­æ•°ç»„ if (array[left] == array[right] && array[right] == array[mid]) { return findInOrder(array, left, right); } if (array[left] 1, f(n) = f(n-1) + f(n-2). 123456789101112131415public static void main(String[] args) { for (int i = 0; i < 11; i++) { System.out.print(fibonacci(i) + \" \"); }}public static int fibonacci(int n) { if (n == 0) { return 0; } if (n == 1) { return 1; } return fibonacci(n-1) + fibonacci(n-2);} è¾“å‡ºç»“æœ10 1 1 2 3 5 8 13 21 34 55 Problem9ï¼šäºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°è¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªæ•´æ•°ï¼Œè¾“å‡ºè¯¥æ•°äºŒè¿›åˆ¶è¡¨ç¤ºä¸­1çš„ä¸ªæ•°ã€‚ ä¾‹å¦‚æŠŠ9è¡¨ç¤ºæˆäºŒè¿›åˆ¶æ˜¯1001ï¼Œæœ‰2ä½æ˜¯1ï¼Œå› æ­¤å¦‚æœè¾“å…¥9ï¼Œè¯¥å‡½æ•°è¾“å‡º2ã€‚ 12345678910111213141516171819202122public static int oneCountsOfBinary(int i) { char[] chars = Integer.toBinaryString(i).toCharArray(); int count = 0; for (char c : chars) { if (c == '1') { count++; } } return count;}public static int _oneCountsOfBinary(int i) { int count = 0; int flag = 1; while (flag != 0) { if ((i & flag) != 0) { count++; } flag = flag nextåˆ é™¤æ‰ * * @param head * @param delNode */public static void deleteNode(Node head, Node delNode) { if (head == null || delNode == null) { return; } if (head == delNode) { head = null; return; } if (delNode.next == null) { Node temp = head; while (temp.next != delNode) { temp = temp.next; } temp.next = null; return; } delNode.value = delNode.next.value; delNode.next = delNode.next.next;} Problem12ï¼šè°ƒæ•´æ•°ç»„ä¸­å¥‡æ•°å’Œå¶æ•°çš„å…ˆåé¡ºåºè¾“å…¥ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œå®ç°ä¸€ä¸ªå‡½æ•°æ¥è°ƒæ•´è¯¥æ•°ç»„ä¸­æ•°å­—çš„é¡ºåºï¼Œä½¿å¾—æ‰€æœ‰ å¥‡æ•°ä½äºæ•°ç»„çš„å‰åŠéƒ¨åˆ†ï¼Œæ‰€æœ‰å¶æ•°ä½äºæ•°ç»„çš„ååŠéƒ¨åˆ†;123456789101112131415161718192021public static void orderArray(int[] array) { int left = 0; int right = array.length - 1; while (left < right) { while (left < right && !isEven(array[left])) { left ++; } while (left < right && isEven(array[right])) { right --; } if (left < right) { int temp = array[left]; array[left] = array[right]; array[right] = temp; } }}static boolean isEven(int i) { return ((i & 1) == 0);} Problem13ï¼šé“¾è¡¨ä¸­å€’æ•°ç¬¬Kä¸ªç»“ç‚¹è¾“å…¥ä¸€ä¸ªé“¾è¡¨ï¼Œè¾“å‡ºè¯¥é“¾è¡¨ä¸­å€’æ•°ç¬¬Kä¸ªç»“ç‚¹ã€‚ä¸ºäº†ç¬¦åˆå¤§å¤šæ•°äººçš„ä¹  æƒ¯ï¼Œä»1å¼€å§‹è®¡æ•°ï¼Œå³é“¾è¡¨çš„å°¾ç»“ç‚¹æ˜¯å€’æ•°ç¬¬ä¸€ä¸ªç»“ç‚¹ã€‚ ä¾‹å¦‚ä¸€ä¸ªé“¾è¡¨æœ‰6ä¸ªç»“ç‚¹ï¼Œä»å¤´ç»“ç‚¹å¼€å§‹å®ƒä»¬çš„å€¼ä¾æ¬¡æ˜¯1ã€2ã€3ã€4ã€5ã€6ã€‚è¿™ä¸ªé“¾è¡¨çš„å€’æ•°ç¬¬ä¸‰ä¸ªç»“ç‚¹æ˜¯å€¼ä¸º4çš„ç»“ç‚¹ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738/** * ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆè§£å†³ï¼Œç¬¬ä¸€ä¸ªæŒ‡é’ˆä»é“¾è¡¨çš„å¤´æŒ‡é’ˆå¼€å§‹éå†å‘å‰èµ°k-1ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆä¿æŒä¸åŠ¨ * ä»ç¬¬kæ­¥å¼€å§‹ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆä¹Ÿå¼€å§‹ä»é“¾è¡¨çš„å¤´æŒ‡é’ˆå¼€å§‹éå† * ç”±äºä¸¤ä¸ªæŒ‡é’ˆçš„è·ç¦»ä¿æŒåœ¨k-1ï¼Œå½“ç¬¬ä¸€ä¸ªæŒ‡é’ˆåˆ°è¾¾é“¾è¡¨çš„å°¾ç»“ç‚¹æ—¶ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆåˆšå¥½åœ¨å€’æ•°ç¬¬kä¸ªç»“ç‚¹ä¸Š * * @param head å¤´ç»“ç‚¹ * @param k å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹ */public static int find(ListNode head, int k){ if (head == null) { return 0; } ListNode first = head; ListNode second = head; for (int i = 1; i < k; i++) { if (first.next != null) { first = first.next; } else { return 0; } } System.out.println(first.val); while (first.next != null) { first = first.next; second = second.next; } System.out.println(first.val); return second.val;}static class ListNode { int val; ListNode next; public ListNode(int val) { this.val = val; }} Problem14ï¼šç¿»è½¬é“¾è¡¨å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªé“¾è¡¨çš„å¤´ç»“ç‚¹ï¼Œåè½¬è¯¥é“¾è¡¨å¹¶è¾“å‡ºåè½¬åé“¾è¡¨çš„å¤´ç»“ç‚¹ 12345678910111213141516171819202122232425262728293031323334353637383940414243/** * ç¿»è½¬å•é“¾è¡¨ * * @param head åŸé“¾è¡¨çš„å¤´èŠ‚ç‚¹ * @return ç¿»è½¬ä¹‹åçš„å¤´èŠ‚ç‚¹ */public static ListNode getReversedListHead(ListNode head) { if (head == null) { return null; } //currentèŠ‚ç‚¹æ˜¯headçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ ListNode current = head.next; //å½“å‰çš„headå˜ä¸ºé“¾è¡¨çš„å°¾ï¼Œæ‰€ä»¥nextä¸ºç©º head.next = null; while (current != null) { //currentNextèŠ‚ç‚¹æ˜¯currentçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚ ListNode currentNext = current.next; //current.nextåæ–¹å‘æŒ‡å‘ä»¥å‰çš„èŠ‚ç‚¹ current.next = head; //ç§»åŠ¨headå’ŒcurrentæŒ‡é’ˆï¼Œåˆ°åé¢headé‡æ–°æˆä¸ºå¤´èŠ‚ç‚¹ head = current; current = currentNext; } return head;}/** * ç¿»è½¬å•é“¾è¡¨çš„é€’å½’å®ç° * * @param head åŸé“¾è¡¨çš„å¤´èŠ‚ç‚¹ * @return ç¿»è½¬ä¹‹åçš„å¤´èŠ‚ç‚¹ */public static ListNode reverseListByRecursion(ListNode head) { if (head == null || head.next == null) { return head; } ListNode newList = reverseListByRecursion(head.next); head.next.next = head; head.next = null; return newList;} Problem15ï¼šåˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨è¾“å…¥ä¸¤ä¸ªé€’å¢æ’åºçš„é“¾è¡¨ï¼Œåˆå¹¶è¿™ä¸¤ä¸ªé“¾è¡¨å¹¶ä½¿æ–°é“¾è¡¨ä¸­çš„ç»“ç‚¹ä»ç„¶æ˜¯æŒ‰ç…§é€’å¢æ’åºçš„ã€‚ 1234567891011121314151617public static ListNode merge(ListNode n1, ListNode n2) { if (n1 == null) { return n2; } if (n2 == null) { return n1; } ListNode mergeNode = null; if (n1.val < n2.val) { mergeNode = n1; mergeNode.next = merge(n1.next, n2); } else { mergeNode = n2; mergeNode.next = merge(n1, n2.next); } return mergeNode;} Problem16ï¼šæ ‘çš„å­ç»“æ„åˆ¤æ–­Problem17ï¼šäºŒå‰æ ‘çš„é•œåƒProblem18ï¼šé¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µProblem19ï¼šåŒ…å«minå‡½æ•°çš„æ ˆProblem20ï¼šæ ˆçš„å‹å…¥ã€å¼¹å‡ºåºåˆ—Problem21ï¼šä»ä¸Šå¾€ä¸‹æ‰“å°äºŒå‰æ ‘Problem22ï¼šäºŒå‰æœç´¢æ ‘çš„ååºéå†Problem23ï¼šäºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„Problem24ï¼šå­—ç¬¦ä¸²çš„æ’åˆ—Problem25ï¼šæ•°ç»„ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„æ•°å­—Problem26ï¼šè¿ç»­å­æ•°ç»„çš„æœ€å¤§å’ŒProblem27ï¼šæ•´æ•°ä¸­1å‡ºç°çš„æ¬¡æ•°Problem28ï¼šæŠŠæ•°ç»„æ’æˆæœ€å°çš„æ•°Problem29ï¼šä¸‘æ•°Problem30ï¼šç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦Problem31ï¼šæ•°ç»„ä¸­çš„é€†åºå¯¹Problem32ï¼šä¸¤ä¸ªé“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹Problem33ï¼šäºŒå‰æ ‘çš„æ·±åº¦&&å¹³è¡¡äºŒå‰æ ‘åˆ¤æ–­Problem34ï¼šæ•°å­—åœ¨æ’åºæ•°ç»„ä¸­å‡ºç°çš„æ¬¡æ•°Problem35ï¼šæ•°ç»„ä¸­åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—Problem36ï¼šå’Œä¸ºSçš„ä¸¤ä¸ªæ•°å­—Problem37ï¼šå’Œä¸ºSçš„è¿ç»­æ­£æ•°åºåˆ—Problem38ï¼šç¿»è½¬å•è¯çš„é¡ºåºProblem39ï¼šæ‰‘å…‹ç‰Œçš„é¡ºå­Problem40ï¼šyåœ†åœˆä¸­æœ€åå‰©ä¸‹çš„æ•°å­—ï¼ˆçº¦ç‘Ÿå¤«ç¯é—®é¢˜ï¼‰Problem41ï¼šè®¡ç®—1+2+3+ Â·Â·Â· + nProblem42ï¼šä¸ç”¨åŠ å‡ä¹˜é™¤åšåŠ æ³•Problem43ï¼šæŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°Problem44ï¼šæ•°ç»„ä¸­é‡å¤çš„æ•°å­—Problem45ï¼šæ„å»ºä¹˜ç§¯æ•°ç»„Problem46ï¼šæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…Problem47ï¼šè¡¨ç¤ºæ•°å€¼çš„å­—ç¬¦ä¸²Problem48ï¼šå­—ç¬¦æµä¸­ç¬¬ä¸€ä¸ªä¸é‡å¤çš„å­—ç¬¦Problem49ï¼šé“¾è¡¨ä¸­ç¯çš„å…¥å£ç»“ç‚¹Problem50ï¼šåˆ é™¤é“¾è¡¨ä¸­æ¬§å† é‡å¤çš„èŠ‚ç‚¹Problem51ï¼šäºŒå‰æ ‘çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹Problem52ï¼šæŠŠäºŒå‰æ ‘æ‰“å°æˆå¤šè¡ŒProblem53ï¼šæŒ‰ä¹‹å­—å½¢é¡ºåºæ‰“å°äºŒå‰æ ‘Problem54ï¼šåºåˆ—åŒ–äºŒå‰æ ‘Problem55ï¼šäºŒå‰æœç´¢æ ‘çš„ç¬¬Kä¸ªèŠ‚ç‚¹Problem56ï¼šæ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼å¤§å€¼ document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yoursite.com/categories/ç®—æ³•/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yoursite.com/tags/ç®—æ³•/"}]},{"title":"Android å¤šçº¿ç¨‹æŠ€æœ¯","slug":"Android-å¤šçº¿ç¨‹æŠ€æœ¯","date":"2019-03-17T03:56:59.000Z","updated":"2019-03-17T04:43:46.000Z","comments":true,"path":"Android-å¤šçº¿ç¨‹æŠ€æœ¯/","link":"","permalink":"http://yoursite.com/Android-å¤šçº¿ç¨‹æŠ€æœ¯/","excerpt":"å¤šçº¿ç¨‹æŠ€æœ¯ä¸€ç›´æ˜¯è½¯ä»¶å¼€å‘ä¸­çš„é‡ç‚¹ï¼Œæœ¬æ–‡å°†ä»‹ç» Java ä¸­çš„çº¿ç¨‹å’Œçº¿ç¨‹æ± ä½¿ç”¨ï¼Œç„¶åå†è¯¦ç»†åˆ†æ Android ä¸­çš„å¤šçº¿ç¨‹æœºåˆ¶ï¼ŒåŒ…æ‹¬ AsyncTaskã€IntentService ä»¥åŠ HandlerThread ç­‰ç­‰ã€‚","text":"å¤šçº¿ç¨‹æŠ€æœ¯ä¸€ç›´æ˜¯è½¯ä»¶å¼€å‘ä¸­çš„é‡ç‚¹ï¼Œæœ¬æ–‡å°†ä»‹ç» Java ä¸­çš„çº¿ç¨‹å’Œçº¿ç¨‹æ± ä½¿ç”¨ï¼Œç„¶åå†è¯¦ç»†åˆ†æ Android ä¸­çš„å¤šçº¿ç¨‹æœºåˆ¶ï¼ŒåŒ…æ‹¬ AsyncTaskã€IntentService ä»¥åŠ HandlerThread ç­‰ç­‰ã€‚ document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Android","slug":"Android","permalink":"http://yoursite.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://yoursite.com/tags/Android/"},{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"å¤šçº¿ç¨‹","slug":"å¤šçº¿ç¨‹","permalink":"http://yoursite.com/tags/å¤šçº¿ç¨‹/"}]},{"title":"Android LruCache ç¼“å­˜è¯¦è§£","slug":"Android-LruCache-ç¼“å­˜è¯¦è§£","date":"2019-03-17T02:49:27.000Z","updated":"2019-05-03T11:34:44.000Z","comments":true,"path":"Android-LruCache-ç¼“å­˜è¯¦è§£/","link":"","permalink":"http://yoursite.com/Android-LruCache-ç¼“å­˜è¯¦è§£/","excerpt":"","text":"Android ç¼“å­˜ç­–ç•¥ä¸€èˆ¬æ¥è¯´ï¼Œç¼“å­˜ç­–ç•¥ä¸»è¦åŒ…å«ç¼“å­˜çš„æ·»åŠ ã€è·å–å’Œåˆ é™¤ã€‚å¦‚ä½•æ·»åŠ å’Œè·å–ç¼“å­˜è¿™ä¸ªæ¯”è¾ƒå¥½ç†è§£ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦åˆ é™¤ç¼“å­˜å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºä¸ç®¡æ˜¯å†…å­˜ç¼“å­˜è¿˜æ˜¯ç¡¬ç›˜ç¼“å­˜ï¼Œå®ƒä»¬çš„ç¼“å­˜å¤§å°éƒ½æ˜¯æœ‰é™çš„ã€‚å½“ç¼“å­˜æ»¡äº†ä¹‹åï¼Œå†å‘å…¶æ·»åŠ ç¼“å­˜ï¼Œå°±éœ€è¦å…ˆåˆ é™¤æ—§çš„ç¼“å­˜ã€‚å› æ­¤ LRU ç¼“å­˜ç®—æ³•åº”è¿è€Œç”Ÿã€‚ LRUï¼ˆLeast Recently Usedï¼‰ï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯å½“ç¼“å­˜æ»¡æ—¶ï¼Œä¼˜å…ˆæ·˜æ±°é‚£äº›è¿‘æœŸæœ€å°‘ä½¿ç”¨çš„ç¼“å­˜å¯¹è±¡ï¼Œæœ‰æ•ˆçš„é¿å…äº† OOM çš„å‡ºç°ã€‚Android ä¸­é‡‡ç”¨ LRU ç®—æ³•çš„å¸¸ç”¨ç¼“å­˜æœ‰ä¸¤ç§ï¼šLruCache å’Œ DisLruCacheï¼Œåˆ†åˆ«ç”¨äºå®ç°å†…å­˜ç¼“å­˜å’Œç¡¬ç›˜ç¼“å­˜ã€‚ LRU ç¼“å­˜çš„å®ç°ç±»ä¼¼äºä¸€ä¸ªç‰¹æ®Šçš„æ ˆï¼ŒæŠŠè®¿é—®è¿‡çš„å…ƒç´ æ”¾ç½®åˆ°æ ˆé¡¶ï¼ˆè‹¥æ ˆä¸­å­˜åœ¨ï¼Œåˆ™æ›´æ–°è‡³æ ˆé¡¶ï¼›è‹¥æ ˆä¸­ä¸å­˜åœ¨åˆ™ç›´æ¥å…¥æ ˆï¼‰ï¼Œç„¶åå¦‚æœæ ˆä¸­å…ƒç´ æ•°é‡è¶…è¿‡é™å®šå€¼ï¼Œåˆ™åˆ é™¤æ ˆåº•å…ƒç´ ï¼ˆå³æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„å…ƒç´ ï¼‰ã€‚å¦‚ä¸‹å›¾ï¼š ä½¿ç”¨LruCache æ˜¯Android 3.1æ‰€æä¾›çš„ä¸€ä¸ªç¼“å­˜ç±»ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚è€Œ DisLruCache ç›®å‰è¿˜ä¸æ˜¯ Android SDKçš„ä¸€éƒ¨åˆ†ï¼Œä½† Android å®˜æ–¹æ–‡æ¡£æ¨èä½¿ç”¨è¯¥ç®—æ³•æ¥å®ç°ç¡¬ç›˜ç¼“å­˜ã€‚ è®²åˆ° LruCache ä¸å¾—ä¸æä¸€ä¸‹ LinkedHashMapï¼Œå› ä¸º LruCache ä¸­ Lru ç®—æ³•å°±æ˜¯é€šè¿‡ LinkedHashMap æ¥å®ç°çš„ã€‚ LinkedHashMap ç»§æ‰¿äº HashMapï¼Œä½¿ç”¨äº†ä¸€ä¸ªåŒå‘é“¾è¡¨æ¥å­˜å‚¨ Map ä¸­çš„ Entry é¡ºåºå…³ç³»ï¼Œè¿™ç§é¡ºåºæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ LRU é¡ºåºï¼Œä¸€ç§æ˜¯æ’å…¥é¡ºåºï¼Œç”±å…¶æ„é€ å‡½æ•° 1public LinkedHashMap(int initialCapacity,float loadFactor, boolean accessOrder) ä¸­çš„æœ€åä¸€ä¸ªå‚æ•° accessOrder æ¥æŒ‡å®šã€‚ å¯¹äºgetã€putã€removeç­‰æ“ä½œï¼ŒLinkedHashMap é™¤äº†è¦åš HashMap åšçš„äº‹æƒ…ï¼Œè¿˜ä¼šåšäº›è°ƒæ•´ Entry é¡ºåºé“¾è¡¨çš„å·¥ä½œã€‚LruCache ä¸­å°† LinkedHashMap çš„é¡ºåºè®¾ç½®ä¸º LRU é¡ºåºæ¥å®ç° LRU ç¼“å­˜ï¼Œæ¯æ¬¡è°ƒç”¨ get(ä¹Ÿå°±æ˜¯ä»å†…å­˜ç¼“å­˜ä¸­å–å›¾ç‰‡)ï¼Œåˆ™å°†è¯¥å¯¹è±¡ç§»åˆ°é“¾è¡¨çš„å°¾ç«¯ã€‚è°ƒç”¨put æ’å…¥æ–°çš„å¯¹è±¡ï¼Œåˆ™å­˜å‚¨åœ¨é“¾è¡¨å°¾ç«¯ï¼Œè¿™æ ·å½“å†…å­˜ç¼“å­˜è¾¾åˆ°è®¾å®šçš„æœ€å¤§å€¼æ—¶ï¼Œå°†é“¾è¡¨å¤´éƒ¨çš„å¯¹è±¡ï¼ˆè¿‘æœŸæœ€å°‘ç”¨åˆ°çš„ï¼‰ç§»é™¤ã€‚ LruCache çš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œä»¥å›¾ç‰‡ç¼“å­˜ä¸ºä¾‹ï¼š123456789int maxMemory = (int) (Runtime.getRuntime().totalMemory()/1024);int cacheSize = maxMemory/8;mMemoryCache = new LruCache(cacheSize) { @Override protected int sizeOf(String key, Bitmap value) { return value.getRowBytes() * value.getHeight() / 1024; }}; è®¾ç½®LruCacheç¼“å­˜çš„å¤§å°ï¼Œä¸€èˆ¬ä¸ºå½“å‰è¿›ç¨‹å¯ç”¨å®¹é‡çš„1/8ã€‚ é‡å†™sizeOfæ–¹æ³•ï¼Œè®¡ç®—å‡ºè¦ç¼“å­˜çš„æ¯å¼ å›¾ç‰‡çš„å¤§å°ã€‚ æ³¨æ„ï¼šç¼“å­˜çš„æ€»å®¹é‡å’Œæ¯ä¸ªç¼“å­˜å¯¹è±¡çš„å¤§å°æ‰€ç”¨å•ä½è¦ä¸€è‡´ã€‚ åŸç†LruCache çš„æ ¸å¿ƒæ€æƒ³å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯è¦ç»´æŠ¤ä¸€ä¸ªç¼“å­˜å¯¹è±¡åˆ—è¡¨ï¼Œå…¶ä¸­å¯¹è±¡åˆ—è¡¨çš„æ’åˆ—æ–¹å¼æ˜¯æŒ‰ç…§è®¿é—®é¡ºåºå®ç°çš„ï¼Œå³ä¸€ç›´æ²¡è®¿é—®çš„å¯¹è±¡ä¼šæ”¾åœ¨é˜Ÿå°¾ï¼Œå³å°†è¢«æ·˜æ±°ã€‚è€Œæœ€è¿‘è®¿é—®çš„å¯¹è±¡ä¼šæ”¾åœ¨é˜Ÿå¤´ï¼Œæœ€åè¢«æ·˜æ±°ã€‚è¿™ä¸ªé˜Ÿåˆ—ç”± LinkedHashMap æ¥ç»´æŠ¤ã€‚LinkedHashMap ç”±æ•°ç»„+åŒå‘é“¾è¡¨çš„æ•°æ®ç»“æ„å®ç°ï¼Œå…¶ä¸­åŒå‘é“¾è¡¨çš„ç»“æ„å¯ä»¥å®ç°è®¿é—®é¡ºåºå’Œæ’å…¥é¡ºåºï¼Œä½¿å¾— LinkedHashMap ä¸­çš„å¯¹æŒ‰ç…§ä¸€å®šé¡ºåºæ’åˆ—èµ·æ¥ã€‚ é€šè¿‡ä¸‹é¢çš„æ„é€ å‡½æ•°æ¥æŒ‡å®š LinkedHashMap ä¸­åŒå‘é“¾è¡¨çš„ç»“æ„æ˜¯è®¿é—®é¡ºåºè¿˜æ˜¯æ’å…¥é¡ºåºã€‚ 1234public LinkedHashMap(int initialCapacity, float loadFactor, boolean accessOrder) { super(initialCapacity, loadFactor); this.accessOrder = accessOrder;} accessOrder è®¾ç½®ä¸º true åˆ™ä¸ºè®¿é—®é¡ºåºï¼›ä¸º falseï¼Œåˆ™ä¸ºæ’å…¥é¡ºåºã€‚ ä»¥å…·ä½“ä¾‹å­è§£é‡Šï¼Œå½“è®¾ç½®ä¸ºtrueæ—¶ 123456789101112131415public static final void main(String[] args) { LinkedHashMap map = new LinkedHashMap(0, 0.75f, true); map.put(0, 0); map.put(1, 1); map.put(2, 2); map.put(3, 3); map.put(4, 4); map.put(5, 5); map.put(6, 6); map.get(1); map.get(2); for (Map.Entry entry : map.entrySet()) { System.out.println(entry.getKey() + \":\" + entry.getValue()); }} è¾“å‡ºç»“æœä¸º:12345670:03:34:45:56:61:12:2 å³æœ€è¿‘è®¿é—®çš„æœ€åè¾“å‡ºï¼Œæ­£å¥½æ»¡è¶³ LRU ç¼“å­˜ç®—æ³•çš„æ€æƒ³ã€‚å¯è§ LruCache çš„å·§å¦™å®ç°ï¼Œå°±æ˜¯åˆ©ç”¨äº†LinkedHashMap çš„è¿™ç§æ•°æ®ç»“æ„ã€‚ ä¸‹é¢æˆ‘ä»¬åœ¨ LruCache æºç ä¸­å…·ä½“çœ‹çœ‹ï¼Œæ€æ ·åº”ç”¨ LinkedHashMap æ¥å®ç°ç¼“å­˜çš„æ·»åŠ ï¼Œè·å¾—å’Œåˆ é™¤ æ„é€ æ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137public LruCache(int maxSize) { if (maxSize { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Android","slug":"Android","permalink":"http://yoursite.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://yoursite.com/tags/Android/"},{"name":"LRU","slug":"LRU","permalink":"http://yoursite.com/tags/LRU/"},{"name":"ç¼“å­˜","slug":"ç¼“å­˜","permalink":"http://yoursite.com/tags/ç¼“å­˜/"}]},{"title":"Java åå°„è¯¦è§£","slug":"Java-åå°„è¯¦è§£","date":"2019-03-16T15:25:47.000Z","updated":"2019-03-17T02:47:56.000Z","comments":true,"path":"Java-åå°„è¯¦è§£/","link":"","permalink":"http://yoursite.com/Java-åå°„è¯¦è§£/","excerpt":"å¼•è¨€åå°„æ˜¯ä¸€ç§è®¡ç®—æœºå¤„ç†æ–¹å¼ï¼Œæ˜¯ç¨‹åºå¯ä»¥è®¿é—®ã€æ£€æµ‹å’Œä¿®æ”¹å®ƒæœ¬èº«çŠ¶æ€æˆ–è¡Œä¸ºçš„ä¸€ç§èƒ½åŠ›ã€‚Java åå°„ä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨ç¨‹åºè¿è¡Œæ—¶åŠ¨æ€åŠ è½½ä¸€ä¸ªç±»ï¼ŒåŠ¨æ€è·å–ç±»çš„å±æ€§ã€æ–¹æ³•ã€æ„é€ å‡½æ•°ç­‰ä¿¡æ¯ã€‚åå°„ä½¿ Java è¿™ä¸€é™æ€è¯­è¨€æœ‰äº†åŠ¨æ€çš„ç‰¹æ€§ã€‚","text":"å¼•è¨€åå°„æ˜¯ä¸€ç§è®¡ç®—æœºå¤„ç†æ–¹å¼ï¼Œæ˜¯ç¨‹åºå¯ä»¥è®¿é—®ã€æ£€æµ‹å’Œä¿®æ”¹å®ƒæœ¬èº«çŠ¶æ€æˆ–è¡Œä¸ºçš„ä¸€ç§èƒ½åŠ›ã€‚Java åå°„ä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨ç¨‹åºè¿è¡Œæ—¶åŠ¨æ€åŠ è½½ä¸€ä¸ªç±»ï¼ŒåŠ¨æ€è·å–ç±»çš„å±æ€§ã€æ–¹æ³•ã€æ„é€ å‡½æ•°ç­‰ä¿¡æ¯ã€‚åå°„ä½¿ Java è¿™ä¸€é™æ€è¯­è¨€æœ‰äº†åŠ¨æ€çš„ç‰¹æ€§ã€‚ ä½¿ç”¨Example12345678910111213141516171819202122232425262728293031323334353637383940414243444546public class Apple { private int price; public Apple(){} public Apple(int price) { this.price = price; } public int getPrice() { return price; } public void setPrice(int price) { this.price = price; } public static void main(String[] args) throws ClassNotFoundException, NoSuchMethodException, InvocationTargetException, InstantiationException, IllegalAccessException { //æ­£å¸¸è°ƒç”¨ Apple apple = new Apple(); apple.setPrice(10); System.out.println(\"Price is \" + apple.getPrice()); //åå°„è°ƒç”¨ Class clazz = Class.forName(\"Apple\"); //ä½¿ç”¨ getFields() æ— æ³•è·å–ç§æœ‰å±æ€§ Field[] fields = clazz.getDeclaredFields(); for (Field field: fields) { System.out.println(\"Field is \" + field.getName()); } Method setPriceMethod = clazz.getMethod(\"setPrice\", int.class); Constructor appleConstructor = clazz.getConstructor(); Object appleObj = appleConstructor.newInstance(); //Constructor appleConstructor = clazz.getConstructor(int.class); //è·å¾—æœ‰å‚æ„é€ å™¨ //Object appleObj = appleConstructor.newInstance(int.class) //è°ƒç”¨æœ‰å‚æ„é€ å™¨ setPriceMethod.invoke(appleObj, 12); Method getPriceMethod = clazz.getMethod(\"getPrice\"); System.out.println(\"Price is \" + getPriceMethod.invoke(appleObj)); }} APIç±»çš„å®ä¾‹åŒ–å’Œæ„é€ å‡½æ•° è·å–å…¬æœ‰æ„é€ å‡½æ•°ï¼Œä¸åŒ…æ‹¬çˆ¶ç±»ï¼ŒClass.classpublic Constructor[] getConstructors()public Constructor getConstructor(Classâ€¦ parameterTypes) è·å–å½“å‰ç±»æ„é€ å‡½æ•°ï¼Œå¿½ç•¥ä¿®é¥°ç¬¦public Constructor[] getDeclaredConstructors()public Constructor getDeclaredConstructor(Classâ€¦ parameterTypes) æ„é€ å‡½æ•°è°ƒç”¨ï¼ŒConstructor.classpublic T newInstance(Objectâ€¦ initargs) å¿½ç•¥ä¿®é¥°ç¬¦ï¼Œå¼ºåˆ¶è°ƒç”¨public void setAccessible(boolean flag) ç±»æˆå‘˜å˜é‡çš„è·å– è·å–å…¬æœ‰å˜é‡ï¼ŒåŒ…æ‹¬çˆ¶ç±»ï¼ŒClass.classpublic Field[] getFields()public Field getField(String name) è·å–å½“å‰ç±»æˆå‘˜å˜é‡ï¼Œå¿½ç•¥ä¿®é¥°ç¬¦public Field[] getDeclaredFields()public Field getDeclaredField(String name) æˆå‘˜å˜é‡èµ‹å€¼ï¼ŒField.class//objä¸ºå®ä¾‹å¯¹è±¡public void set(Object obj,Object value) å¿½ç•¥ä¿®é¥°ç¬¦ï¼Œå¼ºåˆ¶è°ƒç”¨public void setAccessible(boolean flag) ç±»æ–¹æ³•çš„è·å– è·å–å…¬æœ‰æ–¹æ³•ï¼ŒåŒ…æ‹¬çˆ¶ç±»ï¼ŒClass.classpublic Method[] getMethods()public Method getMethod(String name, Classâ€¦ parameterTypes) è·å–å½“å‰ç±»æ–¹æ³•ï¼Œå¿½ç•¥ä¿®é¥°ç¬¦public Method[] getDeclaredMethods()public Method getDeclaredMethod(String name, Classâ€¦ parameterTypes) æ–¹æ³•è°ƒç”¨ï¼ŒMethod.class//objä¸ºç±»å®ä¾‹åŒ–å¯¹è±¡ï¼Œå¦‚æœä¸ºé™æ€æ–¹æ³•objä¸ºNullinvoke(Object obj, Objectâ€¦ args) å¿½ç•¥ä¿®é¥°ç¬¦ï¼Œå¼ºåˆ¶è°ƒç”¨public void setAccessible(boolean flag) ç±»æ³¨è§£çš„è·å– è·å–ç±»çš„â€annotationClassâ€ç±»å‹çš„æ³¨è§£ï¼ŒåŒ…æ‹¬çˆ¶ç±»public Annotation getAnnotation(Class annotationClass) // è·å–ç±»çš„å…¨éƒ¨æ³¨è§£ ï¼ŒåŒ…æ‹¬çˆ¶ç±»public Annotation[] getAnnotations() // è·å–ç±»è‡ªèº«å£°æ˜çš„å…¨éƒ¨æ³¨è§£ ï¼Œå¿½ç•¥ä¿®é¥°ç¬¦public Annotation[] getDeclaredAnnotations() ç±»çˆ¶ç±»çš„è·å– è·å–å®ç°çš„å…¨éƒ¨æ¥å£public Type[] getGenericInterfaces() è·å–çˆ¶ç±»public Type getGenericSuperclass() åŸç†RTTIå’ŒClasså¯¹è±¡RTTIï¼Œå³ Run-Time Type Identificationï¼Œè¿è¡Œæ—¶ç±»å‹è¯†åˆ«ã€‚RTTI èƒ½åœ¨è¿è¡Œæ—¶å°±èƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«æ¯ä¸ªç¼–è¯‘æ—¶å·²çŸ¥çš„ç±»å‹ã€‚ å¾ˆå¤šæ—¶å€™éœ€è¦è¿›è¡Œå‘ä¸Šè½¬å‹ï¼Œæ¯”å¦‚ Fruit ç±»æ´¾ç”Ÿå‡º Apple ç±»ï¼Œå½“ç°æœ‰çš„æ–¹æ³•å°† Fruit ä½œä¸ºå‚æ•°æ—¶ï¼Œå¦‚æœæˆ‘ä»¬ä¼ å…¥å…¶æ´¾ç”Ÿç±»çš„å¼•ç”¨ï¼Œé‚£ä¹ˆ RTTI å°±ä¼šèµ·ä½œç”¨ã€‚é€šè¿‡ RTTI è¯†åˆ«å‡º Apple ç±»æ˜¯ Fruit çš„æ´¾ç”Ÿç±»ï¼Œç„¶åå‘ä¸Šè½¬å‹ã€‚ç‰¹åˆ«æ˜¯åœ¨ç”¨æ¥å£ç±»å‹ä½œä¸ºå‚æ•°çš„æ—¶å€™ï¼Œè¿™ä¸€ç‰¹æ€§æ›´æ˜¯è¢«é¢‘ç¹ä½¿ç”¨ã€‚ è€Œè¿™äº›ç±»å‹ä¿¡æ¯æ˜¯é€šè¿‡ä¸€ä¸ªç‰¹æ®Šå¯¹è±¡Classï¼ˆjava.lang.Classï¼‰å®ç°çš„ï¼Œå®ƒåŒ…å«è·Ÿç±»ç›¸å…³çš„ä¿¡æ¯ã€‚ å½“ç¨‹åºè¦ä½¿ç”¨æŸä¸ªç±»æ—¶ï¼Œå¦‚æœè¯¥ç±»è¿˜æœªè¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œåˆ™ç³»ç»Ÿä¼šé€šè¿‡åŠ è½½ã€è¿æ¥ã€åˆå§‹åŒ–ä¸‰æ­¥æ¥å®ç°å¯¹è¿™ä¸ªç±»è¿›è¡Œåˆå§‹åŒ–ã€‚ åŠ è½½ ï¼šå°† class æ–‡ä»¶è¯»å…¥å†…å­˜ï¼Œå¹¶ä¸ºä¹‹åˆ›å»ºä¸€ä¸ª Class å¯¹è±¡ã€‚ä»»ä½•ç±»è¢«ä½¿ç”¨æ—¶ç³»ç»Ÿéƒ½ä¼šå»ºç«‹ä¸€ä¸ª Class å¯¹è±¡ã€‚ è¿æ¥ï¼š éªŒè¯ æ˜¯å¦æœ‰æ­£ç¡®çš„å†…éƒ¨ç»“æ„ï¼Œå¹¶å’Œå…¶ä»–ç±»åè°ƒä¸€è‡´ å‡†å¤‡ è´Ÿè´£ä¸ºç±»çš„é™æ€æˆå‘˜åˆ†é…å†…å­˜ï¼Œå¹¶è®¾ç½®é»˜è®¤åˆå§‹åŒ–å€¼ è§£æ å°†ç±»çš„äºŒè¿›åˆ¶æ•°æ®ä¸­çš„ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨ åˆå§‹åŒ–ï¼šå¦‚æœè¯¥ç±»æœ‰è¶…ç±»ï¼Œåˆ™å¯¹å…¶åˆå§‹åŒ–ï¼Œæ‰§è¡Œé™æ€åŸŸå’Œé™æ€åˆå§‹åŒ–å—ã€‚ è·å– Class å¯¹è±¡çš„æ–¹å¼æœ‰ä¸‰ç§ Object ç±»çš„ getClass() æ–¹æ³•ï¼Œæ‰§è¡Œé™æ€å—å’ŒåŠ¨æ€æ„é€ å— æ•°æ®ç±»å‹çš„é™æ€å±æ€§ class ï¼Œä¸ä¼šåˆå§‹åŒ–è¯¥ç±» Classç±»ä¸­çš„é™æ€æ–¹æ³•public static Class forName(String className)ï¼Œæ‰§è¡Œé™æ€å—ï¼Œä¸æ‰§è¡ŒåŠ¨æ€æ„é€ å— RTTIå’Œåå°„Java æœ‰ä¸¤ç§ RTTI æ–¹å¼ï¼Œä¸€ç§æ˜¯ä¼ ç»Ÿçš„ï¼Œå‡è®¾åœ¨ç¼–è¯‘æ—¶å·²ç»çŸ¥é“äº†æ‰€æœ‰çš„ç±»å‹ï¼›è¿˜æœ‰ä¸€ç§ï¼Œæ˜¯åˆ©ç”¨åå°„æœºåˆ¶ï¼Œåœ¨è¿è¡Œæ—¶å†å°è¯•ç¡®å®šç±»å‹ä¿¡æ¯ã€‚ RTTIå’Œåå°„ä¹‹é—´çš„çœŸæ­£åŒºåˆ«åªåœ¨äºï¼š RTTIï¼šç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶æ‰“å¼€å’Œæ£€æŸ¥.classæ–‡ä»¶åå°„ï¼šè¿è¡Œæ—¶æ‰“å¼€å’Œæ£€æŸ¥.classæ–‡ä»¶ ä¸¥æ ¼çš„è¯´ï¼Œåå°„ä¹Ÿæ˜¯ä¸€ç§å½¢å¼çš„RTTIï¼Œä¸è¿‡ï¼Œä¸€èˆ¬çš„æ–‡æ¡£èµ„æ–™ä¸­æŠŠRTTIå’Œåå°„åˆ†å¼€ï¼Œå› ä¸ºä¸€èˆ¬çš„ï¼Œå¤§å®¶è®¤ä¸º RTTIæŒ‡çš„æ˜¯ä¼ ç»Ÿçš„ RTTIï¼Œé€šè¿‡ç»§æ‰¿å’Œå¤šæ€æ¥å®ç°ï¼Œåœ¨è¿è¡Œæ—¶é€šè¿‡è°ƒç”¨è¶…ç±»çš„æ–¹æ³•æ¥å®ç°å…·ä½“çš„åŠŸèƒ½ æœªå®Œå¾…ç»­ document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"åå°„","slug":"åå°„","permalink":"http://yoursite.com/tags/åå°„/"}]},{"title":"åŸºæœ¬æ•°æ®ç»“æ„çš„ç®€å•Javaå®ç°","slug":"åŸºæœ¬æ•°æ®ç»“æ„çš„ç®€å•Javaå®ç°","date":"2019-03-16T14:08:55.000Z","updated":"2019-03-16T14:40:26.000Z","comments":true,"path":"åŸºæœ¬æ•°æ®ç»“æ„çš„ç®€å•Javaå®ç°/","link":"","permalink":"http://yoursite.com/åŸºæœ¬æ•°æ®ç»“æ„çš„ç®€å•Javaå®ç°/","excerpt":"å¼•è¨€JDK ä¸­æä¾›äº†å¾ˆå¤šæ•°æ®ç»“æ„ï¼Œå¦‚ä¸‹æ‰€ç¤º Collectionâ”œ Listâ”‚ â”œ LinkedListâ”‚ â”œ ArrayListâ”‚ â”” Vectorâ”‚ â””Stackâ”” Set Mapâ”œ Hashtableâ”œ HashMapâ”” WeakHashMap æœ¬æ–‡å°†è¿›è¡Œéƒ¨åˆ†æ•°æ®ç»“æ„çš„ç®€å•å®ç°ã€‚","text":"å¼•è¨€JDK ä¸­æä¾›äº†å¾ˆå¤šæ•°æ®ç»“æ„ï¼Œå¦‚ä¸‹æ‰€ç¤º Collectionâ”œ Listâ”‚ â”œ LinkedListâ”‚ â”œ ArrayListâ”‚ â”” Vectorâ”‚ â””Stackâ”” Set Mapâ”œ Hashtableâ”œ HashMapâ”” WeakHashMap æœ¬æ–‡å°†è¿›è¡Œéƒ¨åˆ†æ•°æ®ç»“æ„çš„ç®€å•å®ç°ã€‚ Stack12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364public class MyStack { private Object[] dataArray; private int maxSize; private int nowSize = 0; public MyStack() { this(10); } public MyStack(int initialCapacity) { maxSize = initialCapacity; dataArray = new Object[maxSize]; } public void push(T data) { if (size() >= maxSize) { resize(); } dataArray[nowSize++] = data; } public T pop() { if (empty()) { return null; } return (T)dataArray[--nowSize]; } public T peek() { if (empty()) { return null; } return (T)dataArray[nowSize-1]; } public int search(T target) { int p = nowSize; while (p >= 0) { if (dataArray[p] == target) { return p; } p--; } return -1; } private void resize() { maxSize = maxSize = maxSize) { resize(); } //éå¾ªç¯é˜Ÿåˆ— dataArray[rear++] = newData; //å¾ªç¯é˜Ÿåˆ— //dataArray[rear] = newData; //rear = (rear+1) % maxSize; } public T dequeue() { if (empty()) { return null; } T value = (T)dataArray[front]; //éå¾ªç¯é˜Ÿåˆ— dataArray[front++] = null; //å¾ªç¯é˜Ÿåˆ— //dataArray[front] = null; //front = (front+1) % maxSize; return value; } public void resize() { maxSize = maxSize { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"http://yoursite.com/tags/æ•°æ®ç»“æ„/"}]},{"title":"Android æ¶ˆæ¯æœºåˆ¶è¯¦è§£","slug":"Android-æ¶ˆæ¯æœºåˆ¶è¯¦è§£","date":"2019-03-16T06:13:19.000Z","updated":"2019-03-17T03:49:56.000Z","comments":true,"path":"Android-æ¶ˆæ¯æœºåˆ¶è¯¦è§£/","link":"","permalink":"http://yoursite.com/Android-æ¶ˆæ¯æœºåˆ¶è¯¦è§£/","excerpt":"å¼•è¨€Android çš„æ¶ˆæ¯æœºåˆ¶ï¼Œä¸»è¦æ˜¯æŒ‡ Handler çš„è¿è¡Œæœºåˆ¶ã€‚","text":"å¼•è¨€Android çš„æ¶ˆæ¯æœºåˆ¶ï¼Œä¸»è¦æ˜¯æŒ‡ Handler çš„è¿è¡Œæœºåˆ¶ã€‚ ANRApplication Not Respondingï¼Œå³åº”ç”¨ç¨‹åºæ— å“åº”ï¼Œåœ¨ä»‹ç»æ¶ˆæ¯æœºåˆ¶çš„ç›¸å…³çŸ¥è¯†ä¹‹å‰å…ˆäº†è§£ ANRã€‚ åŸå› Androidç³»ç»Ÿä¸­ï¼ŒActivityManagerService(AMS) å’Œ WindowManagerService(WMS) ä¼šæ£€æµ‹ App çš„å“åº”æ—¶é—´ï¼Œå¦‚æœAppåœ¨ç‰¹å®šæ—¶é—´æ— æ³•å“åº”å±å¹•è§¦æ‘¸æˆ–é”®ç›˜è¾“å…¥äº‹ä»¶ï¼Œæˆ–è€…ç‰¹å®šäº‹ä»¶æ²¡æœ‰å¤„ç†å®Œæ¯•ï¼Œå°±ä¼šå‡ºç°ANRã€‚ ä»¥ä¸‹å››ç§æ¡ä»¶éƒ½å¯ä»¥é€ æˆ ANR InputDispatching Timeoutï¼š5ç§’å†…æ— æ³•å“åº”å±å¹•è§¦æ‘¸æˆ–é”®ç›˜è¾“å…¥äº‹ä»¶ BroadcastQueue Timeout ï¼šåœ¨æ‰§è¡Œå‰å°å¹¿æ’­ï¼ˆBroadcastReceiverï¼‰çš„onReceiveæ–¹æ³•ä¸­10ç§’æ²¡æœ‰å¤„ç†å®Œæˆï¼Œåå°åˆ™ä¸º60ç§’ã€‚ Service Timeout ï¼šå‰å°æœåŠ¡20ç§’å†…ï¼Œåå°æœåŠ¡åœ¨200ç§’å†…æ²¡æœ‰æ‰§è¡Œå®Œæ¯•ã€‚ ContentProvider Timeout ï¼šContentProvider çš„ publish åœ¨10så†…æ²¡è¿›è¡Œå®Œã€‚ åˆ†æå’Œè§£å†³åˆ†æ æŸ¥çœ‹ log ä¿¡æ¯ Java çº¿ç¨‹è°ƒç”¨åˆ†æï¼Œjstack {pid}ï¼Œå…¶ä¸­ pid ä¸ºè™šæ‹Ÿæœºè¿›ç¨‹ idï¼Œå¯ä»¥é€šè¿‡jpsæŸ¥çœ‹å½“å‰æ‰€æœ‰çº¿ç¨‹ã€‚ æŸ¥çœ‹ trace.txt æ–‡ä»¶ï¼Œå…¶å¯¼å‡ºç›®å½•ä¸º Android SDK çš„ /platform-tools ç›®å½•ï¼ŒWindows ä¸‹åœ¨è¯¥ç›®å½•ä½¿ç”¨å‘½ä»¤./adb pull /data/anr/traces.txtæŸ¥çœ‹ è§£å†³ é¿å…æ­»é”çš„å‡ºç°ï¼Œä½¿ç”¨å­çº¿ç¨‹æ¥å¤„ç†è€—æ—¶æ“ä½œæˆ–é˜»å¡ä»»åŠ¡ã€‚ é¿å…åœ¨ä¸»çº¿ç¨‹ query providerã€ä¸è¦æ»¥ç”¨SharePreferences æ–‡ä»¶è¯»å†™æˆ–æ•°æ®åº“æ“ä½œæ”¾åœ¨å­çº¿ç¨‹å¼‚æ­¥æ“ä½œï¼Œæ“ä½œå®Œæˆä¹‹ååŠæ—¶å…³é—­æµã€‚ BroadcastReciever çš„onRecieveä¸è¦è¿›è¡Œè€—æ—¶æ“ä½œã€‚ Handler æœºåˆ¶ç”±ä¸Šæ–‡æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ä¸»çº¿ç¨‹è¿›è¡Œè€—æ—¶æ“ä½œå°†ä¼šå¼•å‘ ANRï¼Œè€Œä¸” Android ç¦æ­¢åœ¨å­çº¿ç¨‹ä¸­ç›´æ¥ UI æ“ä½œï¼Œè¯¥æœºåˆ¶ç”± ViewRootImpl çš„checkThreadè¿›è¡ŒéªŒè¯1234567void checkThread() { if (mThread != Thread.currrentThread()) { throw new CalledFromWrongThreadException( \"Only the original thread that created a view hierarchy can touch its views\"); }} ä½¿ç”¨è¯¥æœºåˆ¶çš„åŸå› ï¼Œä¸€æ˜¯å¤šçº¿ç¨‹ä¸­å¹¶å‘è®¿é—® UI ä¼šé€ æˆä¸å¯é¢„çŸ¥çŠ¶æ€ï¼›äºŒæ˜¯å¯¹æ§ä»¶ä½¿ç”¨é”æœºåˆ¶ä¼šé™ä½ UI è®¿é—®çš„æ•ˆç‡ã€‚é‚£ä¹ˆï¼Œå½“æˆ‘ä»¬ä½¿ç”¨å¤šçº¿ç¨‹æŠ€æœ¯ç»“æŸæ•°æ®çš„å­˜å‚¨ã€è·å–ï¼Œæƒ³å›åˆ°ä¸»çº¿ç¨‹æ“ä½œ UI è¯¥æ€ä¹ˆåˆ‡æ¢ï¼Ÿ ç­”æ¡ˆæ˜¯ä½¿ç”¨ Handler ã€‚ åˆ›å»º123456789101112131415161718192021222324//æ¥æ”¶æ¶ˆæ¯@SuppressLint(\"HandlerLeak\")private Handler mHandler = new Handler() { @Override public void handleMessage(Message msg) { super.handleMessage(msg); if (msg.what == 1) { log.e(\"MSG\", \"æ”¶åˆ°æ¶ˆæ¯\")ï¼› } }};//å‘é€æ¶ˆæ¯new Thread(new Runnable() { @Override public void run() { try { Thread.sleep(1000); mHandler.sendEmptyMessage(1); } catch (InterruptedException e) { e.printStackTrace(); } }}).start(); ä½¿ç”¨æˆå‘˜å˜é‡åˆ›å»º Handler çš„æ–¹å¼å¾ˆæœ‰å¯èƒ½é€ æˆå†…å­˜æ³„æ¼ï¼Œæ­£ç¡®çš„åšæ³•æ˜¯ä½¿ç”¨é™æ€å†…éƒ¨ç±»å’Œå¼±å¼•ç”¨1234567891011121314151617MyHandler hander = new MyHandler(context);static class MyHandler extends Handler { private WeakReference out; MyHandler(Context ctx) { super(); out = new WeakReference(ctx); } @Override public void handleMessage(Message msg) { if (out.get() != null) { //è¿›è¡Œæ¶ˆæ¯å¤„ç† } }} Handler çš„è¿è¡Œæœºåˆ¶åº•å±‚ç”± MessageQueue å’Œ Looper æ”¯æ’‘ã€‚ç®€å•æ¦‚æ‹¬ï¼ŒHandler æŠŠä¸€ä¸ªçº¿ç¨‹æ¶ˆæ¯å‘é€ç»™å½“å‰çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå³ MessageQueueï¼Œè€Œ Looper è´Ÿè´£ç®¡ç†æ¶ˆæ¯é˜Ÿåˆ—çš„ã€‚ Handlerè§‚å¯Ÿ Handler çš„æ„é€ å‡½æ•°123456789101112public Handler(Callback callback, boolean async) { ...... mLooper = Looper.myLooper(); if (mLooper == null) { throw new RuntimeException( \"Can't create handler inside thread \" + Thread.currentThread() + \" that has not called\" + \" Looper.prepare()\"); } mQueue = mLooper.mQueue; mCallback = callback; mAsynchronous = async;} åœ¨å…¶ä¸­ç»™ MessageQueue ã€Callback å’Œ Asynchronous èµ‹å€¼ã€‚è§‚å¯Ÿ if è¯­å¥ï¼Œå¦‚æœ mLooper ä¸º nullï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œå…¶å®å°±æ˜¯æ— æ³•åœ¨æœªè°ƒç”¨Looper.prepareçš„çº¿ç¨‹å†…åˆ›å»º handlerã€‚ ä¸è¿‡ï¼Œä¸ºä»€ä¹ˆåœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»º Handler ä¸éœ€è¦è°ƒç”¨Looper.prepareå’ŒLooper.loopæ–¹æ³•å‘¢ï¼Ÿå…¶å®æ˜¯å› ä¸ºåœ¨åˆ›å»º Activity çš„æ—¶å€™ï¼Œä¼šç»è¿‡ä¸€ç³»åˆ—è°ƒç”¨è¿‡ç¨‹ï¼Œæœ€ç»ˆæ‰§è¡Œ ActivityThread çš„mainæ–¹æ³•ï¼Œåœ¨å…¶ä¸­è°ƒç”¨äº†prepareMainLooper1234567891011121314151617public static void main(String[] args) { ...... Looper.prepareMainLooper(); ...... Looper.loop(); ......}public static void prepareMainLooper() { prepare(false); //quitAllowed å‚æ•°ä¼ false synchronized (Looper.class) { if (sMainLooper != null) { throw new IllegalStateException(\"The main Looper has already been prepared.\"); } sMainLooper = myLooper(); }} å…³äº ActivityThreadï¼šAndroidçº¿ç¨‹ç®¡ç†ï¼ˆäºŒï¼‰â€”â€”ActivityThread MessageQueueé¡¾åæ€ä¹‰ï¼ŒæŒ‡æ¶ˆæ¯é˜Ÿåˆ—ã€‚é¦–å…ˆè®¤è¯† Messageï¼Œå½“ç”¨æˆ·åœ¨UIç•Œé¢æ—¶ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œè¯¥äº‹ä»¶ä¼šè¢«å°è£…æˆä¸€æ¡ Messageï¼Œè¢«æ·»åŠ åˆ° MessageQueue ä¸­ã€‚Message å†…éƒ¨å°è£…äº†ä¸€ä¸ªå±æ€§ tagetï¼Œå…¶å®è´¨æ˜¯ä¸€ä¸ª Handler å¯¹è±¡ã€‚ ç”±äºä¸€ä¸ªçº¿ç¨‹åœ¨ä¸€æ®µæ—¶é—´åªèƒ½å¯¹ä¸€ç§æ“ä½œè¿›è¡Œç›¸å…³çš„å¤„ç†ï¼Œå› æ­¤ä½¿ç”¨ MessageQueue æ¥ç®¡ç†æ‰€æœ‰æ¶ˆæ¯çš„å…ˆåé¡ºåºï¼Œå…¶å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªå•é“¾è¡¨ç”¨ä»¥å­˜å‚¨æ¶ˆæ¯åˆ—è¡¨ã€‚ å½“ Handler è°ƒç”¨sendMessageæ—¶ï¼Œæœ€åä¼šè°ƒç”¨åˆ° 12345678910public boolean sendMessageAtTime(Message msg, long uptimeMillis) { MessageQueue queue = mQueue; if (queue == null) { RuntimeException e = new RuntimeException( this + \" sendMessageAtTime() called with no mQueue\"); Log.w(\"Looper\", e.getMessage(), e); return false; } return enqueueMessage(queue, msg, uptimeMillis);} æŸ¥çœ‹enqueueMessageæ–¹æ³•ï¼Œ 1234567891011121314151617181920212223242526272829303132333435363738boolean enqueueMessage(Message msg, long when) { ...... synchronized (this) { if (mQuitting) { IllegalStateException e = new IllegalStateException( msg.target + \" sending message to a Handler on a dead thread\"); msg.recycle(); return false; } msg.markInUse(); msg.when = when; Message p = mMessages; boolean needWake; if (p == null || when == 0 || when < p.when) { msg.next = p; mMessages = msg; needWake = mBlocked; } else { needWake = mBlocked && p.target == null && msg.isAsynchronous(); Message prev; for (;;) { prev = p; p = p.next; if (p == null || when < p.when) { break; } if (needWake && p.isAsynchronous()) { needWake = false; } } msg.next = p; // invariant: p == prev.next prev.next = msg; } ...... } return true;} é¦–å…ˆåˆ¤æ–­æ¶ˆæ¯é˜Ÿåˆ—é‡Œæœ‰æ²¡æœ‰æ¶ˆæ¯ï¼Œæ²¡æœ‰åˆ™å°†å½“å‰æ’å…¥çš„æ¶ˆæ¯ä½œä¸ºé˜Ÿå¤´ï¼Œå¹¶ä¸”å¦‚æœæ­¤æ—¶æ¶ˆæ¯é˜Ÿåˆ—å¤„äºç­‰å¾…çŠ¶æ€åˆ™å°†å…¶å”¤é†’ å¦‚æœé˜Ÿåˆ—å·²æœ‰æ¶ˆæ¯ï¼Œåˆ™æ ¹æ® Message åˆ›å»ºçš„æ—¶é—´è¿›è¡Œæ’å…¥ Looperé€šå¸¸è¿è¡Œåœ¨ä¸€ä¸ªæ¶ˆæ¯çš„å¾ªç¯é˜Ÿåˆ—å½“ä¸­ï¼Œçº¿ç¨‹é»˜è®¤ä¸ä¼šæä¾›æ¶ˆæ¯å¾ªç¯å»ç®¡ç†æ¶ˆæ¯é˜Ÿåˆ—ï¼Œéœ€è¦åœ¨çº¿ç¨‹å½“ä¸­è°ƒç”¨Looper.prepareæ–¹æ³•ä½¿æ¶ˆæ¯å¾ªç¯åˆå§‹åŒ–ï¼Œå¹¶ä¸”è°ƒç”¨Looper.loopä½¿æ¶ˆæ¯å¾ªç¯ä¸€ç›´å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œå–å‡º MessageQueue ä¸­çš„æ¶ˆæ¯åˆ†å‘ç»™ Handlerã€‚ 12345678910public static void prepare() { prepare(true);}private static void prepare(boolean quitAllowed) { if (sThreadLocal.get() != null) { throw new RuntimeException(\"Only one Looper may be created per thread\"); } sThreadLocal.set(new Looper(quitAllowed));} å¯ä»¥çœ‹åˆ°ï¼Œprepare(boolean quitAllowed)å®ä¾‹åŒ–äº†ä¸€ä¸ª Looper ï¼Œç„¶åå°†å…¶è®¾ç½®è¿› sThreadLocal ä¸­ã€‚å½“Looper.prepareæ‰§è¡Œå®Œæ¯•ä¹‹åæ‰å¯ä»¥æ‰§è¡Œloopæ–¹æ³•123456789101112131415161718public static void loop() { //è·å–å½“å‰çº¿ç¨‹ç»‘å®šçš„Looper final Looper me = myLooper(); //å½“å‰çº¿ç¨‹çš„MessageQueue final MessageQueue queue = me.mQueue; ...... //å¾ªç¯ä» MessageQueue å–å‡ºæ¶ˆæ¯. for (;;) { Message msg = queue.next(); ...... //å°†æ¶ˆæ¯åˆ†å‘å‡ºå» msg.target.dispatchMessage(msg); ...... //å°†æ¶ˆæ¯å›æ”¶ msg.recycle(); }} å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœæ¶ˆæ¯é˜Ÿåˆ—çš„ next è¿”å›äº†æ–°æ¶ˆæ¯ï¼Œå°±ä¼šè°ƒç”¨msg.target.dispatchMessage(msg)ï¼Œtarget å³ä¸ºå‘é€æ¶ˆæ¯çš„ Handler å¯¹è±¡ã€‚æˆåŠŸå°†ä»£ç é€»è¾‘åˆ‡æ¢åˆ°æŒ‡å®šçš„çº¿ç¨‹ä¸­æ‰§è¡Œã€‚ 123456789101112public void dispatchMessage(Message msg) { if (msg.callback != null) { handleCallback(msg); } else { if (mCallback != null) { if (mCallback.handleMessage(msg)) { return; } } handleMessage(msg); }} é¦–å…ˆæ£€æŸ¥ Message çš„ callBack æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºåˆ™handlerCallback(msg)ï¼Œæœ€ç»ˆè°ƒç”¨ callback çš„runæ–¹æ³• å¦‚æœä¸ºç©ºï¼Œæ£€æŸ¥ mCallBack æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºåˆ™è°ƒç”¨å®ƒçš„handleMassageï¼ŒCallBack æ˜¯ä¸€ä¸ªæ¥å£ï¼Œåˆ©ç”¨å®ƒæˆ‘ä»¬å¯ä»¥ä¼ ä¸€ä¸ª Callback æ¥åˆ›å»º Handlerã€‚ å¦‚æœéƒ½ä¸ºç©ºï¼Œè°ƒç”¨ Handler å†…éƒ¨çš„handleMessageï¼Œä¹Ÿå°±æ˜¯å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬åˆ›å»º Handler å®ä¾‹çš„æ—¶å€™éœ€è¦é‡å†™çš„æ–¹æ³•ã€‚ ThreadLocalä¸€ä¸ªçº¿ç¨‹å†…éƒ¨çš„æ•°æ®å­˜å‚¨ç±»ï¼Œå½“æŸäº›æ•°æ®æ˜¯ä»¥çº¿ç¨‹ä¸ºä½œç”¨åŸŸè€Œä¸”ä¸åŒçº¿ç¨‹å…·æœ‰ä¸åŒçš„æ•°æ®å‰¯æœ¬çš„æ—¶å€™ï¼Œå¯ä»¥é‡‡ç”¨ ThreadLocalã€‚å¯¹äº Handler æ¥è¯´ï¼Œå®ƒéœ€è¦è·å–å½“å‰çº¿ç¨‹çš„ Looperï¼Œå¾ˆæ˜æ˜¾ä¸åŒçš„çº¿ç¨‹å…·æœ‰å„è‡ªçš„ Looperï¼Œæ­¤æ—¶å°±å¯ä»¥é€šè¿‡ ThreadLocal å®ç° Looper åœ¨çº¿ç¨‹ä¸­çš„å­˜å–ã€‚å¦‚æœä¸é‡‡ç”¨ ThreadLocalï¼Œé‚£ä¹ˆç³»ç»Ÿå°±å¿…é¡»æä¾›ä¸€ä¸ªå…¨å±€çš„å“ˆå¸Œè¡¨ä¾› Handler æŸ¥æ‰¾ Looperï¼Œå†æä¾›ä¸€ä¸ªç±»ä¼¼ LooperManager çš„ç±»ã€‚ ä½¿ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¼”ç¤º ThreadLocal çš„çœŸæ­£å«ä¹‰1234567891011121314151617181920212223//æ–°å»ºä¸€ä¸ª boolean ç±»å‹çš„å˜é‡private ThreadLocal value = new ThreadLocal();//åœ¨ä¸»çº¿ç¨‹ä¸­å°†å…¶è®¾ä¸º truevalue.set(true);log.e(\"MainThread\", value.get());//å­çº¿ç¨‹ä¸­è®¾ä¸º falsenew Thread(\"Thread1\") { @Override public void run() { value.set(false); log.e(\"Thread1\", value.get()); }}//å¦ä¸€ä¸ªå­çº¿ç¨‹ç›´æ¥è¯»å–new Thread(\"Thread2\") { @Override public void run() { log.e(\"Thread2\", value.get()); }} è¿è¡Œæ—¥å¿—å¦‚ä¸‹ MainThread, trueThread1, falseThread2, null ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶è®¿é—®çš„æ˜¯åŒä¸€ä¸ª ThreadLocal å¯¹è±¡ï¼Œä½†æ˜¯ä¸åŒçº¿ç¨‹è·å–çš„å€¼æ˜¯ä¸ä¸€æ ·çš„ã€‚ThreadLocal çš„å®ç°åŸç†ï¼šJavaå¹¶å‘ç¼–ç¨‹ï¼šæ·±å…¥å‰–æThreadLocal æ€»ç»“Handler æœºåˆ¶æ˜¯å¦‚æ­¤é‡è¦ï¼Œå¼€å‘ä¸­æˆ‘ä»¬æ€»ä¼šæ˜¾å¼æˆ–éšå¼çš„ç”¨åˆ°å®ƒï¼Œæ¯”å¦‚ Activity çš„runOnUiThread 12345678public final void runOnUiThread(Runnable action) { if (Thread.currentThread() != mUiThread) { mHandler.post(action); } else { action.run(); } ...... } æ¯”å¦‚ View çš„post 123456789public boolean post(Runnable action) { final AttachInfo attachInfo = mAttachInfo; if (attachInfo != null) { return attachInfo.mHandler.post(action); â‘  } // Assume that post will succeed later ViewRootImpl.getRunQueue().post(action); â‘¡ return true; } æœ€åç”¨ä¸€å¼ å›¾æ¥ç»“æŸæœ¬æ–‡ document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Android","slug":"Android","permalink":"http://yoursite.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://yoursite.com/tags/Android/"},{"name":"Handler","slug":"Handler","permalink":"http://yoursite.com/tags/Handler/"}]},{"title":"Java æ’åºç®—æ³•","slug":"Java-æ’åºç®—æ³•","date":"2019-03-15T10:36:47.000Z","updated":"2019-03-15T15:53:18.000Z","comments":true,"path":"Java-æ’åºç®—æ³•/","link":"","permalink":"http://yoursite.com/Java-æ’åºç®—æ³•/","excerpt":"å¼•è¨€æ’åºç®—æ³•ä¸€ç›´æ˜¯ç¨‹åºå‘˜å¼€å‘å’Œé¢è¯•çš„é‡ç‚¹ï¼Œæœ¬æ–‡å°†é‡ç‚¹è®²è§£å‡ ç§å¸¸ç”¨çš„æ’åºç®—æ³•ã€‚","text":"å¼•è¨€æ’åºç®—æ³•ä¸€ç›´æ˜¯ç¨‹åºå‘˜å¼€å‘å’Œé¢è¯•çš„é‡ç‚¹ï¼Œæœ¬æ–‡å°†é‡ç‚¹è®²è§£å‡ ç§å¸¸ç”¨çš„æ’åºç®—æ³•ã€‚ ç¨³å®šæ€§å¯¹äºä¸€ä¸ªæ•°ç»„a {6,2,4,6,1}ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªå€¼ä¸º 6ï¼Œä¸º a[0] å’Œ a[3]ï¼Œæ’åºä¹‹åçš„ç»“æœæœ‰ä¸¤ç§ 1 2 4 6 6 a[4] a[1] a[2] a[0] a[3] a[4] a[1] a[2] a[3] a[0] å¦‚æœæ’åºç»“æŸä¹‹åï¼Œa[0] å¯ä»¥ä¿è¯ä¸€å®šåœ¨ a[3] å‰é¢ï¼Œå³åŸæœ‰çš„é¡ºåºä¸å˜ï¼Œåˆ™è¯¥ç®—æ³•å±äºç¨³å®šçš„æ’åºç®—æ³• å†’æ³¡æ’åºã€åŸºæ•°æ’åºã€æ’å…¥æ’åºã€å½’å¹¶æ’åºã€æ¡¶æ’åºã€äºŒå‰æ ‘æ’åºç­‰ å¦åˆ™ï¼Œå±äºä¸ç¨³å®šçš„æ’åºç®—æ³• é€‰æ‹©æ’åºï¼Œå¸Œå°”æ’åºï¼Œå †æ’åºï¼Œå¿«é€Ÿæ’åºç­‰ å†’æ³¡æ’åº1234567891011121314151617181920212223/** * å†’æ³¡æ’åºï¼ŒO(n^2) * æ¯ä¸€æ¬¡å†…å±‚å¾ªç¯ä¸­ï¼Œä¸¤ä¸¤æ¯”è¾ƒï¼Œå°†è¾ƒå¤§çš„æ•°æ”¾åˆ°åé¢ * * @param a å¾…æ’åºæ•°æ® */public static void bubbleSort(int[] a) { int length = a.length; int i = 0; int temp; for ( ; i < length - 1; i++) { int j = 0; for ( ; j < length - 1 - i; j++) { if (a[j] > a[j+1]) { temp = a[j]; a[j] = a[j+1]; a[j+1] = temp; } } }} æ’å…¥æ’åºæ’å…¥æ’åºå¯ä»¥åˆ†ä¸ºç›´æ¥æ’å…¥æ’åºï¼Œä»¥åŠå…¶å˜ç§â€”â€”æŠ˜åŠæ’å…¥æ’åºã€å¸Œå°”æ’åº ç›´æ¥æ’å…¥æ’åº123456789101112131415161718192021/** * ç›´æ¥æ’å…¥æ’åºï¼ŒO(n^2) * iä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œé»˜è®¤iå‰é¢çš„åºåˆ—å·²ç»æ’å¥½åº * å–å‡ºiçš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œä»åå¾€å‰æ¯”è¾ƒï¼Œæ‰¾åˆ°é€‚åˆçš„ä½ç½®å°±æ’å…¥ * * @param a å¾…æ’åºåºåˆ— */public static void insertSort(int[] a) { int length = a.length; for (int i = 0; i < length; i++) { int temp = a[i]; for (int j = i; j > 0; j--) { if (a[j] < a[j-1]) { a[j] = a[j-1]; a[j-1] = temp; } } }} æŠ˜åŠæ’å…¥æ’åº1234567891011121314151617181920212223242526272829303132/** * æŠ˜åŠæ’å…¥æ’åºï¼ŒO(n^2) * å¯¹ç›´æ¥æ’å…¥æ’åºç®—æ³•è¿›è¡Œäº†æ”¹è¿› * ç›´æ¥æ’å…¥ç®—æ³•é‡‡ç”¨éå†ä¸€ä¸ªæœ‰åºåºåˆ—çš„æ–¹å¼æ’å…¥å¾…æ’åºå…ƒç´ ï¼Œå®Œå…¨æ²¡å¿…è¦ * æŠ˜åŠæ’å…¥æ’åºåˆ™ä½¿ç”¨äº†æŠ˜åŠæŸ¥æ‰¾/äºŒåˆ†æŸ¥æ‰¾ * * Arraysç±»çš„binarySearch()æ–¹æ³•ä¾¿æ˜¯æŠ˜åŠæŸ¥æ‰¾çš„å®ç° * * @param a å¾…æ’åºåºåˆ— */public static void binaryInsertSort(int[] a) { int length = a.length; for (int i = 0; i < length; i++) { int temp = a[i]; int low = 0; int high = i-1; while (low = low; j--) { //å…ƒç´ åç§»ï¼Œä¸ºæ’å…¥tempåšå‡†å¤‡ a[j+1] = a[j]; } a[low] = temp; }} å¸Œå°”æ’åº1234567891011121314151617181920212223242526272829303132333435/** * å¸Œå°”æ’åºï¼Œä¹Ÿç§° é€’å‡å¢é‡æ’åºï¼ŒO(n*(logn)^2) * å¯¹äºnä¸ªå…ƒç´ çš„åºåˆ—ï¼Œå‡è®¾å¢é‡ä¸ºincrement * ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ¯éš”incrementå–ä¸€ä¸ªå…ƒç´ ç»„æˆä¸€ä¸ªå­åºåˆ— * å¯¹æ¯ä¸ªå­åºåˆ—è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼Œincrement /= 2 * é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´è‡³incrementä¸º1 * * @param a å¾…æ’åºåºåˆ— */public static void shellSort(int[] a) { int length = a.length; // incrementä¸ºå¢é‡ï¼Œæ¯æ¬¡å‡ä¸ºåŸæ¥çš„ä¸€åŠï¼Œç›´è‡³ä¸º1 for (int increment = length / 2; increment > 0; increment /= 2) { // å…±incrementä¸ªç»„ï¼Œå¯¹æ¯ä¸€ç»„éƒ½æ‰§è¡Œç›´æ¥æ’å…¥æ’åº for (int i = 0; i < increment; i++) { for (int j = i + increment; j < length; j += increment) { // å¦‚æœa[j] < a[j-increment]ï¼Œåˆ™å¯»æ‰¾a[j]ä½ç½®ï¼Œå¹¶å°†åé¢æ•°æ®çš„ä½ç½®éƒ½åç§»ã€‚ if (a[j] < a[j - increment]) { int temp = a[j]; int k = j - increment; while (k >= 0 && a[k] > temp) { a[k + increment] = a[k]; k -= increment; } a[k + increment] = temp; } } } }} æ¡¶æ’åºï¼ˆåŸºæ•°æ’åºï¼‰12345678910111213141516171819202122232425262728293031323334353637/** * åŸºæ•°æ’åºï¼Œä¹Ÿç§°æ¡¶æ’åºï¼ŒO(d(k+n)) * åŸºæœ¬æ€æƒ³ï¼šå°†æ•´æ•°æŒ‰ä½æ•°åˆ‡å‰²æˆä¸åŒçš„æ•°å­—ï¼Œç„¶åæŒ‰æ¯ä¸ªä½æ•°åˆ†åˆ«æ¯”è¾ƒã€‚ * å…·ä½“åšæ³•ï¼šå°†æ‰€æœ‰å¾…æ¯”è¾ƒæ•°å€¼ç»Ÿä¸€ä¸ºåŒæ ·çš„æ•°ä½é•¿åº¦ï¼Œæ•°ä½è¾ƒçŸ­çš„æ•°å‰é¢è¡¥é›¶ã€‚ç„¶åï¼Œä»æœ€ä½ä½å¼€å§‹ï¼Œä¾æ¬¡è¿›è¡Œä¸€æ¬¡æ’åºã€‚è¿™æ ·ä»æœ€ä½ä½æ’åºä¸€ç›´åˆ°æœ€é«˜ä½æ’åºå®Œæˆä»¥å, æ•°åˆ—å°±å˜æˆä¸€ä¸ªæœ‰åºåºåˆ—ã€‚ * * @param a å¾…æ’åºæ•°ç»„ * @param d ä½æ•°ï¼Œå¦‚æœæœ€å¤§æ•°ä¸º9527ï¼Œåˆ™dä¸º10000ï¼Œå¦‚æœä¸º7ï¼Œåˆ™dä¸º10 */public static void radixSort(int[] a,int d) { int n = 1; //ä»£è¡¨ä½æ•°å¯¹åº”çš„æ•°ï¼š1,10,100... int k = 0; //ä¿å­˜æ¯ä¸€ä½æ’åºåçš„ç»“æœç”¨äºä¸‹ä¸€ä½çš„æ’åºè¾“å…¥ int length = a.length; int[][] bucket = new int[10][length]; //æ’åºæ¡¶ç”¨äºä¿å­˜æ¯æ¬¡æ’åºåçš„ç»“æœï¼Œè¿™ä¸€ä½ä¸Šæ’åºç»“æœç›¸åŒçš„æ•°å­—æ”¾åœ¨åŒä¸€ä¸ªæ¡¶é‡Œ int[] order = new int[length]; //ç”¨äºä¿å­˜æ¯ä¸ªæ¡¶é‡Œæœ‰å¤šå°‘ä¸ªæ•°å­— while(n < d) { for(int num : a) { //å°†æ•°ç»„arrayé‡Œçš„æ¯ä¸ªæ•°å­—æ”¾åœ¨ç›¸åº”çš„æ¡¶é‡Œ int digit = (num/n)%10; bucket[digit][order[digit]] = num; order[digit]++; } int i = 0; for( ; i","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yoursite.com/categories/ç®—æ³•/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yoursite.com/tags/ç®—æ³•/"}]},{"title":"Android View çš„å·¥ä½œåŸç†","slug":"Android-View-çš„å·¥ä½œåŸç†","date":"2019-03-01T05:10:14.000Z","updated":"2019-05-01T14:16:44.000Z","comments":true,"path":"Android-View-çš„å·¥ä½œåŸç†/","link":"","permalink":"http://yoursite.com/Android-View-çš„å·¥ä½œåŸç†/","excerpt":"å¼•è¨€åœ¨ Android å¼€å‘ä¸­ï¼ŒView æ‰®æ¼”äº†å¾ˆé‡è¦çš„è§’è‰²ï¼Œæ˜¯ Android åœ¨è§†è§‰ä¸Šçš„å‘ˆç°ã€‚ä¸æ»¡è¶³äºæ—¢æœ‰æ§ä»¶çš„å¼€å‘è€…ï¼Œä¼šè‡ªå®šä¹‰ View å®ç°å„ç§æ•ˆæœã€‚ä½†è‡ªå®šä¹‰å¤æ‚çš„ View å…·æœ‰ä¸€å®šçš„éš¾åº¦ï¼Œéœ€è¦å¼€å‘è€…æŒæ¡ View çš„åº•å±‚å·¥ä½œåŸç†ï¼Œæ¯”å¦‚ View çš„æµ‹é‡ã€å¸ƒå±€å’Œç»˜åˆ¶ç­‰æµç¨‹ã€‚","text":"å¼•è¨€åœ¨ Android å¼€å‘ä¸­ï¼ŒView æ‰®æ¼”äº†å¾ˆé‡è¦çš„è§’è‰²ï¼Œæ˜¯ Android åœ¨è§†è§‰ä¸Šçš„å‘ˆç°ã€‚ä¸æ»¡è¶³äºæ—¢æœ‰æ§ä»¶çš„å¼€å‘è€…ï¼Œä¼šè‡ªå®šä¹‰ View å®ç°å„ç§æ•ˆæœã€‚ä½†è‡ªå®šä¹‰å¤æ‚çš„ View å…·æœ‰ä¸€å®šçš„éš¾åº¦ï¼Œéœ€è¦å¼€å‘è€…æŒæ¡ View çš„åº•å±‚å·¥ä½œåŸç†ï¼Œæ¯”å¦‚ View çš„æµ‹é‡ã€å¸ƒå±€å’Œç»˜åˆ¶ç­‰æµç¨‹ã€‚ æ•´ä½“è¿‡ç¨‹Windowé¦–å…ˆç®€å•è®¤è¯† Windowï¼Œå…¶è¡¨ç¤ºä¸€ä¸ªçª—å£ï¼Œå±äºä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå…·ä½“çš„å®ç°ä¸º PhoneWindowã€‚é€šè¿‡ WindowManager å‘ WindowManagerService å‘èµ·è¯·æ±‚ï¼ŒWMS è´Ÿè´£ Window çš„å…·ä½“ç”Ÿæˆã€‚ å®é™…ä¸Šæ¯ä¸€ä¸ª Window å¯¹åº”ä¸€ä¸ª View å’Œ ViewRootImplï¼Œ å› æ­¤ Window ä¸æ˜¯å®é™…å­˜åœ¨çš„ï¼Œå®ƒé€šè¿‡ ViewRootImpl ä»¥ View çš„å½¢å¼å­˜åœ¨ã€‚ ViewRoot å’Œ DecorViewViewRoot çš„å…·ä½“å®ç°å°±æ˜¯ä¸Šä¸€èŠ‚æ‰€æåŠçš„ ViewRootImplï¼ŒView çš„ä¸‰å¤§æµç¨‹ï¼ˆmeasureã€layoutã€drawï¼‰éƒ½æ˜¯é€šè¿‡å®ƒæ¥å®ç°çš„ã€‚ åœ¨ ActivityThread ä¸­ï¼Œå½“ Activity å¯¹è±¡è¢«åˆ›å»ºåï¼Œä¼šå°†ä¸€ä¸ª DecorView æ·»åŠ åˆ° Windowï¼Œç„¶ååˆ›å»º ViewRootImpl å¯¹è±¡ï¼Œå¹¶å°† DecorView å’Œ ViewRootImpl å»ºç«‹å…³è”ï¼Œè¿™ä¹ŸéªŒè¯äº†ä¸Šä¸€èŠ‚çš„è§‚ç‚¹ã€‚ 12root = new ViewRootImpl(view.getContext(), display);root.setView(view, vparams, panelParentView); View çš„ç»˜åˆ¶æµç¨‹æ˜¯ä» ViewRoot çš„ performTraversals å¼€å§‹çš„ï¼Œç»è¿‡measureï¼ˆæµ‹é‡ View çš„å®½é«˜ï¼‰ã€layoutï¼ˆç¡®å®š View åœ¨çˆ¶å®¹å™¨çš„ä½ç½®ï¼‰ã€drawï¼ˆå°† View ç»˜åˆ¶åœ¨å±å¹•ä¸Šï¼‰ä¸‰ä¸ªè¿‡ç¨‹ï¼Œå‘ˆç°å‡ºä¸€ä¸ª Viewã€‚ å¦‚å›¾æ‰€ç¤ºï¼ŒperformTraversalsä¼šä¾æ¬¡è°ƒç”¨performMeasureã€performLayoutã€performDrawï¼Œç„¶åè¿™ä¸‰ä¸ªæ–¹æ³•åˆ†åˆ«å®Œæˆé¡¶çº§ View çš„ä¸‰å¤§æµç¨‹ã€‚è€Œåï¼Œmeasureåˆä¼šè°ƒç”¨onMeasureï¼Œåœ¨å…¶ä¸­å¯¹æ‰€æœ‰å­å…ƒç´ è¿›è¡Œ measure è¿‡ç¨‹ï¼Œæ­¤æ—¶ measure æµç¨‹å°±ä»çˆ¶å®¹å™¨ä¼ é€’åˆ°å­å…ƒç´ äº†ï¼Œæ¥ç€å­å…ƒç´ é‡å¤ä¸Šè¿°è¿‡ç¨‹ã€‚å¦‚æ­¤å®Œæˆæ•´ä¸ª View æ ‘çš„éå†ã€‚ measure è¿‡ç¨‹å†³å®šäº† View çš„å®½é«˜ï¼Œå¯ä»¥é€šè¿‡getMeasuredWidthå’ŒgetMeasuredHeightè·å¾— View æµ‹é‡åçš„å®½é«˜ï¼Œåœ¨å‡ ä¹æ‰€æœ‰æƒ…å†µä¸‹éƒ½å¯ä»¥å¾—åˆ° View æœ€ç»ˆçš„æ•°å€¼ã€‚ layout è¿‡ç¨‹å†³å®šäº† View çš„å››ä¸ªé¡¶ç‚¹çš„åæ ‡å’Œå®é™…çš„ View çš„å®½é«˜ï¼Œå¯ä»¥é€šè¿‡getTopã€getBottomã€getLeftã€getRightæ‹¿åˆ°å››ä¸ªé¡¶ç‚¹çš„ä½ç½®ï¼Œé€šè¿‡getWidthã€getHeightè·å¾— View çš„æœ€ç»ˆå®½é«˜ã€‚åªæœ‰ draw è¿‡ç¨‹å®Œæˆä¹‹åæ‰èƒ½å‘ˆç° Viewã€‚ ç”±ä¸Šå›¾æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œä¸€èˆ¬ DecorView ä¼šåŒ…å«ä¸€ä¸ª LinearLayoutï¼Œå…¶ä¸­ä¸Šé¢æ˜¯æ ‡é¢˜æ ï¼Œä¸‹é¢æ˜¯å†…å®¹æ ã€‚åœ¨åˆ›å»º Activity çš„æ—¶å€™éœ€è¦setContentViewè€Œä¸æ˜¯setViewçš„åŸå› ä¾¿æ˜¯å¦‚æ­¤ã€‚æˆ‘ä»¬çš„å¸ƒå±€åŠ åˆ°äº† id ä¸ºandroid.R.id.contentçš„ FrameLayout ä¸­ã€‚ 12345//å¾—åˆ° contentViewGroup content = (ViewGroup) findViewById(android.R.id.content)ï¼›//å¾—åˆ°å¼€å‘è€…è®¾ç½®çš„ ViewView view = content.getChildAt(0); å…·ä½“æµç¨‹MeasureSpecâ€œæµ‹é‡è§„æ ¼â€ï¼Œæ˜¯ View æµ‹é‡è¿‡ç¨‹ä¸­éå¸¸é‡è¦çš„å‚æ•°ã€‚measure æ—¶ç³»ç»Ÿä¼šå°† View çš„ LayoutParams æ ¹æ®çˆ¶å®¹å™¨æ–½åŠ çš„è§„åˆ™è½¬æ¢æˆå¯¹åº”çš„ MeasureSpecï¼Œç„¶åå†æ ¹æ® è¯¥ MeasureSpec æµ‹é‡å‡º View çš„å®½é«˜ã€‚ MeasureSpec ä»£è¡¨ä¸€ä¸ª32ä½çš„ int å€¼ï¼Œå…¶ä¸­é«˜2ä½ä»£è¡¨ SpecModeï¼ˆæµ‹é‡æ¨¡å¼ï¼‰ï¼Œä½30ä½ä»£è¡¨ SpecSizeï¼ˆæŸç§æµ‹é‡æ¨¡å¼ä¸‹çš„è§„æ ¼å¤§å°ï¼‰ã€‚å°†ä¸¤ä¸ªå‚æ•°æ‰“åŒ…æˆä¸€ä¸ª int å€¼çš„åŸå› æ˜¯é¿å…è¿‡å¤šçš„å¯¹è±¡å†…å­˜åˆ†é…ã€‚ SpecMode æœ‰ä¸‰ç±» SpecMode å«ä¹‰ UNSPECIFIED çˆ¶å®¹å™¨ä¸é™åˆ¶ Viewï¼Œä¸€èˆ¬ç”¨äºç³»ç»Ÿå†…éƒ¨ EXACTLY çˆ¶å®¹å™¨å·²æ£€æµ‹ VIew çš„ç²¾ç¡®å¤§å°ï¼Œå¯¹åº”å‚æ•°ä¸ºmatch_parentå’Œå…·ä½“çš„æ•°å€¼ AT_MOST çˆ¶å®¹å™¨æŒ‡å®šäº† View çš„æœ€å¤§å€¼ï¼Œå…·ä½“å¤§å°ç”± View å†³å®šï¼Œå¯¹åº”å‚æ•°ä¸ºwrap_content MeasureSpec å’Œ LayoutParamså¯¹äº DecorViewï¼Œå…¶ MeasureSpec ç”±çª—å£å°ºå¯¸å’Œå…¶è‡ªèº« LayoutParams å†³å®šï¼Œå¯¹äºæ™®é€š Viewï¼Œå…¶ MeasureSpec ç”±çˆ¶å®¹å™¨çš„ MeasureSpec å’Œ è‡ªèº«çš„LayoutParams å…±åŒå†³å®šã€‚ä¸€æ—¦ MeasureSpec ç¡®å®šï¼ŒonMeasure ä¸­å°±å¯ä»¥ç¡®å®š View çš„æµ‹é‡å®½é«˜ã€‚ ViewRootImpl çš„æºç åœ°å€ï¼šViewRootImpl.javaã€‚æŸ¥é˜…æºç ï¼Œå¾—åˆ° DecorView çš„æµ‹é‡è§„åˆ™å¦‚ä¸‹ LayoutParams.MATCH_PARENTï¼šç²¾ç¡®æ¨¡å¼ï¼Œå¤§å°ä¸ºçª—å£å¤§å° LayoutParams.WRAP_CONTENTï¼šæœ€å¤§æ¨¡å¼ï¼Œå¤§å°ä¸å®šï¼Œä½†ä¸èƒ½è¶…è¿‡çª—å£ å›ºå®šå¤§å°ï¼šç²¾ç¡®æ¨¡å¼ï¼Œå¤§å°ä¸º LayoutParams æŒ‡å®šçš„å¤§å° ViewGroup çš„æºç åœ°å€ï¼šViewGroup.javaã€‚æŸ¥çœ‹ ViewGroup çš„measureChildWithMarginsæ–¹æ³• 123456789101112protected void measureChildWithMargins(View child, int parentWidthMeasureSpec, int widthUsed, int parentHeightMeasureSpec, int heightUsed) { final MarginLayoutParams lp = (MarginLayoutParams) child.getLayoutParams(); final int childWidthMeasureSpec = getChildMeasureSpec(parentWidthMeasureSpec, mPaddingLeft + mPaddingRight + lp.leftMargin + lp.rightMargin + widthUsed, lp.width); final int childHeightMeasureSpec = getChildMeasureSpec(parentHeightMeasureSpec, mPaddingTop + mPaddingBottom + lp.topMargin + lp.bottomMargin + heightUsed, lp.height); child.measure(childWidthMeasureSpec, childHeightMeasureSpec); } å¯ä»¥çœ‹åˆ°åœ¨è°ƒç”¨å­å…ƒç´ çš„measureä¹‹å‰ï¼Œä¼šå…ˆå¾—åˆ°å­å…ƒç´ çš„ MeasureSpecï¼Œå¾ˆæ˜¾ç„¶å…¶å’Œçˆ¶å®¹å™¨çš„ MeasureSpec ä»¥åŠå­å…ƒç´ è‡ªèº«çš„ LayoutParams åŒ…æ‹¬ marginã€padding å‚æ•°æœ‰å…³ã€‚å…·ä½“çš„é€»è¾‘åœ¨ ViewGroup ä¸­çš„ getChildMeasureSpec ä¸­å®ç°ã€‚ getChildMeasureSpecæ–¹æ³•æ¸…æ¥šå±•ç¤ºäº† æ™®é€š View çš„ MeasureSpec çš„åˆ›å»ºè§„åˆ™ï¼Œä¸‹è¡¨æ˜¯è¯¥æ–¹æ³•çš„ç›´è§‚å±•ç¤ºï¼ˆè¡¨ä¸­ parentSize æŒ‡çˆ¶å®¹å™¨ä¸­ç›®å‰å¯ä½¿ç”¨çš„å¤§å°ï¼‰ ç”±æ­¤å¯ä»¥çœ‹å‡º å½“ View é‡‡ç”¨å›ºå®šå®½é«˜æ—¶ï¼ŒView çš„ MeasureSpec ä¸çˆ¶å®¹å™¨æ— å…³ï¼Œä¸ºç²¾ç¡®æ¨¡å¼ã€å¤§å°ä¸º LayoutParams è®¾å®šçš„å€¼ å½“ View çš„å®½é«˜ä¸ºmatch_parentæ—¶ï¼Œå¦‚æœçˆ¶å®¹å™¨ä¸ºç²¾ç¡®æ¨¡å¼/æœ€å¤§æ¨¡å¼ï¼Œåˆ™å…¶ä¹Ÿä¸ºç²¾ç¡®æ¨¡å¼/æœ€å¤§æ¨¡å¼ï¼Œä¸”å¤§å°ä¸ºçˆ¶å®¹å™¨çš„å‰©ä½™ç©ºé—´ å½“ View çš„å®½é«˜ä¸ºwrap_contentæ—¶ï¼ŒView çš„æ¨¡å¼æ€»æ˜¯æœ€å¤§åŒ–æ¨¡å¼ï¼Œä¸”å¤§å°ä¸è¶…è¿‡çˆ¶å®¹å™¨çš„å‰©ä½™ç©ºé—´ UNSPECIFIED æ¨¡å¼ä¸»è¦ç”¨äºç³»ç»Ÿå†…éƒ¨å¤šæ¬¡ Measure çš„æƒ…å½¢ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ— éœ€å…³æ³¨ measure è¿‡ç¨‹Viewå¯¹äº Viewï¼Œmeasure å®Œæˆå…¶è‡ªèº«çš„æµ‹é‡è¿‡ç¨‹ï¼›å¯¹äº ViewGroupï¼Œé™¤äº†å®Œæˆè‡ªå·±çš„æµ‹é‡è¿‡ç¨‹ï¼Œè¿˜ä¼šéå†è°ƒç”¨æ‰€æœ‰å­å…ƒç´ çš„measureæ–¹æ³•ï¼Œå„å­å…ƒç´ å†é€’å½’æ‰§è¡Œè¿™ä¸€è¿‡ç¨‹ã€‚measure æ˜¯ä¸€ä¸ªfinalæ–¹æ³•ï¼ˆView.java ç¬¬ 23267 è¡Œï¼‰ï¼Œè¿™æ„å‘³ç€å­ç±»ä¸èƒ½é‡å†™è¯¥æ–¹æ³•ã€‚åœ¨measureä¸­ä¼šè°ƒç”¨ View çš„onMeasureï¼Œæ‰€ä»¥å¼€å‘è€…åªéœ€è¦é‡å†™è¯¥æ–¹æ³•å³å¯ã€‚ 1234protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) { setMeasuredDimension(getDefaultSize(getSuggestedMinimumWidth(),widthMeasureSpec), getDefaultSize(getSuggestedMinimumHeight(),heightMeasureSpec));} setMeasuredDimensionä¼šè®¾ç½® View å®½é«˜çš„æµ‹é‡å€¼ï¼ŒgetDefaultSizeè¿”å› View æµ‹é‡åçš„å¤§å°ã€‚ å¯¹äºgetSuggestedMinimumWidthï¼Œå¦‚æœ View æ²¡æœ‰è®¾ç½®èƒŒæ™¯ï¼Œé‚£ä¹ˆå®½åº¦ä¸ºmMinWidthï¼Œå…¶å¯¹åº”android:minWidthå±æ€§ï¼Œå¦‚æœä¸æŒ‡å®šå±æ€§ï¼Œåˆ™mMinWidthé»˜è®¤ä¸º0ï¼›å¦‚æœ View è®¾ç½®äº†èƒŒæ™¯ï¼Œåˆ™ View çš„å®½åº¦ä¸ºmax(mMinWidth, mBackground.getMinimumWidth())ã€‚é‚£ä¹ˆmBackground.getMinimumWidth()æ‰€ä¸ºä½•ç‰©ï¼Ÿ è§‚å¯Ÿ Drawable çš„getMinimumWidthæ–¹æ³•ï¼ˆDrawable.java ç¬¬ 798 è¡Œï¼‰ 1234public int getMinimumWidth() { final int intrinsicWidth = getIntrinsicWidth(); return intrinsicWidth > 0 ? intrinsicWidth : 0;} å¯ä»¥å‘ç°è¯¥æ–¹æ³•è¿”å› Drawable çš„åŸå§‹å®½åº¦ï¼ˆå¦‚æœå­˜åœ¨ï¼Œå¦åˆ™è¿”å›0 â€”â€” æ¯”å¦‚ ShapeDrawable å°±æ— åŸå§‹å®½é«˜ï¼‰ã€‚ ç›´æ¥ç»§æ‰¿ View çš„è‡ªå®šä¹‰æ§ä»¶éœ€è¦é‡å†™onMeasureæ–¹æ³•å¹¶è®¾ç½®wrap_contentæ—¶çš„è‡ªèº«å¤§å°ï¼Œå¦åˆ™åœ¨å¸ƒå±€ä¸­ä½¿ç”¨wrap_contentå°±ç›¸å½“äºä½¿ç”¨match_parentã€‚åŸå› åœ¨äºï¼Œç”±ä¸Šé¢çš„è¡¨æ ¼æˆ‘ä»¬çŸ¥é“ï¼Œå½“ä½¿ç”¨wrap_contentæ—¶ï¼ŒView çš„ SpecMode ä¸º AT_MOSTï¼Œæ­¤æ—¶å®½é«˜ç­‰äº SpecSizeï¼ŒSpecSize æ­¤æ—¶åˆç­‰äº parentSizeï¼Œæ•ˆæœè·Ÿä½¿ç”¨match_parentæ˜¯ä¸€æ ·çš„ã€‚ è§£å†³è¯¥é—®é¢˜çš„æ–¹æ³•å¾ˆç®€å•ï¼Œç»™ View æŒ‡å®šä¸€ä¸ªé»˜è®¤çš„å†…éƒ¨å®½é«˜ï¼ˆmWidth å’Œ mHeightï¼‰ï¼Œå¹¶åœ¨wrap_contentæ—¶è®¾ç½®æ­¤å®½é«˜å³å¯ 1234567891011121314151617protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) { super.onMeasure(int widthMeasureSpec, int heightMeasureSpec); int widthSpecMode = MeasureSpec.getMode(widthMeasureSpec); int widthSpecSize = MeasureSpec.getSize(widthMeasureSpec); int heightSpecMode = MeasureSpec.getMode(heightMeasureSpec); int heightSpecSize = MeasureSpec.getSize(heightMeasureSpec); if (widthSpecMode == MeasureSpec.AT_MOST && heightSpecMode == MeasureSpec.AT_MOST) { setMeasuredDimension(mWidth, mHeight); } else if (widthSpecMode == MeasureSpec.AT_MOST) { setMeasuredDimension(mWidth, heightSpecSize); } else if (heightSpecMode == MeasureSpec.AT_MOST) { setMeasuredDimension(widthSpecSize, mHeight); }} ViewGroupå¯¹äº ViewGroup æ¥è¯´ï¼Œå…¶å±äº View çš„å­ç±»ï¼Œä½†åŒæ—¶ä¹Ÿæ˜¯æŠ½è±¡çš„ï¼Œå®ƒæ²¡æœ‰é‡å†™ View çš„onMeasureï¼Œè€Œæ˜¯æä¾›äº†measureChildrençš„æ–¹æ³•ç”¨äºæµ‹é‡å­å…ƒç´  12345678910protected void measureChildren(int widthMeasureSpec, int heightMeasureSpec) { final int size = mChildrenCount; final View[] children = mChildren; for (int i = 0; i < size; ++i) { final View child = children[i]; if ((child.mViewFlags & VISIBILITY_MASK) != GONE) { measureChild(child, widthMeasureSpec, heightMeasureSpec); } }} å…¶ä¸­è°ƒç”¨äº†measureChild 123456789protected void measureChild(View child, int parentWidthMeasureSpec, int parentHeightMeasureSpec) { final LayoutParams lp = child.getLayoutParams(); final int childWidthMeasureSpec = getChildMeasureSpec(parentWidthMeasureSpec, mPaddingLeft + mPaddingRight, lp.width); final int childHeightMeasureSpec = getChildMeasureSpec(parentHeightMeasureSpec, mPaddingTop + mPaddingBottom, lp.height); child.measure(childWidthMeasureSpec, childHeightMeasureSpec);} æ˜¾ç„¶è¯¥æ–¹æ³•çš„æ€æƒ³æ˜¯å–å‡ºå­å…ƒç´ çš„ LayoutParams ç„¶åé€šè¿‡getChildMeasureSpecï¼ˆå¦‚ MeasureSpec å°èŠ‚çš„åˆ†æï¼‰åˆ›å»ºå­å…ƒç´ çš„ MeasureSpecï¼Œæ¥ç€å°† MeasureSpec ä¼ é€’ç»™ View çš„measureæ–¹æ³•è¿›è¡Œæµ‹é‡ã€‚ ViewGroup å¹¶æ²¡æœ‰æµ‹é‡çš„å…·ä½“è¿‡ç¨‹ï¼Œè€Œæ˜¯äº¤ç»™å…¶å­ç±»å®ç°ï¼Œæ¯”å¦‚ LinearLayoutã€RelativeLayout ç­‰ã€‚ å®½é«˜çš„è·å–ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œmeasure å®Œæˆåå³å¯é€šè¿‡getMeasuredWidth/heightè·å¾— View çš„æµ‹é‡å®½é«˜ï¼Œä½†æ˜¯æç«¯æƒ…å†µä¸‹ç³»ç»Ÿå¯èƒ½éœ€è¦å¤šæ¬¡ measure æ‰èƒ½ç¡®å®šæœ€ç»ˆçš„å®½é«˜ï¼Œæ‰€ä»¥æœ€å¥½æ˜¯åœ¨onLayoutä¸­è·å–å®½é«˜ï¼Œè€Œä¸æ˜¯åœ¨onMeasureä¸­ã€‚ è€ƒè™‘ View å¤–éƒ¨ï¼Œæ¯”å¦‚å½“æˆ‘ä»¬åœ¨ Activity çš„onCreateæˆ–è€…onResumeä¸­è·å– View çš„å®½é«˜æ—¶ï¼Œä¼šå‘ç°ç»“æœæ˜¯ä¸æ­£ç¡®çš„ï¼Œè¿™æ˜¯å› ä¸º View çš„ measure è¿‡ç¨‹å’Œ Activity çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸æ˜¯åŒæ­¥çš„ï¼Œå› æ­¤æ— æ³•ä¿è¯åœ¨ Activity æ‰§è¡ŒonCreateã€onResumeæ—¶æŸä¸ª View å·²ç»æµ‹é‡å®Œæ¯•ã€‚æœ‰å››ç§æ–¹æ³•è§£å†³è¯¥é—®é¢˜ï¼š Activity/View.onWindowFocusChangedï¼Œæ­¤æ—¶ View å·²ç»åˆå§‹åŒ–å®Œæ¯•ã€‚æ³¨æ„è¯¥æ–¹æ³•å¯èƒ½ä¼šè¢«è°ƒç”¨å¤šæ¬¡ï¼Œæ¯”å¦‚æ¯æ¬¡ Activity çš„çª—å£è·å¾—/å¤±å»ç„¦ç‚¹ 1234567public void onWindowFocusChanged(boolean hasFocus) { super.onWindowFocusChanged(hasFocus); if (hasFocus) { int width = view.getMeasuredWidth(); int height = view.getMeasuredHeigth(); }} view.post(Runnable runnable)ï¼Œé€šè¿‡ post å°†ä¸€ä¸ª Runnable æŠ•é€’åˆ°æ¶ˆæ¯é˜Ÿåˆ—å°¾éƒ¨ï¼Œå½“ Looper è°ƒç”¨æ­¤ Runnable æ—¶ï¼ŒView å·²ç»è¢«åˆå§‹åŒ– 1234view.post(() -> { int width = view.getMeasuredWidth(); int height = view.getMeasuredHeigth();}) ViewTreeObserverï¼Œè¯¥ç±»æ‹¥æœ‰ä¸€ç³»åˆ—å›è°ƒæ–¹æ³•ï¼Œæ¯”å¦‚ä½¿ç”¨ OnGlobalLayoutListener æ¥å£ç›‘å¬ View æ ‘çš„çŠ¶æ€ï¼ŒåŒæ ·æ¥å£æ–¹æ³•ä¼šè¢«è°ƒç”¨å¤šæ¬¡ 12345ViewTreeObserver observer = view.getViewTreeObserver();observer.addOnGlobalLayoutListener(() -> { int width = view.getMeasuredWidth(); int height = view.getMeasuredHeigth();}) view.measure(int widthMeasureSpec, int heightMeasureSpec)ï¼Œæ‰‹åŠ¨ measureï¼Œè¾ƒä¸ºå¤æ‚ï¼Œä¸å†èµ˜è¿°ã€‚ layout è¿‡ç¨‹View / ViewGroup ä½¿ç”¨layoutè¿‡ç¨‹ç¡®å®šè‡ªèº«ä½ç½®ï¼Œç„¶ååœ¨onLayoutä¸­éå†æ‰€æœ‰çš„å­å…ƒç´ å¹¶è°ƒç”¨å…¶layoutæ–¹æ³•ï¼Œé‡å¤ä¸Šè¿°è¿‡ç¨‹ã€‚ View ä¸­çš„layoutæ–¹æ³• 123456789101112131415161718192021222324252627public void layout(int l, int t, int r, int b) { ...... int oldL = mLeft; int oldT = mTop; int oldB = mBottom; int oldR = mRight; boolean changed = isLayoutModeOptical(mParent) ? setOpticalFrame(l, t, r, b) : setFrame(l, t, r, b); if (changed || (mPrivateFlags & PFLAG_LAYOUT_REQUIRED) == PFLAG_LAYOUT_REQUIRED) { onLayout(changed, l, t, r, b); ...... mPrivateFlags &= ~PFLAG_LAYOUT_REQUIRED; ListenerInfo li = mListenerInfo; if (li != null && li.mOnLayoutChangeListeners != null) { ArrayList listenersCopy = (ArrayList)li.mOnLayoutChangeListeners.clone(); int numListeners = listenersCopy.size(); for (int i = 0; i < numListeners; ++i) { listenersCopy.get(i).onLayoutChange(this, l, t, r, b, oldL, oldT, oldR, oldB); } } } ......} é¦–å…ˆé€šè¿‡setFrameè®¾å®š View çš„å››ä¸ªé¡¶ç‚¹ï¼ˆmLeftã€mTopã€mBottomã€mRightï¼‰çš„å€¼ï¼Œä»¥æ­¤ç¡®å®š View åœ¨çˆ¶å®¹å™¨ä¸­çš„ä½ç½®ã€‚æ¥ç€è°ƒç”¨onLayoutç¡®å®šå­å…ƒç´ çš„ä½ç½®ï¼Œå’ŒonMeasureç±»ä¼¼ï¼ŒView / ViewGroup éƒ½æ²¡æœ‰æä¾›è¯¥æ–¹æ³•çš„å®ç°ï¼Œè€Œæ˜¯äº¤ç»™å…·ä½“çš„å¸ƒå±€ã€‚ åœ¨ ViewRoot å’Œ DecorView å°èŠ‚ï¼ŒæåŠäº†åœ¨ View çš„ layout ä¹‹åé€šè¿‡getWidthã€getHeightè·å¾— View çš„â€œæœ€ç»ˆå®½é«˜â€ï¼Œé‚£ä¹ˆgetMeasuredWidthå’ŒgetWidthçš„åŒºåˆ«åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ 1234567public final int getWidth() { return mRight - mLeft;}public final int getHeight() { return mBottom - mTop;} ä»ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºï¼ŒgetWidthçš„è¿”å›å€¼åˆšå¥½å°±æ˜¯ View çš„æµ‹é‡å®½åº¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒView çš„æµ‹é‡å®½é«˜ç­‰äºæœ€ç»ˆå®½é«˜ï¼Œåªä¸è¿‡æµ‹é‡å®½é«˜å½¢æˆä¸ measure è¿‡ç¨‹ï¼Œè€Œæœ€ç»ˆå®½é«˜å½¢æˆä¸ layout è¿‡ç¨‹ â€”â€” èµ‹å€¼æ—¶æœºä¸åŒã€‚ä½†æ˜¯å¦‚æœé‡å†™ View çš„layoutæ–¹æ³•ï¼Œæ”¹å˜äº†superçš„å‚æ•°å€¼ï¼Œæ¯”å¦‚ 123public void layout(int l, int t, int r, int b) { super.layout(l, t, r + 100, b + 100);} å°±ä¼šå¯¼è‡´ View çš„æœ€ç»ˆå®½é«˜æ€»æ˜¯æ¯”æµ‹é‡å®½é«˜å¤§ 100pxã€‚ draw è¿‡ç¨‹å°† View ç»˜åˆ¶åˆ°å±å¹•ä¸Šï¼Œå…·ä½“æ­¥éª¤ ç»˜åˆ¶èƒŒæ™¯ background.draw(canvas) ç»˜åˆ¶è‡ªèº« onDraw ç»˜åˆ¶å­å…ƒç´  dispatchDraw ç»˜åˆ¶è£…é¥° onDrawScrollBars å…¶ä»–Android æä¾›äº†ä¸€äº› API ä¾›å¼€å‘è°ƒç”¨ï¼Œå®ç°å¯¹ View ç»˜åˆ¶è¿‡ç¨‹çš„æ“çºµ requestLayout è°ƒç”¨æ­¤æ–¹æ³•ä¼šå¯¼è‡´ View æ ‘è°ƒç”¨ layout å’Œ measure è¿‡ç¨‹ï¼Œä½†ä¸ä¼šè§¦å‘ draw æµç¨‹ invalidate è¯·æ±‚é‡ç»˜ View æ ‘ï¼Œå³ draw è¿‡ç¨‹ã€‚åœ¨å­çº¿ç¨‹ä¸­å¯ä»¥é€šè¿‡postInvalidateå®ç° å½“å¼€å‘è€…è°ƒç”¨ View çš„setVisibilityæ–¹æ³•å®ç° VISIBLE / INVISIBLE -> GONE æ—¶ï¼Œç›¸å½“äºé—´æ¥è°ƒç”¨ requestLayout å’Œ invalidateã€‚ å½“å¼€å‘è€…è°ƒç”¨ View çš„setVisibilityæ–¹æ³•å®ç° INVISIBLE -> VISIBLE æ—¶ï¼Œç›¸å½“äºé—´æ¥è°ƒç”¨ invalidateã€‚ æœ¬æ–‡ä¸»è¦å‚è€ƒäº†ã€ŠAndroid å¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹â€”â€”ä»»ç‰åˆš è‘— document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Android","slug":"Android","permalink":"http://yoursite.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://yoursite.com/tags/Android/"},{"name":"View","slug":"View","permalink":"http://yoursite.com/tags/View/"}]},{"title":"Android IPC æœºåˆ¶è¯¦è§£","slug":"Android-IPC-æœºåˆ¶è¯¦è§£","date":"2019-02-23T11:12:35.000Z","updated":"2019-03-23T04:53:10.000Z","comments":true,"path":"Android-IPC-æœºåˆ¶è¯¦è§£/","link":"","permalink":"http://yoursite.com/Android-IPC-æœºåˆ¶è¯¦è§£/","excerpt":"å¼•è¨€IPCï¼ˆInter-Process Communicationï¼‰ï¼Œè¿›ç¨‹é—´é€šä¿¡æˆ–è€…è·¨è¿›ç¨‹é€šä¿¡ï¼ŒæŒ‡ä¸åŒçš„è¿›ç¨‹ä¹‹é—´è¿›è¡Œæ•°æ®äº¤æ¢çš„è¿‡ç¨‹ã€‚æŒ‰ç…§æ“ä½œç³»ç»Ÿçš„æè¿°ï¼Œè¿›ç¨‹æ˜¯æŒ‡ä¸€ä¸ªæ‰§è¡Œå•å…ƒï¼Œåœ¨ PC æˆ–ç§»åŠ¨è®¾å¤‡ä¸ŠæŒ‡ä¸€ä¸ªç¨‹åº/åº”ç”¨ã€‚å®¹æ˜“æ··æ·†çš„å¦ä¸€ä¸ªæ¦‚å¿µæ˜¯çº¿ç¨‹ï¼Œçº¿ç¨‹æ˜¯ CPU è°ƒåº¦çš„æœ€å°å•å…ƒï¼Œå±äºæœ‰é™çš„ç³»ç»Ÿèµ„æºã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ã€‚","text":"å¼•è¨€IPCï¼ˆInter-Process Communicationï¼‰ï¼Œè¿›ç¨‹é—´é€šä¿¡æˆ–è€…è·¨è¿›ç¨‹é€šä¿¡ï¼ŒæŒ‡ä¸åŒçš„è¿›ç¨‹ä¹‹é—´è¿›è¡Œæ•°æ®äº¤æ¢çš„è¿‡ç¨‹ã€‚æŒ‰ç…§æ“ä½œç³»ç»Ÿçš„æè¿°ï¼Œè¿›ç¨‹æ˜¯æŒ‡ä¸€ä¸ªæ‰§è¡Œå•å…ƒï¼Œåœ¨ PC æˆ–ç§»åŠ¨è®¾å¤‡ä¸ŠæŒ‡ä¸€ä¸ªç¨‹åº/åº”ç”¨ã€‚å®¹æ˜“æ··æ·†çš„å¦ä¸€ä¸ªæ¦‚å¿µæ˜¯çº¿ç¨‹ï¼Œçº¿ç¨‹æ˜¯ CPU è°ƒåº¦çš„æœ€å°å•å…ƒï¼Œå±äºæœ‰é™çš„ç³»ç»Ÿèµ„æºã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ã€‚ åº”ç”¨åœºæ™¯åªæœ‰åœ¨å¤šè¿›ç¨‹åœºæ™¯ä¸‹æ‰éœ€è¦ IPC æœºåˆ¶ã€‚ å¤šè¿›ç¨‹çš„æƒ…å†µåˆ†ä¸ºä¸¤ç§ã€‚ç¬¬ä¸€ç§æƒ…å†µæ˜¯åº”ç”¨å› ä¸ºæŸäº›åŸå› éœ€è¦é‡‡ç”¨å¤šè¿›ç¨‹æ¨¡å¼æ¥å®ç°ï¼Œæ¯”å¦‚ä¸€äº›æ¨¡å—ç”±äºç‰¹æ®ŠåŸå› éœ€è¦è¿è¡Œåœ¨å•ç‹¬çš„è¿›ç¨‹ä¸­ã€ä¸ºäº†åŠ å¤§å¯ä½¿ç”¨çš„å†…å­˜éœ€è¦å¤šè¿›ç¨‹æ¥è·å–å¤šä»½å†…å­˜ç©ºé—´ï¼ˆAndroid å¯¹å•ä¸ªåº”ç”¨å¯ä½¿ç”¨çš„å†…å­˜åšäº†é™åˆ¶ï¼Œæ—©æœŸä¸º16MBï¼‰ï¼›ç¬¬äºŒç§æƒ…å†µåˆ™æ˜¯å½“å‰åº”ç”¨éœ€è¦å‘å…¶ä»–åº”ç”¨è·å–æ•°æ®ï¼Œæ¯”å¦‚ä½¿ç”¨ ContentProvider å»æŸ¥è¯¢æ•°æ®ã€‚ ä½¿ç”¨å¤šè¿›ç¨‹ä¼šé€ æˆå¦‚ä¸‹çš„é—®é¢˜ï¼š é™æ€æˆå‘˜å’Œå•ä¾‹æ¨¡å¼å®Œå…¨å¤±æ•ˆ çº¿ç¨‹åŒæ­¥æœºåˆ¶å®Œå…¨å¤±æ•ˆ SharedPreferences å¯é æ€§ä¸‹é™ Application ä¼šå¤šæ¬¡åˆ›å»º å¯¹äºç¬¬å››ç‚¹ï¼Œå½“ä¸€ä¸ªç»„ä»¶è·‘åœ¨ä¸€ä¸ªæ–°çš„è¿›ç¨‹ä¸­ï¼Œç”±äºç³»ç»Ÿè¦åœ¨åˆ›å»ºæ–°çš„çº¿ç¨‹åŒæ—¶åˆ†é…è™šæ‹Ÿæœºï¼Œè¿™ä¸€è¿‡ç¨‹ç›¸å½“äºå¯åŠ¨ä¸€ä¸ªåº”ç”¨ï¼Œæ‰€ä»¥ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Applicationã€‚ åŸºç¡€æ¦‚å¿µSerializable æ¥å£Java æä¾›çš„ä¸€ä¸ªåºåˆ—åŒ–æ¥å£ï¼Œæ˜¯ä¸€ä¸ªç©ºæ¥å£ï¼Œä¸ºå¯¹è±¡æä¾›æ ‡å‡†çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œã€‚ä½¿ç”¨ Serializable å®ç°åºåˆ—åŒ–å¾ˆç®€å•ï¼Œåªéœ€è¦å®ç°æ¥å£ï¼Œæä¾›ä¸€ä¸ªseriaVersionUIDå³å¯ï¼ˆä¸æä¾›ä¼šå¯¹ååºåˆ—åŒ–è¿‡ç¨‹äº§ç”Ÿå½±å“ï¼‰ï¼Œç³»ç»Ÿä¾¿ä¼šè‡ªåŠ¨å®Œæˆé»˜è®¤çš„åºåˆ—åŒ–è¿‡ç¨‹ã€‚ 1234567891011121314151617public class User implements Serializable { private static final long seriaVersionUID = 519067123721295773L ...}//åºåˆ—åŒ–è¿‡ç¨‹User user = new User(\"name\", 18);ObjectOutputStream out = new ObjectOutputStream( new FileOutputStream(\"file.txt\"));out.writeObject(user);out.close//ååºåˆ—åŒ–è¿‡ç¨‹ObjectInputStream in = new ObjectInputStream( new FileInputStream(\"file.txt\"));User user = (User) in.readObject();in.close ä½¿ç”¨ Serializable å®ç°åºåˆ—åŒ–éœ€è¦æ³¨æ„ï¼Œstatic å’Œ transient å…³é”®å­—ä¿®é¥°çš„å˜é‡ä¸ä¼šè¢«åºåˆ—åŒ–ã€‚ä½¿ç”¨ static ä¿®é¥°çš„å˜é‡çš„å€¼å­˜å‚¨åœ¨ JVM ä¸­ã€‚ Java è¿˜æä¾›äº†å¦ä¸€ç§åºåˆ—åŒ–çš„æ–¹å¼ï¼šExternalizableæ¥å£ï¼Œè¯¥æ¥å£ç»§æ‰¿è‡ª Serializable è€Œä¸”ä¼˜å…ˆçº§æ›´é«˜ï¼Œä½¿ç”¨ä¹‹ååºåˆ—åŒ–çš„ç»†èŠ‚éœ€è¦å¼€å‘äººå‘˜è‡ªå·±å®ç°ï¼ŒåŒæ—¶ transient å…³é”®å­—å°†å¤±å»ä½œç”¨ã€‚ Parcelable æ¥å£Android å®˜æ–¹æä¾›çš„åºåˆ—åŒ–æ¥å£ï¼Œå®ç°æ¥å£ä¹‹åï¼Œç±»çš„å¯¹è±¡å³å¯è¿›è¡Œä¸€ä¸ªâ€œä»å¯¹è±¡å­˜å‚¨ä¸º Parcel ï¼Œ ä» Parcel è¯»å–ä¸ºå¯¹è±¡â€çš„è¯»å†™è¿‡ç¨‹ã€‚Parcel åŒ…è£…äº†å¯åºåˆ—åŒ–çš„æ•°æ®ï¼Œå¯ä»¥åœ¨Binderä¸­è‡ªç”±ä¼ è¾“ã€‚ å…¶ä¸ Serializable çš„åŒºåˆ«åœ¨äº Parcelable ä½¿ç”¨æ›´å¤æ‚ï¼Œåè€…å¦‚ä¸Šé¢çš„ä»£ç ï¼Œè¶³å¤Ÿç®€æ´ã€‚ ä½¿ç”¨å†…å­˜æ—¶ï¼ŒParcelable æ¯” Serializable æ€§èƒ½é«˜ï¼Œå› ä¸º Serializable åºåˆ—åŒ–çš„æ—¶å€™ä¼šäº§ç”Ÿå¤§é‡ä¸´æ—¶å˜é‡ï¼Œå¼•èµ·é¢‘ç¹çš„GCã€‚ ä½¿ç”¨æœ¬åœ°å­˜å‚¨çš„æ—¶å€™ï¼ŒSerializable æ›´æœ‰ä¿éšœæ€§ï¼Œå› ä¸º Parcelable åœ¨å¤–ç•Œæœ‰å˜åŒ–çš„æƒ…å†µä¸‹ä¸èƒ½å¾ˆå¥½çš„ä¿è¯æ•°æ®çš„æŒç»­æ€§ã€‚ æ ‡å‡†å†™æ³•å¦‚ä¸‹12345678910111213141516171819202122232425262728293031323334353637public class User implements Parcelable { private String name; private int id; protected User(Parcel in) { name = in.readString(); id = in.readInt(); } /* å®ä¾‹åŒ–é™æ€å˜é‡CREATOR ä»Parcelä¸­æ„é€ ä¸€ä¸ªå®ç°äº†Parcelableçš„ç±»çš„å®ä¾‹,Parcelæ¥è‡ªwriteToParcelæ–¹æ³• */ public static final Creator CREATOR = new Creator() { @Override public User createFromParcel(Parcel in) { return new User(in); } @Override public User[] newArray(int size) { return new User[size]; } }; @Override public int describeContents() { return 0; } @Override public void writeToParcel(Parcel dest, int flags) { dest.writeString(name); dest.writeInt(id); }} é€šè¿‡ Intent ä¼ é€’å’Œè·å–æ•°æ®1234567//ä¼ é€’User user = new User(\"Name\", 18);Intent intent = new Intent();intent.putExtra(\"data\", user);//ä½¿ç”¨User user = getIntent().getParcelableExtra(\"data\"); BinderBinder æ˜¯ä¸€ä¸ªå®ç°äº† IBinder æ¥å£çš„ç±»ã€‚ä» IPC è§’åº¦ï¼ŒBinder æ˜¯ Android ä¸­çš„ä¸€ç§è·¨è¿›ç¨‹é€šä¿¡æ–¹å¼ï¼ŒBinder è¿˜å¯ä»¥ç†è§£ä¸ºä¸€ç§è™šæ‹Ÿçš„ç‰©ç†è®¾å¤‡ï¼Œå®ƒçš„è®¾å¤‡é©±åŠ¨æ˜¯/dev/binderï¼Œè¯¥é€šä¿¡æ–¹å¼åœ¨ Linux ä¸­æ²¡æœ‰ã€‚ ä» Android Framework è§’åº¦ï¼ŒBinder æ˜¯ ServiceManager è¿æ¥å„ç§ Manager(ActivityManagerã€WindowManager ç­‰ç­‰)å’Œç›¸åº” ManagerService çš„æ¡¥æ¢ã€‚ ä» Android åº”ç”¨å±‚è§’åº¦ï¼ŒBinder æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯è¿›è¡Œé€šä¿¡çš„åª’ä»‹ï¼Œå½“æˆ‘ä»¬ bindService çš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯ä¼šè¿”å›ä¸€ä¸ªåŒ…å«äº†æœåŠ¡ç«¯ä¸šåŠ¡è°ƒç”¨çš„ Binder å¯¹è±¡ï¼Œå®¢æˆ·ç«¯é€šè¿‡å®ƒè·å–æœåŠ¡ç«¯æä¾›çš„æœåŠ¡ï¼ˆæ™®é€šæœåŠ¡å’ŒåŸºäº AIDL çš„æœåŠ¡ï¼‰æˆ–è€…æ•°æ®ã€‚ æ›´å¤šå…³äº Binderï¼šå›¾è§£Android - Binder å’Œ Service å®ç°æ–¹å¼BundleBundle å¯ä»¥åœ¨å››å¤§ç»„ä»¶ä¹‹é—´é€šè¿‡ Intent ä¼ é€’æ•°æ®ï¼Œå®ƒæœ¬èº«å®ç°äº† Parcelable æ¥å£ï¼Œèƒ½å¤Ÿå­˜å‚¨åŸºæœ¬æ•°æ®ç±»å‹ã€Stringã€å®ç°äº† Parcelable çš„å¯¹è±¡ä»¥åŠä»¥ä¸Šç±»å‹çš„æ•°ç»„ã€‚ æ–‡ä»¶å…±äº«åˆ©ç”¨å¤šè¿›ç¨‹åŒæ—¶è¯»å†™åŒä¸ªå¤–éƒ¨æ–‡ä»¶è¾¾åˆ°æ˜¯æ•°æ®äº¤äº’çš„ç›®çš„ã€‚å­˜å‚¨å½¢å¼æ²¡æœ‰é™åˆ¶ï¼Œå¯ä»¥æ˜¯ XMLã€æ–‡æœ¬ã€å¯¹è±¡åºåˆ—åŒ–ç­‰ç­‰ã€‚ ç¼ºç‚¹åœ¨äºï¼ŒLinux ç³»ç»Ÿå¯¹æ–‡ä»¶å¹¶å‘è¯»å†™æ²¡æœ‰é™åˆ¶ï¼Œä¼šå¯¼è‡´æ•°æ®ä¸åŒæ­¥çš„é—®é¢˜ï¼Œæ‰€ä»¥è¯¥æ–¹å¼åªé€‚åˆäºå¯¹æ•°æ®åŒæ­¥è¦æ±‚ä¸é«˜çš„è¿›ç¨‹é—´é€šä¿¡ã€‚ SocketSocketä¹Ÿç§°ä¸ºâ€œå¥—æ¥å­—â€ï¼Œæ˜¯ç½‘ç»œé€šä¿¡ä¸­çš„æ¦‚å¿µï¼Œå®ƒåˆ†ä¸ºæµå¼å¥—æ¥å­—å’Œç”¨æˆ·æ•°æ®å¥—æ¥å­—ä¸¤ç§ï¼Œåˆ†åˆ«åº”äºç½‘ç»œçš„ä¼ è¾“æ§åˆ¶å±‚ä¸­çš„TCPå’ŒUDPåè®®ã€‚ AIDLæ¦‚å¿µAndroid Interface Definition Languageï¼ŒAndroid æ¥å£å®šä¹‰è¯­è¨€ã€‚ æ•°æ®ç±»å‹ï¼šä½œä¸ºä¸€é—¨â€œè¯­è¨€â€ï¼Œå®ƒæœ‰ä¸€äº›ä¸ Java ä¸åŒçš„åœ°æ–¹ã€‚é™¤äº†åŸºæœ¬æ•°æ®ç±»å‹ã€String å’Œ CharSequence ä¹‹å¤–ï¼Œä½¿ç”¨å…¶ä»–çš„æ•°æ®ç±»å‹éƒ½éœ€è¦æ˜¾å¼å¯¼å…¥ï¼Œæ— è®º aidl æ¥å£æ˜¯å¦ä¸ç›®æ ‡ç±»åœ¨åŒä¸€ä¸ªåŒ…ä¸­ã€‚å…¶æ”¯æŒçš„æ•°æ®ç±»å‹å¦‚ä¸‹ Java ä¸­çš„å…«ç§åŸºæœ¬æ•°æ®ç±»å‹ã€Stringã€CharSequenceã€‚ Listç±»å‹ï¼šå…¶ä¸­çš„å…ƒç´ å¿…é¡»æ˜¯AIDLæ”¯æŒçš„ç±»å‹ä¹‹ä¸€ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªå…¶ä»–AIDLç”Ÿæˆçš„æ¥å£ï¼Œæˆ–è€…æ˜¯å®šä¹‰çš„ Parcelable ç±»å‹ã€‚Listå¯ä»¥ä½¿ç”¨æ³›å‹ã€‚ Mapç±»å‹ï¼šå…¶ä¸­çš„å…ƒç´ å¿…é¡»æ˜¯AIDLæ”¯æŒçš„ç±»å‹ä¹‹ä¸€ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªå…¶ä»–AIDLç”Ÿæˆçš„æ¥å£ï¼Œæˆ–è€…æ˜¯å®šä¹‰çš„parcelableã€‚Mapä¸æ”¯æŒæ³›å‹ã€‚ å®šå‘tagï¼šAIDL ä¸­çš„å®šå‘ tag è¡¨ç¤ºäº†åœ¨è·¨è¿›ç¨‹é€šä¿¡ä¸­æ•°æ®çš„æµå‘ï¼Œå…¶ä¸­ in è¡¨ç¤ºæ•°æ®åªèƒ½ç”±å®¢æˆ·ç«¯æµå‘æœåŠ¡ç«¯ï¼Œ out è¡¨ç¤ºæ•°æ®åªèƒ½ç”±æœåŠ¡ç«¯æµå‘å®¢æˆ·ç«¯ï¼Œè€Œ inout åˆ™è¡¨ç¤ºæ•°æ®å¯åœ¨æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯ä¹‹é—´åŒå‘æµé€šã€‚å…¶ä¸­ï¼Œæ•°æ®æµå‘æ˜¯é’ˆå¯¹åœ¨å®¢æˆ·ç«¯ä¸­çš„é‚£ä¸ªä¼ å…¥æ–¹æ³•çš„å¯¹è±¡è€Œè¨€çš„ã€‚ in ä¸ºå®šå‘ tag æ—¶ï¼Œè¡¨ç°ä¸ºæœåŠ¡ç«¯å°†ä¼šæ¥æ”¶åˆ°ä¸€ä¸ªå¯¹è±¡çš„å®Œæ•´æ•°æ®ï¼Œä½†æ˜¯å®¢æˆ·ç«¯çš„å¯¹è±¡ä¸ä¼šå› ä¸ºæœåŠ¡ç«¯å¯¹ä¼ å‚çš„ä¿®æ”¹è€Œå‘ç”Ÿå˜åŠ¨ï¼›out ä¸ºå®šå‘ tag æ—¶ï¼Œè¡¨ç°ä¸ºæœåŠ¡ç«¯å°†ä¼šæ¥æ”¶åˆ°å¯¹è±¡çš„çš„ç©ºå¯¹è±¡ï¼Œä½†æ˜¯åœ¨æœåŠ¡ç«¯å¯¹æ¥æ”¶åˆ°çš„ç©ºå¯¹è±¡æœ‰ä»»ä½•ä¿®æ”¹ä¹‹åï¼Œå®¢æˆ·ç«¯å°†ä¼šåŒæ­¥å˜åŠ¨ï¼›inout ä¸ºå®šå‘ tag æ—¶ï¼ŒæœåŠ¡ç«¯å°†ä¼šæ¥æ”¶åˆ°å®¢æˆ·ç«¯ä¼ æ¥å¯¹è±¡çš„å®Œæ•´ä¿¡æ¯ï¼Œå¹¶ä¸”å®¢æˆ·ç«¯å°†ä¼šåŒæ­¥æœåŠ¡ç«¯å¯¹è¯¥å¯¹è±¡çš„ä»»ä½•å˜åŠ¨ã€‚ å…³äºæ›´å¤šï¼šä½ çœŸçš„ç†è§£AIDLä¸­çš„inï¼Œoutï¼Œinoutä¹ˆ? ä¸¤ç§ç±»å‹ï¼šæ‰€æœ‰çš„ AIDL æ–‡ä»¶å¯åˆ†ä¸ºä¸¤ç±»ã€‚ä¸€ç±»å®šä¹‰ Parcelable å¯¹è±¡ï¼Œä»¥ä¾›å…¶ä»– AIDL æ–‡ä»¶ä½¿ç”¨éé»˜è®¤æ”¯æŒçš„æ•°æ®ç±»å‹ã€‚ä¸€ç±»å®šä¹‰æ–¹æ³•æ¥å£ï¼Œä»¥ä¾›ç³»ç»Ÿå®Œæˆè·¨è¿›ç¨‹é€šä¿¡ã€‚å¯ä»¥çœ‹åˆ°ï¼Œä¸¤ç±»æ–‡ä»¶éƒ½æ˜¯åœ¨â€œå®šä¹‰â€ï¼Œè€Œä¸æ¶‰åŠå…·ä½“çš„å®ç°ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒå«åšâ€œAndroid æ¥å£å®šä¹‰è¯­è¨€â€ã€‚æ³¨ï¼šæ‰€æœ‰çš„éé»˜è®¤æ”¯æŒæ•°æ®ç±»å‹å¿…é¡»é€šè¿‡ç¬¬ä¸€ç±» AIDL æ–‡ä»¶å®šä¹‰æ‰èƒ½è¢«ä½¿ç”¨ã€‚ å®ç°ç¬¬ä¸€ç±» AIDL æ–‡ä»¶ï¼š1234567// Book.aidl// è¿™ä¸ªæ–‡ä»¶çš„ä½œç”¨æ˜¯å¼•å…¥äº†ä¸€ä¸ªåºåˆ—åŒ–å¯¹è±¡ Book ä¾›å…¶ä»–çš„AIDLæ–‡ä»¶ä½¿ç”¨// æ³¨æ„ï¼šBook.aidl ä¸ Book.javaçš„åŒ…ååº”å½“æ˜¯ä¸€æ ·çš„package com.febers.aidldemo;//æ³¨æ„parcelableæ˜¯å°å†™parcelable Book; è‡ªå®šä¹‰ Parcelable å¯¹è±¡åªæ”¯æŒä¸º in çš„å®šå‘ tag ã€‚åŸå› åœ¨äºç”Ÿæˆçš„ç±»ä¸­åªæœ‰ writeToParcelæ–¹æ³•ï¼Œè€Œå¦‚æœè¦æ”¯æŒä¸º out æˆ–è€… inout çš„å®šå‘ tagï¼Œè¿˜éœ€è¦å®ç°readFromParcelæ–¹æ³•ï¼Œè€Œè¯¥æ–¹æ³•å¹¶æ²¡æœ‰åœ¨ Parcelable æ¥å£ä¸­å®šä¹‰ï¼Œéœ€è¦æˆ‘ä»¬ä»å¤´å†™ã€‚ ç¬¬äºŒç±» AIDL æ–‡ä»¶ï¼š1234567891011121314151617181920// BookManager.aidlpackage com.lypeer.ipcclient;//å¯¼å…¥æ‰€éœ€è¦ä½¿ç”¨çš„éé»˜è®¤æ”¯æŒæ•°æ®ç±»å‹çš„åŒ…import com.febers.aidldemo.Book;interface BookManager { //æ‰€æœ‰çš„è¿”å›å€¼å‰éƒ½ä¸éœ€è¦åŠ ä»»ä½•ä¸œè¥¿ï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆæ•°æ®ç±»å‹ List getBooks(); Book getBook(); int getBookCount(); //ä¼ å‚æ—¶ï¼ŒJavaåŸºæœ¬æ•°æ®ç±»å‹ã€String ä»¥åŠ CharSequence ä¹‹å¤–çš„ç±»å‹ //éƒ½éœ€è¦åœ¨å‰é¢åŠ ä¸Šå®šå‘tagï¼Œå…·ä½“åŠ ä»€ä¹ˆé‡éœ€è€Œå®š void setBookPrice(in Book book , int price) void setBookName(in Book book , String name) void addBookIn(in Book book); void addBookOut(out Book book); void addBookInout(inout Book book);} å®Œæˆä¸Šé¢çš„æ­¥éª¤ä¹‹åï¼Œbuildé¡¹ç›®ï¼Œç¼–è¯‘å™¨å°±ä¼šä¸ºæˆ‘ä»¬ç”Ÿæˆç›¸åº”çš„ BookManager ç±»ã€‚æ­¤æ—¶å°±å¯ä»¥å¼€å§‹æœåŠ¡ç«¯ã€å®¢æˆ·ç«¯çš„ä»£ç ç¼–å†™ã€‚ æœåŠ¡ç«¯12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758public class AIDLService extends Service { public final String TAG = this.getClass().getSimpleName(); //åŒ…å«Bookå¯¹è±¡çš„list private List mBooks = new ArrayList(); //ç”±AIDLæ–‡ä»¶ç”Ÿæˆçš„BookManager private final BookManager.Stub mBookManager = new BookManager.Stub() { @Override public List getBooks() throws RemoteException { synchronized (this) { Log.e(TAG, \"invoking getBooks() method , now the list is : \" + mBooks.toString()); if (mBooks != null) { return mBooks; } return new ArrayList(); } } @Override public void addBook(Book book) throws RemoteException { synchronized (this) { if (mBooks == null) { mBooks = new ArrayList(); } if (book == null) { Log.e(TAG, \"Book is null in In\"); book = new Book(); } //å°è¯•ä¿®æ”¹bookçš„å‚æ•°ï¼Œä¸»è¦æ˜¯ä¸ºäº†è§‚å¯Ÿå…¶åˆ°å®¢æˆ·ç«¯çš„åé¦ˆ book.setPrice(2333); if (!mBooks.contains(book)) { mBooks.add(book); } //æ‰“å°mBooksåˆ—è¡¨ï¼Œè§‚å¯Ÿå®¢æˆ·ç«¯ä¼ è¿‡æ¥çš„å€¼ Log.e(TAG, \"invoking addBooks() method , now the list is : \" + mBooks.toString()); } } }; @Override public void onCreate() { super.onCreate(); Book book = new Book(); book.setName(\"Androidå¼€å‘è‰ºæœ¯æ¢ç´¢\"); book.setPrice(28); mBooks.add(book); } @Nullable @Override public IBinder onBind(Intent intent) { Log.e(getClass().getSimpleName(), String.format(\"on bind,intent = %s\", intent.toString())); return mBookManager; }} å®¢æˆ·ç«¯123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293public class AIDLActivity extends AppCompatActivity { //ç”±AIDLæ–‡ä»¶ç”Ÿæˆçš„ Java ç±» private BookManager mBookManager = null; //æ ‡å¿—å½“å‰ä¸æœåŠ¡ç«¯è¿æ¥çŠ¶å†µçš„å¸ƒå°”å€¼ï¼Œfalseä¸ºæœªè¿æ¥ï¼Œtrueä¸ºè¿æ¥ä¸­ private boolean mBound = false; //åŒ…å«Bookå¯¹è±¡çš„list private List mBooks; @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_aidl); } /** * æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ï¼Œç‚¹å‡»ä¹‹åè°ƒç”¨æœåŠ¡ç«¯çš„addBookInæ–¹æ³• * * @param view */ public void addBook(View view) { //å¦‚æœä¸æœåŠ¡ç«¯çš„è¿æ¥å¤„äºæœªè¿æ¥çŠ¶æ€ï¼Œåˆ™å°è¯•è¿æ¥ if (!mBound) { attemptToBindService(); Toast.makeText(this, \"å½“å‰ä¸æœåŠ¡ç«¯å¤„äºæœªè¿æ¥çŠ¶æ€ï¼Œæ­£åœ¨å°è¯•é‡è¿ï¼Œè¯·ç¨åå†è¯•\", Toast.LENGTH_SHORT).show(); return; } if (mBookManager == null) return; Book book = new Book(); book.setName(\"APPç ”å‘å½•In\"); book.setPrice(30); try { mBookManager.addBook(book); Log.e(getLocalClassName(), book.toString()); } catch (RemoteException e) { e.printStackTrace(); } } /** * å°è¯•ä¸æœåŠ¡ç«¯å»ºç«‹è¿æ¥ */ private void attemptToBindService() { Intent intent = new Intent(); intent.setAction(\"com.febers.aidl\"); intent.setPackage(\"com.febers.aidldemo\"); bindService(intent, mServiceConnection, Context.BIND_AUTO_CREATE); } @Override protected void onStart() { super.onStart(); if (!mBound) { attemptToBindService(); } } @Override protected void onStop() { super.onStop(); if (mBound) { unbindService(mServiceConnection); mBound = false; } } private ServiceConnection mServiceConnection = new ServiceConnection() { @Override public void onServiceConnected(ComponentName name, IBinder service) { Log.e(getLocalClassName(), \"service connected\"); mBookManager = BookManager.Stub.asInterface(service); mBound = true; if (mBookManager != null) { try { mBooks = mBookManager.getBooks(); Log.e(getLocalClassName(), mBooks.toString()); } catch (RemoteException e) { e.printStackTrace(); } } } @Override public void onServiceDisconnected(ComponentName name) { Log.e(getLocalClassName(), \"service disconnected\"); mBound = false; } };} å½“ç„¶ä¸è¦å¿˜è®°åœ¨ Manifest æ–‡ä»¶ä¸­æ³¨å†Œ Serviceã€‚æ§åˆ¶å°æ˜¾ç¤ºä¿¡æ¯å¦‚ä¸‹ï¼š //æœåŠ¡ç«¯çš„ log ä¿¡æ¯1ï¼Œon bind,intent = Intent { act=com.lypeer.aidl pkg=com.lypeer.ipcserver }2ï¼Œinvoking getBooks() method , now the list is : [name : Androidå¼€å‘è‰ºæœ¯æ¢ç´¢ , price : 28]3ï¼Œinvoking addBooks() method , now the list is : [name : Androidå¼€å‘è‰ºæœ¯æ¢ç´¢ , price : 28, name : APPç ”å‘å½•In , price : 2333] //å®¢æˆ·ç«¯çš„ log ä¿¡æ¯1ï¼Œservice connected2ï¼Œ[name : Androidå¼€å‘è‰ºæœ¯æ¢ç´¢ , price : 28]3ï¼Œname : APPç ”å‘å½•In , price : 2333 MessagerMessager åº•å±‚ä½¿ç”¨äº† AIDL æ–¹å¼ã€‚å’Œ AIDL ä¸åŒçš„æ˜¯ï¼ŒMessager åˆ©ç”¨ Handler å½¢å¼å¤„ç†æ¶ˆæ¯çš„æ¥æ”¶å‘é€ï¼Œå› æ­¤æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè¿™ä¹Ÿè¡¨ç¤ºå®ƒä¸æ”¯æŒå¹¶å‘å¤„ç†ï¼›è€Œ AIDL æ–¹å¼æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œæ”¯æŒå¹¶å‘å¤„ç†ï¼Œå› æ­¤ä½¿ç”¨ AIDL æ–¹å¼æ—¶éœ€è¦ä¿è¯ä»£ç çš„çº¿ç¨‹å®‰å…¨ã€‚ æ¦‚å¿µMessenger æœ‰ä¸¤ä¸ªæ„é€ å‡½æ•°ï¼Œåˆ†è´ä»¥ Handler å’Œ Binder ä¸ºå‚æ•°1234567private final IMessenger mTarget;public Messenger(Handler target) { mTarget = target.getIMessenger();}public Messenger(IBinder target) { mTarget = IMessenger.Stub.asInterface(target); //å’Œå‰é¢çš„ AIDL å¾ˆç›¸ä¼¼å§} Handler.getIMessengeræºç ï¼š123456789final IMessenger getIMessenger() { synchronized (mQueue) { if (mMessenger != null) { return mMessenger; } mMessenger = new MessengerImpl(); return mMessenger; }} IMessenger æ˜¯ AIDL ç”Ÿæˆçš„è·¨è¿›ç¨‹æ¥å£ï¼Œé‡Œé¢å®šä¹‰äº†ä¸€ä¸ªå‘é€æ¶ˆæ¯çš„æ–¹æ³•send(android.os.Message msg)ã€‚Handler ä¸­ MessengerImpl å®ç°äº†è¯¥æ–¹æ³•ï¼Œä½¿ç”¨ Handler å°†æ¶ˆæ¯å‘å‡ºå»ï¼š123456private final class MessengerImpl extends IMessenger.Stub { public void send(Message msg) { msg.sendingUid = Binder.getCallingUid(); Handler.this.sendMessage(msg); }} æ‰€ä»¥å¯ä»¥ä½¿ç”¨Handler.handlerMessageæ¥æ”¶æ¶ˆæ¯ã€‚Messenger ä¸­å¯¹sendçš„å®ç°å¦‚ä¸‹ï¼š123public void send(Message message) throws RemoteException { mTarget.send(message);} Messenger ä¸­æŒæœ‰ä¸€ä¸ª IMessenger çš„å¼•ç”¨ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­å¯ä»¥é€šè¿‡ Handler æˆ–è€… Binder çš„å½¢å¼è·å¾—æœ€ç»ˆçš„å®ç°ï¼Œå†…éƒ¨sendæ–¹æ³•å®é™…ä¸Šæ˜¯è°ƒç”¨ IMessenger å®ç°çš„sendæ–¹æ³•ã€‚ Messenger æ˜¯ AIDL çš„ç®€åŒ–ç‰ˆï¼ŒæŠŠæ¥å£éƒ½å°è£…å¥½ï¼Œå¼€å‘è€…åªéœ€åœ¨ä¸€ä¸ªè¿›ç¨‹åˆ›å»ºä¸€ä¸ª Handler ä¼ é€’ç»™ Messengerï¼ŒMessenger çš†å¯ä»¥æŠŠæ¶ˆæ¯è·¨è¿›ç¨‹ä¼ é€’åˆ°å¦ä¸€ä¸ªè¿›ç¨‹ï¼Œåœ¨å¦ä¸€ä¸ªè¿›ç¨‹çš„ Handler åœ¨å¤„ç†æ¶ˆæ¯å°±å¯ä»¥ã€‚ å®ç°æœåŠ¡ç«¯123456789101112131415161718192021222324252627282930313233343536public class MessengerService extends Service { private final String TAG = this.getClass().getSimpleName(); Messenger mMessenger = new Messenger(new Handler() { @Override public void handleMessage(final Message msg) { if (msg != null && msg.arg1 == 9527) { if (msg.getData() == null) { return; } String content = (String) msg.getData().get(\"MSG_CONTENT\"); //æ¥æ”¶å®¢æˆ·ç«¯çš„æ¶ˆæ¯ Log.e(TAG, \"Message from client: \" + content); //å›å¤æ¶ˆæ¯ç»™å®¢æˆ·ç«¯ Message replyMsg = Message.obtain(); replyMsg.arg1 = 9528; Bundle bundle = new Bundle(); bundle.putString(\"MSG_CONTENT\", \"å·²æ”¶åˆ°æ¶ˆæ¯\"); replyMsg.setData(bundle); try { msg.replyTo.send(replyMsg); //å›ä¿¡ } catch (RemoteException e) { e.printStackTrace(); } } } }); @Nullable @Override public IBinder onBind(final Intent intent) { return mMessenger.getBinder(); }} å®¢æˆ·ç«¯ä»£ç ç‰‡æ®µ12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849public class MessagerActivity extends AppCompatActivity { Messenger mClientMessenger = new Messenger(new Handler() { @Override public void handleMessage(final Message msg) { if (msg != null && msg.arg1 == 9528){ if (msg.getData() == null){ return; } String content = (String) msg.getData().get(\"MSG_CONTENT\"); Log.e(TAG, \"Message from server: \" + content); } } }); //æœåŠ¡ç«¯çš„ Messenger private Messenger mServerMessenger; private ServiceConnection mMessengerConnection = new ServiceConnection() { @Override public void onServiceConnected(final ComponentName name, final IBinder service) { mServerMessenger = new Messenger(service); } @Override public void onServiceDisconnected(final ComponentName name) { mServerMessenger = null; } }; //å‘é€æ¶ˆæ¯ public void sendMsg() { String msgContent = \"æ¶ˆæ¯\"ï¼› Message message = Message.obtain(); message.arg1 = 9527; Bundle bundle = new Bundle(); bundle.putString(\"MSG_CONTENT\", msgContent); message.setData(bundle); message.replyTo = mClientMessenger; //æŒ‡å®šå›ä¿¡äººæ˜¯å®¢æˆ·ç«¯å®šä¹‰çš„ try { mServerMessenger.send(message); } catch (RemoteException e) { e.printStackTrace(); } }} ContentProviderä¸»è¦ç”¨äºä¸åŒçš„åº”ç”¨ç¨‹åºä¹‹é—´å®ç°æ•°æ®å…±äº«åŠŸèƒ½ document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Android","slug":"Android","permalink":"http://yoursite.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://yoursite.com/tags/Android/"},{"name":"å¤šè¿›ç¨‹é€šä¿¡","slug":"å¤šè¿›ç¨‹é€šä¿¡","permalink":"http://yoursite.com/tags/å¤šè¿›ç¨‹é€šä¿¡/"}]},{"title":"Android åŠ¨ç”»è¯¦è§£","slug":"Android-åŠ¨ç”»è¯¦è§£","date":"2019-02-18T11:12:22.000Z","updated":"2019-03-15T15:28:44.000Z","comments":true,"path":"Android-åŠ¨ç”»è¯¦è§£/","link":"","permalink":"http://yoursite.com/Android-åŠ¨ç”»è¯¦è§£/","excerpt":"å¼•è¨€Android æä¾›äº†å¾ˆå¤šä¸°å¯Œçš„ API å»å®ç°åŠ¨ç”»æ•ˆæœï¼ŒåŠ ä¸Š SDK 25.3 æ—¶æ¨å‡ºçš„ SpringAnimationï¼Œæ€»å…±æœ‰ä¸‰å¤§ç±» Animation ä¾›å¼€å‘è€…ä½¿ç”¨ã€‚","text":"å¼•è¨€Android æä¾›äº†å¾ˆå¤šä¸°å¯Œçš„ API å»å®ç°åŠ¨ç”»æ•ˆæœï¼ŒåŠ ä¸Š SDK 25.3 æ—¶æ¨å‡ºçš„ SpringAnimationï¼Œæ€»å…±æœ‰ä¸‰å¤§ç±» Animation ä¾›å¼€å‘è€…ä½¿ç”¨ã€‚ View Animationè§†å›¾åŠ¨ç”»çš„ä½œç”¨å¯¹è±¡æ˜¯ Viewï¼Œå¯åˆ†ä¸ºè¡¥é—´åŠ¨ç”»å’Œå¸§åŠ¨ç”»ã€‚ è¡¥é—´åŠ¨ç”»åŠ¨ç”»å¼€å§‹å’Œç»“å°¾çš„ä¸­é—´è¿‡ç¨‹éƒ½æ˜¯å‡è±¡ï¼Œæ˜¯æ¸²æŸ“å‡ºæ¥çš„è¡¨è±¡ï¼Œåªæ˜¯æ˜¾ç¤ºçš„ä½ç½®å˜åŠ¨ï¼ŒViewçš„å®é™…ä½ç½®æœªæ”¹å˜ï¼Œè¡¨ç°ä¸ºViewç§»åŠ¨åˆ°å…¶ä»–åœ°æ–¹ï¼Œç‚¹å‡»äº‹ä»¶ä»åœ¨åŸå¤„æ‰èƒ½å“åº”ã€‚åˆ©ç”¨è¡¥é—´åŠ¨ç”»ï¼ŒåŒä¸€ä¸ªå›¾å½¢åœ¨ç•Œé¢ä¸Šå¯ä»¥è¿›è¡Œé€æ˜åº¦ï¼ˆAlphaAnimationï¼‰ã€ç¼©æ”¾ï¼ˆScaleAnimationï¼‰ã€æ—‹è½¬ï¼ˆRotateAnimationï¼‰ã€å¹³ç§»ï¼ˆTranslateAnimationï¼‰çš„å˜åŒ–ã€‚ XML æ–¹å¼åˆ›å»ºä¸€ä¸ª set.xml æ–‡ä»¶ï¼Œé€šè¿‡åŠ¨ç”»é›†åˆæ ‡ç­¾å°†å››ç§æ•ˆæœç»“åˆèµ·æ¥12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152 ä½¿ç”¨ä»¥ä¸ŠåŠ¨ç”»çš„æ–¹å¼å¦‚ä¸‹12Animation anim = AnimationUtils.loadAnimation(context, R.anim.my_animation);view.startAnimation(anim); Java ä»£ç æ–¹å¼ä½¿ç”¨ Java ä»£ç å®ç°åŠ¨ç”»çš„æ–¹å¼å¦‚ä¸‹1234567891011121314151617181920212223242526public void startAnimationSet() { //åˆ›å»ºåŠ¨ç”»ï¼Œå‚æ•°è¡¨ç¤ºä»–çš„å­åŠ¨ç”»æ˜¯å¦å…±ç”¨ä¸€ä¸ªæ’å€¼å™¨ AnimationSet animationSet = new AnimationSet(true); //æ·»åŠ åŠ¨ç”» animationSet.addAnimation(new AlphaAnimation(1.0f, 0.0f)); //è®¾ç½®æ’å€¼å™¨ animationSet.setInterpolator(new LinearInterpolator()); //è®¾ç½®åŠ¨ç”»æŒç»­æ—¶é•¿ animationSet.setDuration(3000); //è®¾ç½®åŠ¨ç”»ç»“æŸä¹‹åæ˜¯å¦ä¿æŒåŠ¨ç”»çš„ç›®æ ‡çŠ¶æ€ animationSet.setFillAfter(true); //è®¾ç½®åŠ¨ç”»ç»“æŸä¹‹åæ˜¯å¦ä¿æŒåŠ¨ç”»å¼€å§‹æ—¶çš„çŠ¶æ€ animationSet.setFillBefore(false); //è®¾ç½®é‡å¤æ¨¡å¼ animationSet.setRepeatMode(AnimationSet.REVERSE); //è®¾ç½®é‡å¤æ¬¡æ•° animationSet.setRepeatCount(AnimationSet.INFINITE); //è®¾ç½®åŠ¨ç”»å»¶æ—¶æ—¶é—´ animationSet.setStartOffset(2000); //å–æ¶ˆåŠ¨ç”» animationSet.cancel(); //é‡Šæ”¾èµ„æº animationSet.reset(); //å¼€å§‹åŠ¨ç”» view.startAnimation(animationSet);} è‡ªå®šä¹‰é™¤äº†ç³»ç»Ÿè‡ªå¸¦çš„å››ç§è¡¥é—´åŠ¨ç”»ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰ View åŠ¨ç”»ã€‚æ´¾ç”Ÿä¸€ç§åŠ¨ç”»åªéœ€è¦ç»§æ‰¿æŠ½è±¡ç±» Animationï¼Œç„¶åé‡å†™å®ƒçš„initializeå’ŒapplyTransformationæ–¹æ³•å³å¯ï¼Œåœ¨å‰ä¸€ä¸ªæ–¹æ³•ä¸­åšåˆå§‹åŒ–å·¥ä½œï¼Œåä¸€ä¸ªæ–¹æ³•ä¸­è¿›è¡Œç›¸åº”çš„çŸ©é˜µå˜æ¢ï¼Œæœ¬æ–‡ä¸å†è¯¦ç»†ä»‹ç»ã€‚ ç‰¹æ®Šä½¿ç”¨View åŠ¨ç”»è¿˜å¯ä»¥ç”¨åœ¨æ§åˆ¶ ViewGroup ä¸­å­å…ƒç´ çš„å‡ºåœºæ•ˆæœã€å®ç°ä¸åŒ Activity çš„åˆ‡æ¢æ•ˆæœç­‰åœºæ™¯ä¸­ã€‚ å¸§åŠ¨ç”»å¸§åŠ¨ç”»æ˜¯é¡ºåºæ’­æ”¾ä¸€ç»„é¢„å…ˆå®šä¹‰å¥½çš„å›¾ç‰‡ï¼Œç±»ä¼¼äºç”µå½±æ’­æ”¾ã€‚ä¸åŒäºè¡¥é—´åŠ¨ç”»ï¼Œç³»ç»Ÿæä¾›äº†å¦å¤–ä¸€ä¸ªç±» AnimationDrawable æ¥ä½¿ç”¨å¸§åŠ¨ç”»ã€‚ é¦–å…ˆéœ€è¦å®šä¹‰ä¸€ä¸ª XML æ–‡ä»¶frame_animation.xml12345678910111213 ç„¶åå°†ä¸Šè¿°çš„ Drawable ä½œä¸º View çš„èƒŒæ™¯å¹¶é€šè¿‡ Drawable æ¥æ’­æ”¾åŠ¨ç”»å³å¯123view.setBackgroundResource(R.drawable.frame_animation)ï¼›AnimationDrawable drawable = (AnimationDrawable) view.getBackground();drawable.start(); Property Animationå±æ€§åŠ¨ç”»åœ¨ API 11 å¼•å…¥ï¼Œå¯ä»¥çœ‹ä½œæ˜¯å¢å¼ºç‰ˆçš„è¡¥é—´åŠ¨ç”»ï¼Œä¸è¡¥é—´åŠ¨ç”»çš„ä¸åŒä¹‹å¤„ä½“ç°åœ¨ï¼š è¡¥é—´åŠ¨ç”»åªèƒ½å®šä¹‰ä¸¤ä¸ªå…³é”®å¸§åœ¨é€æ˜ã€æ—‹è½¬ã€ä½ç§»å’Œå€¾æ–œè¿™å››ä¸ªå±æ€§çš„å˜æ¢ï¼Œä½†æ˜¯å±æ€§åŠ¨ç”»å¯ä»¥å®šä¹‰ä»»ä½•å±æ€§çš„å˜åŒ–ã€‚ è¡¥é—´åŠ¨ç”»åªèƒ½å¯¹ UI ç»„ä»¶æ‰§è¡ŒåŠ¨ç”»ï¼Œä½†å±æ€§åŠ¨ç”»å¯ä»¥å¯¹ä»»ä½•å¯¹è±¡æ‰§è¡ŒåŠ¨ç”»ã€‚ ä¸è¡¥é—´åŠ¨ç”»ç±»ä¼¼ï¼Œå±æ€§åŠ¨ç”»ä¹Ÿéœ€è¦å®šä¹‰å‡ ä¸ªæ–¹é¢çš„å±æ€§ï¼š åŠ¨ç”»æŒç»­æ—¶é—´ã€‚é»˜è®¤ä¸º 300msï¼Œå¯ä»¥é€šè¿‡ android:duration å±æ€§æŒ‡å®šã€‚ åŠ¨ç”»æ’å€¼æ–¹å¼ã€‚é€šè¿‡ android:interploator æŒ‡å®šã€‚ åŠ¨ç”»é‡å¤æ¬¡æ•°ã€‚é€šè¿‡ android:repeatCount æŒ‡å®šã€‚ é‡å¤è¡Œä¸ºã€‚é€šè¿‡ android:repeatMode æŒ‡å®šã€‚ åŠ¨ç”»é›†ã€‚åœ¨å±æ€§èµ„æºæ–‡ä»¶ä¸­é€šè¿‡ æ¥ç»„åˆã€‚ å¸§åˆ·æ–°ç‡ã€‚æŒ‡å®šå¤šé•¿æ—¶é—´æ’­æ”¾ä¸€å¸§ã€‚é»˜è®¤ä¸º 10 msã€‚ API ValueAnimatorï¼šå±æ€§åŠ¨ç”»ç”¨åˆ°çš„ä¸»è¦çš„æ—¶é—´å¼•æ“ï¼Œè´Ÿè´£è®¡ç®—å„ä¸ªå¸§çš„å±æ€§å€¼ã€‚ ObjectAnimatorï¼š ValueAnimator çš„å­ç±»ï¼Œå¯¹æŒ‡å®šå¯¹è±¡çš„å±æ€§æ‰§è¡ŒåŠ¨ç”»ã€‚ AnimatorSetï¼šAnimator çš„å­ç±»ï¼Œç”¨äºç»„åˆå¤šä¸ª Animatorã€‚ å±æ€§åŠ¨ç”»è¿˜æä¾›äº†ä¸€ä¸ª Evaluator ï¼Œç”¨æ¥æ§åˆ¶å¦‚ä½•è®¡ç®—å±æ€§å€¼ã€‚ IntEvaluatorï¼šè®¡ç®— int ç±»å‹å±æ€§å€¼çš„è®¡ç®—å™¨ã€‚ FloatEvaluatorï¼šç”¨äºè®¡ç®— float ç±»å‹å±æ€§å€¼çš„è®¡ç®—å™¨ã€‚ ArgbEvaluatorï¼šç”¨äºè®¡ç®—åå…­è¿›åˆ¶å½¢å¼è¡¨ç¤ºçš„é¢œè‰²å€¼çš„è®¡ç®—å™¨ã€‚ TypeEvaluatorï¼šå¯ä»¥è‡ªå®šä¹‰è®¡ç®—å™¨ã€‚ ValueAniamtorValueAnimator ç±»ä¸­æœ‰3ä¸ªé‡è¦æ–¹æ³•ï¼š ValueAnimator.ofInt(int values)ValueAnimator.ofFloat(float values)ValueAnimator.ofObject(int values) ofIntå°†åˆå§‹å€¼ä»¥æ•´å‹æ•°å€¼çš„å½¢å¼è¿‡æ¸¡åˆ°ç»“æŸå€¼,å³ä¼°å€¼å™¨æ˜¯æ•´å‹ä¼°å€¼å™¨ â€”â€” IntEvaluator ä¸‹é¢çš„ä»£ç å°†å®ç°æŒ‰é’®çš„å®½åº¦ä» 150px æ”¾å¤§åˆ° 500px12345678910111213141516171819202122232425 Button mButton = (Button) findViewById(R.id.Button); // è®¾ç½®å±æ€§æ•°å€¼çš„åˆå§‹å€¼ & ç»“æŸå€¼ // ValueAnimator.ofInt()å†…ç½®äº†æ•´å‹ä¼°å€¼å™¨ï¼Œé»˜è®¤è®¾ç½®äº†å¦‚ä½•ä»åˆå§‹å€¼150 è¿‡æ¸¡åˆ° ç»“æŸå€¼500 ValueAnimator valueAnimator = ValueAnimator.ofInt(mButton.getLayoutParams().width, 500); // è®¾ç½®åŠ¨ç”»çš„æ’­æ”¾å„ç§å±æ€§ valueAnimator.setDuration(2000); // å°†å±æ€§æ•°å€¼æ‰‹åŠ¨èµ‹å€¼ç»™å¯¹è±¡çš„å±æ€§ï¼Œæ­¤å¤„æ˜¯å°†å€¼èµ‹ç»™æŒ‰é’®çš„å®½åº¦ // è®¾ç½®æ›´æ–°ç›‘å¬å™¨ï¼Œæ•°å€¼æ¯æ¬¡å˜åŒ–æ›´æ–°éƒ½ä¼šè°ƒç”¨è¯¥æ–¹æ³• valueAnimator.addUpdateListener(new AnimatorUpdateListener() { @Override public void onAnimationUpdate(ValueAnimator animator) { // è·å¾—æ¯æ¬¡å˜åŒ–åçš„å±æ€§å€¼ int currentValue = (Integer) animator.getAnimatedValue(); // å°†å€¼æ‰‹åŠ¨èµ‹å€¼ç»™å¯¹è±¡çš„å±æ€§ï¼Œå®ç°æŒ‰é’®å®½åº¦å±æ€§çš„åŠ¨æ€å˜åŒ– mButton.getLayoutParams().width = currentValue; // åˆ·æ–°è§†å›¾ï¼Œå³é‡æ–°ç»˜åˆ¶ mButton.requestLayout(); } }); valueAnimator.start(); // å¯åŠ¨åŠ¨ç”»} ofFloatå…¶ä¸ ofInt çš„åŒºåˆ«ä»…åœ¨äºé‡‡ç”¨äº†æµ®ç‚¹ä¼°å€¼å™¨ï¼ˆFloatEvaluatorï¼‰123456789101112131415161718192021public class FloatEvaluator implements TypeEvaluator { /** * é‡å†™evaluate() * * @param fraction åŠ¨ç”»å®Œæˆåº¦ï¼ˆæ ¹æ®å®ƒæ¥è®¡ç®—å½“å‰åŠ¨ç”»çš„å€¼ï¼‰ * @param startValue åŠ¨ç”»çš„åˆå§‹å€¼ * @param endValue åŠ¨ç”»çš„ç»“æŸå€¼ * @return */ public Object evaluate(float fraction, Object startValue, Object endValue) { float startFloat = ((Number) startValue).floatValue(); // åˆå§‹å€¼è¿‡æ¸¡åˆ°ç»“æŸå€¼çš„ç®—æ³• // 1. ç”¨ç»“æŸå€¼å‡å»åˆå§‹å€¼ï¼Œç®—å‡ºå®ƒä»¬ä¹‹é—´çš„å·®å€¼ // 2. ç”¨ä¸Šè¿°å·®å€¼ä¹˜ä»¥ fraction ç³»æ•° // 3. åŠ ä¸Šåˆå§‹å€¼ï¼Œå¾—åˆ°å½“å‰åŠ¨ç”»çš„å€¼ return startFloat + fraction * (((Number) endValue).floatValue() - startFloat); } } ofObjectå¯¹äº ValueAnimator.ofInt å’Œ ValueAnimator.ofFloat æ¥è¯´ï¼Œç”±äºä½¿ç”¨äº†ç³»ç»Ÿå†…ç½®çš„ä¼°å€¼å™¨ â€”â€” FloatEvaluator å’Œ IntEvaluatorï¼Œæ‰€ä»¥å·²ç»é»˜è®¤å®ç°äº†ä»åˆå§‹å€¼åˆ°ç»“æŸå€¼çš„é€»è¾‘ã€‚ ä½†å¯¹äº ValueAnimator.ofObjectï¼Œå¹¶æ²¡æœ‰ç³»ç»Ÿé»˜è®¤å®ç°ï¼Œå› ä¸ºå¯¹è±¡çš„åŠ¨ç”»æ“ä½œå¤æ‚å¤šæ ·ï¼Œç³»ç»Ÿæ— æ³•çŸ¥é“å¦‚ä½•ä»åˆå§‹å¯¹è±¡è¿‡åº¦åˆ°ç»“æŸå¯¹è±¡ï¼Œå› æ­¤éœ€è¦è‡ªå®šä¹‰ä¼°å€¼å™¨ï¼ˆTypeEvaluatorï¼‰æ¥å‘ŠçŸ¥ç³»ç»Ÿå…·ä½“çš„é€»è¾‘ã€‚ è‡ªå®šä¹‰ä¸€ä¸ªä¼°å€¼å™¨ PointEvaluatorï¼Œå®ç°ä¸€ä¸ªåœ†ä»ä¸€ä¸ªç‚¹ç§»åŠ¨åˆ°å¦å¤–ä¸€ä¸ªç‚¹ã€‚é»˜è®¤å·²ç»æœ‰äº†ä¸€ä¸ªç‚¹åæ ‡ç±»ï¼šPointï¼Œå…¶å…·æœ‰ x å’Œ y ä¸¤ä¸ªæµ®ç‚¹å±æ€§ã€‚ 123456789101112131415161718public class PointEvaluator implements TypeEvaluator { @Override public Object evaluate(float fraction, Object startValue, Object endValue) { // å°†åŠ¨ç”»åˆå§‹å€¼startValue å’Œ åŠ¨ç”»ç»“æŸå€¼endValue ç±»å‹è½¬æ¢æˆPointå¯¹è±¡ Point startPoint = (Point) startValue; Point endPoint = (Point) endValue; // æ ¹æ®fractionæ¥è®¡ç®—å½“å‰åŠ¨ç”»çš„xå’Œyçš„å€¼ float x = startPoint.getX() + fraction * (endPoint.getX() - startPoint.getX()); float y = startPoint.getY() + fraction * (endPoint.getY() - startPoint.getY()); // å°†è®¡ç®—åçš„åæ ‡å°è£…åˆ°ä¸€ä¸ªæ–°çš„Pointå¯¹è±¡ä¸­å¹¶è¿”å› Point point = new Point(x, y); return point; }} å°†å±æ€§åŠ¨ç”»ä½œç”¨åˆ°è‡ªå®šä¹‰Viewå½“ä¸­1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950public class MyView extends View { public static final float RADIUS = 70f;// åœ†çš„åŠå¾„ private Point currentPoint;// å½“å‰ç‚¹åæ ‡ private Paint mPaint;// ç»˜å›¾ç”»ç¬” // æ„é€ æ–¹æ³•ï¼Œåˆå§‹åŒ–ç”»ç¬” public MyView(Context context, AttributeSet attrs) { super(context, attrs); mPaint = new Paint(Paint.ANTI_ALIAS_FLAG); mPaint.setColor(Color.BLUE); } // å®ç°ç»˜åˆ¶é€»è¾‘ // å…ˆåœ¨åˆå§‹ç‚¹ç”»åœ†ï¼Œç›‘å¬å½“å‰åæ ‡å€¼çš„å˜åŒ–ï¼Œæ¯æ¬¡å˜åŒ–éƒ½è°ƒç”¨onDraw()é‡æ–°ç»˜åˆ¶åœ†ï¼Œå®ç°åœ†çš„å¹³ç§»åŠ¨ç”»æ•ˆæœ @Override protected void onDraw(Canvas canvas) { // å¦‚æœå½“å‰ç‚¹åæ ‡ä¸ºç©º(å³ç¬¬ä¸€æ¬¡) if (currentPoint == null) { currentPoint = new Point(RADIUS, RADIUS); // åˆ›å»ºä¸€ä¸ªç‚¹å¯¹è±¡(åæ ‡æ˜¯(70,70)) float x = currentPoint.getX(); float y = currentPoint.getY(); canvas.drawCircle(x, y, RADIUS, mPaint); // å°†å±æ€§åŠ¨ç”»ä½œç”¨åˆ°Viewä¸­ Point startPoint = new Point(RADIUS, RADIUS);// åˆå§‹ç‚¹ä¸ºåœ†å¿ƒ(70,70) Point endPoint = new Point(700, 1000);// ç»“æŸç‚¹ä¸º(700,1000) ValueAnimator anim = ValueAnimator.ofObject(new PointEvaluator(), startPoint, endPoint); anim.setDuration(5000); anim.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { @Override public void onAnimationUpdate(ValueAnimator animation) { currentPoint = (Point) animation.getAnimatedValue(); // æ¯æ¬¡èµ‹å€¼åå°±é‡æ–°ç»˜åˆ¶ï¼Œä»è€Œå®ç°åŠ¨ç”»æ•ˆæœ // è°ƒç”¨invalidate()å,å°±ä¼šåˆ·æ–°View,å³æ‰èƒ½çœ‹åˆ°é‡æ–°ç»˜åˆ¶çš„ç•Œé¢,å³onDraw()ä¼šè¢«é‡æ–°è°ƒç”¨ä¸€æ¬¡ invalidate(); } }); anim.start(); } else { // å¦‚æœåæ ‡å€¼ä¸ä¸º0,åˆ™ç”»åœ† float x = currentPoint.getX(); float y = currentPoint.getY(); canvas.drawCircle(x, y, RADIUS, mPaint); } }} ObjectAnimatorç»§æ‰¿è‡ª ValueAnimator ç±»ï¼Œå³åº•å±‚çš„åŠ¨ç”»å®ç°æœºåˆ¶åŸºäº ValueAnimatorã€‚ObjectAnimator ä¸ ValueAnimatorç±»çš„åŒºåˆ«åœ¨äº ValueAnimator ç±»æ˜¯å…ˆæ”¹å˜å€¼ï¼Œç„¶åæ‰‹åŠ¨èµ‹å€¼ç»™å¯¹è±¡çš„å±æ€§ä»è€Œå®ç°åŠ¨ç”»ï¼Œå±äºé—´æ¥å¯¹å¯¹è±¡å±æ€§è¿›è¡Œæ“ä½œ ObjectAnimator ç±»æ˜¯å…ˆæ”¹å˜å€¼ï¼Œç„¶åè‡ªåŠ¨èµ‹å€¼ç»™å¯¹è±¡çš„å±æ€§ä»è€Œå®ç°åŠ¨ç”»ï¼Œå±äºç›´æ¥å¯¹å¯¹è±¡å±æ€§è¿›è¡Œæ“ä½œ å…·ä½“ä½¿ç”¨å¯¹äº ObjectAnimator animator = ObjectAnimator.ofFloat(Object object, String property, float â€¦.values); å…¶ä¸­ values å‚æ•°ä¸å®šï¼Œè¡¨ç¤ºåŠ¨ç”»åˆå§‹å€¼å’Œç»“æŸå€¼ï¼Œå¦‚æœæ˜¯ä¸¤ä¸ªå‚æ•°a,bï¼Œåˆ™åŠ¨ç”»æ•ˆæœæ˜¯ä»å±æ€§çš„aå€¼åˆ°bå€¼ï¼›å¦‚æœæ˜¯ä¸‰ä¸ªå‚æ•°a,b,cï¼Œåˆ™åŠ¨ç”»æ•ˆæœæ˜¯ä»å±æ€§çš„aå€¼åˆ°bå€¼å†åˆ°cå€¼ å¯¹ Button è¿›è¡Œå˜æ¢123456ObjectAnimator animator = ObjectAnimator.ofFloat(mButton, \"alpha\", 1f, 0f, 1f); // æ•ˆæœ:å¸¸è§„->å…¨é€æ˜->å¸¸è§„ObjectAnimator animator = ObjectAnimator.ofFloat(mButton, \"rotation\", 0f, 360f);......animator.setDuration(5000);animator.start(); è‡ªå®šä¹‰åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç»™ObjectAnimator.ofFloatçš„ç¬¬äºŒä¸ªå‚æ•°String propertyä¼ å…¥alphaã€rotationã€translationX å’ŒscaleYç­‰å€¼ï¼Œå®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä¼ ä»»æ„å±æ€§å€¼ï¼Œå› ä¸º ObjectAnimator ç±»å®ç°åŠ¨ç”»æ•ˆæœçš„æœ¬è´¨æ˜¯ï¼šä¸æ–­æ§åˆ¶å€¼çš„å˜åŒ–ï¼Œå†ä¸æ–­è‡ªåŠ¨èµ‹ç»™å¯¹è±¡çš„å±æ€§ï¼Œèµ‹å€¼çš„è¿‡ç¨‹æ˜¯é€šè¿‡è°ƒç”¨å¯¹è±¡çš„get/setæ–¹æ³•è¿›è¡Œçš„ã€‚ æ‰€ä»¥è‡ªå®šä¹‰å±æ€§å°±å¯ä»¥é€šè¿‡ä¸ºå¯¹è±¡è®¾ç½®éœ€è¦æ“ä½œå±æ€§çš„set/getæ–¹æ³•ï¼Œå†å®ç° TypeEvaluator å®šä¹‰å±æ€§å˜åŒ–çš„é€»è¾‘å®Œæˆã€‚ è¿˜æ˜¯å¯¹ä¸€ä¸ªçƒåšå˜æ¢12345678910111213141516171819202122232425262728public class MyView2 extends View { public static final float RADIUS = 100f; private Paint mPaint; private String color; // è®¾ç½®èƒŒæ™¯é¢œè‰²å±æ€§ // è®¾ç½®èƒŒæ™¯é¢œè‰²çš„get() & set()æ–¹æ³• public String getColor() { return color; } public void setColor(String color) { this.color = color; mPaint.setColor(Color.parseColor(color)); // å°†ç”»ç¬”çš„é¢œè‰²è®¾ç½®æˆæ–¹æ³•å‚æ•°ä¼ å…¥çš„é¢œè‰² invalidate(); } public MyView2(Context context, AttributeSet attrs) { super(context, attrs); mPaint = new Paint(Paint.ANTI_ALIAS_FLAG); mPaint.setColor(Color.BLUE); } @Override protected void onDraw(Canvas canvas) { canvas.drawCircle(500, 500, RADIUS, mPaint); }} å®ç°è‡ªå®šä¹‰ä¼°å€¼å™¨ï¼Œå®Œæˆé¢œè‰²è¿‡æ¸¡çš„é€»è¾‘1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283public class ColorEvaluator implements TypeEvaluator { private int mCurrentRed; private int mCurrentGreen ; private int mCurrentBlue ; // é‡å†™evaluateï¼Œå†™å…¥å¯¹è±¡åŠ¨ç”»è¿‡æ¸¡çš„é€»è¾‘ï¼Œæ­¤å¤„ä¸ºé¢œè‰²è¿‡æ¸¡ @Override public Object evaluate(float fraction, Object startValue, Object endValue) { String startColor = (String) startValue; String endColor = (String) endValue; // é€šè¿‡å­—ç¬¦ä¸²æˆªå–çš„æ–¹å¼å°†åˆå§‹åŒ–é¢œè‰²åˆ†ä¸ºRGBä¸‰ä¸ªéƒ¨åˆ†ï¼Œå¹¶å°†RGBçš„å€¼è½¬æ¢æˆåè¿›åˆ¶æ•°å­— // é‚£ä¹ˆæ¯ä¸ªé¢œè‰²çš„å–å€¼èŒƒå›´æ˜¯0-255 int startRed = Integer.parseInt(startColor.substring(1, 3), 16); int startGreen = Integer.parseInt(startColor.substring(3, 5), 16); int startBlue = Integer.parseInt(startColor.substring(5, 7), 16); int endRed = Integer.parseInt(endColor.substring(1, 3), 16); int endGreen = Integer.parseInt(endColor.substring(3, 5), 16); int endBlue = Integer.parseInt(endColor.substring(5, 7), 16); // å°†åˆå§‹åŒ–é¢œè‰²çš„å€¼å®šä¹‰ä¸ºå½“å‰éœ€è¦æ“ä½œçš„é¢œè‰²å€¼ mCurrentRed = startRed; mCurrentGreen = startGreen; mCurrentBlue = startBlue; // è®¡ç®—åˆå§‹é¢œè‰²å’Œç»“æŸé¢œè‰²ä¹‹é—´çš„å·®å€¼ // è¯¥å·®å€¼å†³å®šç€é¢œè‰²å˜åŒ–çš„å¿«æ…¢ï¼Œå¦‚æœåˆå§‹é¢œè‰²å€¼å’Œç»“æŸé¢œè‰²å€¼ç›¸è¿‘ï¼Œå˜åŒ–ä¼šæ¯”è¾ƒç¼“æ…¢ int redDiff = Math.abs(startRed - endRed); int greenDiff = Math.abs(startGreen - endGreen); int blueDiff = Math.abs(startBlue - endBlue); int colorDiff = redDiff + greenDiff + blueDiff; if (mCurrentRed != endRed) { // getCurrentColor()å†³å®šå¦‚ä½•æ ¹æ®å·®å€¼æ¥å†³å®šé¢œè‰²å˜åŒ–çš„å¿«æ…¢ ->>å…³æ³¨1 mCurrentRed = getCurrentColor(startRed, endRed, colorDiff, 0, fraction); } else if (mCurrentGreen != endGreen) { mCurrentGreen = getCurrentColor(startGreen, endGreen, colorDiff, redDiff, fraction); } else if (mCurrentBlue != endBlue) { mCurrentBlue = getCurrentColor(startBlue, endBlue, colorDiff, redDiff + greenDiff, fraction); } // å°†è®¡ç®—å‡ºçš„å½“å‰é¢œè‰²çš„å€¼ç»„è£…è¿”å› String currentColor = \"#\" + getHexString(mCurrentRed) + getHexString(mCurrentGreen) + getHexString(mCurrentBlue); return currentColor; } // æ ¹æ®fractionå€¼æ¥è®¡ç®—å½“å‰çš„é¢œè‰²ã€‚ private int getCurrentColor(int startColor, int endColor, int colorDiff, int offset, float fraction) { int currentColor; if (startColor > endColor) { currentColor = (int) (startColor - (fraction * colorDiff - offset)); if (currentColor < endColor) { currentColor = endColor; } } else { currentColor = (int) (startColor + (fraction * colorDiff - offset)); if (currentColor > endColor) { currentColor = endColor; } } return currentColor; } // å°†10è¿›åˆ¶é¢œè‰²å€¼è½¬æ¢æˆ16è¿›åˆ¶ã€‚ private String getHexString(int value) { String hexString = Integer.toHexString(value); if (hexString.length() == 1) { hexString = \"0\" + hexString; } return hexString; }} å…·ä½“è°ƒç”¨123ObjectAnimator anim = ObjectAnimator.ofObject(myView2, \"color\", new ColorEvaluator(), \"#0000FF\", \"#FF0000\");anim.setDuration(2000);anim.start(); æ­¤æ—¶è¿˜æœ‰ä¸€ä¸ªé—®é¢˜éœ€è¦æˆ‘ä»¬è§£å†³ï¼šå¦‚æœéœ€è¦å¯¹ view æ§ä»¶ï¼ˆæ¯”å¦‚ buttonï¼‰çš„å®½é«˜åšå˜æ¢ï¼Œä½†æ˜¯ç”±äºå› ä¸º View ä¸­setWidthå¹¶ä¸æ˜¯è®¾ç½® View çš„å®½åº¦ï¼Œè€Œæ˜¯è®¾ç½®æ§ä»¶çš„æœ€å¤§å’Œæœ€å°å®½åº¦ï¼Œæ‰€ä»¥é€šè¿‡get/setæ— æ³•æ”¹å˜æ§ä»¶çš„å®½åº¦ï¼Œä¹Ÿå°±æ— æ³•å®ç°åŠ¨ç”»æ•ˆæœã€‚ è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨è£…é¥°å™¨æ¨¡å¼ï¼ŒåŒ…è£…åŸå§‹åŠ¨ç”»å¯¹è±¡ï¼Œé—´æ¥ç»™å¯¹è±¡åŠ ä¸Šè¯¥å±æ€§çš„get/setæ–¹æ³•ã€‚12345678910111213141516171819202122ButtonWrapper wrapper = new ViewWrapper(button);ObjectAnimator.ofInt(wrapper, \"width\", 500) .setDuration(3000) .start();private static class ViewWrapper { private View mTarget; public ViewWrapper(View target) { mTarget = target; } // ä¸ºå®½åº¦è®¾ç½®get/set public int getWidth() { return mTarget.getLayoutParams().width; } public void setWidth(int width) { mTarget.getLayoutParams().width = width; mTarget.requestLayout(); }} AnimatorSetæœ€åä»‹ç»ç»„åˆåŠ¨ç”»ç±»ï¼Œä»…å±•ç¤ºç”¨æ³•12345678910ObjectAnimator translation = ObjectAnimator.ofFloat(mButton, \"translationX\", curTranslationX, 300,curTranslationX); ObjectAnimator rotate = ObjectAnimator.ofFloat(mButton, \"rotation\", 0f, 360f); ObjectAnimator alpha = ObjectAnimator.ofFloat(mButton, \"alpha\", 1f, 0f, 1f); AnimatorSet animSet = new AnimatorSet(); animSet.play(translation).with(rotate).before(alpha); animSet.setDuration(5000); animSet.start(); Spring AnimationSpringAnimationï¼Œå¼¹ç°§åŠ¨ç”»ï¼Œä½äºandroid.support.animationåŒ…ä¸­ï¼Œå±æ€§åŠ¨ç”»ä½äºandroid.animation.AnimatoråŒ…ä¸­ï¼Œå…¶å®é€šè¿‡ BounceInterpolator æˆ–è€… OvershootInterpolator ä½œä¸ºæ’å€¼å™¨ï¼ŒåŒæ ·å¯ä»¥å®ç°å¼¹æ€§åŠ¨ç”»æ•ˆæœï¼Œå¼•å…¥ SpringAnimation æ˜¯å› ä¸ºå®ƒä½¿ç”¨æ›´ç®€å•ï¼Œè€Œä¸”ä¸Šä¸¤ä¸ªå·®å€¼å™¨å®ç°çš„è½¨è¿¹å¹¶ä¸ç¬¦åˆç‰©ç†å­¦ä¸Šçš„å¼¹è·³æ•ˆæœã€‚ ä½¿ç”¨ä¹‹å‰éœ€è¦å¯¼å…¥com.android.support:support-dynamic-animationåŒ… API12public SpringAnimation(View v, ViewProperty property)public SpringAnimation(View v, ViewProperty property, float finalPosition) å‚æ•°åˆ†åˆ«æ˜¯æ“ä½œå¯¹åº”çš„Viewï¼Œå¯¹åº”çš„å˜åŒ–å±æ€§åŠæœ€ç»ˆçš„ä½ç½®ã€‚ ViewProperty åŒ…æ‹¬(Zè½´æ”¯æŒéœ€è¦API >= 21)ï¼š TRANSLATION_XTRANSLATION_YTRANSLATION_ZSCALE_XSCALE_YROTATIONROTATION_XROTATION_YXYZALPHASCROLL_XSCROLL_Y åœ¨ SpringAnimation ä¸­æœ‰ä¸€ä¸ª SpringForce å¯¹è±¡ï¼Œè´Ÿè´£å¯¹åº”çš„å˜é‡è®¾ç½®åŠä½ç½®è®¡ç®—ã€‚å…¶ä¸­åŒ…æ‹¬ä¸¤ä¸ªä¸ªå…³é”®å˜é‡ Stiffness åˆšåº¦(åŠ²åº¦/å¼¹æ€§)ï¼Œåˆšåº¦è¶Šå¤§ï¼Œå½¢å˜äº§ç”Ÿçš„é‡Œä¹Ÿå°±è¶Šå¤§ï¼Œä½“ç°åœ¨æ•ˆæœä¸Šå°±æ˜¯è¿åŠ¨è¶Šå¿« DampingRatio é˜»å°¼ç³»æ•°ï¼Œç³»æ•°è¶Šå¤§ï¼ŒåŠ¨ç”»åœæ­¢çš„è¶Šå¿«ã€‚ä»ç†è®ºä¸Šè®²åˆ†ä¸ºä¸‰ç§æƒ…å†µ Overdampedè¿‡é˜»å°¼ï¼ˆÎ¶ > 1ï¼‰ã€Critically dampedä¸´ç•Œé˜»å°¼(Î¶ = 1)ã€Underdampedæ¬ é˜»å°¼çŠ¶æ€(0 < Î¶ { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Android","slug":"Android","permalink":"http://yoursite.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://yoursite.com/tags/Android/"},{"name":"åŠ¨ç”»å¼€å‘","slug":"åŠ¨ç”»å¼€å‘","permalink":"http://yoursite.com/tags/åŠ¨ç”»å¼€å‘/"}]},{"title":"LeakCanaryæºç è§£æ","slug":"LeakCanaryæºç è§£æ","date":"2019-02-13T05:28:31.000Z","updated":"2019-03-15T15:27:06.000Z","comments":true,"path":"LeakCanaryæºç è§£æ/","link":"","permalink":"http://yoursite.com/LeakCanaryæºç è§£æ/","excerpt":"å¼•è¨€å†…å­˜æ³„æ¼æ˜¯ Android å¼€å‘ä¸­æ— æ³•é¿å…çš„é—®é¢˜ï¼ŒLeakCanary æ¡†æ¶æ˜¯ Square å…¬å¸å¼€æºçš„å†…å­˜æ³„æ¼åˆ†æå·¥å…·ï¼Œå…¶é›†æˆæ–¹ä¾¿ï¼Œä½¿ç”¨ä¾¿æ·ã€‚","text":"å¼•è¨€å†…å­˜æ³„æ¼æ˜¯ Android å¼€å‘ä¸­æ— æ³•é¿å…çš„é—®é¢˜ï¼ŒLeakCanary æ¡†æ¶æ˜¯ Square å…¬å¸å¼€æºçš„å†…å­˜æ³„æ¼åˆ†æå·¥å…·ï¼Œå…¶é›†æˆæ–¹ä¾¿ï¼Œä½¿ç”¨ä¾¿æ·ã€‚ ActivityLifecycleCallbacksLeakCanary çš„å®ç°åŸºç¡€ä¹‹ä¸€ï¼Œæ˜¯ Android å®˜æ–¹åœ¨4.0ï¼ˆAPI 14ï¼‰ä¹‹åå¼•å…¥çš„ ActivityLifecycleCallbacksï¼Œå®ƒæ˜¯ Application ç±»çš„å†…éƒ¨æ¥å£ï¼Œæä¾›åº”ç”¨ç”Ÿå‘½å‘¨æœŸå›è°ƒçš„æ³¨å†Œæ–¹æ³•ï¼Œä»¥é›†ä¸­ç®¡ç†åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸã€‚ æ¥å£æ–¹æ³•å¯ä»¥çœ‹åˆ°è¯¥æ¥å£å®šä¹‰äº†å¦‚ä¸‹çš„ Activity çš„ç”Ÿå‘½å‘¨æœŸå›è°ƒæ–¹æ³•ï¼Œå…¶ä¸ Activity çš„å®Œæ•´å£°æ˜å‘¨æœŸå‡ ä¹æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚ 123456789public interface ActivityLifecycleCallbacks { void onActivityCreated(Activity activity, Bundle savedInstanceState); void onActivityStarted(Activity activity); void onActivityResumed(Activity activity); void onActivityPaused(Activity activity); void onActivityStopped(Activity activity); void onActivitySaveInstanceState(Activity activity, Bundle outState); void onActivityDestroyed(Activity activity);} ç®€å•ç”¨æ³•å¼€å‘ä¸­å¦‚æœæˆ‘ä»¬æƒ³è¦ç»Ÿä¸€ç®¡ç†é¡¹ç›®ä¸­æ‰€æœ‰çš„ Activityï¼Œå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ ActivityManager å®ç°ï¼Œç„¶ååœ¨ BaseActivity ä¸­å¯¹æ¯ä¸€ä¸ª Activity åš put/get æ“ä½œï¼Œè¯¥åšæ³•çš„ç¼ºé™·æ˜¯æ— æ³•æ§åˆ¶ä¸€äº›ç¬¬ä¸‰æ–¹æ¡†æ¶çš„ Activityã€‚æ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ActivityLifecycleCallbacks ï¼Œåœ¨è‡ªå®šä¹‰çš„ Application ä¸­ç»´æŠ¤ä¸€ä¸ª Activityé“¾è¡¨ï¼Œ ç”±äºæ‰€æœ‰çš„ Activity çš„ç”Ÿå‘½å‘¨æœŸéƒ½ä¼šå›è°ƒè¯¥æ¥å£ï¼Œå°±èƒ½å¤Ÿå®ç°å¯¹æ‰€æœ‰ Activity çš„ç»Ÿä¸€æ§åˆ¶å’Œç®¡ç†ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647public class MyApplication extends Application { public static List activityList; public static final int ACTIVITY_MAX_NUM = 10; @Override public void onCreate() { super.onCreate(); activityList = new LinkedList(); registerActivityLifecycleCallbacks(new MyActivityCallbacks()); } class MyActivityCallbacks implements ActivityLifecycleCallbacks { @Override public void onActivityCreated(Activity activity, Bundle savedInstanceState) { if (activityList.size() >= ACTIVITY_MAX_NUM) { activityList.remove(activityList.size()-1).finish(); } activityList.add(activity); } @Override public void onActivityStarted(Activity activity) { } @Override public void onActivityResumed(Activity activity) { } @Override public void onActivityPaused(Activity activity) { } @Override public void onActivityStopped(Activity activity) { } @Override public void onActivitySaveInstanceState(Activity activity, Bundle outState) { } @Override public void onActivityDestroyed(Activity activity) { activityList.remove(activity); } } public static Activity getCurrentActivity() { return activityList.get(0); }} å¼•ç”¨ç±»å‹åœ¨JDK 1.2ä»¥å‰çš„ç‰ˆæœ¬ä¸­ï¼Œè‹¥ä¸€ä¸ªå¯¹è±¡ä¸è¢«ä»»ä½•å˜é‡å¼•ç”¨ï¼Œé‚£ä¹ˆç¨‹åºå°±æ— æ³•å†ä½¿ç”¨è¿™ä¸ªå¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰å¯¹è±¡å¤„äºå¯è§¦åŠï¼ˆreachableï¼‰çŠ¶æ€ï¼Œç¨‹åºæ‰èƒ½ä½¿ç”¨å®ƒã€‚ä»JDK 1.2ç‰ˆæœ¬å¼€å§‹ï¼ŒæŠŠå¯¹è±¡çš„å¼•ç”¨åˆ†ä¸º4ç§çº§åˆ«ï¼Œä»è€Œä½¿ç¨‹åºèƒ½æ›´åŠ çµæ´»åœ°æ§åˆ¶å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚è¿™4ç§çº§åˆ«ç”±é«˜åˆ°ä½ä¾æ¬¡ä¸ºï¼šå¼ºå¼•ç”¨ã€è½¯å¼•ç”¨ã€å¼±å¼•ç”¨å’Œè™šå¼•ç”¨ã€‚ å¼ºå¼•ç”¨å¼ºå¼•ç”¨ï¼ˆStrongReferenceï¼‰æ˜¯ä½¿ç”¨æœ€æ™®éçš„å¼•ç”¨ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡å…·æœ‰å¼ºå¼•ç”¨ï¼Œé‚£åƒåœ¾å›æ”¶å™¨ç»ä¸ä¼šå›æ”¶å®ƒã€‚å½“å†…å­˜ç©ºé—´ä¸è¶³ï¼ŒJava è™šæ‹Ÿæœºå®æ„¿æŠ›å‡º OutOfMemoryError é”™è¯¯ï¼Œä½¿ç¨‹åºå¼‚å¸¸ç»ˆæ­¢ï¼Œä¹Ÿä¸ä¼šé éšæ„å›æ”¶å…·æœ‰å¼ºå¼•ç”¨çš„å¯¹è±¡æ¥è§£å†³å†…å­˜ä¸è¶³çš„é—®é¢˜ã€‚æ¯”å¦‚ç»å¸¸ä½¿ç”¨çš„A a = new A()ä¸­çš„å¼•ç”¨aã€‚ è½¯å¼•ç”¨è½¯å¼•ç”¨ï¼ˆSoftReferenceï¼‰ç”¨æ¥æè¿°ä¸€äº›æœ‰ç”¨ä½†å¹¶ä¸æ˜¯å¿…éœ€çš„å¯¹è±¡ï¼Œåªæœ‰åœ¨å†…å­˜ä¸è¶³çš„æ—¶å€™ JVM æ‰ä¼šå›æ”¶è¯¥å¯¹è±¡ã€‚å› æ­¤ï¼Œè¿™ä¸€ç‚¹å¯ä»¥å¾ˆå¥½åœ°ç”¨æ¥è§£å†³OOMçš„é—®é¢˜ï¼Œå¹¶ä¸”è¿™ä¸ªç‰¹æ€§å¾ˆé€‚åˆç”¨æ¥å®ç°ç¼“å­˜ï¼šæ¯”å¦‚ç½‘é¡µç¼“å­˜ã€å›¾ç‰‡ç¼“å­˜ç­‰ã€‚ è½¯å¼•ç”¨å¯ä»¥å’Œä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ï¼Œå¦‚æœè½¯å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«JVMå›æ”¶ï¼Œè¿™ä¸ªè½¯å¼•ç”¨å°±ä¼šè¢«åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚12SoftReference sr = new SoftReference(new String(\"hello\"));System.out.println(sr.get()); å¼±å¼•ç”¨å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰ä¸è½¯å¼•ç”¨çš„åŒºåˆ«åœ¨äºï¼šåªå…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡æ‹¥æœ‰æ›´çŸ­æš‚çš„ç”Ÿå‘½å‘¨æœŸã€‚åœ¨åƒåœ¾å›æ”¶å™¨çº¿ç¨‹æ‰«æå®ƒæ‰€ç®¡è¾–çš„å†…å­˜åŒºåŸŸçš„è¿‡ç¨‹ä¸­ï¼Œä¸€æ—¦å‘ç°äº†åªå…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡ï¼Œä¸ç®¡å½“å‰å†…å­˜ç©ºé—´è¶³å¤Ÿä¸å¦ï¼Œéƒ½ä¼šå›æ”¶å®ƒçš„å†…å­˜ã€‚ä¸è¿‡ï¼Œç”±äºåƒåœ¾å›æ”¶å™¨æ˜¯ä¸€ä¸ªä¼˜å…ˆçº§ä½çš„çº¿ç¨‹ï¼Œå› æ­¤ä¸ä¸€å®šä¼šå¾ˆå¿«å‘ç°é‚£äº›åªå…·æœ‰å¼±å¼•ç”¨çš„å¯¹è±¡ã€‚12345WeakReference sr = new WeakReference(new String(\"hello\")); System.out.println(sr.get());System.gc(); //é€šçŸ¥JVMçš„gcè¿›è¡Œåƒåœ¾å›æ”¶System.out.println(sr.get()); æ‰“å°çš„ç»“æœä¸º hellonull å¼±å¼•ç”¨å¯ä»¥å’Œä¸€ä¸ªå¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ï¼Œå½“å¼±å¼•ç”¨æ‰€å¼•ç”¨çš„å¯¹è±¡è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼ŒJava è™šæ‹Ÿæœºå°±ä¼šæŠŠè¿™ä¸ªå¼±å¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚12ReferenceQueue queue = new ReferenceQueue();WeakReference pr = new WeakReference(object, queue); è™šå¼•ç”¨PhantomReferenceï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å½¢åŒè™šè®¾ã€‚ä¸å…¶ä»–å‡ ç§å¼•ç”¨éƒ½ä¸åŒï¼Œè™šå¼•ç”¨å¹¶ä¸ä¼šå†³å®šå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡ä»…æŒæœ‰è™šå¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒå°±å’Œæ²¡æœ‰ä»»ä½•å¼•ç”¨ä¸€æ ·ï¼ŒæŸ¥çœ‹æºç å¯ä»¥å‘ç°ï¼Œå…¶get()æ°¸è¿œè¿”å›null è™šå¼•ç”¨ä¸»è¦ç”¨æ¥è·Ÿè¸ªå¯¹è±¡è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶çš„æ´»åŠ¨ã€‚è™šå¼•ç”¨ä¸è½¯å¼•ç”¨ã€å¼±å¼•ç”¨çš„ä¸€ä¸ªåŒºåˆ«åœ¨äºï¼šè™šå¼•ç”¨å¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ— ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ã€‚å½“åƒåœ¾å›æ”¶å™¨å‡†å¤‡å›æ”¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœå‘ç°å®ƒè¿˜æœ‰è™šå¼•ç”¨ï¼Œå°±ä¼šåœ¨å›æ”¶å¯¹è±¡çš„å†…å­˜ä¹‹å‰ï¼ŒæŠŠè¿™ä¸ªè™šå¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚ 12345678910public class PhantomReference extends Reference { public T get() { return null; } public PhantomReference(T referent, ReferenceQueue q) { super(referent, q); }} LeakCanaryæºç å®é™…ä¸Š LeakCanary æ­£æ˜¯åˆ©ç”¨ Activity çš„ç”Ÿå‘½å‘¨æœŸå›è°ƒï¼Œé…åˆå¼±å¼•ç”¨æ£€æµ‹å®ç°å†…å­˜æ³„æ¼çš„åˆ†æã€‚ æ‰§è¡Œæµç¨‹è·Ÿè¸ªè°ƒç”¨çš„å…¥å£æ–¹æ³•install12345public static @NonNull RefWatcher install(@NonNull Application application) { return refWatcher(application).listenerServiceClass(DisplayLeakService.class) .excludedRefs(AndroidExcludedRefs.createAppDefaults().build()) .buildAndInstall();} listenerServiceClassæ–¹æ³•ä½äº AndroidRefWatcherBuilder 123456public @NonNull AndroidRefWatcherBuilder listenerServiceClass( @NonNull Class listenerServiceClass) { enableDisplayLeakActivity = DisplayLeakService.class.isAssignableFrom(listenerServiceClass); return heapDumpListener(new ServiceHeapDumpListener(context, listenerServiceClass));} è¯¥ç±»çš„çˆ¶ç±»ï¼ˆRefWatcherBuilderï¼‰å·²ç»é»˜è®¤å®ç° heapDumpListener å’ŒexcludedRefsæ–¹æ³•ï¼ˆå®šä¹‰ä¸€äº›å¼€å‘è€…å¯ä»¥å¿½ç•¥çš„è·¯å¾„ï¼Œå³ä½¿å‘ç”Ÿäº†å†…å­˜æ³„æ¼ï¼ŒLeakCanary ä¹Ÿä¸ä¼šå¼¹å‡ºé€šçŸ¥ã€‚å¤§å¤šæ˜¯ç³»ç»Ÿ Bug å¯¼è‡´ï¼‰ã€‚ä¸‹é¢æ¥çœ‹æœ€ç»ˆè°ƒç”¨çš„æ–¹æ³•ï¼š 12345678910111213141516171819public @NonNull RefWatcher buildAndInstall() { if (LeakCanaryInternals.installedRefWatcher != null) { throw new UnsupportedOperationException(\"buildAndInstall() should only be called once.\"); } RefWatcher refWatcher = build(); if (refWatcher != DISABLED) { if (enableDisplayLeakActivity) { LeakCanaryInternals.setEnabledAsync(context, DisplayLeakActivity.class, true); } if (watchActivities) { ActivityRefWatcher.install(context, refWatcher); } if (watchFragments) { FragmentRefWatcher.Helper.install(context, refWatcher); } } LeakCanaryInternals.installedRefWatcher = refWatcher; return refWatcher;} è¯¥æ–¹æ³•ä¸»è¦åšäº†ä¸‰ä»¶äº‹ï¼šBuild RefWatcherï¼›å¯ç”¨ DisplayLeakActivityï¼Œ ç”¨äºæ˜¾ç¤ºæ€§èƒ½ç»Ÿè®¡ç»“æœï¼›install ActivityRefWatcherã€‚ç»§ç»­è·Ÿè¸ªinstallæ–¹æ³• 1234567891011121314public static void install(@NonNull Context context, @NonNull RefWatcher refWatcher) { Application application = (Application) context.getApplicationContext(); ActivityRefWatcher activityRefWatcher = new ActivityRefWatcher(application, refWatcher); application.registerActivityLifecycleCallbacks(activityRefWatcher.lifecycleCallbacks);}//æˆå‘˜å˜é‡ lifecycleCallbacksprivate final Application.ActivityLifecycleCallbacks lifecycleCallbacks = new ActivityLifecycleCallbacksAdapter { @Override public void onActivityDestroyed(Activity activity) { refWatcher.watch(activity); } }; ç”±æ­¤å¯çŸ¥ LeakCanary å†…éƒ¨å®ç°äº†å¯¹ Activity ç”Ÿå‘½å‘¨æœŸçš„ç›‘å¬ï¼ŒActivityLifecycleCallbacksAdapter å…¶å®æ˜¯å¯¹ Application.ActivityLifecycleCallbacks ä¸­æ‰€æœ‰æ–¹æ³•éƒ½åšäº†ç©ºå®ç°çš„æŠ½è±¡ç±»ã€‚ watchæ–¹æ³•ç”± RefWatcher é»˜è®¤å®ç°ï¼š 12345678public void watch(Object watchedReference, String referenceName) { ...... retainedKeys.add(key); final KeyedWeakReference reference = new KeyedWeakReference(watchedReference, key, referenceName, queue); ensureGoneAsync(watchStartNanoTime, reference);} å…¶ä¸­ retainedKeys æ˜¯ä¸€ä¸ª Set é›†åˆï¼Œæ¯ä¸ªæ£€æµ‹çš„å¯¹è±¡éƒ½å¯¹åº”ä¸€ä¸ªå”¯ä¸€çš„ keyï¼Œå­˜å‚¨åœ¨ retainedKeys ä¸­ã€‚KeyedWeakReference æ˜¯ WeakReference çš„å­ç±»ï¼Œåœ¨å…¶åŸºç¡€ä¸Šæ·»åŠ äº† key å’Œ name ä¸¤ä¸ªå±æ€§ç”¨ä»¥è·Ÿè¸ªè®°å½•ã€‚å…¶ä¸­ä¼ å…¥äº†ä¸€ä¸ª queue å‚æ•°ï¼Œæ˜æ˜¾æ˜¯å¼•ç”¨é˜Ÿåˆ—ã€‚ 1234567private void ensureGoneAsync(final long watchStartNanoTime, final KeyedWeakReference reference) { watchExecutor.execute(new Retryable() { @Override public Retryable.Result run() { return ensureGone(reference, watchStartNanoTime); } });} watchExecutor ä¸º AndroidWatchExecutor å¯¹è±¡12345678910111213141516public AndroidWatchExecutor(long initialDelayMillis) { mainHandler = new Handler(Looper.getMainLooper()); HandlerThread handlerThread = new HandlerThread(LEAK_CANARY_THREAD_NAME); handlerThread.start(); backgroundHandler = new Handler(handlerThread.getLooper()); this.initialDelayMillis = initialDelayMillis; maxBackoffFactor = Long.MAX_VALUE / initialDelayMillis;}@Override public void execute(@NonNull Retryable retryable) { if (Looper.getMainLooper().getThread() == Thread.currentThread()) { waitForIdle(retryable, 0); } else { postWaitForIdle(retryable, 0); }} åœ¨executeä¸­ï¼Œä¸ç®¡æ˜¯waitForIdleè¿˜æ˜¯postWaitForIdleéƒ½ä¼šåˆ‡æ¢åˆ°ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œæœ€ç»ˆä¼šè°ƒç”¨ä»¥ä¸‹ä»£ç ï¼š123456Looper.myQueue().addIdleHandler(new MessageQueue.IdleHandler() { @Override public boolean queueIdle() { postToBackgroundWithDelay(retryable, failedAttempts); return false; } }); é‚£ä¹ˆ IdleHandler åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ æˆ‘ä»¬éƒ½çŸ¥é“ Handler æ˜¯å¾ªç¯å¤„ç† MessageQueue ä¸­çš„æ¶ˆæ¯çš„ï¼Œå½“æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ²¡æœ‰æ›´å¤šæ¶ˆæ¯éœ€è¦å¤„ç†ï¼Œä¸”å£°æ˜äº† IdleHandler æ¥å£çš„æ—¶å€™ï¼Œå°±ä¼šå»å¤„ç†è¿™é‡Œçš„æ“ä½œã€‚å³æŒ‡å®šä¸€äº›æ“ä½œï¼Œå½“çº¿ç¨‹ç©ºé—²çš„æ—¶å€™æ¥å¤„ç†ï¼Œæ­¤å¤„æ‰§è¡Œçš„ä¾¿æ˜¯å†…å­˜æ³„æ¼æ£€æµ‹å·¥ä½œã€‚ ensureGoneAsyncæ–¹æ³•æœ€ç»ˆä¼šè°ƒç”¨ensureGone 123456789101112131415161718192021Retryable.Result ensureGone(final KeyedWeakReference reference, final long watchStartNanoTime) { ...... removeWeaklyReachableReferences(); ...... gcTrigger.runGc(); removeWeaklyReachableReferences(); if (!gone(reference)) { ...... File heapDumpFile = heapDumper.dumpHeap(); ...... HeapDump heapDump = heapDumpBuilder.heapDumpFile(heapDumpFile).referenceKey(reference.key) .referenceName(reference.name) .watchDurationMs(watchDurationMs) .gcDurationMs(gcDurationMs) .heapDumpDurationMs(heapDumpDurationMs) .build(); heapdumpListener.analyze(heapDump); } return DONE;} removeWeaklyReachableReferenceséå†å¼•ç”¨é˜Ÿåˆ— queueï¼Œåˆ¤æ–­é˜Ÿåˆ—ä¸­æ˜¯å¦å­˜åœ¨å½“å‰ Activity çš„å¼±å¼•ç”¨ï¼Œå­˜åœ¨åˆ™åˆ é™¤ retainedKeys ä¸­å¯¹åº”å¼•ç”¨çš„ keyå€¼ã€‚ è°ƒç”¨gcTrigger.runGcå»è¿›è¡Œå†…å­˜å›æ”¶ï¼Œè¿™é‡Œæ²¡æœ‰ä½¿ç”¨System.gcï¼Œæ˜¯å› ä¸ºå®ƒä»…ä»…æ˜¯é€šçŸ¥ç³»ç»Ÿåœ¨åˆé€‚çš„æ—¶é—´è¿›è¡Œä¸€æ¬¡åƒåœ¾å›æ”¶æ“ä½œï¼Œå¹¶ä¸èƒ½ä¿è¯ä¸€å®šæ‰§è¡Œã€‚ ä¸»åŠ¨è¿›è¡Œ GC ä¹‹åä¼šå†æ¬¡è°ƒç”¨removeWeaklyReachableReferencesæ¸…é™¤ retainedKeys ä¸­å¼±å¼•ç”¨çš„ key å€¼ï¼Œå†åˆ¤æ–­æ˜¯å¦ç§»é™¤ã€‚å¦‚æœä»ç„¶æ²¡æœ‰ç§»é™¤ï¼Œåˆ¤å®šä¸ºå†…å­˜æ³„æ¼ã€‚ ç”Ÿæˆæ€§èƒ½ç»Ÿè®¡æ–‡ä»¶.hprofï¼Œè¿›è¡Œå†…å­˜æ³„æ¼çš„åˆ†æã€‚ é‚£ä¹ˆ hprof æ–‡ä»¶æ˜¯è¢«è§£ææˆä¿¡æ¯çš„å‘¢ 1AnalysisResult result = heapAnalyzer.checkForLeak(heapDump.heapDumpFile, heapDump.referenceKey); 12345678910public AnalysisResult checkForLeak(File heapDumpFile, String referenceKey) { ...... MemoryMappedFileBuffer e = new MemoryMappedFileBuffer(heapDumpFile); HprofParser parser = new HprofParser(e); Snapshot snapshot = parser.parse(); this.deduplicateGcRoots(snapshot); Instance leakingRef = this.findLeakingReference(referenceKey, snapshot); return leakingRef == null ? AnalysisResult.noLeak(this.since(analysisStartNanoTime)) ï¼š this.findLeakTrace(analysisStartNanoTime, snapshot, leakingRef);} checkForLeakæ–¹æ³•ä½¿ç”¨äº† Square å…¬å¸çš„å¦ä¸€ä¸ªåº“ haha æ¥åˆ†æ Android heap dumpï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ‰§è¡Œè½¬åŒ–çš„æ–¹æ³•ä¸º HprofParser çš„parseæ–¹æ³•ï¼Œç„¶åå†å°†è½¬åŒ–çš„ä¿¡æ¯å°è£…æˆ AnalysisResult å¯¹è±¡ï¼Œå…¶ä¸­ HprofParser æ˜¯è‡ªå®šä¹‰çš„ç±»ï¼Œé‡Œé¢æœ‰ä¸€å®šçš„ç¯‡å¹…è§£æ .hprof æ–‡ä»¶ã€‚ å¾—åˆ°ç»“æœåå›è°ƒç»™ DisplayLeakServiceï¼Œè¯¥ Service ä¼šæ ¹æ®ä¼ å…¥è¿›æ¥çš„æ•°æ®å‘é€é€šçŸ¥ï¼Œå­˜å…¥æ•°æ®ã€‚ç‚¹å‡»å¯¹åº”çš„é€šçŸ¥è¿›å…¥ DisplayLeakActivity ç•Œé¢ï¼Œå°±èƒ½æŸ¥çœ‹æ³„æ¼æ—¥å¿—ã€‚ æ€»ç»“LeakCanary æ£€æµ‹å†…å­˜æ³„æ¼çš„è®¾è®¡æ€è·¯ååˆ†å·§å¦™ã€æ¸…æ™°ã€‚æ•´ä¸ªæ¡†æ¶å¯¹äº ActivityLifecycleCallbacksã€WeakReferenceã€ReferenceQueue å’Œ IdleHandler çš„ä½¿ç”¨ï¼Œå››å¤§ç»„ä»¶çš„å¼€å¯å’Œå…³é—­ç­‰ç­‰ï¼Œéƒ½å¾ˆæœ‰æ„æ€ï¼Œå€¼å¾—æ·±å’Œå€Ÿé‰´ã€‚ document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Android","slug":"Android","permalink":"http://yoursite.com/categories/Android/"}],"tags":[{"name":"Android","slug":"Android","permalink":"http://yoursite.com/tags/Android/"},{"name":"å†…å­˜æ³„æ¼","slug":"å†…å­˜æ³„æ¼","permalink":"http://yoursite.com/tags/å†…å­˜æ³„æ¼/"},{"name":"æºç ","slug":"æºç ","permalink":"http://yoursite.com/tags/æºç /"}]},{"title":"Javaè®¾è®¡æ¨¡å¼ï¼šåˆ›å»ºå‹æ¨¡å¼","slug":"Javaè®¾è®¡æ¨¡å¼ï¼šåˆ›å»ºå‹æ¨¡å¼","date":"2019-01-20T16:58:21.000Z","updated":"2019-03-15T15:27:56.000Z","comments":true,"path":"Javaè®¾è®¡æ¨¡å¼ï¼šåˆ›å»ºå‹æ¨¡å¼/","link":"","permalink":"http://yoursite.com/Javaè®¾è®¡æ¨¡å¼ï¼šåˆ›å»ºå‹æ¨¡å¼/","excerpt":"è®¾è®¡æ¨¡å¼åŠå…¶åˆ†ç±»è®¾è®¡æ¨¡å¼è®¾è®¡æ¨¡å¼ï¼ˆDesign patternï¼‰æ˜¯è½¯ä»¶å¼€å‘äººå‘˜åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­é¢ä¸´çš„ä¸€èˆ¬é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚è¿™äº›è§£å†³æ–¹æ¡ˆæ˜¯ä¼—å¤šè½¯ä»¶å¼€å‘äººå‘˜ç»è¿‡ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´çš„è¯•éªŒå’Œé”™è¯¯æ€»ç»“å‡ºæ¥çš„ã€‚ 1994 å¹´ï¼ŒErich Gammaã€Richard Helmã€Ralph Johnson å’Œ John Vlissides å››äººåˆè‘—å‡ºç‰ˆäº†ä¸€æœ¬ã€ŠDesign Patterns - Elements of Reusable Object-Oriented Softwareï¼ˆè®¾è®¡æ¨¡å¼ - å¯å¤ç”¨çš„é¢å‘å¯¹è±¡è½¯ä»¶å…ƒç´ ï¼‰ã€‹ çš„ä¹¦ï¼Œè¯¥ä¹¦é¦–æ¬¡æåˆ°äº†è½¯ä»¶å¼€å‘ä¸­è®¾è®¡æ¨¡å¼çš„æ¦‚å¿µã€‚","text":"è®¾è®¡æ¨¡å¼åŠå…¶åˆ†ç±»è®¾è®¡æ¨¡å¼è®¾è®¡æ¨¡å¼ï¼ˆDesign patternï¼‰æ˜¯è½¯ä»¶å¼€å‘äººå‘˜åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­é¢ä¸´çš„ä¸€èˆ¬é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚è¿™äº›è§£å†³æ–¹æ¡ˆæ˜¯ä¼—å¤šè½¯ä»¶å¼€å‘äººå‘˜ç»è¿‡ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´çš„è¯•éªŒå’Œé”™è¯¯æ€»ç»“å‡ºæ¥çš„ã€‚ 1994 å¹´ï¼ŒErich Gammaã€Richard Helmã€Ralph Johnson å’Œ John Vlissides å››äººåˆè‘—å‡ºç‰ˆäº†ä¸€æœ¬ã€ŠDesign Patterns - Elements of Reusable Object-Oriented Softwareï¼ˆè®¾è®¡æ¨¡å¼ - å¯å¤ç”¨çš„é¢å‘å¯¹è±¡è½¯ä»¶å…ƒç´ ï¼‰ã€‹ çš„ä¹¦ï¼Œè¯¥ä¹¦é¦–æ¬¡æåˆ°äº†è½¯ä»¶å¼€å‘ä¸­è®¾è®¡æ¨¡å¼çš„æ¦‚å¿µã€‚ å››ä½ä½œè€…åˆç§° GOFï¼ˆå››äººå¸®ï¼Œå…¨æ‹¼ Gang of Fourï¼‰ã€‚ä»–ä»¬æ‰€æå‡ºçš„è®¾è®¡æ¨¡å¼ä¸»è¦æ˜¯åŸºäºä»¥ä¸‹çš„é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™ã€‚ å¯¹æ¥å£ç¼–ç¨‹è€Œä¸æ˜¯å¯¹å®ç°ç¼–ç¨‹ã€‚ ä¼˜å…ˆä½¿ç”¨å¯¹è±¡ç»„åˆè€Œä¸æ˜¯ç»§æ‰¿ã€‚ åˆ†ç±»æ¨¡å¼æè¿°åŒ…å«åˆ›å»ºå‹æ¨¡å¼å·¥å‚æ¨¡å¼ï¼ˆFactory Patternï¼‰æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰ç»“æ„å‹æ¨¡å¼è¿™äº›è®¾è®¡æ¨¡å¼å…³æ³¨ç±»å’Œå¯¹è±¡çš„ç»„åˆã€‚ç»§æ‰¿çš„æ¦‚å¿µè¢«ç”¨æ¥ç»„åˆæ¥å£å’Œå®šä¹‰ç»„åˆå¯¹è±¡è·å¾—æ–°åŠŸèƒ½çš„æ–¹å¼ã€‚é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰è¿‡æ»¤å™¨æ¨¡å¼ï¼ˆFilterã€Criteria Patternï¼‰ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰å¤–è§‚æ¨¡å¼ï¼ˆFacade Patternï¼‰äº«å…ƒæ¨¡å¼ï¼ˆFlyweight Patternï¼‰ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰è¡Œä¸ºå‹æ¨¡å¼è¿™äº›è®¾è®¡æ¨¡å¼ç‰¹åˆ«å…³æ³¨å¯¹è±¡ä¹‹é—´çš„é€šä¿¡ã€‚è´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibility Patternï¼‰å‘½ä»¤æ¨¡å¼ï¼ˆCommand Patternï¼‰è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreter Patternï¼‰è¿­ä»£å™¨æ¨¡å¼ï¼ˆIterator Patternï¼‰ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediator Patternï¼‰å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMemento Patternï¼‰è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰çŠ¶æ€æ¨¡å¼ï¼ˆState Patternï¼‰ç©ºå¯¹è±¡æ¨¡å¼ï¼ˆNull Object Patternï¼‰ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰æ¨¡æ¿æ¨¡å¼ï¼ˆTemplate Patternï¼‰è®¿é—®è€…æ¨¡å¼ï¼ˆVisitor Patternï¼‰ å¯ä»¥ä½¿ç”¨ä¸€å¼ å›¾æ¥å±•ç¤ºè®¾è®¡æ¨¡å¼ä¹‹é—´çš„å…³ç³»ï¼š å…­ä¸ªåŸåˆ™ï¼š å¼€é—­åŸåˆ™ï¼ˆOpen Close Principleï¼‰ å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚ é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰ åŸºç±»å¯ä»¥å‡ºç°çš„ä»»ä½•åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºç°ã€‚ ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰ é’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œä¸ä¾èµ–äºå…·ä½“ã€‚ æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰ é™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦ã€‚ è¿ªç±³ç‰¹æ³•åˆ™ï¼Œåˆç§°æœ€å°‘çŸ¥é“åŸåˆ™ï¼ˆDemeter Principleï¼‰ å®ä½“åº”å½“å°½é‡å°‘åœ°ä¸å…¶ä»–å®ä½“å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œç³»ç»ŸåŠŸèƒ½æ¨¡å—åº”ç›¸å¯¹ç‹¬ç«‹ã€‚ åˆæˆå¤ç”¨åŸåˆ™ï¼ˆComposite Reuse Principleï¼‰ å°½é‡ä½¿ç”¨åˆæˆ/èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿ã€‚ ä¸‰å¤§è®¾è®¡æ¨¡å¼å’Œå…­ä¸ªåŸåˆ™æ„æˆäº†è½¯ä»¶è®¾è®¡æ¨¡å¼çš„åŸºæœ¬å†…å®¹ï¼Œä¸‹é¢å°†ä»‹ç»åˆ›å»ºè€…æ¨¡å¼ã€‚ åˆ›å»ºè€…æ¨¡å¼å·¥å‚æ¨¡å¼åˆ›å»ºå¯¹è±¡æ—¶ä¸æš´éœ²åˆ›å»ºé€»è¾‘ï¼Œé€šè¿‡ä½¿ç”¨å…±åŒçš„æ¥å£æ¥æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ å·¥å‚æ¨¡å¼å¯åˆ†ä¸ºç®€å•å·¥å‚ã€å·¥å‚æ–¹æ³•ã€æŠ½è±¡å·¥å‚ã€‚ ç®€å•å·¥å‚å·¥å‚ç±»ï¼ˆSimpleFactoryï¼‰æ‹¥æœ‰ä¸€ä¸ªå·¥å‚æ–¹æ³•ï¼ˆcreateï¼‰ï¼Œæ¥å—äº†ä¸€ä¸ªå‚æ•°ï¼Œé€šè¿‡ä¸åŒçš„å‚æ•°å®ä¾‹åŒ–ä¸åŒçš„äº§å“ç±»ã€‚ ç®€å•å·¥å‚ç®€å•ç²—æš´ï¼Œä½†æ˜¯å…¶ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œä¸€æ˜¯å½“äº§å“ç§ç±»ç¹å¤šæ—¶ä»£ç é‡æé«˜ï¼ŒäºŒæ˜¯å¢åŠ æ–°äº§å“æ—¶ï¼Œéœ€è¦ä¿®æ”¹å·¥å‚å®ç°ï¼Œè¿èƒŒå¼€é—­åŸåˆ™ï¼ˆå¯¹æ‹“å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼‰ã€‚å·¥å‚æ–¹æ³•æ­£å¥½å¯ä»¥è§£å†³ç®€å•å·¥å‚çš„è¿™ä¸¤ä¸ªç¼ºç‚¹ã€‚ å·¥å‚æ–¹æ³•å·¥å‚æ–¹æ³•é’ˆå¯¹æ¯ä¸€ç§äº§å“æä¾›ä¸€ä¸ªå·¥å‚ç±»ï¼Œé€šè¿‡ä¸åŒçš„å·¥å‚å®ä¾‹ï¼Œåˆ›å»ºä¸åŒçš„äº§å“å®ä¾‹ã€‚ ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å·¥å‚æ–¹æ³•ä¸­ï¼Œå¢åŠ äº§å“ç§ç±»å¹¶ä¸éœ€è¦ä¿®æ”¹å·¥å‚ç±»ï¼Œåªéœ€è¦æ·»åŠ ç›¸åº”çš„å·¥å‚å³å¯ï¼Œç¬¦åˆå¼€æ”¾-å°é—­åŸåˆ™ã€‚å…¶ç¼ºç‚¹åœ¨äºï¼Œå¯¹äºæŸäº›å¯ä»¥å½¢æˆäº§å“æ—çš„æƒ…å†µï¼Œå¤„ç†èµ·æ¥æ¯”è¾ƒå¤æ‚ï¼Œè¿™ä¸€é—®é¢˜ä½¿ç”¨æŠ½è±¡å·¥å‚è§£å†³ã€‚ æŠ½è±¡å·¥å‚å·¥å‚æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§æç«¯æƒ…å†µçš„æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆå³åªç”Ÿäº§ä¸€ç§äº§å“çš„æŠ½è±¡å·¥å‚æ¨¡å¼ï¼‰ï¼Œè€ŒæŠ½è±¡å·¥å‚æ¨¡å¼å¯ä»¥çœ‹æˆæ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„ä¸€ç§æ¨å¹¿ï¼Œå…¶é¢å¯¹äº§å“æ—ã€‚ ä»¥ä¸Šä»‹ç»çš„ä¸‰ç§å·¥å‚æ–¹æ³•å„æœ‰ä¼˜ç¼ºç‚¹ ç®€å•å·¥å‚ï¼š ç”¨æ¥ç”Ÿäº§åŒä¸€ç­‰çº§ç»“æ„ä¸­çš„ä»»æ„äº§å“ã€‚ï¼ˆä¸æ”¯æŒæ‹“å±•å¢åŠ äº§å“ï¼‰ å·¥å‚æ–¹æ³•ï¼šç”¨æ¥ç”Ÿäº§åŒä¸€ç­‰çº§ç»“æ„ä¸­çš„å›ºå®šäº§å“ã€‚ï¼ˆæ”¯æŒæ‹“å±•å¢åŠ äº§å“ï¼‰ æŠ½è±¡å·¥å‚ï¼šç”¨æ¥ç”Ÿäº§ä¸åŒäº§å“æ—çš„å…¨éƒ¨äº§å“ã€‚ï¼ˆä¸æ”¯æŒæ‹“å±•å¢åŠ äº§å“ï¼›æ”¯æŒå¢åŠ äº§å“æ—ï¼‰ å•ä¾‹æ¨¡å¼ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚å…¶å…³é”®åœ¨äºæ„é€ æ–¹æ³•æ˜¯ç§æœ‰çš„ï¼Œé¢å‘æ‰€æœ‰å¯¹è±¡æä¾›å…¨å±€å•ä¾‹ã€‚å•ä¾‹æ¨¡å¼çš„ç¼ºé™·åœ¨äºæ²¡æœ‰æŠ½è±¡å±‚ï¼Œæ— æ³•è¿›è¡Œæ‹“å±•ï¼ŒåŒæ—¶å…¶ç±»ç»“æ„å¤æ‚ï¼Œè¿èƒŒäº†å•ä¸€èŒè´£åŸåˆ™ã€‚ å•ä¾‹æ¨¡å¼å¯åˆ†ä¸ºçº¿ç¨‹å®‰å…¨æ‡’æ±‰å¼ã€çº¿ç¨‹ä¸å®‰å…¨æ‡’æ±‰å¼ã€é¥¿æ±‰å¼ã€åŒé‡æ£€æŸ¥é”å¼ä»¥åŠé™æ€å†…éƒ¨ç±»ç­‰å¤šç§å®ç°æ–¹å¼ã€‚ æ‡’æ±‰å¼æ”¯æŒå»¶è¿Ÿåˆå§‹åŒ–ï¼Œä»£ç å¦‚ä¸‹ï¼Œç”±äºå…¶ä¸æ”¯æŒå¤šçº¿ç¨‹ï¼Œä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´å¹¶ä¸ç®—å•ä¾‹æ¨¡å¼ã€‚ 123456789101112public class Singleton { private static Singleton instance; private Singleton (){} public static Singleton getInstance() { if (instance == null) { instance = new Singleton(); } return instance; } } è¦æ”¯æŒå¤šçº¿ç¨‹ï¼Œå¯ä»¥ç»™getInstanceæ–¹æ³•åŠ é”synchronizedï¼Œä½†æ˜¯æ•ˆç‡ä¼šå˜å¾—å¾ˆä½ã€‚ é¥¿æ±‰å¼ä¸ä¼šå»¶è¿Ÿåˆå§‹åŒ–ï¼Œå¤šçº¿ç¨‹å®‰å…¨ï¼Œç”±äºæ²¡æœ‰åŠ é”ï¼Œæ‰€ä»¥æ•ˆç‡æ›´é«˜ã€‚ç¼ºç‚¹æ˜¯ç±»åŠ è½½æ—¶å°±åˆå§‹åŒ–ï¼Œå ç”¨å†…å­˜ï¼ŒåŒæ—¶ä¹Ÿå¾ˆå®¹æ˜“äº§ç”Ÿåƒåœ¾å¯¹è±¡ã€‚ 123456789public class Singleton { private static Singleton instance = new Singleton(); private Singleton (){} public static Singleton getInstance() { return instance; } } åŒæ£€å¼åŒæ£€å³Double Checked Lockingï¼Œå®‰å…¨ã€æ”¯æŒå»¶è¿Ÿåˆå§‹åŒ–ä¸”åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹èƒ½ä¿æŒé«˜æ€§èƒ½ã€‚getInstance çš„æ€§èƒ½å¯¹åº”ç”¨ç¨‹åºå¾ˆå…³é”®ã€‚ 12345678910111213141516public class Singleton { private volatile static Singleton singleton; private Singleton (){} public static Singleton getSingleton() { if (singleton == null) { synchronized (Singleton.class) { if (singleton == null) { singleton = new Singleton(); } } } return singleton; } } è¯¥æ–¹æ³•ä½¿ç”¨äº†å…³é”®å­—volatileï¼Œå…³äºè¯¥å…³é”®å­—çš„åˆ†æï¼šJavaå¹¶å‘ç¼–ç¨‹ï¼švolatileå…³é”®å­—è§£æ åœ¨ä¸ä½¿ç”¨ volatile æ—¶ï¼Œå‡è®¾ä¸¤ä¸ªçº¿ç¨‹Aã€Bç¬¬ä¸€æ¬¡è°ƒç”¨å•ä¾‹æ–¹æ³•ï¼Œå¦‚æœçº¿ç¨‹Aå…ˆæ‰§è¡Œ instance = new Instance()ï¼Œç”±äºæ„é€ æ–¹æ³•æ˜¯ä¸€ä¸ªéåŸå­æ“ä½œï¼Œç¼–è¯‘åä¼šç”Ÿæˆå¤šæ¡å­—èŠ‚ç æŒ‡ä»¤ï¼Œå› ä¸º Java çš„æŒ‡ä»¤é‡æ’åºï¼Œå¯èƒ½ä¼šå…ˆæ‰§è¡Œ instance çš„èµ‹å€¼æ“ä½œâ€”â€”åœ¨å†…å­˜ä¸­å¼€è¾Ÿä¸€ç‰‡å­˜å‚¨å¯¹è±¡çš„åŒºåŸŸï¼Œç„¶åç›´æ¥è¿”å›å†…å­˜çš„å¼•ç”¨ã€‚æ­¤æ—¶è™½ç„¶ instance ä¸ä¸ºç©ºï¼Œä½†å®é™…çš„åˆå§‹åŒ–æ“ä½œå´è¿˜æœªæ‰§è¡Œï¼Œå¦‚æœçº¿ç¨‹Bè¿›å…¥ï¼Œå°±ä¼šçœ‹åˆ°ä¸€ä¸ªä¸ä¸ºç©ºçš„ä½†æ˜¯ä¸å®Œæ•´ï¼ˆæ²¡æœ‰å®Œæˆåˆå§‹åŒ–ï¼‰çš„ instance å¯¹è±¡ã€‚volatile å…³é”®å­—ä¿è¯ä¸åŒçº¿ç¨‹å¯¹å˜é‡è¿›è¡Œæ“ä½œæ—¶çš„å¯è§æ€§ï¼Œç¦æ­¢æŒ‡ä»¤é‡æ’åºä¼˜åŒ–ï¼Œä»è€Œå®‰å…¨çš„å®ç°å•ä¾‹ã€‚ é™æ€å†…éƒ¨ç±»å¼èƒ½è¾¾åˆ°åŒæ£€é”æ–¹å¼ä¸€æ ·çš„åŠŸæ•ˆï¼Œä½†å®ç°æ›´ç®€å•ã€‚è¿™ç§æ–¹å¼åªé€‚ç”¨äºé™æ€åŸŸçš„æƒ…å†µï¼ŒåŒæ£€é”æ–¹å¼å¯åœ¨å®ä¾‹åŸŸéœ€è¦å»¶è¿Ÿåˆå§‹åŒ–æ—¶ä½¿ç”¨ã€‚ ä¸åŒæ£€å¼æ–¹å¼ä¸€æ ·åˆ©ç”¨ClassLoderæœºåˆ¶æ¥ä¿è¯åˆå§‹åŒ–instanceæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚å…³äº ClassLoaderï¼šä¸€çœ‹ä½ å°±æ‡‚ï¼Œè¶…è¯¦ç»†javaä¸­çš„ClassLoaderè¯¦è§£ 123456789101112public class Singleton { private static class SingletonHolder { private static final Singleton INSTANCE = new Singleton(); } private Singleton (){} public static final Singleton getInstance() { return SingletonHolder.INSTANCE; } } ç›¸è¾ƒäºåŒé‡æ£€æŸ¥é”ï¼Œç”±äºé™æ€å†…éƒ¨ç±»çš„ç‰¹æ€§â€”â€”éœ€è¦ä½¿ç”¨æ‰ä¼šè£…è½½åˆ°å†…å­˜ä¸­ï¼Œæ‰€ä»¥å®é™…ä¸Šåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨getInstanceä¹‹å‰ï¼ŒSingletonHolder æ˜¯æ²¡æœ‰è¢«è£…è½½è¿›æ¥çš„ï¼Œåªæœ‰åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨äº† getInstance() ä¹‹åï¼Œå†…éƒ¨é™æ€ç±»çš„å®ä¾‹æ‰ä¼šçœŸæ­£è£…è½½ã€‚ æšä¸¾å®ç°å•ä¾‹æ¨¡å¼çš„æœ€ä½³æ–¹æ³•ã€‚ç®€æ´ã€æ”¯æŒåºåˆ—åŒ–ã€ç»å¯¹é˜²æ­¢å¤šæ¬¡å®ä¾‹åŒ–ã€‚ 123456public enum Singleton { INSTANCE; public void whateverMethod() {} } å»ºé€ è€…æ¨¡å¼ä½¿ç”¨å¤šä¸ªç®€å•çš„å¯¹è±¡é€æ­¥æ„å»ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ã€‚ä¸‹é¢çš„ä¾‹å­æ¯”è¾ƒç®€å•ç›´è§‚ï¼Œå®é™…ä¸Šåœ¨å¤æ‚çš„ç³»ç»Ÿä¸­å¯ä»¥åŒ…å«å•ç‹¬çš„ Director ã€Builder ç”šè‡³æŠ½è±¡å±‚ç­‰å…ƒç´ ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546public class Human { private final String name; private final int height; private final int weight; public static class Builder { // å¿…è¦å‚æ•° private final int name; // å¯é€‰å‚æ•° private int height = 170; private int weight = 60; public Builder(String name) { this.name = name } public Builder height(int height) { this.height = height; return this; } public Builder weight(int weight) { this.weight = weight; return this; } public Human build() { return new Human(this); } } private Human(Builder builder) { name = builder.name; height = builder.height; weight = builder.weight; } public static void main(String[] args) { Human human = new Human.Builder(\"Jack\") .height(175) .weight(60) .build(); }} åŸå‹æ¨¡å¼å½“ç›´æ¥åˆ›å»ºå¯¹è±¡çš„ä»£ä»·æ¯”è¾ƒå¤§æ—¶ï¼ˆä¾‹å¦‚æ•°æ®åº“å¯¹è±¡æ“ä½œï¼‰ï¼Œå¯ä»¥é‡‡ç”¨è¿™ç§æ¨¡å¼å…‹éš†å‡ºå¤šä¸ªä¸€æ¨¡ä¸€æ ·çš„å¯¹è±¡ã€‚ Javaçš„cloneæ–¹æ³•ä¾¿æ˜¯ä½¿ç”¨äº†è¿™ç§æ–¹æ³•ï¼Œå…³äºè¯¥æ–¹æ³•ï¼šjavaå¯¹è±¡å…‹éš†ä»¥åŠæ·±æ‹·è´å’Œæµ…æ‹·è´ 12345678910111213141516public inteface Prototype { Prototype clone();}public class ConcretePrototype implement Prototype { public override Prototype clone() { Prototype prototype = new ConcretePrototype(); return prototype; } public static void main(String[] args) { Prototype p1 = new ConcretePrototype(); Prototype p2 = p1.clone(); }} document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yoursite.com/tags/è®¾è®¡æ¨¡å¼/"}]},{"title":"Javaè®¾è®¡æ¨¡å¼ï¼šè¡Œä¸ºå‹æ¨¡å¼","slug":"Javaè®¾è®¡æ¨¡å¼ï¼šè¡Œä¸ºå‹æ¨¡å¼","date":"2019-01-20T16:57:00.000Z","updated":"2019-03-15T15:27:46.000Z","comments":true,"path":"Javaè®¾è®¡æ¨¡å¼ï¼šè¡Œä¸ºå‹æ¨¡å¼/","link":"","permalink":"http://yoursite.com/Javaè®¾è®¡æ¨¡å¼ï¼šè¡Œä¸ºå‹æ¨¡å¼/","excerpt":"è´£ä»»é“¾æ¨¡å¼è´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibility Patternï¼‰ä¸ºè¯·æ±‚åˆ›å»ºä¸€ä¸ªæ¥æ”¶è€…å¯¹è±¡çš„é“¾ï¼Œæ¯ä¸ªæ¥æ”¶è€…éƒ½åŒ…å«å¯¹å¦ä¸€ä¸ªæ¥æ”¶è€…çš„å¼•ç”¨ã€‚å¦‚æœä¸èƒ½å¤„ç†è¯¥è¯·æ±‚ï¼Œé‚£ä¹ˆå®ƒä¼šæŠŠç›¸åŒçš„è¯·æ±‚ä¼ ç»™ä¸‹ä¸€ä¸ªæ¥æ”¶è€…ã€‚è¯¥æ¨¡å¼åœ¨ Java Webä¸­æœ‰å¾ˆå¤šåº”ç”¨ï¼Œå¦‚ Apache Tomcat å¯¹ Encoding çš„å¤„ç†ï¼ŒStruts2 çš„æ‹¦æˆªå™¨ï¼ŒJSP Servlet çš„ Filterç­‰ç­‰ã€‚","text":"è´£ä»»é“¾æ¨¡å¼è´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibility Patternï¼‰ä¸ºè¯·æ±‚åˆ›å»ºä¸€ä¸ªæ¥æ”¶è€…å¯¹è±¡çš„é“¾ï¼Œæ¯ä¸ªæ¥æ”¶è€…éƒ½åŒ…å«å¯¹å¦ä¸€ä¸ªæ¥æ”¶è€…çš„å¼•ç”¨ã€‚å¦‚æœä¸èƒ½å¤„ç†è¯¥è¯·æ±‚ï¼Œé‚£ä¹ˆå®ƒä¼šæŠŠç›¸åŒçš„è¯·æ±‚ä¼ ç»™ä¸‹ä¸€ä¸ªæ¥æ”¶è€…ã€‚è¯¥æ¨¡å¼åœ¨ Java Webä¸­æœ‰å¾ˆå¤šåº”ç”¨ï¼Œå¦‚ Apache Tomcat å¯¹ Encoding çš„å¤„ç†ï¼ŒStruts2 çš„æ‹¦æˆªå™¨ï¼ŒJSP Servlet çš„ Filterç­‰ç­‰ã€‚ åˆ›å»ºæŠ½è±¡ç±» AbstractLoggerï¼Œå¸¦æœ‰è¯¦ç»†çš„æ—¥å¿—è®°å½•çº§åˆ«ï¼Œåœ¨å…¶åŸºç¡€ä¸Šæ‹“å±•å‡ºä¸‰ä¸ªè®°å½•å™¨ï¼Œå¦‚æœæ¶ˆæ¯çš„çº§åˆ«å±äºè‡ªå·±ï¼Œåˆ™è®°å½•å™¨å°†å…¶æ‰“å°ï¼Œå¦åˆ™æŠŠæ¶ˆæ¯ä¼ ç»™ä¸‹ä¸€ä¸ªè®°å½•å™¨ã€‚ 12345678910111213141516171819202122232425abstract class AbstractLogger { public static int INFO = 1; public static int DEBUG = 2; public static int ERROR = 3; protected int level; //è´£ä»»é“¾ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´  protected AbstractLogger nextLogger; public void setNextLogger(AbstractLogger nextLogger) { this.nextLogger = nextLogger; } public void logMessage(int level, String message) { if (this.level { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yoursite.com/tags/è®¾è®¡æ¨¡å¼/"}]},{"title":"Javaè®¾è®¡æ¨¡å¼ï¼šç»“æ„å‹æ¨¡å¼","slug":"Javaè®¾è®¡æ¨¡å¼ï¼šç»“æ„å‹æ¨¡å¼","date":"2019-01-20T16:56:04.000Z","updated":"2019-03-15T15:27:32.000Z","comments":true,"path":"Javaè®¾è®¡æ¨¡å¼ï¼šç»“æ„å‹æ¨¡å¼/","link":"","permalink":"http://yoursite.com/Javaè®¾è®¡æ¨¡å¼ï¼šç»“æ„å‹æ¨¡å¼/","excerpt":"é€‚é…å™¨æ¨¡å¼åœ¨ Android å¼€å‘ä¸­ï¼Œç»å¸¸èƒ½è§åˆ°å„ç§å„æ ·çš„ Adapter ç±»ï¼Œå…¶é‡‡ç”¨çš„æ­£æ˜¯é€‚é…å™¨æ¨¡å¼ã€‚è¯¥è®¾è®¡æ¨¡å¼ä½œä¸ºä¸¤ä¸ªä¸å…¼å®¹çš„æ¥å£ä¹‹é—´çš„æ¡¥æ¢ï¼Œå°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ï¼Œä»è€Œä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚","text":"é€‚é…å™¨æ¨¡å¼åœ¨ Android å¼€å‘ä¸­ï¼Œç»å¸¸èƒ½è§åˆ°å„ç§å„æ ·çš„ Adapter ç±»ï¼Œå…¶é‡‡ç”¨çš„æ­£æ˜¯é€‚é…å™¨æ¨¡å¼ã€‚è¯¥è®¾è®¡æ¨¡å¼ä½œä¸ºä¸¤ä¸ªä¸å…¼å®¹çš„æ¥å£ä¹‹é—´çš„æ¡¥æ¢ï¼Œå°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ï¼Œä»è€Œä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚ ç”¨ç”µæºæ¥å£ä¸¾ä¾‹ï¼Œç¬”è®°æœ¬ç”µè„‘çš„ç”µæºéœ€è¦æ¥å…¥5Vçš„ç”µå‹ï¼Œæ— æ³•ç›´æ¥ä½¿ç”¨220vçš„äº¤æµç”µå‹ï¼Œä¸¤è€…å¹¶ä¸åŒ¹é…ï¼Œåœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œè¯¥ç°è±¡ç§°ä¹‹ä¸ºæ¥å£ä¸å…¼å®¹ï¼Œæ­¤æ—¶å°±éœ€è¦é€‚é…å™¨æ¥è¿›è¡Œæ¥å£è½¬æ¢ã€‚è¿™ä¸ªè½¬æ¢çš„ä¸­é—´å±‚ä¾¿æ˜¯ Adapter å±‚ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬éœ€è¦5vçš„ç”µå‹ï¼Œå› æ­¤Volt5Vç§°ä¸ºTargetï¼Œè€Œä¸å…¼å®¹çš„220Vç”µå‹ç§°ä¹‹ä¸ºAdapteeï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯é€‚é…è®¾è®¡ä¸€ä¸ªAdpaterï¼Œæ–¹æ³•æœ‰ä¸¤ç§ã€‚ ç±»é€‚é…å™¨æ¨¡å¼123456789101112131415161718192021interface Volt5V { int get5V();}class Volt220V { public int get220V() { return 220; }}class Adapter extends Volt220V implements Volt5V { @Override public int get5V() { return 5; }}public static void main(String[] args) { Adapter adapter = new Adapter(); System.out.println(\"è·å–éœ€è¦çš„5Vç”µæºï¼š\" + adapter.get5V());} å¯¹è±¡é€‚é…å™¨æ¨¡å¼ä¸ç±»é€‚é…å™¨æ¨¡å¼ä¸€æ ·ï¼Œå¯¹è±¡é€‚é…å™¨æ¨¡å¼æŠŠè¢«é€‚é…çš„ç±»çš„APIè½¬æ¢æˆä¸ºç›®æ ‡ç±»çš„APIï¼Œä¸åŒçš„æ˜¯ï¼Œå¯¹è±¡é€‚é…å™¨æ¨¡å¼çš„è¿æ¥æ–¹å¼ä¸æ˜¯ç»§æ‰¿ï¼Œå…¶ä½¿ç”¨ä»£ç†å…³ç³»è¿æ¥åˆ°Adapteeç±»ã€‚ 1234567891011121314151617class ObjectAdapter implements Volt5V { private Volt220V volt220V; public ObjectAdapter(Volt220V adaptee) { volt220V = adaptee; } @Override public int get5V() { return 5; } public int get220V() { return volt220V.get220V(); } } å…³äº Android ä¸­ ListView ä¸­çš„ Adapterï¼Œå¯ä»¥å‚è€ƒï¼šAndroidæºç ä¹‹ListViewçš„é€‚é…å™¨æ¨¡å¼ ç»„åˆæ¨¡å¼å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„æ¥è¡¨ç°â€éƒ¨åˆ†-æ•´ä½“â€œçš„å±‚æ¬¡ç»“æ„ï¼Œä½¿å¾—å®¢æˆ·ä»¥ä¸€è‡´çš„æ–¹å¼å¤„ç†å•ä¸ªå¯¹è±¡ä»¥åŠå¯¹è±¡çš„ç»„åˆã€‚ç»„åˆæ¨¡å¼å®ç°çš„æœ€å…³é”®çš„åœ°æ–¹æ˜¯â€”â€”ç®€å•å¯¹è±¡å’Œå¤åˆå¯¹è±¡å¿…é¡»å®ç°ç›¸åŒçš„æ¥å£ã€‚è¿™å°±æ˜¯ç»„åˆæ¨¡å¼èƒ½å¤Ÿå°†ç»„åˆå¯¹è±¡å’Œç®€å•å¯¹è±¡è¿›è¡Œä¸€è‡´å¤„ç†çš„åŸå› ã€‚ ç»„åˆéƒ¨ä»¶ï¼ˆComponentï¼‰ï¼šå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡è§’è‰²ï¼Œä¸ºè¦ç»„åˆçš„å¯¹è±¡æä¾›ç»Ÿä¸€çš„æ¥å£ã€‚ å¶å­ï¼ˆLeafï¼‰ï¼šåœ¨ç»„åˆä¸­è¡¨ç¤ºå­èŠ‚ç‚¹å¯¹è±¡ï¼Œå¶å­èŠ‚ç‚¹ä¸èƒ½æœ‰å­èŠ‚ç‚¹ã€‚ åˆæˆéƒ¨ä»¶ï¼ˆCompositeï¼‰ï¼šå®šä¹‰æœ‰æèŠ‚ç‚¹çš„è¡Œä¸ºï¼Œç”¨æ¥å­˜å‚¨éƒ¨ä»¶ï¼Œå®ç°åœ¨Componentæ¥å£ä¸­çš„æœ‰å…³æ“ä½œï¼Œå¦‚å¢åŠ ï¼ˆAddï¼‰å’Œåˆ é™¤ï¼ˆRemoveï¼‰ã€‚ å¯¹äºé€æ˜ç»„åˆæ¨¡å¼æ¥è¯´ï¼ŒComponent ä¸­å£°æ˜æ‰€æœ‰ç®¡ç†å­å¯¹è±¡çš„æ–¹æ³•ï¼Œå…¶ä¸­åŒ…æ‹¬Addï¼ŒRemoveç­‰ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å¶èŠ‚ç‚¹å’ŒæèŠ‚ç‚¹å…·å¤‡å®Œå…¨ä¸€è‡´çš„æ¥å£ï¼Œå¯¹äºå¤–ç•Œæ²¡æœ‰åŒºåˆ«ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960//æŠ½è±¡æ„ä»¶ï¼Œå£°æ˜ä¸€ä¸ªæ¥å£ç”¨äºè®¿é—®å’Œç®¡ç†Componentçš„å­éƒ¨ä»¶abstract class Component { public Component() { } public abstract void add(Component component); public abstract void remove(Component component); //æ˜¾ç¤ºå±‚çº§ç»“æ„ public abstract void Display(int level);}//å¶å­èŠ‚ç‚¹class Leaf extends Component { public Leaf() { super(); } //æ— æ„ä¹‰çš„å®ç° @Override public void add(Component component) { } //æ— æ„ä¹‰çš„å®ç° @Override public void remove(Component component) { } @Override public void Display(int level) { System.out.println(\"-\" + level); }}//æèŠ‚ç‚¹class Composite extends Component { public Composite() { super(); } private List children = new ArrayList(); @Override public void add(Component component) { children.add(component); } @Override public void remove(Component component) { children.remove(component); } @Override public void Display(int level) { children.forEach( component -> component.Display(level + 2) ); }} å¯¹äºè¿™ç§æ–¹å¼æ¥è¯´ï¼Œå¶å­èŠ‚ç‚¹å¹¶ä¸å…·å¤‡ addã€remove ç­‰æ–¹æ³•ï¼Œå¯¹ä»–ä»¬çš„å®ç°æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå¯ä»¥é‡‡ç”¨å®‰å…¨å¼ç»„åˆæ¨¡å¼ï¼Œå°†å¶å­èŠ‚ç‚¹ä¸å…·å¤‡çš„åŠŸèƒ½ä¸‹æ”¾åˆ°æèŠ‚ç‚¹ä¸­å®ç°ã€‚è¯¥åšæ³•çš„å¼Šç«¯æ˜¯å¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œå¿…é¡»å¯¹å¶èŠ‚ç‚¹å’ŒæèŠ‚ç‚¹è¿›è¡Œåˆ¤å®šï¼Œä½¿ç”¨ä¸ä¾¿ã€‚ è£…é¥°å™¨æ¨¡å¼å‘ä¸€ä¸ªç°æœ‰çš„å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æ„ã€‚åˆ›å»ºä¸€ä¸ª Shape æ¥å£å’Œå®ç°äº† Shape æ¥å£çš„å®ä½“ç±»ã€‚ç„¶ååˆ›å»ºä¸€ä¸ªå®ç°äº† Shape æ¥å£çš„æŠ½è±¡è£…é¥°ç±» ShapeDecoratorï¼Œå¹¶æŠŠ Shape å¯¹è±¡ä½œä¸ºå®ƒçš„å®ä¾‹å˜é‡ã€‚RedShapeDecorator æ˜¯å®ç°äº† ShapeDecorator çš„å®ä½“ç±»ï¼Œç”¨æ¥è£…é¥° Shape å¯¹è±¡ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243interface Shape { void draw();}class Circle implements Shape { @Override public void draw() { System.out.println(\"Draw a circle\"); }}//å®ç°äº† Shape æ¥å£çš„æŠ½è±¡è£…é¥°ç±»ã€‚abstract class ShapeDecorator implements Shape { Shape decoratedShape; public ShapeDecorator(Shape decoratedShape) { this.decoratedShape = decoratedShape; } @Override public void draw() { decoratedShape.draw(); }}//å…·ä½“çš„è£…é¥°ç±»class RedShapeDecorator extends ShapeDecorator { public RedShapeDecorator(Shape decoratedShape) { super(decoratedShape); } @Override public void draw() { decoratedShape.draw(); setRedBorder(decoratedShape); } private void setRedBorder(Shape decoratedShape) { System.out.println(\"Border color: Red\"); }} ä»£ç†æ¨¡å¼ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†é™æ€ä»£ç†çš„è¿‡ç¨‹ï¼Œåˆ›å»ºä¸€ä¸ª Image æ¥å£å’Œå®ç°äº† Image æ¥å£çš„å®ä½“ç±»ã€‚ProxyImage æ˜¯ä¸€ä¸ªä»£ç†ç±»ï¼Œå‡å°‘ RealImage å¯¹è±¡åŠ è½½çš„å†…å­˜å ç”¨ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940interface Image { void display();}class RealImage implements Image { private String fileName; public RealImage(String fileName){ this.fileName = fileName; loadFromDisk(fileName); } @Override public void display() { System.out.println(\"Displaying \" + fileName); } private void loadFromDisk(String fileName){ System.out.println(\"Loading \" + fileName); }}class ProxyImage implements Image { private RealImage realImage; private String fileName; public ProxyImage(String fileName){ this.fileName = fileName; } @Override public void display() { if(realImage == null){ realImage = new RealImage(fileName); } realImage.display(); }} é™æ€ä»£ç†çš„ç¼ºç‚¹æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œç”±äºä»£ç†ç±»å’Œå§”æ‰˜ç±»å®ç°ç›¸åŒçš„æ¥å£ï¼Œå¯¼è‡´ä»£ç å†—æ‚ã€‚æ¥å£çš„å˜åŒ–å°†å¼•èµ·æ‰€æœ‰å®ç°ç±»å’Œä»£ç†ç±»çš„å˜åŒ–ï¼ŒåŒæ—¶å½“ä»£ç†ç±»éœ€è¦ä¸ºå¤šå¯¹è±¡æœåŠ¡æ—¶ä¹Ÿä¼šæ˜¾å¾—åŠ›ä¸ä»å¿ƒï¼Œä¸ºæ­¤å¼•å…¥åŠ¨æ€ä»£ç†çš„æ–¹å¼ã€‚Javaä¸­çš„åŠ¨æ€ä»£ç†ç±»å¿…é¡»å®ç° reflect åŒ…ä¸­çš„ InvocationHandler æ¥å£ï¼ŒåŒæ—¶ä½¿ç”¨ Proxy ç±»ã€‚å½“é€šè¿‡åŠ¨æ€ä»£ç†å¯¹è±¡è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶å€™ï¼Œè¯¥æ–¹æ³•çš„è°ƒç”¨å°±ä¼šè¢«è½¬å‘åˆ°å®ç° InvocationHandler æ¥å£ç±»çš„ invoke æ–¹æ³•ã€‚è¿˜æ˜¯ä»¥é™æ€ä»£ç†ä¸­ Image ä¸¾ä¾‹ï¼Œè¿™æ¬¡ä¸å†åˆ›å»ºä¸€ä¸ª ProxyImageï¼Œ è€Œæ˜¯é€šè¿‡ä¸€ä¸ª DisplayHandler å®ç°åŠ¨æ€ä»£ç†ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849import java.lang.reflect.InvocationHandler;import java.lang.reflect.Method;import java.lang.reflect.Proxy;public class DisplayHandler implements InvocationHandler { //è¦ä»£ç†çš„çœŸå®å¯¹è±¡ private Object obj; public DisplayHandler(Object obj) { this.obj = obj; } /** * * @param proxy ä»£ç†ç±»ä»£ç†çš„çœŸå®ä»£ç†å¯¹è±¡ * @param method æ‰€è¦è°ƒç”¨æŸä¸ªå¯¹è±¡çœŸå®çš„æ–¹æ³•çš„Methodå¯¹è±¡ * @param args æŒ‡ä»£ä»£ç†å¯¹è±¡æ–¹æ³•ä¼ é€’çš„å‚æ•° * @return * @throws Throwable */ @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable { //çœŸå®çš„å¯¹è±¡æ‰§è¡Œä¹‹å‰ System.out.println(\"Before invoke...\"); Object invoke = method.invoke(obj, args); //çœŸå®çš„å¯¹è±¡æ‰§è¡Œä¹‹å System.out.println(\"After invoke...\"); return invoke; }}public static void main(String[] args) { Image image = new RealImage(\"hello.jpg\"); InvocationHandler handler = new DisplayHandler(image); /* * å‚æ•°ä¸€ï¼šhandler.getClass().getClassLoader()ï¼Œä½¿ç”¨handlerå¯¹è±¡çš„classloaderå¯¹è±¡æ¥åŠ è½½æˆ‘ä»¬çš„ä»£ç†å¯¹è±¡ * å‚æ•°äºŒï¼šimage.getClass().getInterfaces()ï¼Œæä¾›çœŸå®å¯¹è±¡å®ç°çš„æ¥å£ï¼Œä½¿ä»£ç†å¯¹è±¡èƒ½è°ƒç”¨æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³• * å‚æ•°ä¸‰ï¼šhandlerï¼Œå°†ä»£ç†å¯¹è±¡å…³è”åˆ°ä¸Šé¢çš„InvocationHandlerå¯¹è±¡ä¸Š */ Image proxy = (Image) Proxy.newProxyInstance( handler.getClass().getClassLoader(), image.getClass().getInterfaces(), handler); proxy.display();} æ§åˆ¶å°è¾“å‡ºç»“æœä¸º1234Loading hello.jpgBefore invoke...Displaying hello.jpgAfter invoke... ä»£ç†æ¨¡å¼å’Œè£…é¥°æ¨¡å¼éå¸¸ç±»ä¼¼ï¼ŒäºŒè€…æœ€ä¸»è¦çš„åŒºåˆ«æ˜¯ï¼šä»£ç†æ¨¡å¼ä¸­ï¼Œä»£ç†ç±»å¯¹è¢«ä»£ç†çš„å¯¹è±¡æœ‰æ§åˆ¶æƒï¼Œå†³å®šå…¶æ‰§è¡Œæˆ–è€…ä¸æ‰§è¡Œã€‚è€Œè£…é¥°æ¨¡å¼ä¸­ï¼Œè£…é¥°ç±»å¯¹ä»£ç†å¯¹è±¡æ²¡æœ‰æ§åˆ¶æƒï¼Œåªèƒ½ä¸ºå…¶å¢åŠ ä¸€å±‚è£…é¥°ï¼Œä»¥åŠ å¼ºè¢«è£…é¥°å¯¹è±¡çš„åŠŸèƒ½ï¼Œä»…æ­¤è€Œå·²ã€‚ å…¶ä»–è¿‡æ»¤å™¨æ¨¡å¼ç®€å•çš„è¯´ï¼Œç­›é€‰å™¨æä¾›ä¸€ä¸ªè¾“å…¥å‚æ•°ä¸ºç‰¹å®šç±»å‹é›†åˆçš„ç­›é€‰æ–¹æ³•ï¼Œè¿”å›ç­›é€‰ä¹‹åçš„é›†åˆï¼ŒåŒæ—¶ç­›é€‰å™¨ä¹‹é—´å¯ä»¥ç»„åˆã€‚ æ¡¥æ¥æ¨¡å¼æ¡¥æ¥æ¨¡å¼å³å°†æŠ½è±¡éƒ¨åˆ†ä¸å®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»å¼€æ¥ï¼Œä½¿ä»–ä»¬éƒ½å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ç”»ç”»è¿™ä¸€è¡Œä¸ºä¸­ï¼Œç”»ç¬”éœ€è¦é€‰æ‹©ä¸åŒçš„é¢œè‰²ã€ç»˜ç”»å½¢çŠ¶ç­‰ï¼Œä¸ºäº†æ–¹ä¾¿æ‹“å±•ï¼Œä½¿ç”¨æ¡¥æ¥æ¨¡å¼ï¼ŒæŠ½è±¡å‡ºå½¢çŠ¶å’Œé¢œè‰²ä¸¤ä¸ªçˆ¶ç±»ï¼Œç„¶åæ ¹æ®éœ€è¦å¯¹é¢œè‰²å’Œå½¢çŠ¶è¿›è¡Œç»„åˆã€‚å®é™…ä¸Šè¿™æ˜¯â€œé¢å‘æ¥å£ç¼–ç¨‹â€è®¾è®¡æ€æƒ³æœ€ç›´è§‚çš„ä½“ç°ã€‚ å¤–è§‚æ¨¡å¼å¤–è§‚æ¨¡å¼éšè—ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œå¹¶å‘å®¢æˆ·ç«¯æä¾›äº†ä¸€ä¸ªå¯ä»¥è®¿é—®ç³»ç»Ÿçš„æ¥å£ã€‚ ç®€å•çš„æ¥è¯´å°±æ˜¯å¯¹å¤–æä¾›ä¸€ä¸ªç®€å•æ¥å£ï¼Œéšè—å®ç°çš„é€»è¾‘ã€‚æ¯”å¦‚è®¡ç®—æœºçš„ç”µæºé”®ï¼Œç”¨æˆ·åªéœ€æŒ‰ç”µæºé”®ï¼Œå°±å¯ä»¥å¯åŠ¨æˆ–è€…å…³é—­è®¡ç®—æœºï¼Œæ— éœ€çŸ¥é“å®ƒæ˜¯æ€ä¹ˆå¯åŠ¨çš„(å¯åŠ¨CPUã€å¯åŠ¨å†…å­˜ã€å¯åŠ¨ç¡¬ç›˜)ï¼Œæ€ä¹ˆå…³é—­çš„(å…³é—­ç¡¬ç›˜ã€å…³é—­å†…å­˜ã€å…³é—­CPU)ã€‚ äº«å…ƒæ¨¡å¼æ‰€è°“äº«å…ƒæ¨¡å¼å°±æ˜¯è¿è¡Œå…±äº«æŠ€æœ¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦å¯¹è±¡çš„å¤ç”¨ã€‚ç³»ç»Ÿä½¿ç”¨å°‘é‡å¯¹è±¡,è€Œä¸”è¿™äº›éƒ½æ¯”è¾ƒç›¸ä¼¼ï¼ŒçŠ¶æ€å˜åŒ–å°ï¼Œå¯ä»¥å®ç°å¯¹è±¡çš„å¤šæ¬¡å¤ç”¨ã€‚é€šè¿‡å…¶ä¸­çš„äº«å…ƒå·¥å‚æ¥å±•ç¤ºè¯¥æ¨¡å¼çš„ç‰¹ç‚¹ 1234567891011121314151617public class FlyweightFactory{ static Map shapes = new HashMap(); public static Shape getShape(String key){ Shape shape = shapes.get(key); if(shape == null){ shape = new Circle(key); shapes.put(key, shape); } return shape; } public static int getSum(){ return shapes.size(); }} è¡¥å……ä»ä»£ç ä¸Šçœ‹ï¼Œç»“æ„å‹æ¨¡å¼ä¸­çš„å¾ˆå¤šæ¨¡å¼å…·æœ‰ç›¸å½“å¤§çš„ç›¸ä¼¼æ€§ï¼Œå…·ä½“åŒºåˆ†çš„è¯ï¼Œè£…é¥°å™¨æ¨¡å¼æ˜¯â€œæ–°å¢è¡Œä¸ºâ€ï¼Œä»£ç†æ¨¡å¼æ˜¯â€œæ§åˆ¶è®¿é—®è¡Œä¸ºâ€ï¼Œé€‚é…å™¨æ¨¡å¼æ˜¯â€è½¬æ¢è¡Œä¸ºâ€ï¼Œå¤–è§‚æ¨¡å¼æ˜¯ä¸€ç§â€ç®€åŒ–è¡Œä¸ºâ€ã€‚ document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/categories/Java/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yoursite.com/tags/è®¾è®¡æ¨¡å¼/"}]},{"title":"å·´æ´›å…‹çš„çç ï¼šå·´èµ«ã€Šå…­é¦–æ— ä¼´å¥å¤§æç´ç»„æ›²ã€‹","slug":"å·´æ´›å…‹çš„çç ï¼šå·´èµ«ã€Šå…­é¦–æ— ä¼´å¥å¤§æç´ç»„æ›²ã€‹","date":"2019-01-13T15:09:12.000Z","updated":"2019-03-15T15:26:20.000Z","comments":true,"path":"å·´æ´›å…‹çš„çç ï¼šå·´èµ«ã€Šå…­é¦–æ— ä¼´å¥å¤§æç´ç»„æ›²ã€‹/","link":"","permalink":"http://yoursite.com/å·´æ´›å…‹çš„çç ï¼šå·´èµ«ã€Šå…­é¦–æ— ä¼´å¥å¤§æç´ç»„æ›²ã€‹/","excerpt":"å¼•è¨€ ç¬¬ä¸€æ¬¡æ¥è§¦â€œå·´æ´›å…‹â€ä¸€è¯ï¼Œæ˜¯åœ¨CCTVéŸ³ä¹å…çš„â€œæ¼«æ­¥ç»å…¸â€ç³»åˆ—ï¼Œä¹Ÿè®¸æ˜¯åˆä¸­çš„ä¸€ä¸ªåˆåï¼Œç”µè§†æœºé‡Œä¼ æ¥ç»´ç“¦å°”ç¬¬ã€Šå››å­£ã€‹ç»„æ›²æ‚ æ‰¬æ¬¢å¿«çš„ä¹å£°ï¼Œæ—‹å¾‹é£˜è¿‡æ—¶å…‰ï¼Œé“­åˆ»åœ¨å¿ƒä¸­ã€‚","text":"å¼•è¨€ ç¬¬ä¸€æ¬¡æ¥è§¦â€œå·´æ´›å…‹â€ä¸€è¯ï¼Œæ˜¯åœ¨CCTVéŸ³ä¹å…çš„â€œæ¼«æ­¥ç»å…¸â€ç³»åˆ—ï¼Œä¹Ÿè®¸æ˜¯åˆä¸­çš„ä¸€ä¸ªåˆåï¼Œç”µè§†æœºé‡Œä¼ æ¥ç»´ç“¦å°”ç¬¬ã€Šå››å­£ã€‹ç»„æ›²æ‚ æ‰¬æ¬¢å¿«çš„ä¹å£°ï¼Œæ—‹å¾‹é£˜è¿‡æ—¶å…‰ï¼Œé“­åˆ»åœ¨å¿ƒä¸­ã€‚ â€œæ¼«æ­¥ç»å…¸â€ç³»åˆ—å…³äºå·´æ´›å…‹éŸ³ä¹çš„ä»‹ç»å…±åˆ†å…­æœŸèŠ‚ç›®ï¼Œè™½è¯´ç‰¹åˆ«åœ¨æ„ï¼Œå®é™…ä¸Šä¹Ÿæ²¡æœ‰å®Œæ•´åœ°çœ‹å®Œã€‚ä¸çŸ¥é“ä½•æ—¶èµ·ï¼Œå°±æœ‰äº†ç³»ç»Ÿåœ°äº†è§£è¥¿æ–¹å¤å…¸éŸ³ä¹çš„æƒ³æ³•ï¼Œè¿˜ä¸“é—¨å»çŸ¥ä¹æµè§ˆè¯¸å¦‚â€œå¤å…¸éŸ³ä¹â€æ€ä¹ˆå…¥é—¨ä¹‹ç±»çš„é—®ç­”ï¼Œå¯æƒœæ¯æ¬¡éƒ½æ˜¯è¿ˆå‡ºç¬¬ä¸€æ­¥ï¼Œä¾¿å†æ— ä¸‹æ–‡ã€‚ä¸è¿‡å€’ä¹Ÿä¸åœ¨æ„ï¼Œæ¯•ç«Ÿè¦â€œç³»ç»Ÿåœ°â€å¬å®Œå¤å…¸éŸ³ä¹å²ï¼Œå¯¹ä¸€ä¸ªé—¨å¤–æ±‰æ¥è¯´ï¼Œä¹Ÿç€å®å¯Œæœ‰æŒ‘æˆ˜æ€§ã€‚ ç”Ÿæ´»ä¸­ä¸“é—¨æ¬£èµå¤å…¸éŸ³ä¹çš„æœºä¼šä¸ç®—å¤šã€‚å¿ƒæƒ…çƒ¦èºã€ç™¾æ— èŠèµ–ä¹‹é™…ï¼Œä¼šéšæ€§åœ°æ‰“å¼€å…³äºå¤å…¸éŸ³ä¹çš„æ­Œå•ï¼Œæˆ´ä¸Šè€³æœºï¼Œæ„Ÿå—å·´èµ«ä»¬é“¶ç å€¾æ–œèˆ¬é¥±æ»¡çš„æƒ…æ„Ÿã€‚è¿‘æ¥å‘ç°ä¸€æœ¬ä¹¦ï¼šã€Šç©¿Tæ¤å¬å¤å…¸éŸ³ä¹ã€‹ï¼Œä½œè€…ç”¨éŸ³ä¹å®¶çš„æ•…äº‹ä¸²è”èµ·è¥¿æ–¹å¤å…¸éŸ³ä¹å²ï¼Œä¸ºæ¬£èµå¤å…¸éŸ³ä¹æä¾›äº†ä¸ä¸€æ ·çš„æ–¹å¼ã€‚ æœ¬æ–‡æ‘˜å½•äº†ä¹¦ä¸­å…³äºå·´èµ«ã€Šå…­é¦–æ— ä¼´å¥å¤§æç´ç»„æ›²ã€‹çš„ç« èŠ‚ï¼Œè®°å½•å…³äºè¿™ä¸€ä¼Ÿå¤§ä¹ç« èƒŒåçš„æ•…äº‹ã€‚ç»„æ›²çš„ç½‘æ˜“äº‘é“¾æ¥ä¸ºï¼šå·´èµ«ã€Šå…­é¦–æ— ä¼´å¥å¤§æç´ç»„æ›²ã€‹æ–¯å¡”å…‹ æ­£æ–‡ 1889å¹´ï¼Œ13å²çš„å¡è¨å°”æ–¯ï¼ˆPablo Casalsï¼‰åˆšå¼€å§‹å­¦å¤§æç´ä¸ä¹…ï¼Œæœ‰ä¸€å¤©ï¼Œä»–å’Œçˆ¶äº²åœ¨è¡—å¤´é—²é€›ï¼Œèµ°åˆ°ä¸€é—´æ˜æš—çš„å¤è‘£åº—é‡Œï¼Œæµè§ˆåº—é‡Œç¨€å¥‡å¤æ€ªçš„æ”¶è—ã€‚å¡è¨å°”æ–¯åœ¨è§’è½é‡Œå‘ç°äº†ä¸€æœ¬ç ´ç ´çš„ä¹è°±ï¼Œå¤§å¼€æœ¬ï¼Œçº¸è´¨åšå®ï¼Œç¿»å¼€æ¥åƒä¸€æœ¬å·¨å¤§çš„ç¥ˆç¥·ä¹¦ã€‚çˆ¶äº²èµ°è¿‡æ¥ï¼Œä»–çœ‹åˆ°ä¸Šé¢æœ‰å·´èµ«ä¸å¤§æç´çš„å­—æ ·ï¼Œæ²¡é”™ï¼Œè¿™å°±æ˜¯é—å¤±å·²ä¹…çš„å·´èµ«ä½œå“ã€Šå…­é¦–æ— ä¼´å¥å¤§æç´ç»„æ›²ã€‹ã€‚ å¦‚ä»Šï¼Œå·´èµ«çš„ã€Šå…­é¦–æ— ä¼´å¥å¤§æç´ç»„æ›²ã€‹æ˜¯å¤§æç´å®¶çš„æ—§çº¦åœ£ç»ï¼Œè€Œåœ¨å¡è¨å°”æ–¯å‘ç°å®ƒä¹‹å‰ï¼Œå‡ ä¹æ— äººæ¼”å¥è¿‡ï¼Œäººä»¬åªå¬è¿‡é›¶æ˜Ÿç‰‡æ®µï¼Œå±…ç„¶è¿˜æœ‰äººç…æœ‰ä»‹äº‹ç»™å®ƒé…ä¸Šè¹©è„šçš„é’¢ç´ä¼´å¥ã€‚é‚£å¤©ï¼Œå¡è¨å°”æ–¯åƒå—åˆ°ç¥å¯ä¸€èˆ¬ï¼Œç´§ç´§æŠ±ç€ä¹è°±é£å¥”å›å®¶ï¼Œè¿«ä¸åŠå¾…åœ°å¼€å§‹ç»ƒä¹ ã€‚ä»–è¯´ï¼šâ€œè¿™æ¬¡å‘ç°æ˜¯å¯¹æˆ‘ç”Ÿå‘½çš„å¥‡å¦™å¯ç¤ºã€‚â€å¯¹äºä¸€ä½åˆå­¦å¤§æç´çš„å°‘å¹´ï¼Œå‘ç°è¿™æ ·ä¸€ä¸ªå·¨å¤§çš„å®è—ï¼Œå·²ç»æ„å‘³ç€ä¸€ç§å‘½è¿ï¼Œä»–è¦æŠŠæ­¤ç”Ÿå¥‰çŒ®ç»™å¤§æç´ã€‚ å›é¡¾20ä¸–çºªï¼Œæ²¡æœ‰å“ªä½å¤§æç´å®¶èµ¢å¾—äº†åƒå¡è¨å°”æ–¯é‚£æ ·çš„æˆå°±ä¸å½±å“åŠ›ï¼šä»–æ—…è¡Œæ¼”å‡ºçš„è¶³è¿¹éå¸ƒä¸–ç•Œå„åœ°ï¼›ä»–å®Œå–„äº†å¤§æç´æ¼”å¥æŠ€å·§ï¼Œæå‡äº†å¤§æç´ä½œä¸ºç‹¬å¥ä¹å™¨çš„åœ°ä½ï¼›ä»–åå¯¹è¥¿ç­ç‰™å†…æˆ˜è€Œæµäº¡å·´é»ï¼Œå› æ­¤è·è¯ºè´å°”å’Œå¹³å¥–æåã€‚åœ¨ä»–çš„ç¥–å›½è¥¿ç­ç‰™ï¼Œè¿˜æœ‰ä¸€æ¡åå«å¡è¨å°”æ–¯çš„å…¬è·¯â€¦â€¦ä»–æ˜¯ä¸€ä½ä¼ å¥‡çš„å¤§æç´å®¶ï¼Œä»–è¯´ä»–ä¸ä»…æ˜¯å¤§æç´å®¶ï¼Œä»–é¦–å…ˆæ˜¯ä¸€ä½éŸ³ä¹å®¶ã€‚20å²çš„æ—¶å€™ï¼Œå¡è¨å°”æ–¯å»å·´é»çš„å¤§å¸ˆé‚£é‡Œå­¦ç´ï¼Œæ‹‰å®Œä¸€æ›²ï¼Œå¤§å¸ˆèµ·èº«æ‹¥æŠ±ä»–è¯´ï¼Œä½ æ³¨å®šæ˜¯ä¸åŒå‡¡å“çš„éŸ³ä¹å®¶ã€‚ æ¢å¯»è¿™éƒ¨ã€Šå…­é¦–æ— ä¼´å¥å¤§æç´ç»„æ›²ã€‹çš„æ•…äº‹ï¼Œå°±æ˜¯å›é¡¾20ä¸–çºªå¤§æç´æ¼”å¥è‰ºæœ¯å²ã€‚å¡è¨å°”æ–¯æŠŠä¸€ç”Ÿç”¨æ¥æ¼”å¥å’Œæ¨å¹¿è¿™éƒ¨ä¹æ›²ï¼Œå¦‚ä»Šä»–çš„åå­—å·²ç»ä¸è¿™éƒ¨æ›²é›†æ°¸è¿œç›¸è¿ï¼Œæ˜¯ä»–çš„æ¯•ç”ŸåŠªåŠ›è®©å®ƒæˆä¸ºå¤§æç´çš„æ ¸å¿ƒæ›²ç›®ã€‚å¦‚ä»Šæ‰€æœ‰å¤§æç´å®¶éƒ½åœ¨ç»ƒä¹ å®ƒï¼ŒæŒ‘æˆ˜å®ƒã€‚å®ƒæ˜¯åœ£ç»ï¼Œäº¦æ˜¯å½’å®¿ã€‚ç«¥å¹´æ—¶ä»£çš„é©¬å‹å‹æŠŠè¿™å¥—å¤§æç´ç»„æ›²å½“ä½œç»ƒä¹ æ›²ï¼Œçˆ¶äº²è¦æ±‚ä»–æ¯å¤©å­¦ä¹ ä¸¤å°èŠ‚ï¼Œäº”å²çš„ä»–ç«Ÿèƒ½å¤Ÿä»å¤´è‡³å°¾æ‹‰å¥ï¼Œå¹¶ä¸”ä»¥å®ƒå¼€äº†ç‹¬å¥ä¼šã€‚ä»–ä¸å¡è¨å°”æ–¯ä¸€æ ·ï¼Œè‰ºæœ¯äººç”Ÿä»å·´èµ«å¼€å§‹ã€‚ å¦‚ä»Šå·²ç»æ— äººçŸ¥é“å·´èµ«åˆ›ä½œã€Šå…­é¦–æ— ä¼´å¥å¤§æç´ç»„æ›²ã€‹çš„ç¡®åˆ‡å¹´ä»½ï¼Œå­¦è€…ä»¬ä»é£æ ¼ã€ä½“è£ç­‰å› ç´ è€ƒé‡ï¼Œè®¤ä¸ºå®ƒä½œäºå·´èµ«åœ¨ç§‘æ»•æ‹…ä»»å®«å»·ä¹é•¿çš„æ—¶æœŸã€‚å·´èµ«çš„å¤§éƒ¨åˆ†å®¤å†…ä¹éƒ½æ˜¯åœ¨é‚£æ—¶å®Œæˆçš„ï¼Œä¸€åŠæ˜¯å› ä¸ºç§‘æ»•çš„é¢†ä¸»å–œæ¬¢ç©å®¤å†…ä¹ã€‚è¿™éƒ¨ç»„æ›²ä¸€å…±æœ‰6å¥—36é¦–æ›²ç›®ï¼ŒåŒ…å«6ç§èˆæ›²ï¼šåºå¥ã€é˜¿åˆ—æ›¼å¾·èˆæ›²ã€åº“æœ—ç‰¹èˆæ›²ã€è¨æ‹‰ç­å¾·èˆæ›²ã€å‰æ ¼èˆæ›²ã€å°æ­¥èˆæ›²ã€‚ç»“æ„ä¸å½“æ—¶å†™çš„ã€Šæ³•å›½ç»„æ›²ã€‹å’Œã€Šè‹±å›½ç»„æ›²ã€‹ç±»ä¼¼ï¼ŒæŒ‰ç…§å·´æ´›å…‹ç»„æ›²æ–¹å¼æ’åˆ—ã€‚å‰ä¸‰å¥—ç»„æ›²å¤§çº¦å†™äº1702å¹´ï¼Œä¹Ÿå°±æ˜¯ã€Šæ— ä¼´å¥å°æç´å¥é¸£æ›²ã€‹æ—¶æœŸï¼Œåä¸‰å¥—æŠ€å·§è‰°æ·±è¡¨è¾¾æ™¦æ¶©ï¼Œåº”è¯¥å†™äºæ›´æ™šä¸€äº›å¹´ä»½ã€‚ç§‘æ»•é¢†ä¸»æ˜¯ä¸€ä½èµ„æ·±ä¹è¿·ï¼Œä¹Ÿç§°å¾—ä¸Šæ˜¯ä¸€ä½ä¸šä½™éŸ³ä¹å®¶ï¼Œä»–æŒ‘é€‰çš„ä¹æ‰‹éƒ½æ˜¯ä¸€æµçš„ï¼Œå·´èµ«åœ¨é‚£é‡Œå·¥ä½œå¾—éå¸¸æ„‰å¿«ã€‚æ®è¯´å…­é¦–å¤§æç´ç»„æ›²æ˜¯ä¸ºå®«å»·é‡Œçš„ä¸¤ä½å¤å¤§æç´å®¶æå°¼å¸Œå…‹ï¼ˆChristian Linikeï¼‰å’Œé˜¿è´å°”ï¼ˆChristian Ferdinand Abelï¼‰è€Œä½œï¼Œä»–ä»¬å±…ç„¶åœ¨300å¹´å‰å°±èƒ½èƒœä»»å…¶ä¸­çš„å¤æ‚æŠ€å·§ã€‚ åº”è¯¥å¦‚ä½•æ¼”å¥è¿™éƒ¨ä¹æ›²ï¼Ÿä¹è°±ä¸Šé™¤äº†éŸ³ç¬¦ï¼Œæ²¡æœ‰ä»»ä½•æç¤ºï¼Œæ²¡æœ‰é€Ÿåº¦ï¼Œæ²¡æœ‰å¼ºå¼±è®°å·ï¼Œæ²¡æœ‰åˆ†å¥ï¼Œä¹Ÿæ²¡æœ‰è¡¨æƒ…è®°å·ã€‚å·´èµ«ç»™äº†è‡ªç”±ï¼Œä¹Ÿç»™äº†æŒ‘æˆ˜ã€‚é’å°‘å¹´æ—¶ä»£çš„å¡è¨å°”æ–¯èŠ±12å¹´ç£¨ç‚¼è¿™éƒ¨ä¹æ›²ï¼Œä»–åœ¨ç»ƒä»€ä¹ˆå‘¢ï¼Ÿé¦–å…ˆï¼Œä»–ç»ƒä¹ æ‹‰ç´çš„æŠ€å·§ï¼Œå¯¹ä»–æ¥è¯´æŠ€å·§å·²ç»è·¨è¶Šäº†å…¶æœ¬èº«ï¼Œæˆä¸ºä¸€ç§æ— ç—•çš„è¡¨è¾¾ã€‚å…¶æ¬¡æ˜¯åˆ†å¥ï¼Œå°†å»¶ç»µæ— å°½çš„å·´æ´›å…‹æ›²çº¿æ¡åˆ†ç¼•æï¼Œå±‚å±‚æ¨è¿›ï¼Œé’»ç ”å£°éŸ³çš„é€è§†æ³•ã€‚å·´èµ«æ˜¯å·´æ´›å…‹æ—¶ä»£æœ€åçš„å¯¹ä½æ³•å¤§å¸ˆï¼Œå³ä½¿ç‹¬å¥å£°éƒ¨ä¹Ÿè¢«ä»–åµŒå…¥ä¸¤ä¸‰æ¡éšå½¢æ—‹å¾‹ï¼Œåœ¨ä¹å¥ä¸­è‹¥éšè‹¥ç°ã€‚éŸ³ä¹ä¸€å¥å¥å±•å¼€ï¼Œä¸€å±‚å±‚æ·±å…¥ï¼Œä¸€åº§ç»“æ„ç²¾å·§çš„å·´æ´›å…‹å»ºç­‘è·ƒç„¶çœ¼å‰ï¼Œå‘ˆç°ç¼œå¯†ç«‹ä½“çš„ä¸‰ç»´ç»“æ„ï¼Œæ¯ä¸ªç»†èŠ‚éƒ½æµç•…è€Œä¸°ç›ˆã€‚ 12å¹´ä¹‹åï¼Œ25å²çš„å¡è¨å°”æ–¯å°†å®ƒä»¬å½•åˆ¶æˆäº†å”±ç‰‡ã€‚å¦‚ä»Šå¬æ¥ï¼Œé‚£ä¸€ç‰ˆå½•éŸ³ä¹Ÿæ˜¯ç»å…¸æ¼”ç»ï¼Œä»¤äººèµå¹ï¼Œå£°éƒ¨æ„Ÿé”™è½æœ‰è‡´ï¼Œçº¿æ¡æµç•…æ‚ ç„¶ã€‚éŸ³ä¹æ˜¯æ— å½¢çš„ï¼ŒæŠ€æœ¯ä¹Ÿåº”è¯¥æ˜¯æ— å½¢çš„ï¼Œå¤æ‚çš„æŠ€å·§åœ¨ä»–æ‰‹ä¸­å·²ç»å’ŒéŸ³ä¹ä¸€æ ·æ— å½¢æ— ç—•ï¼ŒæµåŠ¨ä¸æ¯ã€‚è¿™æ ·çš„æ¼”å¥é‡Œé¢æœ‰ä¸€ç§ä¸œæ–¹æ„å¢ƒï¼Œåæ¥é©¬å‹å‹å’Œæ—æ€€æ°‘ç»§ç»­åœ¨è¿™éƒ¨ä¹æ›²ä¸­æ¢ç´¢ä¸œæ–¹éŸµå‘³ä¸ä¸­è¥¿æ–¹çš„ç²¾ç¥è”æ¥ã€‚ é©¬å‹å‹ä¸å‚ä¸œç‰ä¸‰éƒæ›¾ç»åˆä½œäº†ä¸€éƒ¨çºªå½•ç‰‡ï¼Œå«ä½œã€Šå·´èµ«çµæ„Ÿã€‹ä¹‹â€œå·´èµ«æ— ä¼´å¥å¤§æç´ç»„æ›²ä¹‹äº”ï¼Œè¿½å¯»å¸Œæœ›â€ã€‚å‚ä¸œç‰ä¸‰éƒæ˜¯æ—¥æœ¬å›½å®çº§æ­Œèˆä¼æ¼”å‘˜ï¼Œåœ¨ç‰‡ä¸­ï¼Œé©¬å‹å‹å’Œä»–ä¸€èµ·æ’ç»ƒäº¤æµï¼Œä¸€ä½è¯´è‹±è¯­ï¼Œä¸€ä½è¯´æ—¥è¯­ï¼Œä¸€ä½æ‹‰å¥ï¼Œä¸€ä½èµ·èˆã€‚ä»–ä»¬åœ¨å¤§æç´æ›²ä¸­äº¤è°ˆï¼ŒèƒŒåæ˜¯æ’ç»ƒåœºçš„å·¨å¤§ç»ç’ƒçª—ï¼ŒæŠŠçª—å¤–å¤§ç‰‡æ—¥æœ¬çš„ç»¿æ™¯æ”¶æ½è¿›ç”»é¢ã€‚å‚ä¸œå¬ç€é©¬å‹å‹çš„ç´å£°ï¼Œç‹¬è¯­ã€ä½é¦–ã€å›æ—‹ã€æ²‰æ€ï¼Œçª—å¤–æ˜¯æ·…æ·…æ²¥æ²¥çš„é›¨å£°ï¼Œä»–ä»¥èˆè¹ˆæ¼”ç»èŠ‚å¥ã€æ—‹å¾‹çš„èµ·ä¼ã€éŸ³ä¹çš„èµ°å¥ã€‚ä»–ä»¬æŠŠå·´èµ«çš„ç¬¬äº”ç»„æ›²è¯ é‡Šä¸ºâ€œä»ªå¼â€ã€â€œå“€å¹â€ã€â€œå¦å®šâ€ã€â€œç¥ˆâ€ã€â€œæ¢¦â€å’Œâ€œè°ƒå’Œâ€ï¼Œå¦‚æ­¤æç‚¼å·´èµ«éŸ³ä¹ä¸­çš„æˆå‰§åŠ›é‡ã€‚é©¬å‹å‹åœ¨ç™½çº¸ä¸Šç”¨æ¯›ç¬”å†™ä¸‹â€œä»ªå¼â€ã€‚æ˜¯çš„ï¼Œä»ªå¼ï¼Œå·´èµ«ä¸æ—¥æœ¬è‰ºæœ¯ï¼Œä¸¤è€…ç›¸é€šä¹‹å¤„å°±æ˜¯å…¶ä¸­çš„ä»ªå¼æ„Ÿã€‚æ—¥æœ¬ä¸å·´èµ«æ—¶ä»£éƒ½è®²ç©¶ä»ªå¼æ„Ÿï¼Œä»ªå¼æ˜¯ä¸ºäº†å°Šé‡ï¼Œä¹Ÿæ˜¯ä¸€ç§ç¾å­¦ã€‚ä»–ä»¬çš„è¿™äº›è¯ é‡Šçªç ´äº†ä¸œè¥¿æ–¹æ–‡åŒ–çš„ç•Œé™ï¼Œæ˜¯æ¶ˆé™¤æ°‘æ—æ€§æš—ç¤ºçš„ç¢ç‰‡ï¼Œä¹Ÿæ˜¯è¡”æ¥è¿™åœºä¸œè¥¿åˆä½œçš„æ¡¥æ¢ã€‚è¿™åœºè¡¨æ¼”æœ€ç»ˆè®©æˆ‘ä»¬å‘ç°ï¼Œå·´èµ«çš„éŸ³ä¹æ— å…³ä¸œè¥¿æ–¹è¯­å¢ƒï¼Œå®ƒæ˜¯æ¯ä¸€ä¸ªé¥±æ»¡å¿ƒçµçš„æ­Œå’ï¼ŒéŸ³ä¹æ­£æ˜¯åœ¨çªç ´è¿™ç§ä¸œè¥¿æ–¹å±€é™ä¹‹åæ‰æœ‰å¯èƒ½é è¿‘æ°¸æ’ã€‚ åœ¨æ—æ€€æ°‘çš„ç°ä»£èˆä½œå“ã€Šæ°´æœˆã€‹é‡Œé¢ï¼Œä¸­å›½çš„å¤ªæå¼èˆå§¿ä¸­ä¼ æ¥äº†å·´èµ«çš„å¤§æç´ç»„æ›²ç¬¬ä¸€é¦–ï¼ŒéŸ³ä¹å……æ»¡å¾‹åŠ¨ï¼Œèˆè¹ˆä¸­å´åŸ‹è—ç€æ·±æ·±çš„å¯‚é™ä¸å­¤ç‹¬ã€‚èˆå°çš„åœ°é¢æ˜¯ä¸€å¤§ç‰‡åå…‰çš„é•œå­ï¼Œèˆè€…ä¸ä¹‹å½¢å½±ç›¸å¯¹ã€‚ä»–ä»¬èƒ½å¤Ÿæ— ç—•åœ°èåˆï¼Œæœ¬è´¨ä¸Šæ˜¯å› ä¸ºâ€œç‹¬â€ï¼Œæ²‰éƒçš„ç‹¬å¥ï¼Œä¸€å¤§ç‰‡ç™½å½±é£˜é›¶ï¼Œç´å£°å¦‚ç‹¬èˆï¼Œå½¼æ­¤åœ¨å­¤ç‹¬ä¸­èˆ’å±•ã€æ²‰é†‰ã€å¿˜æ€€ã€‚ åœ¨éŸ³ä¹å²ä¸Šï¼Œ20ä¸–çºªæ˜¯æ¼”ç»çš„æ—¶ä»£ï¼Œå”±ç‰‡å‘è¡Œå’Œå…¨çƒå·¡æ¼”ä¿ƒæˆäº†æ¼”å¥å¤©æ‰è¾ˆå‡ºã€‚åæ¥ä¹Ÿæœ‰è¶…è¶Šå¡è¨å°”æ–¯çš„æ¼”ç»ï¼Œæ¯”å¦‚åŒˆç‰™åˆ©è£”å¤§æç´å®¶æ–¯å¡”å…‹ã€‚ä»–çš„æ¼”å¥æŠ€æœ¯ä¸¥è°¨ç²¾ç¡®ï¼Œå…­æ›²æ‹‰åˆ°å°¾æ¯«ä¸æ¾æ‡ˆï¼Œæ‰€æœ‰ç»†èŠ‚éƒ½æ£±è§’åˆ†æ˜ï¼Œå±‚æ¬¡é¥±æ»¡ã€‚æ–¯å¡”å…‹çš„éŸ³ä¹é£æ ¼ä¸ä»–çš„å½¢è±¡éƒ½æ˜¯ä¸¥è°¨å†·å†½çš„ï¼Œä¸å¤ªæµéœ²æƒ…æ„Ÿï¼Œä½†ä»–å¯¹è¿™å¥—ä¹æ›²ä¼¼ä¹æ˜¯æ„Ÿæƒ…æœ€æ·±çš„ï¼Œå‰åå½•äº†äº”éï¼Œä»–è‡ªå·±å¦é™ˆï¼šå‰ä¸‰éä¸»è¦é¡¾åŠç»“æ„å’ŒæŠ€å·§ï¼Œåä¸¤éæ‰æœ‰æ„Ÿæƒ…æµéœ²ã€‚å¦‚æ­¤å¦è¯šçš„æ¼”å¥å®¶ä¸å¤šã€‚åƒæ–¯å¡”å…‹è¿™æ ·çš„æŠ€å·§å¤§å¸ˆéƒ½è¦é¡¾åŠæŠ€å·§ï¼Œå¯è§è¯¥ç¥æ›²çš„æŠ€å·§æœ‰å¤šéš¾ã€‚æ–¯å¡”å…‹æŠ‘åˆ¶æƒ…æ„Ÿçš„æ¼”å¥è®©äººä»¬æ›´å…³æ³¨ä¹éŸ³çš„è¿åŠ¨ï¼Œè®©äººæƒ³èµ·éŸ³ä¹ç¾å­¦å®¶æ±‰æ–¯ç«‹å…‹æ›¾è¯´ï¼šâ€œéŸ³ä¹çš„å†…å®¹å°±æ˜¯ä¹éŸ³çš„è¿åŠ¨å½¢å¼ã€‚â€ä½†åœ¨ç†æ€§èƒŒåï¼Œç´éŸ³ä¸­çš„æ²‰éƒæ·±å…¥è‚ºè…‘ï¼Œç‰¹åˆ«æ˜¯ç¬¬å››å¼¦åœ¨éŸ³åˆ—ä¸­ä½é¸£ä¸æ¯ï¼Œè®©æ‚²å“€è‹¥éšè‹¥ç°ï¼Œæ›´æš—ç¤ºäº†å·´èµ«å¯¹ä½æ³•çš„åšå¤§ç²¾æ·±ã€‚åå¤å¬ä»–çš„æ¼”å¥ï¼Œè§‰å¾—ä»–çš„ä¸¥è°¨åˆ†æ˜ä¸­ä¼¼ä¹æœ‰ä¸€ç§æ— ä»è§£é‡Šçš„ç¥ç§˜æ„Ÿï¼Œè¿™æ ·çš„æ¼”å¥æˆ–è®¸æ‰æ˜¯æ·±å…¥å¾·å›½ç²¾é«“çš„ï¼Œæ›´è´´è¿‘ä¸å€¦æ¢å¯»äººç±»ç»ˆæç§˜å¯†çš„æ—¥è€³æ›¼å¿ƒçµã€‚ æœ€æ„Ÿäººçš„è¿˜æ˜¯å¤§å¸ˆä»¬æ™šå¹´çš„æ¼”å¥ï¼Œæƒ…æ„Ÿé¥±è¶³ï¼Œå›å½’å¤©çœŸã€‚ ç½—æ–¯æ‰˜ç½—æ³¢ç»´å¥‡ï¼ˆMstislav Leopoldovich Rostropovichï¼‰ï¼Œå½“ä»£ä¿„ç½—æ–¯æœ€è‘—åçš„å¤§æç´å®¶ã€‚1989å¹´ï¼ŒæŸæ—å¢™è¢«æ¨å€’çš„æ—¶å€™ï¼Œç½—æ–¯æ‰˜ç½—æ³¢ç»´å¥‡æ”¾ä¸‹ä¸€åˆ‡å·¥ä½œï¼ŒèƒŒèµ·å¤§æç´èµ¶èµ´æŸæ—ï¼Œä»æœºåœºç›´æ¥æ‰“è½¦åˆ°æŸæ—å¢™æ‹†é™¤çš„ç°åœºï¼Œå€Ÿäº†æŠŠæ¤…å­ï¼Œåä¸‹å°±å¼€å§‹æ‹‰å¥å·´èµ«çš„ã€Šå…­é¦–æ— ä¼´å¥å¤§æç´ç»„æ›²ã€‹ã€‚ä»–è¯´ï¼šâ€œæˆ‘æ— æ³•å¿˜æ€€æ‰€æœ‰æƒ³è¦ç¿»è¶Šè¿™å µå¢™è€Œä¸§ç”Ÿçš„äººä»¬ï¼Œå½“æˆ‘æ‹‰èµ·è¨æ‹‰ç­å¾·ï¼Œäººç¾¤é‡Œæœ‰ä½å¹´è½»äººå“­äº†ã€‚â€è¿™éƒ¨ä¹æ›²ç½—æ–¯æ‰˜ç½—æ³¢ç»´å¥‡æ‹‰è¿‡æ— æ•°éï¼ŒæŠ€å·§æ— æ‡ˆå¯å‡»ï¼Œä»–çš„å¼ºåŠ¿ä¸æ„å¿—è®©å·´èµ«æ·±å…·é˜³åˆšä¹‹ç¾ã€‚å”¯ç‹¬é‚£ä¸€æ¬¡æ¼”å¥è®©ä»–æ¯•ç”Ÿéš¾å¿˜ã€‚é¢å¯¹å½“æ—¶çš„åœºæ™¯äººä»¬èƒ½å¤Ÿè¯´ä»€ä¹ˆï¼Ÿåªæœ‰å·´èµ«çš„éŸ³ä¹èƒ½å¤ŸæŠšæ…°äººå¿ƒï¼Œæ‚²æ¬£äº¤é›†ï¼Œæ¬¢å–œä¸æ‚²ä¼¤ï¼Œæ¬¢åº†ä¸è¿½å¿µã€‚è¿™ä¹Ÿæ˜¯äººä»¬ç†è§£å·´èµ«çš„æ—¶åˆ»ï¼Œä»–ä¼¼ä¹æ‡‚å¾—ç¦…æ„ï¼Œæ— æ‰€è¯‰è¯´åˆæ— æ‰€ä¸è¯´ã€‚æ¯ä¸€ä¸ªéŸ³ç¬¦éƒ½æ˜¯ç¬é—´ï¼Œéƒ½æ˜¯æ°¸æ’ï¼›éƒ½æ˜¯æ‚²å‰§ï¼Œéƒ½æ˜¯æ•‘èµï¼›éƒ½æ˜¯éŸ³ä¹ï¼Œéƒ½æ˜¯çœŸç†ã€‚ ç½—æ–¯æ‰˜ç½—æ³¢ç»´å¥‡èŠ±äº†åŠç”Ÿç ”è¯»è¿™éƒ¨ä¹æ›²ï¼Œåˆ°äº†æ™šå¹´ï¼Œä»–åœ¨æ³•å›½å—éƒ¨çš„å°é•‡ä¸Šé€‰äº†ä¸€åº§æ‹¥æœ‰900å¹´å†å²çš„æ•™å ‚ï¼Œåœ¨é‚£é‡Œå®Œæ•´å½•åˆ¶äº†è¿™éƒ¨ä¹æ›²ã€‚å¹´è½»æ—¶å·²å¯¹æ¯ä¸€ä¸ªéŸ³ç¬¦äº†ç„¶äºå¿ƒï¼Œå¦‚ä»Šåœ¨è€æ•™å ‚é‡Œï¼Œåœ¨ç ´æ—§æ‹±å»Šå’Œæ¹®æ²¡çš„çº¿æ¡ä¸­æ„ŸçŸ¥å·´æ´›å…‹éŸµå¾‹ï¼Œæ¯ä¸€ä¸ªéŸ³ç¬¦å¤šä¹ˆç†Ÿæ‚‰ï¼Œåˆåƒæ˜¯ç¬¬ä¸€æ¬¡å¬è§ï¼Œæ‹‰å¥ç€æ·±æ²‰çš„ä½éŸ³ï¼Œå´åˆæ˜¯ä¸€èº«è½»æ¾ã€‚ä»–çš„å¼ºåŠ¿ä¸å±‚æ¬¡æ„Ÿï¼Œä»–å¯¹ç»“æ„å…¨å±€çš„æŠŠæ¡ï¼Œä»–çš„ç´§å‡‘æœ‰åŠ›ï¼Œè®©æ¯ä¸ªéŸ³ç¬¦ç»½æ”¾é‡‘è‰²çš„å…‰èŠ’ï¼Œä¹Ÿè®©ä¹æ›²çœŸæ­£éœ‡æ’¼äººå¿ƒã€‚ ä¿„ç½—æ–¯å¤§æç´å®¶æ²™å¤«å…°ï¼ˆDanil Shafranï¼‰çš„ç‰ˆæœ¬æœ€åŠ¨äººä¹Ÿæœ€æœ‰æƒ³è±¡åŠ›ã€‚ä»–çš„éŸ³ç¬¦æ— æ¯”è¿è´¯é€šé€ï¼Œå»¶ç»µå¦‚åœŸåœ°ï¼Œä¸æ¯å¦‚æ²³æµã€‚å¯¹äºå·´èµ«è¿™æ ·å´å²–çš„å¤šå£°éƒ¨ç»‡ä½“ï¼Œä¸çŸ¥é“ä»–æ˜¯å¦‚ä½•åšåˆ°å¦‚å±¥å¹³åœ°ï¼Œæ­Œå”±å¾—å¦‚æ­¤é…£ç•…çƒ­æƒ…ã€‚è¿™ä¸€ç‰ˆæœ¬ä¹Ÿæ˜¯æˆ‘å¬è¿‡çš„æœ€å¯Œæœ‰æ­Œå”±æ€§çš„æ¼”å¥ï¼Œè¦çŸ¥é“ï¼Œè¿™éƒ¨ä¹æ›²æœ¬èº«æ˜¯ä¸å¤ªèƒ½æ­Œå”±çš„ã€‚å½“ç„¶æ²™å¤«å…°çš„æ¼”å¥ä¹Ÿæœ€ä¸åƒå·´æ´›å…‹é£æ ¼ï¼Œä»–å‘æŒ¥äº†å…¶ä¸­çš„æµªæ¼«æ°”è´¨ã€‚ æ³•å›½å¤§æç´å­¦æ´¾ä¹Ÿå¯¹è¿™éƒ¨ä¹æ›²ä½œå‡ºè´¡çŒ®ã€‚è©¹å¾·é¾™ï¼ˆMaurice Gendronï¼‰ã€å¯Œå°¼åŸƒï¼ˆPierre Fournierï¼‰ã€æ‰˜ç‰¹é‡Œè€¶ï¼ˆPaul Tortelierï¼‰å’Œçº³ç“¦æ‹‰ï¼ˆAndre Navarraï¼‰è¢«ç§°ä¸ºæ³•å›½å¤§æç´å››éª‘å£«ã€‚ä»–ä»¬çš„æ¼”å¥æ²¡æœ‰å¾·å¥¥éŸ³ä¹å®¶é‚£ç§å¼ºç¡¬ï¼Œè€Œæ˜¯æ¸©æš–æµç•…ã€å…³æ³¨ç»†èŠ‚çš„ï¼Œå¸¦ç€å¦™æ›¼çš„å·´é»æ²™é¾™æ°”æ¯ã€‚å¯Œå°¼åŸƒçš„ç‰ˆæœ¬æœ€æœ‰å¤å…¸æ°”è´¨ï¼Œä»–çœŸæ˜¯ä¸€ä½å¤©ç”Ÿçš„è´µæ—ï¼Œä¹å¥æ— æ¯”ä¼˜é›…ï¼ŒéŸ³è‰²å¦‚å…‰æ»‘çš„ä¸ç»¸ï¼Œå´ååˆ†è‡ªç„¶ï¼Œå¦‚æ¸©æš–å–„æ„Ÿçš„ç‹¬ç™½ï¼›è©¹å¾·é¾™å†·é™è½»ç›ˆä¸€äº›ï¼Œä¸€æ´¾å…¸é›…çš„å¤å…¸é£èŒƒï¼›æ‰˜ç‰¹é‡Œè€¶æœ‰æ¿€æƒ…ï¼Œç”šè‡³ç¼ç—›æ„Ÿï¼Œå¯ä»¥å¬è§éŸ³ä¹ä¸­å‚¬äººå¥‹èµ·çš„åŠ›é‡ã€‚æ¯ä¸ªäººä¸ªæ€§è¿¥å¼‚ï¼Œä»–ä»¬çš„ä¸ªäººé­…åŠ›ä¸°æ»¡äº†å·´èµ«çš„ä½œå“ï¼Œä¸ä¹‹äº’ç›¸æˆå°±ã€‚ åªæ˜¯æœæ™®é›·çš„ç‰ˆæœ¬ç•¥æœ‰é€Šè‰²ã€‚è¿™ä¹Ÿæ˜¯æ„æ–™ä¹‹ä¸­ï¼Œå·´èµ«ä¸æ˜¯å¥¹çš„èœ document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"è‰ºæœ¯","slug":"è‰ºæœ¯","permalink":"http://yoursite.com/categories/è‰ºæœ¯/"}],"tags":[{"name":"éŸ³ä¹","slug":"éŸ³ä¹","permalink":"http://yoursite.com/tags/éŸ³ä¹/"},{"name":"å·´æ´›å…‹","slug":"å·´æ´›å…‹","permalink":"http://yoursite.com/tags/å·´æ´›å…‹/"},{"name":"å·´èµ«","slug":"å·´èµ«","permalink":"http://yoursite.com/tags/å·´èµ«/"}]},{"title":"ç¿»è¶ŠGFWè®°","slug":"ç¿»è¶ŠGFWè®°","date":"2019-01-12T15:31:31.000Z","updated":"2019-03-15T15:25:46.000Z","comments":true,"path":"ç¿»è¶ŠGFWè®°/","link":"","permalink":"http://yoursite.com/ç¿»è¶ŠGFWè®°/","excerpt":"å‰è¨€GFWæ˜¯ä¸­å›½äº’è”ç½‘ä¸Šç‹¬ç‰¹è€Œä¸å¯å¿½è§†çš„å­˜åœ¨ï¼Œå¾ˆå¤šäººåœ¨ç”Ÿæ´»ä¸­éƒ½ä¸»åŠ¨åœ°æ­å»ºç¿»å¢™å·¥å…·æˆ–è€…ä½¿ç”¨ç¿»å¢™æœåŠ¡ï¼Œä»¥æ­¤è®¿é—®â€œä¸å­˜åœ¨çš„ç½‘ç«™â€ã€‚æœ¬æ–‡å°†è®°å½•GFWæ‰€ä¸ºä½•ç‰©ï¼Œä»¥åŠç¿»çš„åŸç†ã€‚","text":"å‰è¨€GFWæ˜¯ä¸­å›½äº’è”ç½‘ä¸Šç‹¬ç‰¹è€Œä¸å¯å¿½è§†çš„å­˜åœ¨ï¼Œå¾ˆå¤šäººåœ¨ç”Ÿæ´»ä¸­éƒ½ä¸»åŠ¨åœ°æ­å»ºç¿»å¢™å·¥å…·æˆ–è€…ä½¿ç”¨ç¿»å¢™æœåŠ¡ï¼Œä»¥æ­¤è®¿é—®â€œä¸å­˜åœ¨çš„ç½‘ç«™â€ã€‚æœ¬æ–‡å°†è®°å½•GFWæ‰€ä¸ºä½•ç‰©ï¼Œä»¥åŠç¿»çš„åŸç†ã€‚ GFWæ‰€ä¸ºä½•ç‰©GFWï¼šGreat Firewall (of the Peopleâ€™s Republic of China)ï¼Œä¸­å›½å›½å®¶é˜²ç«å¢™ï¼Œç”±äºè°éŸ³the Great Wallï¼Œæ‰€ä»¥ä¹Ÿç§°é•¿åŸé˜²ç«å¢™ï¼Œæ˜¯ä¸­å›½æ”¿åºœåœ¨å…¶äº’è”ç½‘è¾¹ç•Œçš„å®¡æŸ¥ç³»ç»Ÿï¼ˆåŒ…æ‹¬ç›¸å…³è¡Œæ”¿å®¡æŸ¥ç³»ç»Ÿï¼‰ï¼Œå…·ä½“æŒ‡ç›‘æ§å’Œè¿‡æ»¤äº’è”ç½‘å†…å®¹çš„è½¯ç¡¬ä»¶ç³»ç»Ÿï¼Œç”±æœåŠ¡å™¨å’Œè·¯ç”±å™¨ç­‰è®¾å¤‡ã€ç›¸å…³çš„åº”ç”¨ç¨‹åºæ„æˆã€‚ å½¢è±¡çš„æè¿°ï¼Œåœ¨æ²¡æœ‰ GFW çš„æ—¶ä»£ï¼Œè®¿é—®äº’è”ç½‘çš„æ–¹å¼å¦‚ä¸‹ GFW å‡ºç°ä¹‹åï¼Œåˆ™å˜æˆ å…¶å†…éƒ¨æ„é€ å¦‚ä¸‹ å®ƒå˜æˆäº†æœ¬åœ°æµè§ˆå™¨å’Œç½‘ç«™æœåŠ¡å™¨ä¹‹é—´çš„ä¸€é“å¢™ï¼Œé˜»æ‹¦äº†è®¿é—®ç‰¹å®šç½‘ç«™çš„è¯·æ±‚ï¼Œå®é™…ä¸Šï¼ŒGFW çš„æ‹¦æˆªæ–¹å¼æ˜¯å¤šæ ·çš„ã€‚ GFWçš„å…·ä½“åŸç†å¯ä»¥æŸ¥çœ‹æ­¤æ–‡ç« ï¼šå…¨é¢å­¦ä¹ GFW å¦‚ä½•å·¥ä½œå…³é”®å­—è¿‡æ»¤é˜»æ–­å…³é”®å­—è¿‡æ»¤ç³»ç»Ÿèƒ½å¤Ÿä»å‡ºå£ç½‘å…³æ”¶é›†åˆ†æä¿¡æ¯ï¼Œè¿‡æ»¤ã€å—…æ¢æŒ‡å®šçš„å…³é”®å­—ã€‚ä¸»è¦é’ˆå¯¹ HTTP çš„é»˜è®¤ç«¯å£ï¼š80ç«¯å£ï¼Œå› ä¸º HTTP ä¼ æ’­çš„å†…å®¹æ˜¯æ˜æ–‡çš„å†…å®¹ï¼Œæ²¡æœ‰ç»è¿‡åŠ å¯†ï¼Œè€Œ GFW æ˜¯ä¸€ä¸ª IDS(Intrusion detection system)ã€‚æ™®é€šçš„å…³é”®è¯å¦‚æœå‡ºç°åœ¨ HTTP è¯·æ±‚æŠ¥æ–‡çš„å¤´éƒ¨(å¦‚â€œHost: www.youtube.comâ€)æ—¶ï¼Œåˆ™ä¼šé©¬ä¸Šä¼ªè£…æˆå¯¹æ–¹å‘è¿æ¥ä¸¤ç«¯çš„è®¡ç®—æœºå‘é€ RST åŒ…(reset)å¹²æ‰°ä¸¤è€…æ­£å¸¸çš„ TCP è¿æ¥ï¼Œè¿›è€Œä½¿è¯·æ±‚çš„å†…å®¹æ— æ³•ç»§ç»­æŸ¥çœ‹ã€‚å¦‚æœGFWåœ¨æ•°æ®æµä¸­å‘ç°äº†ç‰¹æ®Šçš„å†…æ–‡å…³é”®è¯æ—¶ï¼Œå…¶ä¹Ÿä¼šè¯•å›¾æ‰“æ–­å½“å‰çš„è¿æ¥ï¼Œä»è€Œå‡ºç°ç”¨æˆ·çš„ç½‘é¡µå¼€å¯ä¸€éƒ¨åˆ†åï¼Œçªç„¶åœæ­¢çš„æƒ…å†µã€‚ IPåœ°å€å°é”è·¯ç”±å™¨çš„æ­£å¸¸å·¥ä½œæ–¹å¼æ˜¯ï¼šé‡åˆ°ç¬¦åˆå·²çŸ¥çš„IPè½¬å‘è§„åˆ™çš„æ•°æ®åŒ…ï¼Œåˆ™æŒ‰å·²ç»è§„åˆ™å‘é€ï¼Œé‡åˆ°æœªçŸ¥è§„åˆ™IPçš„æ•°æ®ï¼Œåˆ™è½¬å‘åˆ°ä¸Šä¸€çº§ç½‘å…³ã€‚GFW é€šè¿‡è·¯ç”±å™¨ï¼Œåœ¨é€šå¾€å›½å¤–çš„æœ€åä¸€ä¸ªç½‘å…³ä¸ŠåŠ ä¸Šä¸€æ¡ä¼ªé€ çš„è·¯ç”±è§„åˆ™ï¼Œå¯¼è‡´é€šå¾€è¢«å±è”½ç½‘ç«™çš„IPæ•°æ®åŒ…æ— æ³•åˆ°è¾¾ã€‚æ­¤å¤–ï¼ŒGFW å¯¹äºæŸäº›ç½‘ç«™ä¼šé‡‡å–ç‹¬ç«‹IPå°é”æŠ€æœ¯ï¼Œå¦‚æœè¯¥ç½‘ç«™ä½¿ç”¨äº†ç”±è™šæ‹Ÿä¸»æœºæœåŠ¡æä¾›å•†æä¾›çš„å¤šåŸŸåã€å•(åŒ)IPçš„ä¸»æœºæ‰˜ç®¡æœåŠ¡ï¼Œå°±ä¼šé€ æˆæ‰€æœ‰è¯¥æœåŠ¡æä¾›å•†çš„å…¶å®ƒä½¿ç”¨ç›¸åŒIPåœ°å€æœåŠ¡å™¨çš„ç½‘ç«™ç”¨æˆ·é­æ®ƒï¼Œå°±ç®—è¿™äº›ç½‘ç«™çš„å†…å®¹å¯èƒ½å¹¶æ— ä¸å½“ä¹‹å¤„ï¼Œä¹Ÿä¸èƒ½åœ¨ä¸­å›½å¤§é™†æ­£å¸¸è®¿é—®ã€‚ DNSæ±¡æŸ“ã€åŠ«æŒDNS æ±¡æŸ“æ˜¯æŒ‡ GFW åˆ»æ„åˆ¶é€ å‡ºç‰¹å®šçš„åŸŸåæœåŠ¡å™¨åˆ†ç»„ï¼ŒæŠŠåŸŸåæŒ‡å¾€ä¸æ­£ç¡®çš„IPåœ°å€ã€‚å¯¹äºå«æœ‰å¤šä¸ªIPåœ°å€æˆ–ç»å¸¸å˜æ›´IPåœ°å€é€ƒé¿å°é”çš„åŸŸåï¼ŒGFWé€šå¸¸ä¼šä½¿ç”¨æ­¤æ–¹æ³•è¿›è¡Œå°é”ã€‚2002å¹´è¢«å°é”æœŸé—´ï¼ŒGoogleçš„åŸŸåå°±è¢«åŠ«æŒåˆ°ç™¾åº¦ä¸Šã€‚ DNSåŠ«æŒå’Œæ±¡æŸ“çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š ä¸€ç§æ˜¯é€šè¿‡ç½‘ç»œæœåŠ¡æä¾›å•†(Internet Service Provider)æä¾›çš„ DNS æœåŠ¡å™¨è¿› DNS æ¬ºéª—ï¼Œå½“è®¿é—®æŸä¸ªç½‘ç«™æ—¶ï¼Œéœ€è¦è¦æŠŠåŸŸåè½¬æ¢ä¸ºä¸€ä¸ªIPåœ°å€ï¼ŒDNS æœåŠ¡å™¨è´Ÿè´£å°†åŸŸåè½¬æ¢ä¸ºIPåœ°å€ï¼Œä¸­å›½å¤§é™†çš„ ISP æ¥å—é€šä¿¡ç®¡ç†å±€çš„å±è”½ç½‘ç«™çš„æŒ‡ä»¤ååœ¨ DNS æœåŠ¡å™¨é‡ŒåŠ å…¥æŸäº›ç‰¹å®šåŸŸåçš„è™šå‡è®°å½•ï¼Œå½“ä½¿ç”¨æ­¤ DNS æœåŠ¡å™¨çš„ç½‘ç»œç”¨æˆ·è®¿é—®æ­¤ç‰¹å®šç½‘ç«™æ—¶ï¼ŒDNS æœåŠ¡ä¾¿ç»™å‡ºè™šå‡çš„IPåœ°å€ï¼Œå¯¼è‡´è®¿é—®ç½‘ç«™å¤±è´¥ï¼Œç”šè‡³è¿”å› ISP è¿è¥å•†æä¾›çš„å‡ºé”™é¡µé¢å’Œå¹¿å‘Šé¡µé¢ã€‚ å¦ä¸€ç§æ˜¯ GFW åœ¨ DNS æŸ¥è¯¢ä½¿ç”¨çš„ UDP çš„53ç«¯å£ä¸Šæ ¹æ®blacklistè¿›è¡Œè¿‡æ»¤ï¼Œé‡åˆ°é€šå¾€å›½å¤–çš„ä½¿ç”¨UDP 53ç«¯å£è¿›è¡ŒæŸ¥è¯¢çš„ DNS è¯·æ±‚ï¼Œå°±è¿”å›ä¸€ä¸ªè™šå‡çš„IPåœ°å€ã€‚ å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒIPv4æ—¶ä»£ï¼Œå…¨çƒä¸€å…±æœ‰13ç»„æ ¹åŸŸåæœåŠ¡å™¨ï¼Œä¸­å›½å¤§é™†æ—©æœŸæœ‰Fã€Iä¸¤ä¸ªæ ¹åŸŸ DNS é•œåƒï¼Œä½†å› ä¸ºå¤šæ¬¡ DNS æ±¡æŸ“å›½å¤–ç½‘ç»œï¼Œè¢«æ–­å¼€ä¸å›½é™…äº’è”ç½‘çš„è¿æ¥ï¼Œç›¸å…³äº‹ä»¶æŸ¥çœ‹ç»´åŸºç™¾ç§‘ï¼šä¸­å›½é˜²ç«é•¿åŸ-æ±¡æŸ“æ”»å‡»å¤§äº‹è®°ã€‚ é™¤äº†ä»¥ä¸Šå‡ ç§å°é”æ–¹æ³•ï¼ŒGFWè¿˜ä¼šé‡‡ç”¨SSLè¿æ¥é˜»æ–­ã€ç‰¹å®šç«¯å£å°é”ç­‰å·¥ä½œæ–¹å¼ã€‚ ç¿»è¶Šè®°ç¿»ä¿®æ”¹Hostsæ–‡ä»¶è¶³å¤Ÿç®€å•çš„æ–¹å¼ï¼Œä»¥è§£å†³ GFW çš„ DNS æ±¡æŸ“å’ŒåŠ«æŒçš„é—®é¢˜ã€‚Hosts æ–‡ä»¶æ˜¯ä¸€ä¸ªå‚¨å­˜è®¡ç®—æœºç½‘ç»œä¸­å„èŠ‚ç‚¹ä¿¡æ¯çš„æ–‡ä»¶ï¼Œè´Ÿè´£å°†ä¸»æœºåæ˜ å°„åˆ°ç›¸åº”çš„IPåœ°å€ï¼Œé€šå¸¸ç”¨äºè¡¥å……æˆ–å–ä»£ç½‘ç»œä¸­DNSçš„åŠŸèƒ½ã€‚å’ŒDNSä¸åŒçš„æ˜¯ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥å¯¹ Hosts æ–‡ä»¶è¿›è¡Œæ§åˆ¶ã€‚ Hosts æ–‡ä»¶çš„åŸæœ¬ç›®çš„æ˜¯æé«˜è§£æçš„æ•ˆç‡ã€‚åœ¨è¿›è¡Œ DNS è¯·æ±‚ä»¥å‰ï¼Œç³»ç»Ÿå…ˆæ£€æŸ¥è‡ªå·±çš„ Hosts æ–‡ä»¶ä¸­æ˜¯å¦æœ‰åœ°å€æ˜ å°„å…³ç³»ï¼Œå¦‚æœæœ‰åˆ™è°ƒç”¨è¯¥IPåœ°å€æ˜ å°„ï¼Œå¦‚æœæ²¡æœ‰å†å‘å·²çŸ¥çš„ DNS æœåŠ¡å™¨æå‡ºåŸŸåè§£æã€‚ç”±äº Hosts çš„è¯·æ±‚çº§åˆ«æ¯”DNSé«˜ï¼Œå½“ Hosts æ–‡ä»¶é‡Œé¢æœ‰å¯¹åº”çš„IPæ—¶ï¼Œå®¢æˆ·ç«¯å°±ä¼šç›´æ¥è®¿é—®é‚£ä¸ªIPï¼Œè€Œä¸å¿…é€šè¿‡ DNSã€‚å„æ“ä½œç³»ç»Ÿçš„ Hosts æ–‡ä»¶å„æœ‰ä¸åŒï¼Œç½‘ç»œä¸Šæœ‰å¾ˆå¤šç›¸å…³èµ„æ–™ï¼Œåœ¨æ­¤ä¸èµ˜è¿°ã€‚ æ‰€ä»¥ï¼Œå°† Googleã€Twitterã€Facebook ä¹‹ç±»çš„IPæ”¾å…¥ Hosts æ–‡ä»¶ï¼Œå°±å¯ä»¥ä¸å— GFW çš„ DNS æ±¡æŸ“å¹²æ‰°ã€‚ä½†ç”±äº GFW çš„IPå°é”ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¯¥æ–¹æ³•å¾ˆéš¾æœ‰æ•ˆã€‚ SSH TunnelSSHï¼ˆSecure Shellï¼‰æ˜¯ä¸€ä¸ªæä¾›æ•°æ®é€šä¿¡å®‰å…¨ã€è¿œç¨‹ç™»å½•ã€è¿œç¨‹æŒ‡ä»¤æ‰§è¡Œç­‰åŠŸèƒ½çš„å®‰å…¨ç½‘ç»œåè®®ã€‚æ­å»ºä¸€ä¸ª SSH éš§é“ç¿»å¢™ï¼Œåªéœ€è¦æœ‰ä¸€å°æ”¯æŒ SSH çš„å¢™å¤–æœåŠ¡å™¨ï¼Œä¸”è¯¥æœåŠ¡å™¨èƒ½ SSH è¿æ¥å³å¯ã€‚ é¦–å…ˆç”¨æˆ·å’Œå¢ƒå¤–æœåŠ¡å™¨åŸºäº SSH å»ºç«‹èµ·ä¸€æ¡åŠ å¯†çš„é€šé“ (1) ç”¨æˆ·é€šè¿‡å»ºç«‹èµ·çš„éš§é“è¿›è¡Œä»£ç†ï¼Œé€šè¿‡ SSH Server å‘çœŸå®çš„æœåŠ¡å‘èµ·è¯·æ±‚ (2-3) æœåŠ¡é€šè¿‡ SSH Serverï¼Œå†é€šè¿‡åˆ›å»ºå¥½çš„éš§é“è¿”å›ç»™ç”¨æˆ· (4-5) ç”±äº SSH æœ¬èº«åŸºäº RSA åŠ å¯†æŠ€æœ¯ï¼Œæ‰€ä»¥ GFW æ— æ³•ä»æ•°æ®ä¼ è¾“çš„è¿‡ç¨‹ä¸­çš„åŠ å¯†æ•°æ®å†…å®¹è¿›è¡Œå…³é”®è¯åˆ†æï¼Œé¿å…äº†è¢«é‡ç½®é“¾æ¥çš„é—®é¢˜ï¼Œä½†ç”±äºåˆ›å»ºéš§é“å’Œæ•°æ®ä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼ŒSSH æœ¬èº«çš„ç‰¹å¾å¾ˆæ˜æ˜¾ï¼Œæ‰€ä»¥ GFW ä¸€åº¦é€šè¿‡åˆ†æè¿æ¥çš„ç‰¹å¾è¿›è¡Œå¹²æ‰°ï¼Œå¯¼è‡´ SSH å­˜åœ¨è¢«å®šå‘è¿›è¡Œå¹²æ‰°çš„é—®é¢˜ã€‚ VPNå¯¹äºä¼ä¸šæ¥è¯´ï¼Œä¸ºäº†å…±äº«èµ„æºã€ååŒå·¥ä½œï¼Œéœ€è¦è¿æ¥å„åœ°çš„åˆ†æ”¯æœºæ„ï¼Œä¼ ç»Ÿçš„ä¸“çº¿è”ç½‘æ–¹å¼ä»·æ ¼æ˜‚è´µï¼Œä¸€èˆ¬ä¸­å°ä¼ä¸šéš¾ä»¥è´Ÿæ‹…ã€‚è¿™æ—¶ä½æˆæœ¬çš„VPNæŠ€æœ¯å­•è‚²è€Œç”Ÿã€‚VPNï¼ˆVirtual Private Networkï¼‰å³è™šæ‹Ÿä¸“ç”¨ç½‘ç»œï¼Œåˆ©ç”¨å»‰ä»·æ¥å…¥çš„å…¬å…±ç½‘ç»œï¼ˆä¸»è¦ä½¿ç”¨Inter-netï¼‰æ¥ä¼ è¾“ç§æœ‰æ•°æ®ï¼Œå…·æœ‰æˆæœ¬ä¼˜åŠ¿ï¼Œå› æ­¤è¢«å¾ˆå¤šä¼ä¸šå’Œç”µä¿¡è¿è¥å•†é‡‡ç”¨ã€‚ VPN æ¯”Shadowsocksæ›´åŠ åº•å±‚ï¼Œå®ƒé€šè¿‡æ“ä½œç³»ç»Ÿçš„æ¥å£ç›´æ¥è™šæ‹Ÿå‡ºä¸€å¼ ç½‘å¡ï¼Œåç»­æ•´ä¸ªæ“ä½œç³»ç»Ÿçš„ç½‘ç»œé€šè®¯éƒ½å°†é€šè¿‡è¿™å¼ è™šæ‹Ÿçš„ç½‘å¡è¿›è¡Œæ”¶å‘â€”â€”ç½‘ç»œä»£ç†çš„å®ç°æ€è·¯å¤§éƒ½å¦‚æ­¤ã€‚ VPN çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š VPN çš„è®¾ç½®æ˜¯å…¨å±€çš„ï¼Œå³æ‰€æœ‰è”ç½‘ç¨‹åºéƒ½è‡ªåŠ¨ä½¿ç”¨VPNï¼›ä½†SSHéš§é“éœ€è¦ç¨‹åºè®¾å®šï¼Œæ‰ä¼šä½¿ç”¨éš§é“è”ç½‘ã€‚ å•†ç”¨çš„VPNä¸€èˆ¬éƒ½æ˜¯ä»˜è´¹çš„ï¼Œè€Œè‡ªä¸»æ­å»ºVPN çš„éš¾åº¦è¦å¤§äºSSHéš§é“ï¼Œå› ä¸ºSSHéš§é“åªè¦ä¸€å°å¯ä»¥SSHçš„æœåŠ¡å™¨å³å¯ï¼Œä¸éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šé…ç½®ä»»ä½•ä¸œè¥¿ã€‚ VPN åœ¨IPå±‚å·¥ä½œï¼Œè€ŒShadowsocksåœ¨ TCP/UDP å±‚å·¥ä½œã€‚ ShadowsocksVPNä¹‹ç±»çš„æŠ€æœ¯ï¼Œæœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºé™·ï¼šå®ƒä»¬è™½ç„¶é€šè¿‡äº†æ— æ³•ç ´è§£çš„RSAåŠ å¯†ç®—æ³•æ¥å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œä½†æ˜¯åœ¨äº¤æ¢å¯†é’¥ã€å»ºç«‹èµ·éš§é“å‰ä»åœ¨è¿›è¡Œæ˜æ–‡ä¼ è¾“ï¼ŒGFWæ­£æ˜¯åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œåœ¨äº¤æ¢ç§˜é’¥çš„è¿‡ç¨‹ä¸­æš´åŠ›ç ´è§£ï¼Œè¿™æ„å‘³ç€æ¥ä¸‹æ¥çš„åŠ å¯†æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚Shadowsocksæ‰€åšçš„ä¸€ç‚¹ï¼Œå°±æ˜¯æå‰è§„å®šå¥½åŠ å¯†æ–¹å¼ï¼Œè§£å†³ GFW é€šè¿‡åˆ†ææµé‡ç‰¹å¾è¿›è¡Œå¹²æ‰°çš„é—®é¢˜ã€‚ æŠ€æœ¯åŸç†ä¸Šï¼ŒShadowsocks æ˜¯å°†åŸæ¥ SSH åˆ›å»ºçš„ Socks5 åè®®æ‹†å¼€æˆ Server ç«¯å’Œ Client ç«¯ï¼Œå…¶å·¥ä½œè¿‡ç¨‹å¦‚ä¸‹ 1)ã€6) å®¢æˆ·ç«¯å‘å‡ºçš„è¯·æ±‚åŸºäº Socks5 åè®®è·Ÿ SS Local ç«¯è¿›è¡Œé€šè®¯ï¼Œç”±äºè¿™ä¸ª SS Local ä¸€èˆ¬æ˜¯æœ¬æœºæˆ–è·¯ç”±å™¨æˆ–å±€åŸŸç½‘çš„å…¶ä»–æœºå™¨ï¼Œä¸ç»è¿‡ GFWï¼Œè§£å†³äº†è¢« GFW é€šè¿‡ç‰¹å¾åˆ†æè¿›è¡Œå¹²æ‰°çš„é—®é¢˜ 2)ã€5) SS Local å’Œ SS Server ä¸¤ç«¯é€šè¿‡å¤šç§å¯é€‰çš„åŠ å¯†æ–¹æ³•è¿›è¡Œé€šè®¯ï¼Œç»è¿‡ GFW çš„æ—¶å€™æ˜¯å¸¸è§„çš„TCPåŒ…ï¼Œæ²¡æœ‰æ˜æ˜¾çš„ç‰¹å¾ç è€Œä¸” GFW ä¹Ÿæ— æ³•å¯¹é€šè®¯æ•°æ®è¿›è¡Œè§£å¯† 3)ã€4) SS Server å°†æ”¶åˆ°çš„åŠ å¯†æ•°æ®è¿›è¡Œè§£å¯†ï¼Œè¿˜åŸåŸæ¥çš„è¯·æ±‚ï¼Œå†å‘é€åˆ°ç”¨æˆ·éœ€è¦è®¿é—®çš„æœåŠ¡ï¼Œè·å–å“åº”åŸè·¯è¿”å›ã€‚ ç›¸æ¯”ä¼ ç»Ÿçš„ VPN (IKE, IPSec, PPTPâ€¦)ï¼ŒShadowsocks åè®®å…·æœ‰æ›´å¥½çš„çµæ´»æ€§å’Œéšè”½æ€§ï¼Œä¸”æ­å»ºç›¸å¯¹ç®€å•ï¼Œå¯ä»¥æ‹¥æœ‰ç›¸å¯¹ä¼ ç»ŸVPNæ›´å¿«çš„é€Ÿåº¦å’Œæ›´é«˜çš„ç¨³å®šæ€§ï¼›è€Œå¯¹æ¯” V2Ray è¿™ç§ç§‘å­¦ä¸Šç½‘çš„é›†åˆä½“ï¼ŒShadowsocksåœ¨æœåŠ¡ç«¯æ›´åŠ è½»é‡ï¼Œå•ä¸€åè®®å®Œå–„ç¨‹åº¦æ›´é«˜ï¼›åŒæ—¶ï¼ŒShadowsocksåœ¨ç§»åŠ¨ç«¯æœ‰æ›´ä¸°å¯Œçš„å®¢æˆ·ç«¯é€‰æ‹©ï¼Œå…¼å®¹æ€§å’Œçµæ´»æ€§æ›´ä¼˜ã€‚ Shadowsocks-Rè™½è¯´Shadowsocksâ€œæŠ¹é™¤äº†æµé‡ç‰¹å¾â€ï¼Œä½†ä»å¦ä¸€ä¸ªè§’åº¦çœ‹ï¼Œå…¶å®å®ƒçš„ç‰¹å¾ä¹Ÿå¾ˆæ˜æ˜¾ï¼šTCP/UDPä¸Šå±‚çš„åŒ…å…¨æ˜¯å¯†æ–‡ï¼Œå‡ ä¹å’ŒVPNæ²¡æœ‰åŒºåˆ«ã€‚ä¸ºè§£å†³è¿™ä¸€é—®é¢˜ï¼Œå‡ºç°äº†Shadowsocks-Rï¼Œå®ƒçš„å…¶ä¸­ä¸€ä¸ªç‰¹æ€§ï¼Œæ˜¯åœ¨åŸ Shadowsocks åè®®çš„æ•°æ®æµå‰é¢åŠ ä¸ŠHTTPå¤´ï¼Œè®©GFWè¯¯è®¤ä¸ºæ˜¯HTTPåè®®ï¼Œä»è€Œå¯¹æ•°æ®æµåº”ç”¨é’ˆå¯¹HTTPçš„è§„åˆ™ã€‚ ä½œä¸ºSSçš„ä¸€ä¸ªå‘å±•åˆ†æ”¯ï¼Œç”±äºSSRçš„ä½œè€…ä¸€å¼€å§‹æœªå°†å…¶å¼€æºï¼ˆè¿åäº† GPL åè®®ï¼‰ï¼Œæ‰€ä»¥å®é™…ä¸Šä¸¤è€…æ—©æœŸæœ‰ä¸å¯è°ƒå’Œçš„åˆ†æ­§ã€‚SSRæ‹¥æœ‰æ›´å¤šçš„åŠŸèƒ½ï¼Œæ”¯æŒæ›´å¤šçš„åŠ å¯†æ–¹å¼ï¼Œæ­¤å¤–SSRè¿˜å¯ä»¥åˆ©ç”¨è¿è¥å•†çš„æ¼æ´ï¼Œå¼€å¯å…æµæœåŠ¡ï¼Œä¸è¿‡è¿™æ˜¯å¦ä¸€ä¸ªé—®é¢˜äº†ã€‚ V2RayV2Ray çš„å®ç°åŸç†è·ŸShadowsocksä¸€è„‰ç›¸æ‰¿ï¼Œå…¶ç‰¹ç‚¹åœ¨äºå¼•å…¥æ–°çš„é€šä¿¡åè®®ï¼Œæ”¹æ­£ Shadowsockså·²æœ‰çš„ç¼ºç‚¹ï¼Œä½¿æµé‡ç‰¹å¾æ›´éš¾è¢« GFW æ£€æµ‹åˆ°ï¼›åŒæ—¶ä½¿ç”¨ UDP ä½œä¸ºä¸‹å±‚åè®®ï¼Œé¿å… TCP å¸¦æ¥çš„çª—å£å’Œ RTO(Retry Timeout)ç­‰å¯¼è‡´ç½‘é€Ÿå˜æ…¢çš„é—®é¢˜ã€‚ è®° 1998å¹´ï¼Œå…¬å®‰éƒ¨å¼€å±•â€é‡‘ç›¾å·¥ç¨‹â€å»ºè®¾ã€‚æ¬¡å¹´ï¼Œæ–¹æ»¨å…´è°ƒä»»å›½å®¶è®¡ç®—æœºç½‘ç»œä¸ä¿¡æ¯å®‰å…¨ç®¡ç†ä¸­å¿ƒå‰¯æ€»å·¥ç¨‹å¸ˆã€‚ 2002å¹´ï¼ŒGoogleç»å†å¤šæ¬¡å°é”ä¸è§£å°ï¼Œä¸»è¦æ‰‹æ®µä¸ºDNSåŠ«æŒã€TCPä¼šè¯é˜»æ–­ç­‰ã€‚ 2004å¹´ï¼Œç»´åŸºç™¾ç§‘é­é‡ç½‘ç»œå°é”ï¼Œè‡³ä»Šæœªè§£å°ã€‚ 2008å¹´ï¼ŒåŒ—äº¬å¥¥è¿ä¼šæœŸé—´ï¼Œä¸­å›½æ”¿åºœçŸ­æš‚æ”¾å®½GFWçš„å°é”èŒƒå›´ã€‚ 2010å¹´ï¼ŒGoogleå› å†…å®¹å®¡æŸ¥é—®é¢˜ä¸ä¸­å›½æ”¿åºœäº¤æ¶‰æ— æ•ˆåï¼Œé€€å‡ºä¸­å›½ã€‚ 2013å¹´ï¼ŒGFWåˆ©ç”¨åŸŸåæ±¡æŸ“å’Œå…³é”®è¯è¿‡æ»¤ç­‰æ‰‹æ®µå±è”½GitHubï¼Œå‡ å¤©åè¢«è§£å°ã€‚ 2015å¹´ï¼ŒShadowsocksä½œè€… @clowwindyé­é‡å…¬å®‰æœºå…³è°ƒæŸ¥ï¼Œéšååˆ é™¤ä»£ç ï¼Œä¸å†å‚ä¸å¼€å‘ã€‚ 2017å¹´ï¼ŒShadowsocks-Rä½œè€… @BreakWa11è¢«äººè‚‰å’Œäººèº«å¨èƒï¼Œéšååˆ é™¤æ‰€æœ‰é¡¹ç›®ä»£ç ã€‚ ç»“è¯­ä»äºŒåå¹´å‰â€œé‡‘ç›¾å·¥ç¨‹â€è‡³ä»Šï¼Œä¸­å›½çš„äº’è”ç½‘ç®¡åˆ¶æœªæ›¾æ¾åŠ¨ï¼Œåœ¨å¯é¢„è§çš„æœªæ¥ï¼Œåº”è¯¥ä¹Ÿä¸ä¼šæœ‰æ‰€æ”¾ç¼“ã€‚GFWç»è¿‡åå‡ å¹´çš„å‘å±•ï¼Œå·²ç»è¶³å¤Ÿæˆç†Ÿï¼ŒåŒæ—¶å¯¹äºç¿»å¢™è¿™ä¸€è¡Œä¸ºï¼Œæ‰§æ”¿å…šçš„æ²»ç†ä¾§é‡ç‚¹ä¹Ÿæœ‰ä»æŠ€æœ¯æ‰‹æ®µè½¬å‘è¡Œæ”¿æ‰‹æ®µçš„è¶‹åŠ¿ï¼Œæ¯å¹´ï¼Œä¸ªäººå› ä¸ºç¿»å¢™æˆ–è€…å‡ºå”®ç¿»å¢™æœåŠ¡è€Œè¢«é€®æ•çš„æ—¶é—´å±¡å±¡è§è¯¸æŠ¥ç«¯ã€‚ ç¿»å¢™æŠ€æœ¯å’ŒGFWæ¯å¤©éƒ½åœ¨ä¸Šæ¼”é“é«˜ä¸€å°ºé­”é«˜ä¸€ä¸ˆçš„æˆç ï¼Œä¸¤è€…çš„æ–—äº‰æ›´è¿›ä¸€æ­¥ï¼Œå¯èƒ½æ˜¯äººå·¥æ™ºèƒ½åœ¨GFWä¸Šçš„æ·±åº¦éƒ¨ç½²ï¼Œæˆ–è€…IPv6çš„å…¨é¢æ™®åŠã€‚ æœ¬æ–‡çš„ç»å¤§å¤šæ•°èµ„æ–™å’Œå›¾ç‰‡å‡æ¥è‡ªäº’è”ç½‘ï¼Œé¿å…ç´¯èµ˜ï¼Œä¸å†æ·»åŠ å¼•ç”¨è¯´æ˜ã€‚ document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"äº’è”ç½‘","slug":"äº’è”ç½‘","permalink":"http://yoursite.com/categories/äº’è”ç½‘/"}],"tags":[{"name":"ç¿»å¢™","slug":"ç¿»å¢™","permalink":"http://yoursite.com/tags/ç¿»å¢™/"},{"name":"äº’è”ç½‘","slug":"äº’è”ç½‘","permalink":"http://yoursite.com/tags/äº’è”ç½‘/"}]},{"title":"LeetCodeï¼šæœ€é•¿å›æ–‡å­ä¸²ï¼ˆLongest Palindromic Substringï¼‰çš„è§£æ³•","slug":"LeetCodeï¼šæœ€é•¿å›æ–‡å­ä¸²ï¼ˆLongest-Palindromic-Substringï¼‰çš„è§£æ³•","date":"2019-01-12T06:32:23.000Z","updated":"2019-03-15T15:26:40.000Z","comments":true,"path":"LeetCodeï¼šæœ€é•¿å›æ–‡å­ä¸²ï¼ˆLongest-Palindromic-Substringï¼‰çš„è§£æ³•/","link":"","permalink":"http://yoursite.com/LeetCodeï¼šæœ€é•¿å›æ–‡å­ä¸²ï¼ˆLongest-Palindromic-Substringï¼‰çš„è§£æ³•/","excerpt":"é¢˜ç›®ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œæ‰¾åˆ° s ä¸­æœ€é•¿çš„å›æ–‡å­ä¸²ã€‚ä½ å¯ä»¥å‡è®¾ s çš„æœ€å¤§é•¿åº¦ä¸º1000ã€‚ Input: â€œbabcdâ€Output: â€œbabâ€","text":"é¢˜ç›®ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œæ‰¾åˆ° s ä¸­æœ€é•¿çš„å›æ–‡å­ä¸²ã€‚ä½ å¯ä»¥å‡è®¾ s çš„æœ€å¤§é•¿åº¦ä¸º1000ã€‚ Input: â€œbabcdâ€Output: â€œbabâ€ æœ¬æ–‡å°†ä»‹ç»ä¸‰ç§è§£æ³•ï¼Œé‡ç‚¹ä»‹ç»æ—¶é—´å¤æ‚åº¦æœ€ä½çš„Manacherç®—æ³•ã€‚ O(n^3)ç®—æ³•æ€è·¯ ä»æœ€é•¿çš„å­ä¸²å¼€å§‹ï¼Œéå†æ‰€æœ‰è¯¥åŸå­—ç¬¦ä¸²çš„å­ä¸²ï¼› æ¯æ‰¾å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°±åˆ¤æ–­è¯¥å­—ç¬¦ä¸²æ˜¯å¦ä¸ºå›æ–‡ï¼› å­ä¸²ä¸ºå›æ–‡æ—¶ï¼Œåˆ™æ‰¾åˆ°äº†æœ€é•¿çš„å›æ–‡å­ä¸²ï¼Œå› æ­¤ç»“æŸï¼›åä¹‹ï¼Œç»§ç»­éå†ã€‚ æ—¶é—´å¤æ‚åº¦ éå†å­—ç¬¦ä¸²å­ä¸²ï¼šåµŒå¥—ä¸€ä¸ªå¾ªç¯ï¼šO(n^2)ï¼› åˆ¤æ–­æ˜¯å¦ä¸ºå›æ–‡ï¼šå†æ¬¡åµŒå¥—ä¸€ä¸ªå¾ªç¯ï¼šO(n^3)ã€‚ ä»£ç 1234567891011121314151617public static String longestPalindrome(String s) { if(s.length() 0; i--) {//å­ä¸²é•¿åº¦ for(int j = 0; j #a#abaf -> #a#b#a#f# å¯ä»¥çœ‹å‡ºï¼Œä¸ç®¡åŸæ¥çš„å­—ç¬¦ä¸²é•¿åº¦æ˜¯ä»€ä¹ˆï¼Œå¥‡æ•°åŠ å¶æ•°ç»“æœè‚¯å®šä¸ºå¥‡æ•°ï¼Œåœ¨è¿™ä¹‹åï¼Œå°±å¯ä»¥å¼€å§‹æ±‚æœ€é•¿å›æ–‡å­ä¸²çš„åŠå¾„Räº†ã€‚ å€ŸåŠ©ä¸¤ä¸ªå˜é‡centerã€rightåˆ†åˆ«è®°å½•å›æ–‡å­ä¸²å¯¹åº”çš„ä¸­å¿ƒç‚¹å’Œå³ç«¯ç‚¹ å¯ä»¥ç›´æ¥çœ‹å‡ºï¼Œrightå°±æ˜¯2*center-iï¼ˆä¹Ÿå°±æ˜¯iå…³äºcenterçš„å¯¹ç§°ç‚¹ï¼‰ï¼Œæ—¢ç„¶æ˜¯å¯¹ç§°ç‚¹ï¼Œé‚£ä¹ˆå½“ç«¯ç‚¹right > iæ—¶ï¼Œç«¯ç‚¹iéœ€è¦è¿›è¡Œè®¡ç®—å›æ–‡å­ä¸²Rï¼Œä½†å®ƒçš„å¯¹ç§°ç‚¹æœ‰å¯èƒ½ä¹Ÿè¿›è¡Œè¿‡è®¡ç®—ï¼Œæ‰€ä»¥å¯ä»¥æ— éœ€ä»å¤´å¼€å§‹åŒ¹é…ï¼Œå› ä¸ºè¿™äº›ç‚¹éƒ½åŒ…å«åœ¨ä¸€ä¸ªå·²ç»è¿›è¡Œè¿‡åŒ¹é…çš„çˆ¶å›æ–‡ä¸²ä¸­ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ç›´æ¥å–right-iå’Œå®ƒçš„å¯¹ç§°ç‚¹å›æ–‡å­ä¸²åŠå¾„é•¿åº¦è¾ƒå°çš„ï¼Œç”¨æ¥ä¿è¯ç»å¯¹è¿›è¡Œè¿‡è®¡ç®—çš„å›æ–‡å­ä¸²çš„éƒ¨åˆ†;åä¹‹ï¼Œå°±åªèƒ½ä»1ä¸ªé•¿åº¦å¼€å§‹åŒ¹é…äº†ï¼Œå°±æ˜¯ä¸‹é¢çš„è¿™è¡Œä»£ç : 1r[i] = right > i ? (Math.min(r[2*center-i], right-i)) : 1 è¿™é‡Œå€ŸåŠ©ä¸€ä¸ªè¾…åŠ©çš„æ•°ç»„r[]æ¥è®°å½•å›æ–‡å­ä¸²çš„åŠå¾„Rï¼Œr[i]è¡¨ç¤ºçš„æ˜¯ä»¥iä¸ºä¸­å¿ƒç‚¹çš„å›æ–‡å­—ç¬¦ä¸²çš„åŠå¾„é•¿åº¦(åˆå§‹æƒ…å†µä¸‹ä¸º1)ï¼ŒçŸ¥é“r[i]åï¼Œå°±å¯ä»¥ç»§ç»­æŠŠç´¢å¼•å‘å·¦å³ä¸¤è¾¹æ‰©å……ï¼Œä¹Ÿå°±æ˜¯çœ‹i+r[i]ä¸i-r[i]å·¦å³ç«¯ç‚¹çš„ä½ç½®æ‰€å¯¹åº”çš„å­—ç¬¦æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰çš„è¯å°±æŠŠå›æ–‡åŠå¾„r[i]ç»§ç»­æ‰©å……ï¼Œç›´åˆ°ä¸ç›¸ç­‰ä¸ºæ­¢ã€‚è¿›è¡Œè¿™ä¸€è½®æ‰©å……åï¼Œè§‚å¯Ÿä¹‹å‰çš„å³ç«¯ç‚¹rightæ˜¯å¦å°äºå›æ–‡å­ä¸²æ‰©å……åçš„å³ç«¯ç‚¹i+r[i],å°äºå°±ç›´æ¥æ›´æ–°å³ç«¯ç‚¹å’Œä¸­å¿ƒç‚¹ï¼Œä¸å°äºå°±è¯´æ˜å½“å‰å›æ–‡å­ä¸²è¿˜æ˜¯åœ¨å½“å‰rightç«¯ç‚¹çš„å†…éƒ¨ã€‚ æ—¶é—´å¤æ‚åº¦åªéœ€è¿›è¡Œä¸€æ¬¡éå†ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œå…·ä½“çš„è¯æ˜è¿‡ç¨‹çœç•¥ã€‚ ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940public static String longestPalindrome(String s) { if(s == null || s.length() < 1) { return s; } StringBuilder builder = new StringBuilder(); // é˜²æ­¢å·¦ç«¯ç‚¹è¶Šç•Œ builder.append(\"&#\"); char[] c = s.toCharArray(); for (char a : c) { builder.append(a).append(\"#\"); } String newStr = builder.toString(); c = newStr.toCharArray(); // å›æ–‡åŠå¾„ int[] r = new int[newStr.length()]; // å›æ–‡å­ä¸²æœ€å¤§å³ç«¯ç‚¹ã€ä¸­å¿ƒç‚¹ int right=0, center=0; // æœ€å¤§å›æ–‡åŠå¾„ã€æœ€å¤§ä¸­å¿ƒç‚¹ int maxR=0, maxC=0; for (int i=1;i < c.length;i++) { // ä»¥iä¸ºä¸­å¿ƒç‚¹çš„å›æ–‡åŠå¾„ï¼Œå¯ä»¥é‡å¤åˆ©ç”¨ä»¥åŠåŒ¹é…è¿‡å¯¹ç§°ç‚¹çš„åŠå¾„ r[i] = right > i ? (Math.min(r[2*center-i], right-i)) : 1; while (i+r[i] { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yoursite.com/categories/ç®—æ³•/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yoursite.com/tags/ç®—æ³•/"},{"name":"LeetCode","slug":"LeetCode","permalink":"http://yoursite.com/tags/LeetCode/"}]},{"title":"Github Pages+Hexoæ­å»ºä¸ªäººåšå®¢","slug":"Github-Pages-Hexoæ­å»ºä¸ªäººåšå®¢","date":"2019-01-11T15:22:07.000Z","updated":"2019-03-15T16:04:10.000Z","comments":true,"path":"Github-Pages-Hexoæ­å»ºä¸ªäººåšå®¢/","link":"","permalink":"http://yoursite.com/Github-Pages-Hexoæ­å»ºä¸ªäººåšå®¢/","excerpt":"å¼•è¨€ ä¸Šä¸€ä¸ªåšå®¢æ˜¯ä½¿ç”¨WordPressæ­å»ºåœ¨äº‘æœåŠ¡å™¨ä¸Šçš„ï¼Œéƒé—·çš„æ˜¯è¿™ä¸ªä½äºç¾å›½çš„æœåŠ¡å™¨ipè¢«å¢™äº†ï¼Œæ— å¥ˆæ”¾å¼ƒã€‚æ­£å¥½æœ€è¿‘æŠ½å‡ºæ—¶é—´ï¼Œåˆè¿«åˆ‡åœ°æƒ³è®°å½•ç‚¹ä¸œè¥¿ï¼Œé€‰æ‹©äº†åŸºæœ¬ä¸ä¼šè¢«å¢™çš„Github Pagesï¼Œæ­é…Hexoæ¡†æ¶ï¼Œæ„å»ºäº†ä¸€ä¸ªè½»é‡çº§çš„åšå®¢ï¼Œåœ¨æ­¤å°†å…¶è¿‡ç¨‹è®°å½•ä¸‹æ¥ã€‚","text":"å¼•è¨€ ä¸Šä¸€ä¸ªåšå®¢æ˜¯ä½¿ç”¨WordPressæ­å»ºåœ¨äº‘æœåŠ¡å™¨ä¸Šçš„ï¼Œéƒé—·çš„æ˜¯è¿™ä¸ªä½äºç¾å›½çš„æœåŠ¡å™¨ipè¢«å¢™äº†ï¼Œæ— å¥ˆæ”¾å¼ƒã€‚æ­£å¥½æœ€è¿‘æŠ½å‡ºæ—¶é—´ï¼Œåˆè¿«åˆ‡åœ°æƒ³è®°å½•ç‚¹ä¸œè¥¿ï¼Œé€‰æ‹©äº†åŸºæœ¬ä¸ä¼šè¢«å¢™çš„Github Pagesï¼Œæ­é…Hexoæ¡†æ¶ï¼Œæ„å»ºäº†ä¸€ä¸ªè½»é‡çº§çš„åšå®¢ï¼Œåœ¨æ­¤å°†å…¶è¿‡ç¨‹è®°å½•ä¸‹æ¥ã€‚ ä½œè€…çš„ç¯å¢ƒåŸºäºWindowsï¼Œå…¶ä»–ç¯å¢ƒçš„æ­å»ºè¿‡ç¨‹å¤§åŒå°å¼‚ã€‚ å‡†å¤‡å·¥ä½œGithub Pages åˆ›å»ºGithub Pagesï¼Œé¦–å…ˆéœ€è¦ä¸€ä¸ªGithubå¸å·ï¼Œæ–°å»ºä¸€ä¸ªä»“åº“ï¼Œä»“åº“åä¸º{è´¦æˆ·å}.github.ioï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«å¹¶å°†å…¶è®¾ä¸ºGithub Pagesã€‚æ³¨æ„çš„æ˜¯ä»“åº“æƒé™è¦è®¾ç½®ä¸ºpublicã€‚ä¹‹åæµè§ˆå™¨æ‰“å¼€ï¼šhttps://{è´¦æˆ·å}.github.ioä¾¿å¯ä»¥çœ‹åˆ°ç¼ºçœçš„ç•Œé¢ã€‚ Hexo Hexoæ˜¯ä¸€ä¸ªåŸºäºNode.jsçš„é™æ€åšå®¢æ¡†æ¶ï¼Œå¿«é€Ÿã€é«˜æ•ˆä¸”ç®€æ´ã€‚éœ€è¦å®‰è£…åœ¨æœ¬åœ°ï¼Œå…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š å®‰è£…Gitå®¢æˆ·ç«¯ï¼Œå‰å¾€Gitä¸»é¡µä¸‹è½½ï¼Œå®‰è£…åç™»å½•å¸å·ã€‚ å®‰è£…Node.jsç¯å¢ƒï¼Œå‰å¾€Nodeä¸»é¡µä¸‹è½½ã€‚ å®‰è£…Hexoï¼Œæ–°å»ºä¸€ä¸ªå‘½åä»»æ„çš„æ–‡ä»¶å¤¹ï¼Œåœ¨å…¶ä¸­æ‰“å¼€Git Bashï¼Œé”®å…¥Hexoçš„å®‰è£…å‘½ä»¤ï¼š 1npm install -g hexo-cli åˆå§‹åŒ–Hexoï¼Œprojectnameçœç•¥æ—¶ï¼Œè¦æ±‚å½“å‰æ–‡ä»¶å¤¹ä¸ºç©ºã€‚ 1hexo init [projectname] å…³è” ç»è¿‡å‰é¢çš„è¿‡ç¨‹ï¼Œå·²ç»è·å¾—äº†Github Pageså’Œæœ¬åœ°çš„Hexoç¯å¢ƒï¼Œæ¥ä¸‹æ¥å°±æ˜¯å…³è”ä¸¤è€…ã€‚åœ¨åšå®¢çš„æ–‡ä»¶å¤¹ä¸­æœ‰_config.ymlæ–‡ä»¶ï¼Œä¸ºHexoçš„é…ç½®æ–‡ä»¶ï¼Œæ‰“å¼€å¹¶å°†ç›¸åº”ä½ç½®è®¾ç½®ä¸ºï¼š1234deploy: type: gitrepo: è¯¥å¤„å¡«å†™ä»“åº“çš„å®Œæ•´è·¯å¾„branch: master è¯¥è¿‡ç¨‹å…¶å®æ˜¯ç»™hexo dè¿™ä¸€å‘½ä»¤åšç›¸åº”çš„é…ç½®ï¼Œè®©hexoçŸ¥é“blogéƒ¨ç½²çš„ä½ç½®ï¼Œæ˜¾ç„¶éƒ¨ç½²åœ¨GitHubçš„ä»“åº“é‡Œã€‚ä¿å­˜æ–‡ä»¶ä¹‹åï¼Œå®‰è£…Gitéƒ¨ç½²æ’ä»¶ï¼Œåœ¨Git Bashä¸­é”®å…¥å‘½ä»¤ï¼š1npm install hexo-deployer-git --save æ¥ä¸‹æ¥å°±æ˜¯æ¸…é™¤hexoç¼“å­˜ï¼š1hexo clean ç”Ÿæˆé™æ€æ–‡ä»¶1hexo g éƒ¨ç½²ç½‘ç«™ï¼Œdçš„æ„æ€æ˜¯deploy 1hexo d åä¸¤ä¸ªå‘½ä»¤å¯ä»¥åˆå¹¶ä¸ºä¸€æ¡ï¼Œå…³äºHexoçš„å‘½ä»¤è¯·è®¿é—®ï¼šHexoæŒ‡ä»¤ã€‚ 1hexo g -d è‡³æ­¤ï¼Œåšå®¢å·²ç»æ­å»ºå®Œæ¯•ï¼Œæµè§ˆå™¨é”®å…¥https://{è´¦æˆ·å}.github.ioï¼Œå‘ç°æ‰“å¼€äº†ä¸€ä¸ªä½¿ç”¨Hexoæ­å»ºçš„Github Pagesåšå®¢ã€‚ é…ç½® åšå®¢æ–‡ä»¶å¤¹ä¸‹çš„_config.ymlæ–‡ä»¶å¯ä»¥é…ç½®æ•´ä¸ªåšå®¢çš„åç§°ã€ä¸»é¢˜ç­‰åŸºæœ¬åŠŸèƒ½ï¼Œ/theme/æ–‡ä»¶å¤¹ä¸‹çš„_config.ymlæ–‡ä»¶åˆ™ç”¨äºé…ç½®å…·ä½“çš„ä¸»é¢˜é…ç½®ã€‚ å‘è¡¨ä¸åˆ é™¤ åœ¨åšå®¢æ–‡ä»¶å¤¹æ‰“å¼€Git Bashï¼Œé”®å…¥ 1hexo n \"æ–‡ç« çš„æ ‡é¢˜\" ä¹‹åä¾¿ä¼šç”Ÿæˆä¸€ä¸ªmdæ–‡ä»¶ï¼Œåœ¨mdæ–‡ä»¶ä¸­ç¼–è¾‘æ–‡ç« ä¿å­˜ï¼Œç„¶åé”®å…¥hexo g -dä¾¿ä¼šå‘å¸ƒæ–‡ç« ã€‚ å¦‚æœè¦åˆ é™¤æ–‡ç« ï¼Œç›´æ¥åˆ é™¤å¯¹åº”çš„mdæ–‡ä»¶ã€‚åŸºæœ¬ä¸Šæ¯ä¸€æ¬¡å¯¹åšå®¢çš„ä¿®æ”¹ï¼Œéƒ½éœ€è¦ç”Ÿæˆé™æ€æ–‡ä»¶å’Œéƒ¨ç½²å‘½ä»¤ã€‚ ä¸»é¢˜ ç½‘ç»œä¸Šæœ‰å¾ˆå¤šä¼˜ç§€çš„Hexoä¸»é¢˜ï¼Œå…³äºä¸»é¢˜é€‰æ‹©ï¼Œå¯ä»¥æŸ¥çœ‹è¿™ä¸ªçŸ¥ä¹é—®ç­”ï¼šæœ‰å“ªäº›å¥½çœ‹çš„ Hexoä¸»é¢˜ã€‚ç¬”è€…ä½¿ç”¨çš„æ˜¯NexTã€‚ åœ¨åšå®¢æ–‡ä»¶å¤¹ä¸‹çš„_config.ymlæ–‡ä»¶ä¸­ï¼Œå°†themeé€‰é¡¹è®¾ç½®ä¸ºä¸‹è½½çš„ä¸»é¢˜ï¼Œæ³¨æ„çš„æ˜¯æ‰€æœ‰çš„é€‰é¡¹å†’å·ä¹‹åè¦æœ‰ä¸€ä¸ªåŠè§’ç©ºæ ¼ï¼Œå¦åˆ™è®¾ç½®å°†å¤±æ•ˆã€‚Hexoä¼šè‡ªåŠ¨æ£€æµ‹åšå®¢_config.ymlæ–‡ä»¶çš„æ›´æ”¹ï¼Œä¿å­˜ç‰‡åˆ»å³ç”Ÿæ•ˆã€‚ åŸŸåç»‘å®š å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š éœ€è¦ä¸€ä¸ªåŸŸåï¼Œå¯ä»¥å‰å¾€ä¸‡ç½‘ç­‰æä¾›å•†è´­ä¹°ï¼Œä¹‹ååœ¨åå°è®¾ç½®æ·»åŠ è§£æï¼Œä¸€èˆ¬éœ€è¦è§£æä¸‰ä¸ªï¼ŒGithubçš„IPåœ°å€ï¼Œ{è´¦æˆ·å}.github.ioçš„IPåœ°å€ï¼Œè¿˜æœ‰ä¸€ä¸ªçš„è®°å½•ç±»å‹ä¸ºCNAMEï¼Œè®°å½•å€¼ä¸ºï¼š{è´¦æˆ·å}.github.ioã€‚ è¿›å…¥GitHub Pagesçš„ä»“åº“ï¼Œç‚¹å‡»settingsï¼Œè®¾ç½®Custom domainï¼Œè¾“å…¥è´­ä¹°çš„åŸŸåï¼Œä¿å­˜ã€‚ è¿›å…¥åšå®¢æ–‡ä»¶å¤¹ä¸­çš„/source/ï¼Œæ–°å»ºä¸€ä¸ªè®°äº‹æœ¬æ–‡ä»¶ï¼Œåªéœ€å¡«å†™åŸŸåå³å¯ã€‚å¦‚æœåœ¨åŸŸåå‰å¡«äº†wwwï¼Œåˆ™æ¯æ¬¡æµè§ˆå™¨è®¿é—®éƒ½è¦å¡«å…¥wwwï¼Œä¸å¡«åˆ™æ²¡è¿™ä¸ªå¿…è¦ã€‚ä¹‹åå°†è¯¥æ–‡ä»¶ä¿å­˜ä¸ºæ‰€æœ‰æ–‡ä»¶ï¼Œåç§°ä¸ºCNAMEã€‚ å¤‡ä»½ä¸æ¢å¤ ç”±äºåœ¨Github Pagesçš„ä»“åº“ä¸­ï¼Œåªæœ‰ç”Ÿæˆçš„é™æ€ç½‘é¡µçš„æ–‡ä»¶ï¼Œæ²¡æœ‰æ•´ä¸ªåšå®¢çš„æºæ–‡ä»¶ï¼Œå¦‚æœå½“å‰ç”µè„‘å‡ºç°é—®é¢˜ï¼Œæˆ–è€…éœ€è¦å¤šè®¾å¤‡æ“ä½œæ—¶ï¼Œå°±ä¼šå¾ˆéº»çƒ¦ã€‚æ‰€ä»¥éœ€è¦å¯¹åšå®¢è¿›è¡Œå¤‡ä»½ä¸æ¢å¤ã€‚ å¤‡ä»½ åˆ›å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œç”¨æ¥ä¿å­˜ç½‘ç«™æºæ–‡ä»¶ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹: æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¦‚hexoï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºé»˜è®¤ æœ¬åœ°cloneä½ çš„Github Pagesä»“åº“ï¼Œå¾—åˆ°ä¸€ä¸ªioæ–‡ä»¶å¤¹ï¼š{è´¦æˆ·å}.github.ioçš„æ–‡ä»¶å¤¹ã€‚ å°†åŸæ¥åšå®¢æ–‡ä»¶å¤¹ä¸­çš„_config.ymlï¼Œthemes/ï¼Œsource/ï¼Œscffolds/ï¼Œpackage.jsonï¼Œ.gitignoreå¤åˆ¶åˆ°cloneä¸‹æ¥çš„æ–‡ä»¶å¤¹ï¼Œæ³¨æ„è¦å°†theme/ä¸»é¢˜çš„.git/åˆ é™¤ã€‚ åœ¨cloneä¸‹çš„æ–‡ä»¶å¤¹æ‰§è¡Œnpm installï¼Œnpm install hexo-deployer-gitã€‚ æ­¤æ—¶{è´¦æˆ·å}.github.ioæ–‡ä»¶å¤¹å·²ç»æˆä¸ºåŒ…å«ä½ åšå®¢æ‰€æœ‰æ–‡ä»¶çš„å·¥ä½œæ–‡ä»¶å¤¹ï¼Œåœ¨éƒ¨ç½²(hexo g -d)ä¹‹å‰ï¼Œæ‰§è¡Œä¸‹é¢ä¸‰æ¡å‘½ä»¤ï¼Œä»¥ä½¿ç”¨hexoåˆ†æ”¯æ›´æ–°gitä¸Šçš„æºæ–‡ä»¶:123git add .git commit -m \"æ›´æ–°æºæ–‡ä»¶\"git push origin hexo è¿™æ ·ä¸€æ¥ï¼Œè¾¾åˆ°äº†åœ¨masteråˆ†æ”¯ä¸Šéƒ¨ç½²ç½‘é¡µé™æ€æ–‡ä»¶ï¼Œåœ¨hexoåˆ†æ”¯ä¸Šå¤‡ä»½ç½‘ç«™æºæ–‡ä»¶çš„ç›®çš„ã€‚ æ¢å¤ å½“åœ¨æ–°çš„ç¯å¢ƒä¸­éœ€è¦å¯¹åšå®¢è¿›è¡Œæ“ä½œï¼ŒåŒ…æ‹¬å†™æ–‡ç« ã€é…ç½®åšå®¢æ—¶ï¼Œéœ€è¦è·å–æ•´ä¸ªç½‘ç«™çš„æºæ–‡ä»¶ï¼Œå½“ç„¶å‰ææ˜¯Node.jsçš„å®‰è£…ï¼Œæ­¥éª¤å¦‚ä¸‹: cloneä½ çš„Github Pagesä»“åº“ï¼Œå¾—åˆ°ä¸€ä¸ªioæ–‡ä»¶å¤¹ã€‚ åœ¨æ–‡ä»¶å¤¹ä¸­æ‰“å¼€Git Bashï¼Œé”®å…¥ä»¥ä¸‹å‘½ä»¤:123npm install hexo-cli -gnpm install npm install hexo-deployer-git ç°åœ¨å°±å¯ä»¥åœ¨è¯¥æ–‡ä»¶å¤¹è¿›è¡Œåšå®¢çš„æ“ä½œäº†ï¼Œå¦‚æœå¤šç»ˆç«¯åŒæ—¶å·¥ä½œæ—¶ï¼Œè®°å¾—ä½¿ç”¨pullå‘½ä»¤æ›´æ–°æœ¬åœ°æ–‡ä»¶ï¼Œä¸”åˆ†æ”¯å§‹ç»ˆä¸ºhexoã€‚ å¦‚æœåœ¨æ‹‰å–è¿‡ç¨‹ä¸­æç¤ºæœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹ä»“åº“å†²çªï¼Œå¯ä»¥ä½¿ç”¨git reset --hardå‘½ä»¤é‡ç½®ä¹‹åå†æ¬¡pullã€‚å¦‚æœæç¤º The following untracked working tree files would be overwritten by merge å¯ä»¥ä½¿ç”¨git clean -d -fxï¼Œå…³äºè¯¥å‘½ä»¤ git clean -f -n //é€‰é¡¹-nå°†æ˜¾ç¤ºæ‰§è¡Œä¸‹ä¸€æ­¥æ—¶å°†ä¼šç§»é™¤å“ªäº›æ–‡ä»¶ã€‚ git clean -f //è¯¥å‘½ä»¤ä¼šç§»é™¤æ‰€æœ‰ä¸Šä¸€æ¡å‘½ä»¤ä¸­æ˜¾ç¤ºçš„æ–‡ä»¶ã€‚ git clean -fd //ç§»é™¤æ–‡ä»¶å¤¹ï¼Œä½¿ç”¨é€‰é¡¹-dã€‚ git clean -fX //åªæƒ³ç§»é™¤å·²è¢«å¿½ç•¥çš„æ–‡ä»¶ï¼Œä½¿ç”¨é€‰é¡¹-Xã€‚ git clean -fx //æƒ³ç§»é™¤å·²è¢«å¿½ç•¥å’Œæœªè¢«å¿½ç•¥çš„æ–‡ä»¶ï¼Œä½¿ç”¨é€‰é¡¹-xã€‚ Hexoå„æ–‡ä»¶ï¼ˆå¤¹ï¼‰è¯´æ˜ _config.ymlï¼šç«™ç‚¹çš„é…ç½®æ–‡ä»¶ï¼Œå¤‡ä»½è¿‡ç¨‹ä¸­éœ€è¦æ‹·è´ï¼› themes/ï¼šä¸»é¢˜æ–‡ä»¶å¤¹ï¼Œéœ€è¦æ‹·è´ï¼› sourceï¼šåšå®¢æ–‡ç« çš„.mdæ–‡ä»¶ï¼Œéœ€è¦æ‹·è´ï¼› scaffolds/ï¼šæ–‡ç« çš„æ¨¡æ¿ï¼Œéœ€è¦æ‹·è´ï¼› package.jsonï¼šå®‰è£…åŒ…çš„åç§°ï¼Œéœ€è¦æ‹·è´ï¼› .gitignoreï¼šé™å®šåœ¨pushæ—¶å“ªäº›æ–‡ä»¶å¯ä»¥å¿½ç•¥ï¼Œéœ€è¦æ‹·è´ï¼› .git/ï¼šä¸»é¢˜å’Œç«™ç‚¹éƒ½æœ‰ï¼Œæ ‡å¿—è¿™æ˜¯ä¸€ä¸ªgité¡¹ç›®ï¼Œä¸éœ€è¦æ‹·è´ï¼› node_modules/ï¼šæ˜¯å®‰è£…åŒ…çš„ç›®å½•ï¼Œåœ¨æ‰§è¡Œnpm installçš„æ—¶å€™ä¼šé‡æ–°ç”Ÿæˆï¼Œä¸éœ€è¦æ‹·è´ï¼› publicï¼šhexo gç”Ÿæˆçš„é™æ€ç½‘é¡µï¼Œä¸éœ€è¦æ‹·è´ï¼› .deploy_gitï¼šåŒä¸Šï¼Œhexo gä¹Ÿä¼šç”Ÿæˆï¼Œä¸éœ€è¦æ‹·è´ï¼› db.jsonï¼šæ–‡ä»¶ï¼Œä¸éœ€è¦æ‹·è´ã€‚ document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"äº’è”ç½‘","slug":"äº’è”ç½‘","permalink":"http://yoursite.com/categories/äº’è”ç½‘/"}],"tags":[{"name":"GitHub","slug":"GitHub","permalink":"http://yoursite.com/tags/GitHub/"},{"name":"Hexo","slug":"Hexo","permalink":"http://yoursite.com/tags/Hexo/"}]},{"title":"åè¿‡å±±è½¦çš„äºº","slug":"åè¿‡å±±è½¦çš„äºº","date":"2019-01-10T09:57:55.000Z","updated":"2019-03-15T15:25:22.000Z","comments":true,"path":"åè¿‡å±±è½¦çš„äºº/","link":"","permalink":"http://yoursite.com/åè¿‡å±±è½¦çš„äºº/","excerpt":"è·ç¦»2019å¹´çš„å¼€å§‹ï¼Œå·²ç»è¿‡å»äº†åå¤©ï¼Œæ ‡é¢˜èµ·çš„ä¼¼ä¹ä¸é‚£ä¹ˆå‡†ç¡®ã€‚","text":"è·ç¦»2019å¹´çš„å¼€å§‹ï¼Œå·²ç»è¿‡å»äº†åå¤©ï¼Œæ ‡é¢˜èµ·çš„ä¼¼ä¹ä¸é‚£ä¹ˆå‡†ç¡®ã€‚ å‰å‡ å¤©è¯»å®Œäº†æ–°ä¸€å¹´çš„ç¬¬ä¸€æœ¬ä¹¦â€”â€”æ‘ä¸Šæ˜¥æ ‘çš„ã€Š1Q84ã€‹ï¼Œä½œè€…â€œæµ©æµ©æ±¤æ±¤â€æ‰¯äº†ä¸‰å¤§å·ï¼Œçœ‹åˆ°æœ€åï¼Œæ‰å‘ç°è®²äº†ä¸€å¯¹ç”·å¥³çš„â€œäº’ç›¸è¿½å¯»â€ï¼Œé¡¿æ„Ÿé¢“è´¥ã€‚ä¹¦ä¸­çš„å®—æ•™ã€ç§‘å¹»ã€æš´åŠ›ç­‰å…ƒç´ æ²¡è®©äººç”Ÿå‡ºå¤ªå¤šå…´è¶£ï¼Œæœ€å¤§äº®ç‚¹ï¼Œå¯èƒ½æ˜¯è´¯ç©¿å…¨ä¹¦çš„åŒçº¿ç”šè‡³åæœŸçš„ä¸‰çº¿å™äº‹ï¼Œæœ‰ä¸€ç§åœ¨çœ‹ç›–é‡Œå¥‡çš„ç”µå½±çš„æ„Ÿè§‰ã€‚æ–‡å­¦æ€§æ–¹é¢ï¼Œé«˜ä¸­æ—¶è¯»è¿‡ä½œè€…çš„ã€ŠæŒªå¨çš„æ£®æ—ã€‹ï¼Œè¯­è¨€é£æ ¼ä¼¼ä¹æ²¡æœ‰å˜åŒ–ï¼Œå¾ˆå¤šæ¯”å–»éƒ½æœ‰ä½œè€…â€”â€”ä¹Ÿè®¸æ˜¯å¤§å¤šæ•°æ—¥æœ¬ä½œå®¶â€”â€”çš„ç‰¹ç‚¹ï¼Œæ•´ä½“èŠ‚å¥è¿‡äºç¼“æ…¢ï¼Œå½“ç„¶ï¼Œè¿™ä¹Ÿæ›´èƒ½é”¤ç‚¼è¯»è€…çš„å¿ƒæ€ã€‚æˆ‘æ˜¯åœ¨é©¬å…‹æ€åŸç†æœŸæœ«è€ƒè¯•å‰ä¸€æ™šè¯»åˆ°æœ€åä¸€é¡µçš„ï¼Œä¹‹åæ¾äº†å£æ°”ï¼Œå¤§æ„Ÿæ„‰æ‚¦â€”â€”è‡ªå·±ç»ˆäºæ²¡æœ‰ä¸¢æ‰é•¿æ–‡æœ¬é˜…è¯»çš„èƒ½åŠ›ã€‚ æˆ‘ä»¬ä¹˜åè¿‡å±±è½¦é£å‘æœªæ¥ï¼Œä»–å’Œæˆ‘çš„æ‰‹é‡Œå„æç€ä¸€å¼ ç¥¨ï¼Œé‚£æ˜¯é£å‘æœªæ¥çš„å°èˆ¢æ¿ï¼Œèµ·ä¼çš„æ³¢æµªæ˜¯æˆ‘æ— ç•çš„æƒ³è±¡åŠ›ã€‚ä¹˜åæˆ‘çš„æƒ³è±¡åŠ›ï¼Œä»–ä»¬å°½æƒ…è¹‚èºè¿™äº›æ— è¾œçš„å¥³å­©å’Œç”·å­©ï¼Œè¿™äº›æ— è¾œçš„å°ç‹—å’Œå°çŒ«ã€‚åœ¨æ³¢æµªä¹‹ä¸‹ï¼Œåœ¨æ³¢æµªçš„ä¸‹é¢ä¸€ç›´åŒåŒç€è¡°å¼±çš„æ•…äº‹äººï¼Œä»–æ›¾ç»æ˜¯æœ€ä¼Ÿå¤§çš„åˆ›é€ è€…ï¼ŒåŒåŒåœ¨æœ€ä¸‹é¢çš„é£å¾—æœ€é«˜ï¼Œå…¨æ˜¯ç—›è‹¦ï¼Œå…¨éƒ¨éƒ½æ˜¯ç—›è‹¦ã€‚é‚£äº›ä¸æˆ‘è€³è¯­è€…ï¼Œä¸ªä¸ªèªæ˜æ— æ¯”ï¼Œä»–ä»¬è¯´æ™ºæ…§æ¥è‡ªç—›è‹¦ï¼Œä»–ä»¬è¯´ï¼šæ¥ï¼Œç»™ä½ æ™ºæ…§ä¹‹è·¯ã€‚å“¦ï¼Œæ¯ä¸€ä¸ªåè¿‡å±±è½¦çš„äººéƒ½æ˜¯è¿‡å±±è½¦å»ºé€ å‚çš„å·¥äººï¼Œæ¯ä¸€åŒæ‰‹éƒ½å……æ»¡æ™ºæ…§ï¼Œæ˜¯ç—›è‹¦çš„å·¥è‰ºåŒ ã€‚ä»–ä»¬ä¹Ÿåˆ¶é€ ä¸åŒçš„å¿ƒçµï¼Œè¿™äº›å¿ƒçµé‡Œå­•è‚²ç€å¥–åŠ±ï¼Œé‚£äº›æ¸´æœ›å¥–åŠ±çš„äººï¼Œé‚£äº›æœ€æ™ºæ…§çš„äººï¼Œä»–ä»¬æ€»åœ¨æ²‰é»˜ï¼Œä¸åœåœ°è¢«ä»è¿‡å±±è½¦ä¸Šæ¨ä¸‹å»ï¼Œåœ¨ç©ºä¸­é£˜è¡ï¼Œåœ¨é£˜è¡ä¸­ï¼Œæˆ‘ä»¬æ¥å»ï¼Œå°±åƒé‚£äº›æ‹äººï¼Œé‚£äº›è¢«å‹ç¼©åœ¨è¯å…¸å†Œé¡µä¸­çš„çˆ±æƒ…æ•…äº‹ï¼Œè¿˜æœ‰å®¶åº­ï¼Œäººé—´çš„äº’ç›¸æ‹¯æ•‘ã€‚å¦‚æœå­˜åœ¨ä¸€ä¸ªç©ºé—´ï¼Œæ¼‚æµ®ç€æ— æ•°åˆ—è¿‡å±±è½¦ï¼Œç—›è‹¦çš„è¿‡å±±è½¦â€¦â€¦ â€”â€”é©¬é›ï¼šã€Šæˆ‘ä»¬ä¹˜åç€è¿‡å±±è½¦é£å‘æœªæ¥ã€‹ å…ƒæ—¦å°†è‡³ï¼Œæ”¶åˆ°ä¸€ç¯‡æ¨é€ï¼Œæ¥è‡ªé€ä¸–9å¹´çš„å¹´è½»è¯—äººçš„ä¸€é¦–å°è¯—ï¼Œå¾ˆæ˜¯å–œæ¬¢ã€‚ åœ¨è¿œç¦»é˜…è¯»çš„æ—¥å­ï¼Œå®Œå…¨æ˜¯é çœ‹ä¸€äº›å°è¯—ç»´æŒç€æ–‡å­¦çš„ä¹ æƒ¯ã€‚ä¸Šä¸€æ¬¡å®Œæ•´çš„çœ‹å®Œä¸€æœ¬ä¹¦ï¼Œè¿˜æ˜¯åœ¨å»å¹´çš„å…­ä¸ƒæœˆä»½ï¼Œè¯»å®Œäº†æ¯›å§†çš„ã€Šæœˆäº®ä¸å…­ä¾¿å£«ã€‹ä»¥åŠã€Šåˆ€é”‹ã€‹ã€‚å…¶é—´ï¼Œå¶å°”ä¹Ÿç¿»é˜…é‡‘åº¸å…ˆç”Ÿçš„æ­¦ä¾ å°è¯´ï¼Œå…¶ä¸­ã€Šç¬‘å‚²æ±Ÿæ¹–ã€‹æœ€æ˜¯å–œæ¬¢ï¼Œã€Šå¤©é¾™ã€‹ä¹Ÿç”šå¥½ã€‚ã€Šå¤©é¾™å…«éƒ¨ã€‹åº”è¯¥æ˜¯é‡‘åº¸çš„ä½œå“ä¸­è¯„ä»·æœ€é«˜çš„ä¸€éƒ¨ï¼Œæ‰€è°“â€œæ— äººä¸å†¤â€ï¼Œå¯Œæœ‰è¥¿æ–¹æˆå‰§çš„æ‚²å‰§è‰²å½©ã€‚å¯æƒœè¯»åˆ°ã€Šç¥é›•ã€‹ï¼Œå¾€å¾€æ˜¯è¯»å‡ é¡µä¾¿æ”¾ä¸‹ï¼Œæ¬¡æ•°å¤šäº†ï¼Œå…´è¶£ä¹Ÿæ¶ˆç£¨çš„å·®ä¸å¤šã€‚æœ€åˆå¦‚æœå…ˆä»ã€Šç¥é›•ã€‹å¼€å§‹è¯»ï¼Œæˆ–è®¸å°±ä¸ä¼šåˆè¿™ä¹ˆå¤§çš„å¤±è½æ„Ÿã€‚ä¹Ÿè®¸ç»å¤§å¤šæ•°æˆ‘è¿™ä¸ªå¹´çºªçš„äººï¼Œè®¤è¯†é‡‘åº¸çš„æ­¦ä¾ æ±Ÿæ¹–ï¼Œéƒ½æ˜¯ä»å°æ—¶å€™çš„ç”µè§†å‰§å¼€å§‹ï¼ŒçŸ¥é“é˜…è¯»äº†åŸè‘—ï¼Œæˆ‘æ‰æ˜ç™½ï¼Œé‡‘åº¸æ­¦ä¾ çš„æ–‡å­¦é­…åŠ›ï¼Œè¿œè¿œä¸æ˜¯ç”µè§†å‰§æ‰€èƒ½å±•ç°çš„ï¼Œä¸è¯»åŸè‘—ï¼Œä¸è¯†é‡‘åº¸ã€‚ æ­¦ä¾ å°è¯´çš„é‡ç‚¹å¤§éƒ½åœ¨æ•…äº‹çš„å…‰æ€ªç¦»å¥‡ï¼Œå…¶å®è¶Šè¯»è¶Šæ…Œï¼Œä¹Ÿè®¸æ˜¯å› ä¸ºï¼Œåœ¨å…¶ä¸­å¾ˆéš¾æ‰¾åˆ°å½’å®¿â€”â€”æ‰€è°“çš„æ‰¾åˆ°å½’å®¿ï¼Œè¯´ä¸æ¸…é“ä¸æ˜ï¼Œç„¶è€Œæˆ‘ä¹Ÿä¸æ•¢åœ¨æ­¤æ—¶å¦„è®ºâ€œæ­¦ä¾ å°è¯´â€çš„æ–‡å­¦æ„ä¹‰ã€‚å»å¹´ï¼Œæœ‰å¹¸è¯»äº†æ²ˆä»æ–‡å…ˆç”Ÿçš„ã€Šè¾¹åŸã€‹ï¼Œåœ¨å§‹ç»ˆå¼¥æ¼«ä¸€å±‚æ·¡æ·¡é›¾çº±çš„æ¹˜è¥¿ï¼Œæ—¶é—´ç¼“ç¼“æµæ·Œï¼Œé£æ™¯å¦‚æ¢¦ä¼¼å¹»ã€‚æ­¤æ—¶å›æƒ³ï¼Œè„‘ä¸­æµ®ç°å‡ºé›·å£°å¤§ä½œçš„é›¨å¤œï¼Œæ¸¡èˆ¹çš„å°å§‘å¨˜åœ¨ç¡æ¢¦ä¸­å¤±å»äº†ç›¸ä¾ä¸ºå‘½çš„çˆ·çˆ·ï¼Œæœˆè‰²ä¸‹æ²³å¯¹å²¸æ¢¦ä¸­äººå”±æƒ…æ­Œçš„èº«å½±ä¹Ÿæ°¸è¿œçš„ç¦»å¥¹è€Œå»ï¼Œè¿œå¤„çš„å°åŸèŒ¶å³’åœ¨é›·å£°ä¸­ä¸€é—ªè€Œè¿‡ï¼Œé»˜é»˜æ— è¨€ã€‚åœ¨è¯»å®Œã€Šè¾¹åŸã€‹çš„ä¸€æ®µæ—¶é—´é‡Œï¼Œæˆ‘éƒ½ææä¸å®‰ï¼Œæ¯æ¬¡èµ°è¿‡å›¾ä¹¦é¦†çš„è¿‡é“ï¼Œéƒ½è¦å°å¿ƒç¿¼ç¿¼ï¼Œç”Ÿæ€•ç ´åäº†å¿ƒä¸­é‚£ç¾å¥½è€Œå¹³æ·¡çš„â€œå¼‚ä¸–ç•Œâ€ã€‚ è¿™ç§ä¹ æƒ¯åœ¨ä¸‹åŠå¹´æ¶ˆå¤±çš„ä¸€å¹²äºŒå‡€ï¼Œä¸ºäº†æ¥å¹´çš„å¤å¤©èƒ½å¤Ÿæ‰¾åˆ°ä¸€ä»½å¿ƒä»ªçš„å®ä¹ ï¼Œä¸å¾—ä¸è¿½å¯»æ—¶é—´çš„è„šæ­¥ï¼Œæ›´åŠ åœ°æŠ•èº«åˆ°ä»£ç ä¸ç®—æ³•çš„ä¸–ç•Œï¼Œè¯¾ç¨‹åˆå®åœ¨ä¸æ˜¯è½»æ¾ï¼Œçºµç„¶æµ·ç»µé‡Œè¿˜æœ‰æ°´ï¼Œä¹Ÿå†æ²¡åŠ›æ°”å†å»æŒ¤å¼„ã€‚å…¶é—´åªèƒ½åœ¨å…¬ä¼—å·çš„è¯—æ­Œæ¨é€é‡Œï¼Œç•¥è§£é¥¥æ¸´ã€‚åœ¨ç´§å‡‘å¿«èŠ‚å¥çš„ç”Ÿæ´»ä¸­ï¼Œè¯»è¯—ç¡®å®ä¸å®¹æ˜“ã€‚ ç­‰åˆ°æ–°ä¸€å¹´çš„é’Ÿå£°æ•²å“ï¼Œå‘ç°æ—¶é—´å·²ç„¶æ‚„æ‚„åœ°èµ°è¿œï¼Œè¡ŒåŠ¨éšè”½è‡ªå¦‚ï¼Œä¸ä¸ºäººå¯Ÿè§‰ã€‚åŸæ¥è‡ªå·±æœ‰åŠå¹´ï¼Œæ²¡æœ‰å¥½å¥½è¯»è¿‡ä¸€æœ¬ä¹¦ã€‚ä¹Ÿè®¸äººå°±æ˜¯è¿™æ ·ï¼Œç­‰åˆ°æ—¥å†è¢«ç¿»è¿‡ä¸€é¡µï¼Œæ‰æç„¶å¤§æ‚Ÿï¼Œå¼€å§‹æ„Ÿæ…¨å…‰é˜´ä¼¼ç®­ï¼Œç”Ÿå‡ºè­¦è§‰ï¼Œä¸ç”±è‡ªä¸»åœ°è¦å›å¿†è¿‡å»ï¼Œæ‚”æ¨å’Œæ„§ç–šä¹Ÿä¼šåº”æ™¯åœ°æ¶Œä¸Šå¿ƒå¤´ï¼Œè¿‡åç…§æ—§ã€‚ ç”Ÿæ´»ä¹Ÿè®¸å¦‚è¿‡å±±è½¦ï¼Œè½½ç€æ— éœ€é—¨ç¥¨çš„ä¹˜å®¢ï¼Œé£å‘æœªæ¥ã€‚ç„¶è€Œæœªæ¥å¦‚ä½•ï¼Œèµ·ä¼ä¸æ³¢æŠ˜åœ¨å“ªé‡Œä¼šå‡ºç°ï¼Œå´æ— äººçŸ¥æ™“ï¼Œæ¯ä¸ªç”Ÿæ¥ä¾¿å¤±å»é€‰æ‹©çš„æ—…å®¢ï¼Œæœ‰äº›ä½¿åŠ²æŠ“ç€å®‰å…¨æ†ï¼Œå®³æ€•è¢«ç”©ä¸‹ï¼Œæœ‰äº›åˆ™æ•å¼€æ€€æŠ±ï¼Œäº«å—åˆºæ¿€ä¸å°–å«ã€‚ å’Œè­¬å¦‚éŸ³ä¹ã€ç”µå½±ä¹‹ç±»çš„å…´è¶£ä¸åŒï¼Œé˜…è¯»æ˜¯æˆ‘ä¸€ç”Ÿéƒ½è¿½éšçš„ç›®æ ‡ï¼Œç»å…¸çš„æ–‡å­¦ä½œå“ï¼Œä¸ä»…èµäºˆä½ é€ƒé¿ç”Ÿæ´»çš„ç©ºé—´ï¼Œä¹Ÿé¼“èˆæ¯ä¸€ä¸ªäººå‹‡æ•¢é¢å¯¹ç‹‚é£æš´é›¨ï¼›æ€…ç„¶è‹¥å¤±æ—¶ï¼Œé™ªä½ æ—…è¡Œï¼Œæ˜¥é£å¾—æ„æ—¶ä¾¿æ— è¨€æ²‰é»˜ï¼›ä½ å­¤ç‹¬ï¼Œä¹¦ä¸­æœ‰æ›´å­¤ç‹¬å¯‚å¯è€…ï¼Œä½ æ‚²è‹¦ï¼Œä¸–äººçš†æ‚²æ— ä¸è‹¦ã€‚æœ‰äººè¯´è¿‡ï¼Œâ€œè¯»ä¹¦äººæ˜¯ä¸–é—´å¹¸ç¦äººï¼Œå› ä¸ºä»–é™¤äº†æ‹¥æœ‰ç°å®çš„ä¸–ç•Œä¹‹å¤–ï¼Œè¿˜æ‹¥æœ‰å¦ä¸€ä¸ªæ›´ä¸ºæµ©ç€šä¹Ÿæ›´ä¸ºä¸°å¯Œçš„ä¸–ç•Œâ€â€”â€”ä»¥æ­¤ï¼Œæ¿€åŠ±è‡ªå·±ï¼Œåœ¨è¶Šæ¥è¶Šç¹å¿™çš„ç”Ÿæ´»ä¸­ï¼Œæ°¸è¿œè®°å¾—æ‹¿èµ·ä¸€æœ¬ä¹¦ã€‚ document.querySelectorAll('.github-emoji') .forEach(el => { if (!el.dataset.src) { return; } const img = document.createElement('img'); img.style = 'display:none !important;'; img.src = el.dataset.src; img.addEventListener('error', () => { img.remove(); el.style.color = 'inherit'; el.style.backgroundImage = 'none'; el.style.background = 'none'; }); img.addEventListener('load', () => { img.remove(); }); document.body.appendChild(img); });","categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://yoursite.com/categories/éšç¬”/"}],"tags":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://yoursite.com/tags/éšç¬”/"},{"name":"è¯—æ­Œ","slug":"è¯—æ­Œ","permalink":"http://yoursite.com/tags/è¯—æ­Œ/"}]}]}